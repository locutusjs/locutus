---
warning: This file is auto generated by `yarn web:inject`, do not edit by hand
examples:
  - call_user_func_array('isNaN', ['a'])
  - call_user_func_array('isNaN', [1])
returns:
  - 'true'
  - 'false'
dependencies: []
authors:
  original by:
    - Thiago Mata (https://thiagomata.blog.com)
  improved by:
    - Brett Zamir (https://brett-zamir.me)
    - Diplom@t (https://difane.com/)
    - Brett Zamir (https://brett-zamir.me)
  revised by:
    - Jon Hohle
notes:
  - |-
    Depending on the `cb` that is passed,
    this function can use `eval` and/or `new Function`.
    The `eval` input is however checked to only allow valid function names,
    So it should not be unsafer than uses without eval (seeing as you can)
    already pass any function to be executed here.
parityVerified: null
type: function
layout: function
title: PHP's call_user_func_array in JavaScript
description: >-
  Here's what our current JavaScript equivalent to <a
  href="https://php.net/manual/en/function.call-user-func-array.php">PHP's
  call_user_func_array</a> looks like.
function: call_user_func_array
category: funchand
language: php
permalink: php/funchand/call_user_func_array/
alias:
  - /functions/php/call_user_func_array/
  - /functions/funchand/call_user_func_array/
  - /php/call_user_func_array/
  - /functions/call_user_func_array/
---
{% codeblock lang:javascript %}module.exports = function call_user_func_array(cb, parameters) {
  //  discuss at: https://locutus.io/php/call_user_func_array/
  // original by: Thiago Mata (https://thiagomata.blog.com)
  //  revised by: Jon Hohle
  // improved by: Brett Zamir (https://brett-zamir.me)
  // improved by: Diplom@t (https://difane.com/)
  // improved by: Brett Zamir (https://brett-zamir.me)
  //      note 1: Depending on the `cb` that is passed,
  //      note 1: this function can use `eval` and/or `new Function`.
  //      note 1: The `eval` input is however checked to only allow valid function names,
  //      note 1: So it should not be unsafer than uses without eval (seeing as you can)
  //      note 1: already pass any function to be executed here.
  //   example 1: call_user_func_array('isNaN', ['a'])
  //   returns 1: true
  //   example 2: call_user_func_array('isNaN', [1])
  //   returns 2: false

  const $global = typeof window !== 'undefined' ? window : global
  let func
  let scope = null

  const validJSFunctionNamePattern = /^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/

  if (typeof cb === 'string') {
    if (typeof $global[cb] === 'function') {
      func = $global[cb]
    } else if (cb.match(validJSFunctionNamePattern)) {
      func = new Function(null, 'return ' + cb)()
    }
  } else if (Object.prototype.toString.call(cb) === '[object Array]') {
    if (typeof cb[0] === 'string') {
      if (cb[0].match(validJSFunctionNamePattern)) {
        // biome-ignore lint/security/noGlobalEval: needed for PHP port
        func = eval(cb[0] + "['" + cb[1] + "']")
      }
    } else {
      func = cb[0][cb[1]]
    }

    if (typeof cb[0] === 'string') {
      if (typeof $global[cb[0]] === 'function') {
        scope = $global[cb[0]]
      } else if (cb[0].match(validJSFunctionNamePattern)) {
        // biome-ignore lint/security/noGlobalEval: needed for PHP port
        scope = eval(cb[0])
      }
    } else if (typeof cb[0] === 'object') {
      scope = cb[0]
    }
  } else if (typeof cb === 'function') {
    func = cb
  }

  if (typeof func !== 'function') {
    throw new Error(func + ' is not a valid function')
  }

  return func.apply(scope, parameters)
}
{% endcodeblock %}