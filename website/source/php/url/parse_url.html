---
warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'
examples:
  - 'parse_url(''http://user:pass@host/path?a=v#a'')'
  - 'parse_url(''http://en.wikipedia.org/wiki/%22@%22_%28album%29'')'
  - 'parse_url(''https://host.domain.tld/a@b.c/folder'')'
  - >-
    parse_url('https://gooduser:secretpassword@www.example.com/a@b.c/folder?foo=bar')
estarget: es5
returns:
  - >-
    {scheme: 'http', host: 'host', user: 'user', pass: 'pass', path: '/path',
    query: 'a=v', fragment: 'a'}
  - >-
    {scheme: 'http', host: 'en.wikipedia.org', path:
    '/wiki/%22@%22_%28album%29'}
  - '{scheme: ''https'', host: ''host.domain.tld'', path: ''/a@b.c/folder''}'
  - >-
    { scheme: 'https', host: 'www.example.com', path: '/a@b.c/folder', query:
    'foo=bar', user: 'gooduser', pass: 'secretpassword' }
dependencies: []
authors:
  original by:
    - 'Steven Levithan (http://blog.stevenlevithan.com)'
  improved by:
    - 'Brett Zamir (http://brett-zamir.me)'
  input by:
    - Lorenzo Pisani
    - Tony
notes:
  - |-
    original by http://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js
    blog post at http://blog.stevenlevithan.com/archives/parseuri
    demo at http://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js
    Does not replace invalid characters with '_' as in PHP,
    nor does it return false with
    a seriously malformed URL.
    Besides function name, is essentially the same as parseUri as
    well as our allowing
    an extra slash after the scheme/protocol (to allow file:/// as in PHP)
type: function
layout: function
title: PHP's parse_url in JavaScript
function: parse_url
category: url
language: php
permalink: php/url/parse_url/
alias:
  - /functions/php/parse_url/
  - /functions/url/parse_url/
  - /php/parse_url/
  - /functions/parse_url/
---
{% codeblock lang:javascript %}module.exports = function parse_url (str, component) { // eslint-disable-line camelcase
  //       discuss at: http://locutusjs.io/php/parse_url/
  //      original by: Steven Levithan (http://blog.stevenlevithan.com)
  // reimplemented by: Brett Zamir (http://brett-zamir.me)
  //         input by: Lorenzo Pisani
  //         input by: Tony
  //      improved by: Brett Zamir (http://brett-zamir.me)
  //           note 1: original by http://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js
  //           note 1: blog post at http://blog.stevenlevithan.com/archives/parseuri
  //           note 1: demo at http://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js
  //           note 1: Does not replace invalid characters with '_' as in PHP,
  //           note 1: nor does it return false with
  //           note 1: a seriously malformed URL.
  //           note 1: Besides function name, is essentially the same as parseUri as
  //           note 1: well as our allowing
  //           note 1: an extra slash after the scheme/protocol (to allow file:/// as in PHP)
  //        example 1: parse_url('http://user:pass@host/path?a=v#a')
  //        returns 1: {scheme: 'http', host: 'host', user: 'user', pass: 'pass', path: '/path', query: 'a=v', fragment: 'a'}
  //        example 2: parse_url('http://en.wikipedia.org/wiki/%22@%22_%28album%29')
  //        returns 2: {scheme: 'http', host: 'en.wikipedia.org', path: '/wiki/%22@%22_%28album%29'}
  //        example 3: parse_url('https://host.domain.tld/a@b.c/folder')
  //        returns 3: {scheme: 'https', host: 'host.domain.tld', path: '/a@b.c/folder'}
  //        example 4: parse_url('https://gooduser:secretpassword@www.example.com/a@b.c/folder?foo=bar')
  //        returns 4: { scheme: 'https', host: 'www.example.com', path: '/a@b.c/folder', query: 'foo=bar', user: 'gooduser', pass: 'secretpassword' }

  var query

  var mode = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.mode') : undefined) || 'php'

  var key = [
    'source',
    'scheme',
    'authority',
    'userInfo',
    'user',
    'pass',
    'host',
    'port',
    'relative',
    'path',
    'directory',
    'file',
    'query',
    'fragment'
  ]

  // For loose we added one optional slash to post-scheme to catch file:/// (should restrict this)
  var parser = {
    php: new RegExp([
      '(?:([^:\\/?#]+):)?',
      '(?:\\/\\/()(?:(?:()(?:([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?',
      '()',
      '(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)'
    ].join('')),
    strict: new RegExp([
      '(?:([^:\\/?#]+):)?',
      '(?:\\/\\/((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?',
      '((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)'
    ].join('')),
    loose: new RegExp([
      '(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?',
      '(?:\\/\\/\\/?)?',
      '((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)',
      '(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))',
      '(?:\\?([^#]*))?(?:#(.*))?)'
    ].join(''))
  }

  var m = parser[mode].exec(str)
  var uri = {}
  var i = 14

  while (i--) {
    if (m[i]) {
      uri[key[i]] = m[i]
    }
  }

  if (component) {
    return uri[component.replace('PHP_URL_', '').toLowerCase()]
  }

  if (mode !== 'php') {
    var name = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.queryKey') : undefined) || 'queryKey'
    parser = /(?:^|&)([^&=]*)=?([^&]*)/g
    uri[name] = {}
    query = uri[key[12]] || ''
    query.replace(parser, function ($0, $1, $2) {
      if ($1) {
        uri[name][$1] = $2
      }
    })
  }

  delete uri.source
  return uri
}
{% endcodeblock %}