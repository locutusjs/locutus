---
warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'
examples:
  - |-
    ini_set('locutus.strictForIn', true);
    shuffle(data);
    $result = data;
  - |-
    var data = {5:'a', 2:'3', 3:'c', 4:5, 'q':5};
    ini_set('locutus.strictForIn', true);
    var data = {5:'a', 2:'3', 3:'c', 4:5, 'q':5};
    shuffle(data);
    $result = data;
returns:
  - "{5:'a', 4:5, 'q':5, 3:'c', 2:'3'}"
  - "{5:'a', 'q':5, 3:'c', 2:'3', 4:5}"
dependencies: []
authors:
  original by:
    - 'Jonas Raoni Soares Silva (http://www.jsfromhell.com)'
  improved by:
    - 'Brett Zamir (http://brett-zamir.me)'
  revised by:
    - 'Kevin van Zonneveld (http://kevin.vanzonneveld.net)'
    - 'Brett Zamir (http://brett-zamir.me)'
notes:
  - >-
    This function deviates from PHP in returning a copy of the array instead

    of acting by reference and returning true; this was necessary because

    IE does not allow deleting and re-adding of properties without caching

    of property position; you can set the ini of "locutus.strictForIn" to true
    to

    get the PHP behavior, but use this only if you are in an environment

    such as Firefox extensions where for-in iteration order is fixed and true

    property deletion is supported. Note that we intend to implement the PHP

    behavior by default if IE ever does allow it; only gives shallow copy since

    is by reference in PHP anyways
layout: function
function: shuffle
category: array
language: php
permalink: php/array/shuffle/
redirect_from:
  - /functions/php/shuffle/
  - /functions/array/shuffle/
  - /functions/shuffle/
---
module.exports = function shuffle (inputArr) {
  //  discuss at: http://locutusjs.io/php/shuffle/
  // original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)
  //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  //  revised by: Brett Zamir (http://brett-zamir.me)
  // improved by: Brett Zamir (http://brett-zamir.me)
  //        note: This function deviates from PHP in returning a copy of the array instead
  //        note: of acting by reference and returning true; this was necessary because
  //        note: IE does not allow deleting and re-adding of properties without caching
  //        note: of property position; you can set the ini of "locutus.strictForIn" to true to
  //        note: get the PHP behavior, but use this only if you are in an environment
  //        note: such as Firefox extensions where for-in iteration order is fixed and true
  //        note: property deletion is supported. Note that we intend to implement the PHP
  //        note: behavior by default if IE ever does allow it; only gives shallow copy since
  //        note: is by reference in PHP anyways
  //        test: skip
  //   example 1: ini_set('locutus.strictForIn', true);
  //   example 1: shuffle(data);
  //   example 1: $result = data;
  //   returns 1: {5:'a', 4:5, 'q':5, 3:'c', 2:'3'}
  //   example 2: var data = {5:'a', 2:'3', 3:'c', 4:5, 'q':5};
  //   example 2: ini_set('locutus.strictForIn', true);
  //   example 2: var data = {5:'a', 2:'3', 3:'c', 4:5, 'q':5};
  //   example 2: shuffle(data);
  //   example 2: $result = data;
  //   returns 2: {5:'a', 'q':5, 3:'c', 2:'3', 4:5}

  var valArr = [],
    k = '',
    i = 0,
    strictForIn = false,
    populateArr = []

  for (k in inputArr) {
    // Get key and value arrays
    if (inputArr.hasOwnProperty(k)) {
      valArr.push(inputArr[k])
      if (strictForIn) {
        delete inputArr[k]
      }
    }
  }
  valArr.sort(function () {
    return 0.5 - Math.random()
  })

  // BEGIN REDUNDANT
  this.php_js = this.php_js || {}
  this.php_js.ini = this.php_js.ini || {}
  // END REDUNDANT
  strictForIn = this.php_js.ini['locutus.strictForIn'] && this.php_js.ini['locutus.strictForIn'].local_value && this.php_js
    .ini['locutus.strictForIn'].local_value !== 'off'
  populateArr = strictForIn ? inputArr : populateArr

  for (i = 0; i < valArr.length; i++) {
    // Repopulate the old array
    populateArr[i] = valArr[i]
  }

  return strictForIn || populateArr
}
