<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Reads the EXIF headers from JPEG or TIFF</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.exif-imagetype.html">exif_imagetype</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.exif-tagname.html">exif_tagname</a></div>
 <div class="up"><a href="ref.exif.html">Exif Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.exif-read-data" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">exif_read_data</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5)</p><p class="refpurpose"><span class="refname">exif_read_data</span> &mdash; <span class="dc-title">Reads the <acronym title="Exchangeable Image File ">EXIF</acronym> headers from <acronym title="Joint Photographic Experts Group">JPEG</acronym> or <acronym title="Tagged Image File Format">TIFF</acronym></span></p>

 </div>
 <div class="refsect1 description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b><b>exif_read_data</b></b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$sections</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$arrays</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$thumbnail</tt></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   <b>exif_read_data()</b> reads the
   <acronym title="Exchangeable Image File ">EXIF</acronym> headers from a <acronym title="Joint Photographic Experts Group">JPEG</acronym> or 
   <acronym title="Tagged Image File Format">TIFF</acronym> image file.  This way you can read meta data 
   generated by digital cameras.
  </p>
  <p class="para">
   Exif headers tend to be present in JPEG/TIFF images generated by digital
   cameras, but unfortunately each digital camera maker has a different
   idea of how to actually tag their images, so you can&#039;t always rely on
   a specific Exif header being present.
  </p>
  <p class="para">
   <i>Height</i> and <i>Width</i> are computed the 
   same way <a href="function.getimagesize.html" class="function">getimagesize()</a> does so their values must not be 
   part of any header returned.  Also, <i>html</i> is a 
   height/width text string to be used inside normal <acronym title="Hyper Text Markup Language">HTML</acronym>.
  </p>
  <p class="para">
   When an Exif header contains a Copyright note, this itself can contain two
   values. As the solution is inconsistent in the Exif 2.10 standard, the COMPUTED
   section will return both entries <i>Copyright.Photographer</i>
   and <i>Copyright.Editor</i> while the IFD0 sections contains
   the byte array with the NULL character that splits both entries. Or just the
   first entry if the datatype was wrong (normal behaviour of Exif). The
   COMPUTED will also contain the entry <i>Copyright</i> which
   is either the original copyright string, or a comma separated list of the 
   photo and editor copyright.
  </p>
  <p class="para">
   The tag UserComment has the same problem as the Copyright tag. It can store
   two values.  First the encoding used, and second the value itself. If so the
   IFD section only contains the encoding or a byte array. The COMPUTED section
   will store both in the entries <i>UserCommentEncoding</i> and
   <i>UserComment</i>. The entry <i>UserComment</i>
   is available in both cases so it should be used in preference to the value
   in IFD0 section.
  </p>
  <p class="para">
   <b>exif_read_data()</b> also validates EXIF data tags according
   to the EXIF specification (<a href="http://exif.org/Exif2-2.PDF" class="link external">&raquo; http://exif.org/Exif2-2.PDF</a>, page 20).
  </p>
  <blockquote><p><b class="note">Note</b>: 
   
    Windows ME/XP can both wipe the Exif headers when connecting to a camera.
    More information available at <a href="http://www.canon.co.jp/Imaging/NOTICE/011214-e.html" class="link external">&raquo; http://www.canon.co.jp/Imaging/NOTICE/011214-e.html</a>.
   <br />
  </p></blockquote>
 </div>

 <div class="refsect1 parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">filename</tt></i>
</span>

     <dd>

      <p class="para">
       The name of the image file being read.  This cannot be an
       <acronym title="Uniform Resource Locator">URL</acronym>.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">sections</tt></i>
</span>

     <dd>

      <p class="para">
       Is a comma separated list of sections that need to be present in file 
       to produce a result <a href="language.types.array.html" class="type array">array</a>.  If none of the requested 
       sections could be found the return value is <b><tt>FALSE</tt></b>.
       <table class="informaltable">
        <colgroup>

         <tbody valign="middle" class="tbody">
          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">FILE</td>
           <td colspan="1" rowspan="1" align="left">FileName, FileSize, FileDateTime, SectionsFound</td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">COMPUTED</td>
           <td colspan="1" rowspan="1" align="left">
            html, Width, Height, IsColor, and more if available.  Height and 
            Width are computed the same way <a href="function.getimagesize.html" class="function">getimagesize()</a>
            does so their values must not be part of any header returned. 
            Also, html is a height/width text string to be used inside normal 
            <acronym title="Hyper Text Markup Language">HTML</acronym>.
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">ANY_TAG</td>
           <td colspan="1" rowspan="1" align="left">Any information that has a Tag e.g. IFD0, EXIF, ...</td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">IFD0</td>
           <td colspan="1" rowspan="1" align="left">
            All tagged data of IFD0. In normal imagefiles this contains
            image size and so forth.
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">THUMBNAIL</td>
           <td colspan="1" rowspan="1" align="left">
            A file is supposed to contain a thumbnail if it has a second IFD.
            All tagged information about the embedded thumbnail is stored in 
            this section.
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">COMMENT</td>
           <td colspan="1" rowspan="1" align="left">Comment headers of JPEG images.</td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">EXIF</td>
           <td colspan="1" rowspan="1" align="left">
            The EXIF section is a sub section of IFD0. It contains
            more detailed information about an image. Most of these entries
            are digital camera related.
           </td>
          </tr>

         </tbody>
        </colgroup>

       </table>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">arrays</tt></i>
</span>

      <dd>

      <p class="para">
       Specifies whether or not each section becomes an array. The 
       <i><tt class="parameter">sections</tt></i>
 <i>COMPUTED</i>,
       <i>THUMBNAIL</i>, and <i>COMMENT</i> 
       always become arrays as they may contain values whose names conflict
       with other sections.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">thumbnail</tt></i>
</span>

     <dd>

      <p class="para">
       When set to <b><tt>TRUE</tt></b> the thumbnail itself is read.  Otherwise, only the
       tagged data is read.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>
    
 <div class="refsect1 returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   It returns an associative <a href="language.types.array.html" class="type array">array</a> where the array indexes are 
   the header names and the array values are the values associated with 
   those headers. If no data can be returned, 
   <b>exif_read_data()</b> will return <b><tt>FALSE</tt></b>.
  </p>
 </div>

 <div class="refsect1 changelog">
  <h3 class="title">ChangeLog</h3>
  <p class="para">
   <table class="informaltable">
    <colgroup>

     <thead valign="middle">
      <tr valign="middle">
       <th colspan="1">Version</th>
       <th colspan="1">Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td colspan="1" rowspan="1" align="left">4.3.0</td>
       <td colspan="1" rowspan="1" align="left">
        Can read all embedded <acronym title="Image File Directory">IFD</acronym> data including arrays 
        (returned as such). Also the size of an embedded thumbnail is 
        returned in a <i>THUMBNAIL</i> subarray, and can 
        return thumbnails in <acronym title="Tagged Image File Format">TIFF</acronym> format.  Also, there is 
        no longer a maximum length for returned values (not until the memory 
        limit has been reached)
       </td>
      </tr>

      <tr valign="middle">
       <td colspan="1" rowspan="1" align="left">4.3.0</td>
       <td colspan="1" rowspan="1" align="left">
        If PHP has  <a href="ref.mbstring.html" class="link">mbstring</a> support,
        the user comment can automatically change encoding.  Also, if the
        user comment uses Unicode or JIS encoding this encoding will 
        automatically be changed according to the exif ini settings in 
        <var class="filename">php.ini</var>
       </td>
      </tr>

      <tr valign="middle">
       <td colspan="1" rowspan="1" align="left">4.3.0</td>
       <td colspan="1" rowspan="1" align="left">
        If the image contains any IFD0 data then COMPUTED contains the entry
        ByteOrderMotorola which is 0 for little-endian (intel) and 1 for
        big-endian (motorola) byte order.  Also, COMPUTED and UserComment no 
        longer only contain the first copyright entry if the datatype was 
        wrong.
       </td>
      </tr>

     </tbody>
    </colgroup>

   </table>
  </p>
 </div>

 <div class="refsect1 examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example">
    <p><b>Example #1 <b>exif_read_data()</b> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"test1.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test1.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'IFD0'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$exif</span><span style="color: #007700">===</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"No&nbsp;header&nbsp;data&nbsp;found.&lt;br&nbsp;/&gt;\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"Image&nbsp;contains&nbsp;headers&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test2.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"test2.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$section</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$section&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"$key.$name:&nbsp;$val&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     The first call fails because the image has no header information.
    </p></div>
    <div class="example-contents"><p>The above example will output 
something similar to:</p></div>
    <div class="example-contents"><pre>
<div class="cdata"><pre>
test1.jpg:
No header data found.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width=&quot;1&quot; height=&quot;1&quot;
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.Thumbnail.Height: 1
THUMBNAIL.Thumbnail.Height: 1
</pre></div>
    </pre></div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="function.exif-thumbnail.html" class="function" rel="rdfs-seeAlso">exif_thumbnail()</a></li>
    <li class="member"><a href="function.getimagesize.html" class="function" rel="rdfs-seeAlso">getimagesize()</a></li>
   </ul>
  </p>
 </div>

</div><hr /><div style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.exif-imagetype.html">exif_imagetype</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.exif-tagname.html">exif_tagname</a></div>
 <div class="up"><a href="ref.exif.html">Exif Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
