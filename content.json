{"meta":{"title":"Locutus","subtitle":null,"description":"All your standard libraries will be assimilated into our JavaScript collective. Resistance is futile.","author":"Kevin van Zonneveld","url":"https://locutus.io"},"pages":[{"title":"","date":"2021-02-28T22:25:02.274Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"404.html","permalink":"https://locutus.io/404.html","excerpt":"","text":"Not found There's a good chance you can still find what you are looking for using the search bar or one drill down via one of the languages in the top navigation. var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-63083-7']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();"},{"title":"We are Locutus","date":"2021-02-28T22:25:02.274Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"/index.html","permalink":"https://locutus.io//index.html","excerpt":"","text":"Locutus is a project that seeks to assimilate other languages’ standard libraries to JavaScript. Why, you ask? Well, firstly because we can of course! Apart from that, it can also serve as a nice pastime for a rainy Sunday afternoon. Not only can porting a function be quite rewarding, but it also deepens your understanding of different languages. In that sense, it is not unlike doing a crossword puzzle. Lastly it will hopefully allow us to profit from interoperable functions (for instance when apps involve more than one programming language) as well as from higher level functions such as: number_format, sprintf, and strtotime, which do not exist in JavaScript’s standard library. JavaScript is the most commonly used programming language, but it lacks an exhaustive standard library. This means that developers coming from other languages are often left wondering how to achieve common tasks, such as formatting dates or generating a hashes. Locutus aims to show developers who are proficient in other programming languages how these high-level tasks can be achieved in JavaScript. Apart from the things that are missing in JavaScript, we are also porting functions like Go’s strings.Index, even though JavaScript offers a perfectly good native equivalent in the form of String.indexOf. We are going this extra mile to show newcomers an example of how behavior might differ between various languages. At an earlier stage, we also had the idea that when enough parts of a language were ported, you might even be able to run programs in JavaScript that were entirely written in other languages. While this certainly was fun to try and we had some degree of success in doing this for PHP, we have since abandoned this goal. Mainly because it drove us to write many hacks, while we were never really able to get anything to work flawlessly. Moreover, projects like GopherJS and Emscripten offer better means to that end, anyway. What we are notEven though Locutus is porting standard libraries from other languages, this is for reference only. We are not a drop-in standard library for JavaScript. If that is something you are interested in, we recommend you to take a look at lodash, which is more lightweight, focused and mature. It does a great job of complementing JavaScript’s bare bones nature. That being said, there is still a fair amount of useful things to be found in this repository, and Locutus makes it easy to require and bundle just a single function that you deem worthy of your project. Our Notes should be helpful in evaluating the issues and maturity of a particular function. What we are not portingAs we have mentioned before, we are sticking to raw functions and steering clear of things that touch global environment, language constructs or data-types. We are not extending built-in natives either. While this would aid in assimilating a larger part of a language, past mistakes have led us to decide that these fall outside of Locutus’ scope. Other projects are of course welcome to take a stab at it. A community effortNot unlike Wikipedia, Locutus is an ongoing community effort. Our philosophy follows The McDonald’s Theory. This means that we don’t consider it to be a bad thing that many of our functions are first iterations, which may still have their fair share of issues. We hope that these flaws will inspire others to come up with better ideas. So, if you know a better way to do something, we would love to see your improvements! ContributingWe use GitHub for collaboration. There are a few guidelines in our CONTRIBUTING.md document. It would be helpful to glance over them before submitting your work, to avoid unnecessary back and forth, as well as potential disappointment. LicensingLocutus is licensed under the MIT licenses. The MIT license allows you to use the library as you see fit (even in commercial projects) as long as you redistribute the original license along with it. You are not obligated to share your improvements, even though that would obviously be greatly appreciated and would also ensure that you won’t lose your changes after you upgrade."},{"title":"Locutus Hall of Fame","date":"2021-02-28T22:25:02.274Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"/authors/index.html","permalink":"https://locutus.io//authors/index.html","excerpt":"","text":""},{"title":"C header files  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"c/index.html","permalink":"https://locutus.io/c/index.html","excerpt":"","text":""},{"title":"Go packages  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"golang/index.html","permalink":"https://locutus.io/golang/index.html","excerpt":"","text":""},{"title":"PHP extensions  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/index.html","permalink":"https://locutus.io/php/index.html","excerpt":"","text":""},{"title":"Python modules  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/index.html","permalink":"https://locutus.io/python/index.html","excerpt":"","text":""},{"title":"Ruby modules  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"ruby/index.html","permalink":"https://locutus.io/ruby/index.html","excerpt":"","text":""},{"title":"C's math.abs in JavaScript","date":"2021-02-28T22:26:45.345Z","updated":"2021-02-28T22:26:45.345Z","comments":true,"path":"c/math/abs/index.html","permalink":"https://locutus.io/c/math/abs/index.html","excerpt":"","text":"module.exports = function abs (mixedNumber) &#123; // discuss at: https://locutus.io/c/abs/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Karol Kowalski // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // example 1: abs(4.2) // returns 1: 4.2 // example 2: abs(-4.2) // returns 2: 4.2 // example 3: abs(-5) // returns 3: 5 // example 4: abs('_argos') // returns 4: 0 return Math.abs(mixedNumber) || 0&#125;"},{"title":"C's math.frexp in JavaScript","date":"2021-02-28T22:26:45.385Z","updated":"2021-02-28T22:26:45.385Z","comments":true,"path":"c/math/frexp/index.html","permalink":"https://locutus.io/c/math/frexp/index.html","excerpt":"","text":"module.exports = function frexp (arg) &#123; // discuss at: https://locutus.io/c/frexp/ // original by: Oskar Larsson Högfeldt (https://oskar-lh.name/) // note 1: Instead of // note 1: double frexp( double arg, int* exp ); // note 1: this is built as // note 1: [double, int] frexp( double arg ); // note 1: due to the lack of pointers in JavaScript. // note 1: See code comments for further information. // example 1: frexp(1) // returns 1: [0.5, 1] // example 2: frexp(1.5) // returns 2: [0.75, 1] // example 3: frexp(3 * Math.pow(2, 500)) // returns 3: [0.75, 502] // example 4: frexp(-4) // returns 4: [-0.5, 3] // example 5: frexp(Number.MAX_VALUE) // returns 5: [0.9999999999999999, 1024] // example 6: frexp(Number.MIN_VALUE) // returns 6: [0.5, -1073] // example 7: frexp(-Infinity) // returns 7: [-Infinity, 0] // example 8: frexp(-0) // returns 8: [-0, 0] // example 9: frexp(NaN) // returns 9: [NaN, 0] // Potential issue with this implementation: // the precisions of Math.pow and the ** operator are undefined in the ECMAScript standard, // however, sane implementations should give the same results for Math.pow(2, &lt;integer&gt;) operations // Like frexp of C and std::frexp of C++, // but returns an array instead of using a pointer argument for passing the exponent result. // Object.is(n, frexp(n)[0] * 2 ** frexp(n)[1]) for all number values of n except when Math.isFinite(n) &amp;&amp; Math.abs(n) &gt; 2**1023 // Object.is(n, (2 * frexp(n)[0]) * 2 ** (frexp(n)[1] - 1)) for all number values of n // Object.is(n, frexp(n)[0]) for these values of n: 0, -0, NaN, Infinity, -Infinity // Math.abs(frexp(n)[0]) is &gt;= 0.5 and &lt; 1.0 for any other number-type value of n // See https://en.cppreference.com/w/c/numeric/math/frexp for a more detailed description arg = Number(arg) const result = [arg, 0] if (arg !== 0 &amp;&amp; Number.isFinite(arg)) &#123; const absArg = Math.abs(arg) // Math.log2 was introduced in ES2015, use it when available const log2 = Math.log2 || function log2 (n) &#123; return Math.log(n) * Math.LOG2E &#125; let exp = Math.max(-1023, Math.floor(log2(absArg)) + 1) let x = absArg * Math.pow(2, -exp) // These while loops compensate for rounding errors that sometimes occur because of ECMAScript's Math.log2's undefined precision // and also works around the issue of Math.pow(2, -exp) === Infinity when exp &lt;= -1024 while (x &lt; 0.5) &#123; x *= 2 exp-- &#125; while (x &gt;= 1) &#123; x *= 0.5 exp++ &#125; if (arg &lt; 0) &#123; x = -x &#125; result[0] = x result[1] = exp &#125; return result&#125;"},{"title":"C's math header file  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"c/math/index.html","permalink":"https://locutus.io/c/math/index.html","excerpt":"","text":""},{"title":"C's stdio header file  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"c/stdio/index.html","permalink":"https://locutus.io/c/stdio/index.html","excerpt":"","text":""},{"title":"C's stdio.sprintf in JavaScript","date":"2021-02-28T22:26:45.385Z","updated":"2021-02-28T22:26:45.385Z","comments":true,"path":"c/stdio/sprintf/index.html","permalink":"https://locutus.io/c/stdio/sprintf/index.html","excerpt":"","text":"function pad (str, minLength, padChar, leftJustify) &#123; const diff = minLength - str.length const padStr = padChar.repeat(Math.max(0, diff)) return leftJustify ? str + padStr : padStr + str&#125;module.exports = function sprintf (format, ...args) &#123; // original by: Rafał Kukawski // bugfixed by: Param Siddharth // example 1: sprintf('%+10.*d', 5, 1) // returns 1: ' +00001' // example 2: sprintf('%s is a %d%% %s %s.', 'Param', 90, 'good', 'boy') // returns 2: 'Param is a 90% good boy.' const placeholderRegex = /%(?:(\\d+)\\$)?([-+#0 ]*)(\\*|\\d+)?(?:\\.(\\*|\\d*))?([\\s\\S])/g let index = 0 return format.replace(placeholderRegex, function (match, param, flags, width, prec, modifier) &#123; const leftJustify = flags.includes('-') // flag '0' is ignored when flag '-' is present const padChar = leftJustify ? ' ' : flags.split('').reduce((pc, c) =&gt; [' ', '0'].includes(c) ? c : pc, ' ') const positiveSign = flags.includes('+') ? '+' : flags.includes(' ') ? ' ' : '' const minWidth = width === '*' ? args[index++] : +width || 0 let precision = prec === '*' ? args[index++] : +prec if (param &amp;&amp; !+param) &#123; throw Error('Param index must be greater than 0') &#125; if (param &amp;&amp; +param &gt; args.length) &#123; throw Error('Too few arguments') &#125; // compiling with default clang params, mixed positional and non-positional params // give only a warning const arg = param ? args[param - 1] : args[index] if (modifier !== '%') &#123; index++ &#125; if (precision === undefined || isNaN(precision)) &#123; precision = 'eEfFgG'.includes(modifier) ? 6 : (modifier === 's' ? String(arg).length : undefined) &#125; switch (modifier) &#123; case '%': return '%' case 'd': case 'i': &#123; const number = Math.trunc(+arg || 0) const abs = Math.abs(number) const prefix = number &lt; 0 ? '-' : positiveSign const str = pad(abs.toString(), precision || 0, '0', false) if (padChar === '0') &#123; return prefix + pad(str, minWidth - prefix.length, padChar, leftJustify) &#125; return pad(prefix + str, minWidth, padChar, leftJustify) &#125; case 'e': case 'E': case 'f': case 'F': case 'g': case 'G': &#123; const number = +arg const abs = Math.abs(number) const prefix = number &lt; 0 ? '-' : positiveSign const op = [ Number.prototype.toExponential, Number.prototype.toFixed, Number.prototype.toPrecision ]['efg'.indexOf(modifier.toLowerCase())] const tr = [ String.prototype.toLowerCase, String.prototype.toUpperCase ]['eEfFgG'.indexOf(modifier) % 2] const isSpecial = isNaN(abs) || !isFinite(abs) const str = isSpecial ? abs.toString().substr(0, 3) : op.call(abs, precision) if (padChar === '0' &amp;&amp; !isSpecial) &#123; return prefix + pad(tr.call(str), minWidth - prefix.length, padChar, leftJustify) &#125; return pad(tr.call(prefix + str), minWidth, isSpecial ? ' ' : padChar, leftJustify) &#125; case 'b': case 'o': case 'u': case 'x': case 'X': &#123; const number = +arg || 0 const intVal = Math.trunc(number) + (number &lt; 0 ? 0xFFFFFFFF + 1 : 0) const base = [2, 8, 10, 16, 16]['bouxX'.indexOf(modifier)] const prefix = intVal &amp;&amp; flags.includes('#') ? ['', '0', '', '0x', '0X']['bouxXX'.indexOf(modifier)] : '' if (padChar === '0' &amp;&amp; prefix) &#123; return prefix + pad(pad(intVal.toString(base), precision, '0', false), minWidth - prefix.length, padChar, leftJustify) &#125; return pad(prefix + pad(intVal.toString(base), precision, '0', false), minWidth, padChar, leftJustify) &#125; case 'p': case 'n': &#123; throw Error(`'$&#123;modifier&#125;' modifier not supported`) &#125; case 's': &#123; return pad(String(arg).substr(0, precision), minWidth, padChar, leftJustify) &#125; case 'c': &#123; // extension, if arg is string, take first char const chr = typeof arg === 'string' ? arg.charAt(0) : String.fromCharCode(+arg) return pad(chr, minWidth, padChar, leftJustify) &#125; case 'a': case 'A': throw Error(`'$&#123;modifier&#125;' modifier not yet implemented`) default: // for unknown modifiers, return the modifier char return modifier &#125; &#125;)&#125;"},{"title":"Go's strings.Contains in JavaScript","date":"2021-02-28T22:26:45.345Z","updated":"2021-02-28T22:26:45.345Z","comments":true,"path":"golang/strings/Contains/index.html","permalink":"https://locutus.io/golang/strings/Contains/index.html","excerpt":"","text":"module.exports = function Contains (s, substr) &#123; // discuss at: https://locutus.io/golang/strings/Contains // original by: Kevin van Zonneveld (https://kvz.io) // example 1: Contains('Kevin', 'K') // returns 1: true return (s + '').indexOf(substr) !== -1&#125;"},{"title":"Go's strings.Count in JavaScript","date":"2021-02-28T22:26:45.385Z","updated":"2021-02-28T22:26:45.385Z","comments":true,"path":"golang/strings/Count/index.html","permalink":"https://locutus.io/golang/strings/Count/index.html","excerpt":"","text":"module.exports = function Count (s, sep) &#123; // discuss at: https://locutus.io/php/printf/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: GopherJS (https://www.gopherjs.org/) // example 1: Count(\"cheese\", \"e\") // returns 1: 3 // example 2: Count(\"five\", \"\") // before &amp; after each rune // returns 2: 5 let pos let n = 0 if ((sep.length === 0)) &#123; return s.split(sep).length + 1 &#125; else if (sep.length &gt; s.length) &#123; return 0 &#125; else if ((sep.length === s.length)) &#123; if (sep === s) &#123; return 1 &#125; return 0 &#125; while (true) &#123; pos = (s + '').indexOf(sep) if (pos === -1) &#123; break &#125; n = n + (1) &gt;&gt; 0 s = s.substring((pos + sep.length &gt;&gt; 0)) &#125; return n&#125;"},{"title":"Go's strings.Index in JavaScript","date":"2021-02-28T22:26:45.385Z","updated":"2021-02-28T22:26:45.385Z","comments":true,"path":"golang/strings/Index/index.html","permalink":"https://locutus.io/golang/strings/Index/index.html","excerpt":"","text":"module.exports = function Index (s, sep) &#123; // discuss at: https://locutus.io/golang/strings/Index // original by: Kevin van Zonneveld (https://kvz.io) // example 1: Index('Kevin', 'K') // returns 1: 0 // example 2: Index('Kevin', 'Z') // returns 2: -1 return (s + '').indexOf(sep)&#125;"},{"title":"Go's strings.LastIndex in JavaScript","date":"2021-02-28T22:26:45.385Z","updated":"2021-02-28T22:26:45.385Z","comments":true,"path":"golang/strings/LastIndex/index.html","permalink":"https://locutus.io/golang/strings/LastIndex/index.html","excerpt":"","text":"module.exports = function LastIndex (s, sep) &#123; // discuss at: https://locutus.io/golang/strings/LastIndex // original by: Kevin van Zonneveld (https://kvz.io) // input by: GopherJS (https://www.gopherjs.org/) // example 1: LastIndex('go gopher', 'go') // returns 1: 3 // example 2: LastIndex('go gopher', 'rodent') // returns 2: -1 return parseInt(s.lastIndexOf(sep), 10) &gt;&gt; 0&#125;"},{"title":"Go's strings package  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"golang/strings/index.html","permalink":"https://locutus.io/golang/strings/index.html","excerpt":"","text":""},{"title":"PHP's array_change_key_case in JavaScript","date":"2021-02-28T22:26:45.401Z","updated":"2021-02-28T22:26:45.401Z","comments":true,"path":"php/array/array_change_key_case/index.html","permalink":"https://locutus.io/php/array/array_change_key_case/index.html","excerpt":"","text":"module.exports = function array_change_key_case (array, cs) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_change_key_case/ // original by: Ates Goral (https://magnetiq.com) // improved by: marrtins // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_change_key_case(42) // returns 1: false // example 2: array_change_key_case([ 3, 5 ]) // returns 2: [3, 5] // example 3: array_change_key_case(&#123; FuBaR: 42 &#125;) // returns 3: &#123;\"fubar\": 42&#125; // example 4: array_change_key_case(&#123; FuBaR: 42 &#125;, 'CASE_LOWER') // returns 4: &#123;\"fubar\": 42&#125; // example 5: array_change_key_case(&#123; FuBaR: 42 &#125;, 'CASE_UPPER') // returns 5: &#123;\"FUBAR\": 42&#125; // example 6: array_change_key_case(&#123; FuBaR: 42 &#125;, 2) // returns 6: &#123;\"FUBAR\": 42&#125; let caseFnc let key const tmpArr = &#123;&#125; if (Object.prototype.toString.call(array) === '[object Array]') &#123; return array &#125; if (array &amp;&amp; typeof array === 'object') &#123; caseFnc = (!cs || cs === 'CASE_LOWER') ? 'toLowerCase' : 'toUpperCase' for (key in array) &#123; tmpArr[key[caseFnc]()] = array[key] &#125; return tmpArr &#125; return false&#125;"},{"title":"PHP's array_chunk in JavaScript","date":"2021-02-28T22:26:45.401Z","updated":"2021-02-28T22:26:45.401Z","comments":true,"path":"php/array/array_chunk/index.html","permalink":"https://locutus.io/php/array/array_chunk/index.html","excerpt":"","text":"module.exports = function array_chunk (input, size, preserveKeys) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_chunk/ // original by: Carlos R. L. Rodrigues (https://www.jsfromhell.com) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Important note: Per the ECMAScript specification, // note 1: objects may not always iterate in a predictable order // example 1: array_chunk(['Kevin', 'van', 'Zonneveld'], 2) // returns 1: [['Kevin', 'van'], ['Zonneveld']] // example 2: array_chunk(['Kevin', 'van', 'Zonneveld'], 2, true) // returns 2: [&#123;0:'Kevin', 1:'van'&#125;, &#123;2: 'Zonneveld'&#125;] // example 3: array_chunk(&#123;1:'Kevin', 2:'van', 3:'Zonneveld'&#125;, 2) // returns 3: [['Kevin', 'van'], ['Zonneveld']] // example 4: array_chunk(&#123;1:'Kevin', 2:'van', 3:'Zonneveld'&#125;, 2, true) // returns 4: [&#123;1: 'Kevin', 2: 'van'&#125;, &#123;3: 'Zonneveld'&#125;] let x let p = '' let i = 0 let c = -1 const l = input.length || 0 const n = [] if (size &lt; 1) &#123; return null &#125; if (Object.prototype.toString.call(input) === '[object Array]') &#123; if (preserveKeys) &#123; while (i &lt; l) &#123; (x = i % size) ? n[c][i] = input[i] : n[++c] = &#123;&#125;; n[c][i] = input[i] i++ &#125; &#125; else &#123; while (i &lt; l) &#123; (x = i % size) ? n[c][x] = input[i] : n[++c] = [input[i]] i++ &#125; &#125; &#125; else &#123; if (preserveKeys) &#123; for (p in input) &#123; if (input.hasOwnProperty(p)) &#123; (x = i % size) ? n[c][p] = input[p] : n[++c] = &#123;&#125;; n[c][p] = input[p] i++ &#125; &#125; &#125; else &#123; for (p in input) &#123; if (input.hasOwnProperty(p)) &#123; (x = i % size) ? n[c][x] = input[p] : n[++c] = [input[p]] i++ &#125; &#125; &#125; &#125; return n&#125;"},{"title":"PHP's array_column in JavaScript","date":"2021-02-28T22:26:45.401Z","updated":"2021-02-28T22:26:45.401Z","comments":true,"path":"php/array/array_column/index.html","permalink":"https://locutus.io/php/array/array_column/index.html","excerpt":"","text":"module.exports = function array_column (input, ColumnKey, IndexKey = null) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_column/ // original by: Enzo Dañobeytía // example 1: array_column([&#123;name: 'Alex', value: 1&#125;, &#123;name: 'Elvis', value: 2&#125;, &#123;name: 'Michael', value: 3&#125;], 'name') // returns 1: &#123;0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"&#125; // example 2: array_column(&#123;0: &#123;name: 'Alex', value: 1&#125;, 1: &#123;name: 'Elvis', value: 2&#125;, 2: &#123;name: 'Michael', value: 3&#125;&#125;, 'name') // returns 2: &#123;0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"&#125; // example 3: array_column([&#123;name: 'Alex', value: 1&#125;, &#123;name: 'Elvis', value: 2&#125;, &#123;name: 'Michael', value: 3&#125;], 'name', 'value') // returns 3: &#123;1: \"Alex\", 2: \"Elvis\", 3: \"Michael\"&#125; // example 4: array_column([&#123;name: 'Alex', value: 1&#125;, &#123;name: 'Elvis', value: 2&#125;, &#123;name: 'Michael', value: 3&#125;], null, 'value') // returns 4: &#123;1: &#123;name: 'Alex', value: 1&#125;, 2: &#123;name: 'Elvis', value: 2&#125;, 3: &#123;name: 'Michael', value: 3&#125;&#125; if (input !== null &amp;&amp; (typeof input === 'object' || Array.isArray(input))) &#123; const newarray = [] if (typeof input === 'object') &#123; const temparray = [] for (const key of Object.keys(input)) &#123; temparray.push(input[key]) &#125; input = temparray &#125; if (Array.isArray(input)) &#123; for (const key of input.keys()) &#123; if (IndexKey &amp;&amp; input[key][IndexKey]) &#123; if (ColumnKey) &#123; newarray[input[key][IndexKey]] = input[key][ColumnKey] &#125; else &#123; newarray[input[key][IndexKey]] = input[key] &#125; &#125; else &#123; if (ColumnKey) &#123; newarray.push(input[key][ColumnKey]) &#125; else &#123; newarray.push(input[key]) &#125; &#125; &#125; &#125; return Object.assign(&#123;&#125;, newarray) &#125;&#125;"},{"title":"PHP's array_combine in JavaScript","date":"2021-02-28T22:26:45.401Z","updated":"2021-02-28T22:26:45.401Z","comments":true,"path":"php/array/array_combine/index.html","permalink":"https://locutus.io/php/array/array_combine/index.html","excerpt":"","text":"module.exports = function array_combine (keys, values) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_combine/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_combine([0,1,2], ['kevin','van','zonneveld']) // returns 1: &#123;0: 'kevin', 1: 'van', 2: 'zonneveld'&#125; const newArray = &#123;&#125; let i = 0 // input sanitation // Only accept arrays or array-like objects // Require arrays to have a count if (typeof keys !== 'object') &#123; return false &#125; if (typeof values !== 'object') &#123; return false &#125; if (typeof keys.length !== 'number') &#123; return false &#125; if (typeof values.length !== 'number') &#123; return false &#125; if (!keys.length) &#123; return false &#125; // number of elements does not match if (keys.length !== values.length) &#123; return false &#125; for (i = 0; i &lt; keys.length; i++) &#123; newArray[keys[i]] = values[i] &#125; return newArray&#125;"},{"title":"PHP's array_count_values in JavaScript","date":"2021-02-28T22:26:45.405Z","updated":"2021-02-28T22:26:45.405Z","comments":true,"path":"php/array/array_count_values/index.html","permalink":"https://locutus.io/php/array/array_count_values/index.html","excerpt":"","text":"module.exports = function array_count_values (array) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_count_values/ // original by: Ates Goral (https://magnetiq.com) // improved by: Michael White (https://getsprink.com) // improved by: Kevin van Zonneveld (https://kvz.io) // input by: sankai // input by: Shingo // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: array_count_values([ 3, 5, 3, \"foo\", \"bar\", \"foo\" ]) // returns 1: &#123;3:2, 5:1, \"foo\":2, \"bar\":1&#125; // example 2: array_count_values(&#123; p1: 3, p2: 5, p3: 3, p4: \"foo\", p5: \"bar\", p6: \"foo\" &#125;) // returns 2: &#123;3:2, 5:1, \"foo\":2, \"bar\":1&#125; // example 3: array_count_values([ true, 4.2, 42, \"fubar\" ]) // returns 3: &#123;42:1, \"fubar\":1&#125; const tmpArr = &#123;&#125; let key = '' let t = '' const _getType = function (obj) &#123; // Objects are php associative arrays. let t = typeof obj t = t.toLowerCase() if (t === 'object') &#123; t = 'array' &#125; return t &#125; const _countValue = function (tmpArr, value) &#123; if (typeof value === 'number') &#123; if (Math.floor(value) !== value) &#123; return &#125; &#125; else if (typeof value !== 'string') &#123; return &#125; if (value in tmpArr &amp;&amp; tmpArr.hasOwnProperty(value)) &#123; ++tmpArr[value] &#125; else &#123; tmpArr[value] = 1 &#125; &#125; t = _getType(array) if (t === 'array') &#123; for (key in array) &#123; if (array.hasOwnProperty(key)) &#123; _countValue.call(this, tmpArr, array[key]) &#125; &#125; &#125; return tmpArr&#125;"},{"title":"PHP's array_diff in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_diff/index.html","permalink":"https://locutus.io/php/array/array_diff/index.html","excerpt":"","text":"module.exports = function array_diff (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_diff/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Sanjoy Roy // revised by: Brett Zamir (https://brett-zamir.me) // example 1: array_diff(['Kevin', 'van', 'Zonneveld'], ['van', 'Zonneveld']) // returns 1: &#123;0:'Kevin'&#125; const retArr = &#123;&#125; const argl = arguments.length let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; argl; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1]) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_diff_assoc in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_diff_assoc/index.html","permalink":"https://locutus.io/php/array/array_diff_assoc/index.html","excerpt":"","text":"module.exports = function array_diff_assoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_diff_assoc/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: 0m3r // revised by: Brett Zamir (https://brett-zamir.me) // example 1: array_diff_assoc(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;, &#123;0: 'Kevin', 4: 'van', 5: 'Zonneveld'&#125;) // returns 1: &#123;1: 'van', 2: 'Zonneveld'&#125; const retArr = &#123;&#125; const argl = arguments.length let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; argl; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1] &amp;&amp; k === k1) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_diff_key in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_diff_key/index.html","permalink":"https://locutus.io/php/array/array_diff_key/index.html","excerpt":"","text":"module.exports = function array_diff_key (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_diff_key/ // original by: Ates Goral (https://magnetiq.com) // revised by: Brett Zamir (https://brett-zamir.me) // input by: Everlasto // example 1: array_diff_key(&#123;red: 1, green: 2, blue: 3, white: 4&#125;, &#123;red: 5&#125;) // returns 1: &#123;\"green\":2, \"blue\":3, \"white\":4&#125; // example 2: array_diff_key(&#123;red: 1, green: 2, blue: 3, white: 4&#125;, &#123;red: 5&#125;, &#123;red: 5&#125;) // returns 2: &#123;\"green\":2, \"blue\":3, \"white\":4&#125; const argl = arguments.length const retArr = &#123;&#125; let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; argl; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (k === k1) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_diff_uassoc in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_diff_uassoc/index.html","permalink":"https://locutus.io/php/array/array_diff_uassoc/index.html","excerpt":"","text":"module.exports = function array_diff_uassoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_diff_uassoc/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_diff_uassoc($array1, $array2, function (key1, key2) &#123; return (key1 === key2 ? 0 : (key1 &gt; key2 ? 1 : -1)) &#125;) // returns 1: &#123;b: 'brown', c: 'blue', 0: 'red'&#125; // test: skip-1 const retArr = &#123;&#125; const arglm1 = arguments.length - 1 let cb = arguments[arglm1] let arr = &#123;&#125; let i = 1 let k1 = '' let k = '' const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; arglm1; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1] &amp;&amp; cb(k, k1) === 0) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_diff_ukey in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_diff_ukey/index.html","permalink":"https://locutus.io/php/array/array_diff_ukey/index.html","excerpt":"","text":"module.exports = function array_diff_ukey (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_diff_ukey/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;blue: 1, red: 2, green: 3, purple: 4&#125; // example 1: var $array2 = &#123;green: 5, blue: 6, yellow: 7, cyan: 8&#125; // example 1: array_diff_ukey($array1, $array2, function (key1, key2)&#123; return (key1 === key2 ? 0 : (key1 &gt; key2 ? 1 : -1)); &#125;) // returns 1: &#123;red: 2, purple: 4&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 // var arglm2 = arglm1 - 1 let cb = arguments[arglm1] let k1 = '' let i = 1 let arr = &#123;&#125; let k = '' const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; arglm1; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (cb(k, k1) === 0) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_fill in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_fill/index.html","permalink":"https://locutus.io/php/array/array_fill/index.html","excerpt":"","text":"module.exports = function array_fill (startIndex, num, mixedVal) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_fill/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Waldo Malqui Silva (https://waldo.malqui.info) // example 1: array_fill(5, 6, 'banana') // returns 1: &#123; 5: 'banana', 6: 'banana', 7: 'banana', 8: 'banana', 9: 'banana', 10: 'banana' &#125; let key const tmpArr = &#123;&#125; if (!isNaN(startIndex) &amp;&amp; !isNaN(num)) &#123; for (key = 0; key &lt; num; key++) &#123; tmpArr[(key + startIndex)] = mixedVal &#125; &#125; return tmpArr&#125;"},{"title":"PHP's array_fill_keys in JavaScript","date":"2021-02-28T22:26:45.413Z","updated":"2021-02-28T22:26:45.413Z","comments":true,"path":"php/array/array_fill_keys/index.html","permalink":"https://locutus.io/php/array/array_fill_keys/index.html","excerpt":"","text":"module.exports = function array_fill_keys (keys, value) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_fill_keys/ // original by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: var $keys = &#123;'a': 'foo', 2: 5, 3: 10, 4: 'bar'&#125; // example 1: array_fill_keys($keys, 'banana') // returns 1: &#123;\"foo\": \"banana\", 5: \"banana\", 10: \"banana\", \"bar\": \"banana\"&#125; const retObj = &#123;&#125; let key = '' for (key in keys) &#123; retObj[keys[key]] = value &#125; return retObj&#125;"},{"title":"PHP's array_filter in JavaScript","date":"2021-02-28T22:26:45.417Z","updated":"2021-02-28T22:26:45.417Z","comments":true,"path":"php/array/array_filter/index.html","permalink":"https://locutus.io/php/array/array_filter/index.html","excerpt":"","text":"module.exports = function array_filter (arr, func) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_filter/ // original by: Brett Zamir (https://brett-zamir.me) // input by: max4ever // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Takes a function as an argument, not a function's name // example 1: var odd = function (num) &#123;return (num &amp; 1);&#125; // example 1: array_filter(&#123;\"a\": 1, \"b\": 2, \"c\": 3, \"d\": 4, \"e\": 5&#125;, odd) // returns 1: &#123;\"a\": 1, \"c\": 3, \"e\": 5&#125; // example 2: var even = function (num) &#123;return (!(num &amp; 1));&#125; // example 2: array_filter([6, 7, 8, 9, 10, 11, 12], even) // returns 2: [ 6, , 8, , 10, , 12 ] // example 3: array_filter(&#123;\"a\": 1, \"b\": false, \"c\": -1, \"d\": 0, \"e\": null, \"f\":'', \"g\":undefined&#125;) // returns 3: &#123;\"a\":1, \"c\":-1&#125; let retObj = &#123;&#125; let k func = func || function (v) &#123; return v &#125; // @todo: Issue #73 if (Object.prototype.toString.call(arr) === '[object Array]') &#123; retObj = [] &#125; for (k in arr) &#123; if (func(arr[k])) &#123; retObj[k] = arr[k] &#125; &#125; return retObj&#125;"},{"title":"PHP's array_flip in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_flip/index.html","permalink":"https://locutus.io/php/array/array_flip/index.html","excerpt":"","text":"module.exports = function array_flip (trans) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_flip/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Pier Paolo Ramon (https://www.mastersoup.com/) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_flip( &#123;a: 1, b: 1, c: 2&#125; ) // returns 1: &#123;1: 'b', 2: 'c'&#125; let key const tmpArr = &#123;&#125; for (key in trans) &#123; if (!trans.hasOwnProperty(key)) &#123; continue &#125; tmpArr[trans[key]] = key &#125; return tmpArr&#125;"},{"title":"PHP's array_intersect in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_intersect/index.html","permalink":"https://locutus.io/php/array/array_intersect/index.html","excerpt":"","text":"module.exports = function array_intersect (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_intersect/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: These only output associative arrays (would need to be // note 1: all numeric and counting from zero to be numeric) // example 1: var $array1 = &#123;'a' : 'green', 0:'red', 1: 'blue'&#125; // example 1: var $array2 = &#123;'b' : 'green', 0:'yellow', 1:'red'&#125; // example 1: var $array3 = ['green', 'red'] // example 1: var $result = array_intersect($array1, $array2, $array3) // returns 1: &#123;0: 'red', a: 'green'&#125; const retArr = &#123;&#125; const argl = arguments.length const arglm1 = argl - 1 let k1 = '' let arr = &#123;&#125; let i = 0 let k = '' arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; argl; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1]) &#123; if (i === arglm1) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs// eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys// eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_intersect_assoc in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_intersect_assoc/index.html","permalink":"https://locutus.io/php/array/array_intersect_assoc/index.html","excerpt":"","text":"module.exports = function array_intersect_assoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_intersect_assoc/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: These only output associative arrays (would need to be // note 1: all numeric and counting from zero to be numeric) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'green', 0: 'yellow', 1: 'red'&#125; // example 1: array_intersect_assoc($array1, $array2) // returns 1: &#123;a: 'green'&#125; const retArr = &#123;&#125; const argl = arguments.length const arglm1 = argl - 1 let k1 = '' let arr = &#123;&#125; let i = 0 let k = '' arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; argl; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1] &amp;&amp; k === k1) &#123; if (i === arglm1) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_intersect_key in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_intersect_key/index.html","permalink":"https://locutus.io/php/array/array_intersect_key/index.html","excerpt":"","text":"module.exports = function array_intersect_key (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_intersect_key/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: These only output associative arrays (would need to be // note 1: all numeric and counting from zero to be numeric) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'green', 0: 'yellow', 1: 'red'&#125; // example 1: array_intersect_key($array1, $array2) // returns 1: &#123;0: 'red', a: 'green'&#125; const retArr = &#123;&#125; const argl = arguments.length const arglm1 = argl - 1 let k1 = '' let arr = &#123;&#125; let i = 0 let k = '' arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels if (!arr1.hasOwnProperty(k1)) &#123; continue &#125; arrs: for (i = 1; i &lt; argl; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (!arr.hasOwnProperty(k)) &#123; continue &#125; if (k === k1) &#123; if (i === arglm1) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_intersect_uassoc in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_intersect_uassoc/index.html","permalink":"https://locutus.io/php/array/array_intersect_uassoc/index.html","excerpt":"","text":"module.exports = function array_intersect_uassoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_intersect_uassoc/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_intersect_uassoc($array1, $array2, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;b: 'brown'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 const arglm2 = arglm1 - 1 let cb = arguments[arglm1] // var cb0 = arguments[arglm2] let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb // cb0 = (typeof cb0 === 'string') // ? $global[cb0] // : (Object.prototype.toString.call(cb0) === '[object Array]') // ? $global[cb0[0]][cb0[1]] // : cb0 arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; arglm1; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (arr[k] === arr1[k1] &amp;&amp; cb(k, k1) === 0) &#123; if (i === arglm2) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_intersect_ukey in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_intersect_ukey/index.html","permalink":"https://locutus.io/php/array/array_intersect_ukey/index.html","excerpt":"","text":"module.exports = function array_intersect_ukey (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_intersect_ukey/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;blue: 1, red: 2, green: 3, purple: 4&#125; // example 1: var $array2 = &#123;green: 5, blue: 6, yellow: 7, cyan: 8&#125; // example 1: array_intersect_ukey ($array1, $array2, function (key1, key2)&#123; return (key1 === key2 ? 0 : (key1 &gt; key2 ? 1 : -1)); &#125;) // returns 1: &#123;blue: 1, green: 3&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 const arglm2 = arglm1 - 1 let cb = arguments[arglm1] // var cb0 = arguments[arglm2] let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb // cb0 = (typeof cb0 === 'string') // ? $global[cb0] // : (Object.prototype.toString.call(cb0) === '[object Array]') // ? $global[cb0[0]][cb0[1]] // : cb0 arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; arglm1; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (cb(k, k1) === 0) &#123; if (i === arglm2) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_key_exists in JavaScript","date":"2021-02-28T22:26:45.425Z","updated":"2021-02-28T22:26:45.425Z","comments":true,"path":"php/array/array_key_exists/index.html","permalink":"https://locutus.io/php/array/array_key_exists/index.html","excerpt":"","text":"module.exports = function array_key_exists (key, search) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_key_exists/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Felix Geisendoerfer (https://www.debuggable.com/felix) // example 1: array_key_exists('kevin', &#123;'kevin': 'van Zonneveld'&#125;) // returns 1: true if (!search || (search.constructor !== Array &amp;&amp; search.constructor !== Object)) &#123; return false &#125; return key in search&#125;"},{"title":"PHP's array_keys in JavaScript","date":"2021-02-28T22:26:45.429Z","updated":"2021-02-28T22:26:45.429Z","comments":true,"path":"php/array/array_keys/index.html","permalink":"https://locutus.io/php/array/array_keys/index.html","excerpt":"","text":"module.exports = function array_keys (input, searchValue, argStrict) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_keys/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // input by: P // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // improved by: jd // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_keys( &#123;firstname: 'Kevin', surname: 'van Zonneveld'&#125; ) // returns 1: [ 'firstname', 'surname' ] const search = typeof searchValue !== 'undefined' const tmpArr = [] const strict = !!argStrict let include = true let key = '' for (key in input) &#123; if (input.hasOwnProperty(key)) &#123; include = true if (search) &#123; if (strict &amp;&amp; input[key] !== searchValue) &#123; include = false &#125; else if (input[key] !== searchValue) &#123; include = false &#125; &#125; if (include) &#123; tmpArr[tmpArr.length] = key &#125; &#125; &#125; return tmpArr&#125;"},{"title":"PHP's array_map in JavaScript","date":"2021-02-28T22:26:45.449Z","updated":"2021-02-28T22:26:45.449Z","comments":true,"path":"php/array/array_map/index.html","permalink":"https://locutus.io/php/array/array_map/index.html","excerpt":"","text":"module.exports = function array_map (callback) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_map/ // original by: Andrea Giammarchi (https://webreflection.blogspot.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // input by: thekid // note 1: If the callback is a string (or object, if an array is supplied), // note 1: it can only work if the function name is in the global context // example 1: array_map( function (a)&#123;return (a * a * a)&#125;, [1, 2, 3, 4, 5] ) // returns 1: [ 1, 8, 27, 64, 125 ] const argc = arguments.length const argv = arguments let obj = null let cb = callback const j = argv[1].length let i = 0 let k = 1 let m = 0 let tmp = [] const tmpArr = [] const $global = (typeof window !== 'undefined' ? window : global) while (i &lt; j) &#123; while (k &lt; argc) &#123; tmp[m++] = argv[k++][i] &#125; m = 0 k = 1 if (callback) &#123; if (typeof callback === 'string') &#123; cb = $global[callback] &#125; else if (typeof callback === 'object' &amp;&amp; callback.length) &#123; obj = typeof callback[0] === 'string' ? $global[callback[0]] : callback[0] if (typeof obj === 'undefined') &#123; throw new Error('Object not found: ' + callback[0]) &#125; cb = typeof callback[1] === 'string' ? obj[callback[1]] : callback[1] &#125; tmpArr[i++] = cb.apply(obj, tmp) &#125; else &#123; tmpArr[i++] = tmp &#125; tmp = [] &#125; return tmpArr&#125;"},{"title":"PHP's array_merge in JavaScript","date":"2021-02-28T22:26:45.449Z","updated":"2021-02-28T22:26:45.449Z","comments":true,"path":"php/array/array_merge/index.html","permalink":"https://locutus.io/php/array/array_merge/index.html","excerpt":"","text":"module.exports = function array_merge () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_merge/ // original by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Nate // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: josh // example 1: var $arr1 = &#123;\"color\": \"red\", 0: 2, 1: 4&#125; // example 1: var $arr2 = &#123;0: \"a\", 1: \"b\", \"color\": \"green\", \"shape\": \"trapezoid\", 2: 4&#125; // example 1: array_merge($arr1, $arr2) // returns 1: &#123;\"color\": \"green\", 0: 2, 1: 4, 2: \"a\", 3: \"b\", \"shape\": \"trapezoid\", 4: 4&#125; // example 2: var $arr1 = [] // example 2: var $arr2 = &#123;1: \"data\"&#125; // example 2: array_merge($arr1, $arr2) // returns 2: &#123;0: \"data\"&#125; const args = Array.prototype.slice.call(arguments) const argl = args.length let arg const retObj = &#123;&#125; let k = '' let argil = 0 let j = 0 let i = 0 let ct = 0 const toStr = Object.prototype.toString let retArr = true for (i = 0; i &lt; argl; i++) &#123; if (toStr.call(args[i]) !== '[object Array]') &#123; retArr = false break &#125; &#125; if (retArr) &#123; retArr = [] for (i = 0; i &lt; argl; i++) &#123; retArr = retArr.concat(args[i]) &#125; return retArr &#125; for (i = 0, ct = 0; i &lt; argl; i++) &#123; arg = args[i] if (toStr.call(arg) === '[object Array]') &#123; for (j = 0, argil = arg.length; j &lt; argil; j++) &#123; retObj[ct++] = arg[j] &#125; &#125; else &#123; for (k in arg) &#123; if (arg.hasOwnProperty(k)) &#123; if (parseInt(k, 10) + '' === k) &#123; retObj[ct++] = arg[k] &#125; else &#123; retObj[k] = arg[k] &#125; &#125; &#125; &#125; &#125; return retObj&#125;"},{"title":"PHP's array_merge_recursive in JavaScript","date":"2021-02-28T22:26:45.449Z","updated":"2021-02-28T22:26:45.449Z","comments":true,"path":"php/array/array_merge_recursive/index.html","permalink":"https://locutus.io/php/array/array_merge_recursive/index.html","excerpt":"","text":"module.exports = function array_merge_recursive (arr1, arr2) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_merge_recursive/ // original by: Subhasis Deb // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // example 1: var $arr1 = &#123;'color': &#123;'favorite': 'red'&#125;, 0: 5&#125; // example 1: var $arr2 = &#123;0: 10, 'color': &#123;'favorite': 'green', 0: 'blue'&#125;&#125; // example 1: array_merge_recursive($arr1, $arr2) // returns 1: &#123;'color': &#123;'favorite': &#123;0: 'red', 1: 'green'&#125;, 0: 'blue'&#125;, 1: 5, 1: 10&#125; // test: skip-1 const arrayMerge = require('../array/array_merge') let idx = '' if (arr1 &amp;&amp; Object.prototype.toString.call(arr1) === '[object Array]' &amp;&amp; arr2 &amp;&amp; Object.prototype.toString.call(arr2) === '[object Array]') &#123; for (idx in arr2) &#123; arr1.push(arr2[idx]) &#125; &#125; else if ((arr1 &amp;&amp; (arr1 instanceof Object)) &amp;&amp; (arr2 &amp;&amp; (arr2 instanceof Object))) &#123; for (idx in arr2) &#123; if (idx in arr1) &#123; if (typeof arr1[idx] === 'object' &amp;&amp; typeof arr2 === 'object') &#123; arr1[idx] = arrayMerge(arr1[idx], arr2[idx]) &#125; else &#123; arr1[idx] = arr2[idx] &#125; &#125; else &#123; arr1[idx] = arr2[idx] &#125; &#125; &#125; return arr1&#125;"},{"title":"PHP's array_pad in JavaScript","date":"2021-02-28T22:26:45.457Z","updated":"2021-02-28T22:26:45.457Z","comments":true,"path":"php/array/array_pad/index.html","permalink":"https://locutus.io/php/array/array_pad/index.html","excerpt":"","text":"module.exports = function array_pad (input, padSize, padValue) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_pad/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // example 1: array_pad([ 7, 8, 9 ], 2, 'a') // returns 1: [ 7, 8, 9] // example 2: array_pad([ 7, 8, 9 ], 5, 'a') // returns 2: [ 7, 8, 9, 'a', 'a'] // example 3: array_pad([ 7, 8, 9 ], 5, 2) // returns 3: [ 7, 8, 9, 2, 2] // example 4: array_pad([ 7, 8, 9 ], -5, 'a') // returns 4: [ 'a', 'a', 7, 8, 9 ] let pad = [] const newArray = [] let newLength let diff = 0 let i = 0 if (Object.prototype.toString.call(input) === '[object Array]' &amp;&amp; !isNaN(padSize)) &#123; newLength = ((padSize &lt; 0) ? (padSize * -1) : padSize) diff = newLength - input.length if (diff &gt; 0) &#123; for (i = 0; i &lt; diff; i++) &#123; newArray[i] = padValue &#125; pad = ((padSize &lt; 0) ? newArray.concat(input) : input.concat(newArray)) &#125; else &#123; pad = input &#125; &#125; return pad&#125;"},{"title":"PHP's array_pop in JavaScript","date":"2021-02-28T22:26:45.457Z","updated":"2021-02-28T22:26:45.457Z","comments":true,"path":"php/array/array_pop/index.html","permalink":"https://locutus.io/php/array/array_pop/index.html","excerpt":"","text":"module.exports = function array_pop (inputArr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_pop/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // input by: Theriault (https://github.com/Theriault) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // note 1: While IE (and other browsers) support iterating an object's // note 1: own properties in order, if one attempts to add back properties // note 1: in IE, they may end up in their former position due to their position // note 1: being retained. So use of this function with \"associative arrays\" // note 1: (objects) may lead to unexpected behavior in an IE environment if // note 1: you add back properties with the same keys that you removed // example 1: array_pop([0,1,2]) // returns 1: 2 // example 2: var $data = &#123;firstName: 'Kevin', surName: 'van Zonneveld'&#125; // example 2: var $lastElem = array_pop($data) // example 2: var $result = $data // returns 2: &#123;firstName: 'Kevin'&#125; let key = '' let lastKey = '' if (inputArr.hasOwnProperty('length')) &#123; // Indexed if (!inputArr.length) &#123; // Done popping, are we? return null &#125; return inputArr.pop() &#125; else &#123; // Associative for (key in inputArr) &#123; if (inputArr.hasOwnProperty(key)) &#123; lastKey = key &#125; &#125; if (lastKey) &#123; const tmp = inputArr[lastKey] delete (inputArr[lastKey]) return tmp &#125; else &#123; return null &#125; &#125;&#125;"},{"title":"PHP's array_product in JavaScript","date":"2021-02-28T22:26:45.457Z","updated":"2021-02-28T22:26:45.457Z","comments":true,"path":"php/array/array_product/index.html","permalink":"https://locutus.io/php/array/array_product/index.html","excerpt":"","text":"module.exports = function array_product (input) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_product/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // example 1: array_product([ 2, 4, 6, 8 ]) // returns 1: 384 let idx = 0 let product = 1 let il = 0 if (Object.prototype.toString.call(input) !== '[object Array]') &#123; return null &#125; il = input.length while (idx &lt; il) &#123; product *= (!isNaN(input[idx]) ? input[idx] : 0) idx++ &#125; return product&#125;"},{"title":"PHP's array_push in JavaScript","date":"2021-02-28T22:26:45.461Z","updated":"2021-02-28T22:26:45.461Z","comments":true,"path":"php/array/array_push/index.html","permalink":"https://locutus.io/php/array/array_push/index.html","excerpt":"","text":"module.exports = function array_push (inputArr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_push/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Note also that IE retains information about property position even // note 1: after being supposedly deleted, so if you delete properties and then // note 1: add back properties with the same keys (including numeric) that had // note 1: been deleted, the order will be as before; thus, this function is not // note 1: really recommended with associative arrays (objects) in IE environments // example 1: array_push(['kevin','van'], 'zonneveld') // returns 1: 3 let i = 0 let pr = '' const argv = arguments const argc = argv.length const allDigits = /^\\d$/ let size = 0 let highestIdx = 0 let len = 0 if (inputArr.hasOwnProperty('length')) &#123; for (i = 1; i &lt; argc; i++) &#123; inputArr[inputArr.length] = argv[i] &#125; return inputArr.length &#125; // Associative (object) for (pr in inputArr) &#123; if (inputArr.hasOwnProperty(pr)) &#123; ++len if (pr.search(allDigits) !== -1) &#123; size = parseInt(pr, 10) highestIdx = size &gt; highestIdx ? size : highestIdx &#125; &#125; &#125; for (i = 1; i &lt; argc; i++) &#123; inputArr[++highestIdx] = argv[i] &#125; return len + i - 1&#125;"},{"title":"PHP's array_rand in JavaScript","date":"2021-02-28T22:26:45.469Z","updated":"2021-02-28T22:26:45.469Z","comments":true,"path":"php/array/array_rand/index.html","permalink":"https://locutus.io/php/array/array_rand/index.html","excerpt":"","text":"module.exports = function array_rand (array, num) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_rand/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // reimplemented by: Rafał Kukawski // example 1: array_rand( ['Kevin'], 1 ) // returns 1: '0' // By using Object.keys we support both, arrays and objects // which phpjs wants to support const keys = Object.keys(array) if (typeof num === 'undefined' || num === null) &#123; num = 1 &#125; else &#123; num = +num &#125; if (isNaN(num) || num &lt; 1 || num &gt; keys.length) &#123; return null &#125; // shuffle the array of keys for (let i = keys.length - 1; i &gt; 0; i--) &#123; const j = Math.floor(Math.random() * (i + 1)) // 0 ≤ j ≤ i const tmp = keys[j] keys[j] = keys[i] keys[i] = tmp &#125; return num === 1 ? keys[0] : keys.slice(0, num)&#125;"},{"title":"PHP's array_reduce in JavaScript","date":"2021-02-28T22:26:45.469Z","updated":"2021-02-28T22:26:45.469Z","comments":true,"path":"php/array/array_reduce/index.html","permalink":"https://locutus.io/php/array/array_reduce/index.html","excerpt":"","text":"module.exports = function array_reduce (aInput, callback) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_reduce/ // original by: Alfonso Jimenez (https://www.alfonsojimenez.com) // note 1: Takes a function as an argument, not a function's name // example 1: array_reduce([1, 2, 3, 4, 5], function (v, w)&#123;v += w;return v;&#125;) // returns 1: 15 const lon = aInput.length let res = 0 let i = 0 let tmp = [] for (i = 0; i &lt; lon; i += 2) &#123; tmp[0] = aInput[i] if (aInput[(i + 1)]) &#123; tmp[1] = aInput[(i + 1)] &#125; else &#123; tmp[1] = 0 &#125; res += callback.apply(null, tmp) tmp = [] &#125; return res&#125;"},{"title":"PHP's array_replace in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_replace/index.html","permalink":"https://locutus.io/php/array/array_replace/index.html","excerpt":"","text":"module.exports = function array_replace (arr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_replace/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: array_replace([\"orange\", \"banana\", \"apple\", \"raspberry\"], &#123;0 : \"pineapple\", 4 : \"cherry\"&#125;, &#123;0:\"grape\"&#125;) // returns 1: &#123;0: 'grape', 1: 'banana', 2: 'apple', 3: 'raspberry', 4: 'cherry'&#125; const retObj = &#123;&#125; let i = 0 let p = '' const argl = arguments.length if (argl &lt; 2) &#123; throw new Error('There should be at least 2 arguments passed to array_replace()') &#125; // Although docs state that the arguments are passed in by reference, // it seems they are not altered, but rather the copy that is returned // (just guessing), so we make a copy here, instead of acting on arr itself for (p in arr) &#123; retObj[p] = arr[p] &#125; for (i = 1; i &lt; argl; i++) &#123; for (p in arguments[i]) &#123; retObj[p] = arguments[i][p] &#125; &#125; return retObj&#125;"},{"title":"PHP's array_replace_recursive in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_replace_recursive/index.html","permalink":"https://locutus.io/php/array/array_replace_recursive/index.html","excerpt":"","text":"module.exports = function array_replace_recursive (arr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_replace_recursive/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: array_replace_recursive(&#123;'citrus' : ['orange'], 'berries' : ['blackberry', 'raspberry']&#125;, &#123;'citrus' : ['pineapple'], 'berries' : ['blueberry']&#125;) // returns 1: &#123;citrus : ['pineapple'], berries : ['blueberry', 'raspberry']&#125; let i = 0 let p = '' const argl = arguments.length let retObj if (argl &lt; 2) &#123; throw new Error('There should be at least 2 arguments passed to array_replace_recursive()') &#125; // Although docs state that the arguments are passed in by reference, // it seems they are not altered, but rather the copy that is returned // So we make a copy here, instead of acting on arr itself if (Object.prototype.toString.call(arr) === '[object Array]') &#123; retObj = [] for (p in arr) &#123; retObj.push(arr[p]) &#125; &#125; else &#123; retObj = &#123;&#125; for (p in arr) &#123; retObj[p] = arr[p] &#125; &#125; for (i = 1; i &lt; argl; i++) &#123; for (p in arguments[i]) &#123; if (retObj[p] &amp;&amp; typeof retObj[p] === 'object') &#123; retObj[p] = array_replace_recursive(retObj[p], arguments[i][p]) &#125; else &#123; retObj[p] = arguments[i][p] &#125; &#125; &#125; return retObj&#125;"},{"title":"PHP's array_reverse in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_reverse/index.html","permalink":"https://locutus.io/php/array/array_reverse/index.html","excerpt":"","text":"module.exports = function array_reverse (array, preserveKeys) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_reverse/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Karol Kowalski // example 1: array_reverse( [ 'php', '4.0', ['green', 'red'] ], true) // returns 1: &#123; 2: ['green', 'red'], 1: '4.0', 0: 'php'&#125; const isArray = Object.prototype.toString.call(array) === '[object Array]' const tmpArr = preserveKeys ? &#123;&#125; : [] let key if (isArray &amp;&amp; !preserveKeys) &#123; return array.slice(0).reverse() &#125; if (preserveKeys) &#123; const keys = [] for (key in array) &#123; keys.push(key) &#125; let i = keys.length while (i--) &#123; key = keys[i] // @todo: don't rely on browsers keeping keys in insertion order // it's implementation specific // eg. the result will differ from expected in Google Chrome tmpArr[key] = array[key] &#125; &#125; else &#123; for (key in array) &#123; tmpArr.unshift(array[key]) &#125; &#125; return tmpArr&#125;"},{"title":"PHP's array_search in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_search/index.html","permalink":"https://locutus.io/php/array/array_search/index.html","excerpt":"","text":"module.exports = function array_search (needle, haystack, argStrict) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_search/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Reynier de la Rosa (https://scriptinside.blogspot.com.es/) // test: skip-all // example 1: array_search('zonneveld', &#123;firstname: 'kevin', middle: 'van', surname: 'zonneveld'&#125;) // returns 1: 'surname' // example 2: array_search('3', &#123;a: 3, b: 5, c: 7&#125;) // returns 2: 'a' const strict = !!argStrict let key = '' if (typeof needle === 'object' &amp;&amp; needle.exec) &#123; // Duck-type for RegExp if (!strict) &#123; // Let's consider case sensitive searches as strict const flags = 'i' + (needle.global ? 'g' : '') + (needle.multiline ? 'm' : '') + // sticky is FF only (needle.sticky ? 'y' : '') needle = new RegExp(needle.source, flags) &#125; for (key in haystack) &#123; if (haystack.hasOwnProperty(key)) &#123; if (needle.test(haystack[key])) &#123; return key &#125; &#125; &#125; return false &#125; for (key in haystack) &#123; if (haystack.hasOwnProperty(key)) &#123; if ((strict &amp;&amp; haystack[key] === needle) || (!strict &amp;&amp; haystack[key] == needle)) &#123; // eslint-disable-line eqeqeq return key &#125; &#125; &#125; return false&#125;"},{"title":"PHP's array_shift in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_shift/index.html","permalink":"https://locutus.io/php/array/array_shift/index.html","excerpt":"","text":"module.exports = function array_shift (inputArr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_shift/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Martijn Wieringa // note 1: Currently does not handle objects // example 1: array_shift(['Kevin', 'van', 'Zonneveld']) // returns 1: 'Kevin' var _checkToUpIndices = function (arr, ct, key) &#123; // Deal with situation, e.g., if encounter index 4 and try // to set it to 0, but 0 exists later in loop (need to // increment all subsequent (skipping current key, since // we need its value below) until find unused) if (arr[ct] !== undefined) &#123; const tmp = ct ct += 1 if (ct === key) &#123; ct += 1 &#125; ct = _checkToUpIndices(arr, ct, key) arr[ct] = arr[tmp] delete arr[tmp] &#125; return ct &#125; if (inputArr.length === 0) &#123; return null &#125; if (inputArr.length &gt; 0) &#123; return inputArr.shift() &#125;&#125;"},{"title":"PHP's array_slice in JavaScript","date":"2021-02-28T22:26:45.473Z","updated":"2021-02-28T22:26:45.473Z","comments":true,"path":"php/array/array_slice/index.html","permalink":"https://locutus.io/php/array/array_slice/index.html","excerpt":"","text":"module.exports = function array_slice (arr, offst, lgth, preserveKeys) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_slice/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // note 1: Relies on is_int because !isNaN accepts floats // example 1: array_slice([\"a\", \"b\", \"c\", \"d\", \"e\"], 2, -1) // returns 1: [ 'c', 'd' ] // example 2: array_slice([\"a\", \"b\", \"c\", \"d\", \"e\"], 2, -1, true) // returns 2: &#123;2: 'c', 3: 'd'&#125; const isInt = require('../var/is_int') /* if ('callee' in arr &amp;&amp; 'length' in arr) &#123; arr = Array.prototype.slice.call(arr); &#125; */ let key = '' if (Object.prototype.toString.call(arr) !== '[object Array]' || (preserveKeys &amp;&amp; offst !== 0)) &#123; // Assoc. array as input or if required as output let lgt = 0 const newAssoc = &#123;&#125; for (key in arr) &#123; lgt += 1 newAssoc[key] = arr[key] &#125; arr = newAssoc offst = (offst &lt; 0) ? lgt + offst : offst lgth = lgth === undefined ? lgt : (lgth &lt; 0) ? lgt + lgth - offst : lgth const assoc = &#123;&#125; let start = false let it = -1 let arrlgth = 0 let noPkIdx = 0 for (key in arr) &#123; ++it if (arrlgth &gt;= lgth) &#123; break &#125; if (it === offst) &#123; start = true &#125; if (!start) &#123; continue &#125;++arrlgth if (isInt(key) &amp;&amp; !preserveKeys) &#123; assoc[noPkIdx++] = arr[key] &#125; else &#123; assoc[key] = arr[key] &#125; &#125; // Make as array-like object (though length will not be dynamic) // assoc.length = arrlgth; return assoc &#125; if (lgth === undefined) &#123; return arr.slice(offst) &#125; else if (lgth &gt;= 0) &#123; return arr.slice(offst, offst + lgth) &#125; else &#123; return arr.slice(offst, lgth) &#125;&#125;"},{"title":"PHP's array_splice in JavaScript","date":"2021-02-28T22:26:45.481Z","updated":"2021-02-28T22:26:45.481Z","comments":true,"path":"php/array/array_splice/index.html","permalink":"https://locutus.io/php/array/array_splice/index.html","excerpt":"","text":"module.exports = function array_splice (arr, offst, lgth, replacement) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_splice/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Theriault (https://github.com/Theriault) // note 1: Order does get shifted in associative array input with numeric indices, // note 1: since PHP behavior doesn't preserve keys, but I understand order is // note 1: not reliable anyways // note 1: Note also that IE retains information about property position even // note 1: after being supposedly deleted, so use of this function may produce // note 1: unexpected results in IE if you later attempt to add back properties // note 1: with the same keys that had been deleted // example 1: var $input = &#123;4: \"red\", 'abc': \"green\", 2: \"blue\", 'dud': \"yellow\"&#125; // example 1: array_splice($input, 2) // returns 1: &#123;4: \"red\", 'abc': \"green\"&#125; // example 2: var $input = [\"red\", \"green\", \"blue\", \"yellow\"] // example 2: array_splice($input, 3, 0, \"purple\") // returns 2: [] // example 3: var $input = [\"red\", \"green\", \"blue\", \"yellow\"] // example 3: array_splice($input, -1, 1, [\"black\", \"maroon\"]) // returns 3: [\"yellow\"] // test: skip-1 const isInt = require('../var/is_int') var _checkToUpIndices = function (arr, ct, key) &#123; // Deal with situation, e.g., if encounter index 4 and try // to set it to 0, but 0 exists later in loop (need to // increment all subsequent (skipping current key, // since we need its value below) until find unused) if (arr[ct] !== undefined) &#123; const tmp = ct ct += 1 if (ct === key) &#123; ct += 1 &#125; ct = _checkToUpIndices(arr, ct, key) arr[ct] = arr[tmp] delete arr[tmp] &#125; return ct &#125; if (replacement &amp;&amp; typeof replacement !== 'object') &#123; replacement = [replacement] &#125; if (lgth === undefined) &#123; lgth = offst &gt;= 0 ? arr.length - offst : -offst &#125; else if (lgth &lt; 0) &#123; lgth = (offst &gt;= 0 ? arr.length - offst : -offst) + lgth &#125; if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; /* if (arr.length !== undefined) &#123; // Deal with array-like objects as input delete arr.length; &#125; */ let lgt = 0 let ct = -1 const rmvd = [] const rmvdObj = &#123;&#125; let replCt = -1 let intCt = -1 let returnArr = true let rmvdCt = 0 // var rmvdLngth = 0 let key = '' // rmvdObj.length = 0; for (key in arr) &#123; // Can do arr.__count__ in some browsers lgt += 1 &#125; offst = (offst &gt;= 0) ? offst : lgt + offst for (key in arr) &#123; ct += 1 if (ct &lt; offst) &#123; if (isInt(key)) &#123; intCt += 1 if (parseInt(key, 10) === intCt) &#123; // Key is already numbered ok, so don't need to change key for value continue &#125; // Deal with situation, e.g., _checkToUpIndices(arr, intCt, key) // if encounter index 4 and try to set it to 0, but 0 exists later in loop arr[intCt] = arr[key] delete arr[key] &#125; continue &#125; if (returnArr &amp;&amp; isInt(key)) &#123; rmvd.push(arr[key]) // PHP starts over here too rmvdObj[rmvdCt++] = arr[key] &#125; else &#123; rmvdObj[key] = arr[key] returnArr = false &#125; // rmvdLngth += 1 // rmvdObj.length += 1; if (replacement &amp;&amp; replacement[++replCt]) &#123; arr[key] = replacement[replCt] &#125; else &#123; delete arr[key] &#125; &#125; // Make (back) into an array-like object // arr.length = lgt - rmvdLngth + (replacement ? replacement.length : 0); return returnArr ? rmvd : rmvdObj &#125; if (replacement) &#123; replacement.unshift(offst, lgth) return Array.prototype.splice.apply(arr, replacement) &#125; return arr.splice(offst, lgth)&#125;"},{"title":"PHP's array_sum in JavaScript","date":"2021-02-28T22:26:45.481Z","updated":"2021-02-28T22:26:45.481Z","comments":true,"path":"php/array/array_sum/index.html","permalink":"https://locutus.io/php/array/array_sum/index.html","excerpt":"","text":"module.exports = function array_sum (array) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_sum/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Nate // bugfixed by: Gilbert // improved by: David Pilia (https://www.beteck.it/) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_sum([4, 9, 182.6]) // returns 1: 195.6 // example 2: var $total = [] // example 2: var $index = 0.1 // example 2: for (var $y = 0; $y &lt; 12; $y++)&#123; $total[$y] = $y + $index &#125; // example 2: array_sum($total) // returns 2: 67.2 let key let sum = 0 // input sanitation if (typeof array !== 'object') &#123; return null &#125; for (key in array) &#123; if (!isNaN(parseFloat(array[key]))) &#123; sum += parseFloat(array[key]) &#125; &#125; return sum&#125;"},{"title":"PHP's array_udiff in JavaScript","date":"2021-02-28T22:26:45.485Z","updated":"2021-02-28T22:26:45.485Z","comments":true,"path":"php/array/array_udiff/index.html","permalink":"https://locutus.io/php/array/array_udiff/index.html","excerpt":"","text":"module.exports = function array_udiff (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_udiff/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_udiff($array1, $array2, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;c: 'blue'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 let cb = arguments[arglm1] let arr = '' let i = 1 let k1 = '' let k = '' const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; arglm1; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (cb(arr[k], arr1[k1]) === 0) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_udiff_assoc in JavaScript","date":"2021-02-28T22:26:45.481Z","updated":"2021-02-28T22:26:45.481Z","comments":true,"path":"php/array/array_udiff_assoc/index.html","permalink":"https://locutus.io/php/array/array_udiff_assoc/index.html","excerpt":"","text":"module.exports = function array_udiff_assoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_udiff_assoc/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: array_udiff_assoc(&#123;0: 'kevin', 1: 'van', 2: 'Zonneveld'&#125;, &#123;0: 'Kevin', 4: 'van', 5: 'Zonneveld'&#125;, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;1: 'van', 2: 'Zonneveld'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 let cb = arguments[arglm1] let arr = &#123;&#125; let i = 1 let k1 = '' let k = '' const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; arglm1; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (cb(arr[k], arr1[k1]) === 0 &amp;&amp; k === k1) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_udiff_uassoc in JavaScript","date":"2021-02-28T22:26:45.485Z","updated":"2021-02-28T22:26:45.485Z","comments":true,"path":"php/array/array_udiff_uassoc/index.html","permalink":"https://locutus.io/php/array/array_udiff_uassoc/index.html","excerpt":"","text":"module.exports = function array_udiff_uassoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_udiff_uassoc/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_udiff_uassoc($array1, $array2, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;0: 'red', c: 'blue'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 const arglm2 = arglm1 - 1 let cb = arguments[arglm1] let cb0 = arguments[arglm2] let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb cb0 = (typeof cb0 === 'string') ? $global[cb0] : (Object.prototype.toString.call(cb0) === '[object Array]') ? $global[cb0[0]][cb0[1]] : cb0 arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels for (i = 1; i &lt; arglm2; i++) &#123; arr = arguments[i] for (k in arr) &#123; if (cb0(arr[k], arr1[k1]) === 0 &amp;&amp; cb(k, k1) === 0) &#123; // If it reaches here, it was found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; retArr[k1] = arr1[k1] &#125; &#125; return retArr&#125;"},{"title":"PHP's array_uintersect in JavaScript","date":"2021-02-28T22:26:45.485Z","updated":"2021-02-28T22:26:45.485Z","comments":true,"path":"php/array/array_uintersect/index.html","permalink":"https://locutus.io/php/array/array_uintersect/index.html","excerpt":"","text":"module.exports = function array_uintersect (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_uintersect/ // original by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Demosthenes Koptsis // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_uintersect($array1, $array2, function( f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;a: 'green', b: 'brown', 0: 'red'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 const arglm2 = arglm1 - 1 let cb = arguments[arglm1] let k1 = '' let i = 1 let arr = &#123;&#125; let k = '' const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; arglm1; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (cb(arr[k], arr1[k1]) === 0) &#123; if (i === arglm2) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_uintersect_uassoc in JavaScript","date":"2021-02-28T22:26:45.485Z","updated":"2021-02-28T22:26:45.485Z","comments":true,"path":"php/array/array_uintersect_uassoc/index.html","permalink":"https://locutus.io/php/array/array_uintersect_uassoc/index.html","excerpt":"","text":"module.exports = function array_uintersect_uassoc (arr1) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_uintersect_uassoc/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $array1 = &#123;a: 'green', b: 'brown', c: 'blue', 0: 'red'&#125; // example 1: var $array2 = &#123;a: 'GREEN', B: 'brown', 0: 'yellow', 1: 'red'&#125; // example 1: array_uintersect_uassoc($array1, $array2, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;, function (f_string1, f_string2)&#123;var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 &gt; string2) return 1; if (string1 === string2) return 0; return -1;&#125;) // returns 1: &#123;a: 'green', b: 'brown'&#125; const retArr = &#123;&#125; const arglm1 = arguments.length - 1 const arglm2 = arglm1 - 1 let cb = arguments[arglm1] let cb0 = arguments[arglm2] let k1 = '' let i = 1 let k = '' let arr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) cb = (typeof cb === 'string') ? $global[cb] : (Object.prototype.toString.call(cb) === '[object Array]') ? $global[cb[0]][cb[1]] : cb cb0 = (typeof cb0 === 'string') ? $global[cb0] : (Object.prototype.toString.call(cb0) === '[object Array]') ? $global[cb0[0]][cb0[1]] : cb0 arr1keys: for (k1 in arr1) &#123; // eslint-disable-line no-labels arrs: for (i = 1; i &lt; arglm2; i++) &#123; // eslint-disable-line no-labels arr = arguments[i] for (k in arr) &#123; if (cb0(arr[k], arr1[k1]) === 0 &amp;&amp; cb(k, k1) === 0) &#123; if (i === arguments.length - 3) &#123; retArr[k1] = arr1[k1] &#125; // If the innermost loop always leads at least once to an equal value, // continue the loop until done continue arrs // eslint-disable-line no-labels &#125; &#125; // If it reaches here, it wasn't found in at least one array, so try next value continue arr1keys // eslint-disable-line no-labels &#125; &#125; return retArr&#125;"},{"title":"PHP's array_unique in JavaScript","date":"2021-02-28T22:26:45.485Z","updated":"2021-02-28T22:26:45.485Z","comments":true,"path":"php/array/array_unique/index.html","permalink":"https://locutus.io/php/array/array_unique/index.html","excerpt":"","text":"module.exports = function array_unique (inputArr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_unique/ // original by: Carlos R. L. Rodrigues (https://www.jsfromhell.com) // input by: duncan // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Nate // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // improved by: Michael Grier // note 1: The second argument, sort_flags is not implemented; // note 1: also should be sorted (asort?) first according to docs // example 1: array_unique(['Kevin','Kevin','van','Zonneveld','Kevin']) // returns 1: &#123;0: 'Kevin', 2: 'van', 3: 'Zonneveld'&#125; // example 2: array_unique(&#123;'a': 'green', 0: 'red', 'b': 'green', 1: 'blue', 2: 'red'&#125;) // returns 2: &#123;a: 'green', 0: 'red', 1: 'blue'&#125; let key = '' const tmpArr2 = &#123;&#125; let val = '' const _arraySearch = function (needle, haystack) &#123; let fkey = '' for (fkey in haystack) &#123; if (haystack.hasOwnProperty(fkey)) &#123; if ((haystack[fkey] + '') === (needle + '')) &#123; return fkey &#125; &#125; &#125; return false &#125; for (key in inputArr) &#123; if (inputArr.hasOwnProperty(key)) &#123; val = inputArr[key] if (_arraySearch(val, tmpArr2) === false) &#123; tmpArr2[key] = val &#125; &#125; &#125; return tmpArr2&#125;"},{"title":"PHP's array_unshift in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/array_unshift/index.html","permalink":"https://locutus.io/php/array/array_unshift/index.html","excerpt":"","text":"module.exports = function array_unshift (array) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_unshift/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Martijn Wieringa // improved by: jmweb // note 1: Currently does not handle objects // example 1: array_unshift(['van', 'Zonneveld'], 'Kevin') // returns 1: 3 let i = arguments.length while (--i !== 0) &#123; arguments[0].unshift(arguments[i]) &#125; return arguments[0].length&#125;"},{"title":"PHP's array_values in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/array_values/index.html","permalink":"https://locutus.io/php/array/array_values/index.html","excerpt":"","text":"module.exports = function array_values (input) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_values/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: array_values( &#123;firstname: 'Kevin', surname: 'van Zonneveld'&#125; ) // returns 1: [ 'Kevin', 'van Zonneveld' ] const tmpArr = [] let key = '' for (key in input) &#123; tmpArr[tmpArr.length] = input[key] &#125; return tmpArr&#125;"},{"title":"PHP's array_walk in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/array_walk/index.html","permalink":"https://locutus.io/php/array/array_walk/index.html","excerpt":"","text":"module.exports = function array_walk (array, funcname, userdata) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_walk/ // original by: Johnny Mast (https://www.phpvrouwen.nl) // bugfixed by: David // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Only works with user-defined functions, not built-in functions like void() // example 1: array_walk ([3, 4], function () &#123;&#125;, 'userdata') // returns 1: true // example 2: array_walk ('mystring', function () &#123;&#125;) // returns 2: false // example 3: array_walk (&#123;\"title\":\"my title\"&#125;, function () &#123;&#125;) // returns 3: true if (!array || typeof array !== 'object') &#123; return false &#125; try &#123; if (typeof funcname === 'function') &#123; for (const key in array) &#123; if (arguments.length &gt; 2) &#123; funcname(array[key], key, userdata) &#125; else &#123; funcname(array[key], key) &#125; &#125; &#125; else &#123; return false &#125; &#125; catch (e) &#123; return false &#125; return true&#125;"},{"title":"PHP's array_walk_recursive in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/array_walk_recursive/index.html","permalink":"https://locutus.io/php/array/array_walk_recursive/index.html","excerpt":"","text":"module.exports = function array_walk_recursive (array, funcname, userdata) &#123; // eslint-disable-line camelcase // original by: Hugues Peccatte // note 1: Only works with user-defined functions, not built-in functions like void() // example 1: array_walk_recursive([3, 4], function () &#123;&#125;, 'userdata') // returns 1: true // example 2: array_walk_recursive([3, [4]], function () &#123;&#125;, 'userdata') // returns 2: true // example 3: array_walk_recursive([3, []], function () &#123;&#125;, 'userdata') // returns 3: true if (!array || typeof array !== 'object') &#123; return false &#125; if (typeof funcname !== 'function') &#123; return false &#125; for (const key in array) &#123; // apply \"funcname\" recursively only on arrays if (Object.prototype.toString.call(array[key]) === '[object Array]') &#123; const funcArgs = [array[key], funcname] if (arguments.length &gt; 2) &#123; funcArgs.push(userdata) &#125; if (array_walk_recursive.apply(null, funcArgs) === false) &#123; return false &#125; continue &#125; try &#123; if (arguments.length &gt; 2) &#123; funcname(array[key], key, userdata) &#125; else &#123; funcname(array[key], key) &#125; &#125; catch (e) &#123; return false &#125; &#125; return true&#125;"},{"title":"PHP's arsort in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/arsort/index.html","permalink":"https://locutus.io/php/array/arsort/index.html","excerpt":"","text":"module.exports = function arsort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/arsort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // note 1: SORT_STRING (as well as natsort and natcasesort) might also be // note 1: integrated into all of these functions by adapting the code at // note 1: https://sourcefrog.net/projects/natsort/natcompare.js // note 1: The examples are correct, this is a new way // note 1: Credits to: https://javascript.internet.com/math-related/bubble-sort.html // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: arsort($data) // example 1: var $result = $data // returns 1: &#123;a: 'orange', d: 'lemon', b: 'banana', c: 'apple'&#125; // example 2: ini_set('locutus.sortByReference', true) // example 2: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 2: arsort($data) // example 2: var $result = $data // returns 2: &#123;a: 'orange', d: 'lemon', b: 'banana', c: 'apple'&#125; // test: skip-1 const i18lgd = require('../i18n/i18n_loc_get_default') const strnatcmp = require('../strings/strnatcmp') const valArr = [] let valArrLen = 0 let k let i let sorter let sortByReference = false const populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings sorter = function (a, b) &#123; return strnatcmp(b, a) &#125; break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = i18lgd() sorter = $locutus.php.locales[loc].sorting break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return (a - b) &#125; break case 'SORT_REGULAR': // compare items normally (don't change types) break default: sorter = function (b, a) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' // Get key and value arrays for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; valArr.push([k, inputArr[k]]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function (a, b) &#123; return sorter(a[1], b[1]) &#125;) // Repopulate the old array for (i = 0, valArrLen = valArr.length; i &lt; valArrLen; i++) &#123; populateArr[valArr[i][0]] = valArr[i][1] if (sortByReference) &#123; inputArr[valArr[i][0]] = valArr[i][1] &#125; &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's asort in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/asort/index.html","permalink":"https://locutus.io/php/array/asort/index.html","excerpt":"","text":"module.exports = function asort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/asort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // input by: paulo kuong // bugfixed by: Adam Wallner (https://web2.bitbaro.hu/) // note 1: SORT_STRING (as well as natsort and natcasesort) might also be // note 1: integrated into all of these functions by adapting the code at // note 1: https://sourcefrog.net/projects/natsort/natcompare.js // note 1: The examples are correct, this is a new way // note 1: Credits to: https://javascript.internet.com/math-related/bubble-sort.html // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: asort($data) // example 1: var $result = $data // returns 1: &#123;c: 'apple', b: 'banana', d: 'lemon', a: 'orange'&#125; // example 2: ini_set('locutus.sortByReference', true) // example 2: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 2: asort($data) // example 2: var $result = $data // returns 2: &#123;c: 'apple', b: 'banana', d: 'lemon', a: 'orange'&#125; const strnatcmp = require('../strings/strnatcmp') const i18nlgd = require('../i18n/i18n_loc_get_default') const valArr = [] let valArrLen = 0 let k let i let sorter let sortByReference = false let populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings sorter = function (a, b) &#123; return strnatcmp(a, b) &#125; break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = i18nlgd() sorter = $locutus.php.locales[loc].sorting break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return (a - b) &#125; break case 'SORT_REGULAR': // compare items normally (don't change types) break default: sorter = function (a, b) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Get key and value arrays for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; valArr.push([k, inputArr[k]]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function (a, b) &#123; return sorter(a[1], b[1]) &#125;) // Repopulate the old array for (i = 0, valArrLen = valArr.length; i &lt; valArrLen; i++) &#123; populateArr[valArr[i][0]] = valArr[i][1] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's count in JavaScript","date":"2021-02-28T22:26:45.493Z","updated":"2021-02-28T22:26:45.493Z","comments":true,"path":"php/array/count/index.html","permalink":"https://locutus.io/php/array/count/index.html","excerpt":"","text":"module.exports = function count (mixedVar, mode) &#123; // discuss at: https://locutus.io/php/count/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Waldo Malqui Silva (https://waldo.malqui.info) // input by: merabi // bugfixed by: Soren Hansen // bugfixed by: Olivier Louvignes (https://mg-crea.com/) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: count([[0,0],[0,-4]], 'COUNT_RECURSIVE') // returns 1: 6 // example 2: count(&#123;'one' : [1,2,3,4,5]&#125;, 'COUNT_RECURSIVE') // returns 2: 6 let key let cnt = 0 if (mixedVar === null || typeof mixedVar === 'undefined') &#123; return 0 &#125; else if (mixedVar.constructor !== Array &amp;&amp; mixedVar.constructor !== Object) &#123; return 1 &#125; if (mode === 'COUNT_RECURSIVE') &#123; mode = 1 &#125; if (mode !== 1) &#123; mode = 0 &#125; for (key in mixedVar) &#123; if (mixedVar.hasOwnProperty(key)) &#123; cnt++ if (mode === 1 &amp;&amp; mixedVar[key] &amp;&amp; (mixedVar[key].constructor === Array || mixedVar[key].constructor === Object)) &#123; cnt += count(mixedVar[key], 1) &#125; &#125; &#125; return cnt&#125;"},{"title":"PHP's current in JavaScript","date":"2021-02-28T22:26:45.497Z","updated":"2021-02-28T22:26:45.497Z","comments":true,"path":"php/array/current/index.html","permalink":"https://locutus.io/php/array/current/index.html","excerpt":"","text":"module.exports = function current (arr) &#123; // discuss at: https://locutus.io/php/current/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: var $transport = ['foot', 'bike', 'car', 'plane'] // example 1: current($transport) // returns 1: 'foot' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const arrpos = pointers.indexOf(arr) const cursor = pointers[arrpos + 1] if (Object.prototype.toString.call(arr) === '[object Array]') &#123; return arr[cursor] || false &#125; let ct = 0 for (const k in arr) &#123; if (ct === cursor) &#123; return arr[k] &#125; ct++ &#125; // Empty return false&#125;"},{"title":"PHP's each in JavaScript","date":"2021-02-28T22:26:45.505Z","updated":"2021-02-28T22:26:45.505Z","comments":true,"path":"php/array/each/index.html","permalink":"https://locutus.io/php/array/each/index.html","excerpt":"","text":"module.exports = function each (arr) &#123; // discuss at: https://locutus.io/php/each/ // original by: Ates Goral (https://magnetiq.com) // revised by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: each(&#123;a: \"apple\", b: \"balloon\"&#125;) // returns 1: &#123;0: \"a\", 1: \"apple\", key: \"a\", value: \"apple\"&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const arrpos = pointers.indexOf(arr) const cursor = pointers[arrpos + 1] let pos = 0 if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; let ct = 0 for (const k in arr) &#123; if (ct === cursor) &#123; pointers[arrpos + 1] += 1 if (each.returnArrayOnly) &#123; return [k, arr[k]] &#125; else &#123; return &#123; 1: arr[k], value: arr[k], 0: k, key: k &#125; &#125; &#125; ct++ &#125; // Empty return false &#125; if (arr.length === 0 || cursor === arr.length) &#123; return false &#125; pos = cursor pointers[arrpos + 1] += 1 if (each.returnArrayOnly) &#123; return [pos, arr[pos]] &#125; else &#123; return &#123; 1: arr[pos], value: arr[pos], 0: pos, key: pos &#125; &#125;&#125;"},{"title":"PHP's end in JavaScript","date":"2021-02-28T22:26:45.505Z","updated":"2021-02-28T22:26:45.505Z","comments":true,"path":"php/array/end/index.html","permalink":"https://locutus.io/php/array/end/index.html","excerpt":"","text":"module.exports = function end (arr) &#123; // discuss at: https://locutus.io/php/end/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Legaev Andrey // revised by: J A R // revised by: Brett Zamir (https://brett-zamir.me) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // note 1: Uses global: locutus to store the array pointer // example 1: end(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;) // returns 1: 'Zonneveld' // example 2: end(['Kevin', 'van', 'Zonneveld']) // returns 2: 'Zonneveld' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const arrpos = pointers.indexOf(arr) if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; let ct = 0 let val for (const k in arr) &#123; ct++ val = arr[k] &#125; if (ct === 0) &#123; // Empty return false &#125; pointers[arrpos + 1] = ct - 1 return val &#125; if (arr.length === 0) &#123; return false &#125; pointers[arrpos + 1] = arr.length - 1 return arr[pointers[arrpos + 1]]&#125;"},{"title":"PHP's in_array in JavaScript","date":"2021-02-28T22:26:45.505Z","updated":"2021-02-28T22:26:45.505Z","comments":true,"path":"php/array/in_array/index.html","permalink":"https://locutus.io/php/array/in_array/index.html","excerpt":"","text":"module.exports = function in_array (needle, haystack, argStrict) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/in_array/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: vlado houba // improved by: Jonas Sciangula Street (Joni2Back) // input by: Billy // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: in_array('van', ['Kevin', 'van', 'Zonneveld']) // returns 1: true // example 2: in_array('vlado', &#123;0: 'Kevin', vlado: 'van', 1: 'Zonneveld'&#125;) // returns 2: false // example 3: in_array(1, ['1', '2', '3']) // example 3: in_array(1, ['1', '2', '3'], false) // returns 3: true // returns 3: true // example 4: in_array(1, ['1', '2', '3'], true) // returns 4: false let key = '' const strict = !!argStrict // we prevent the double check (strict &amp;&amp; arr[key] === ndl) || (!strict &amp;&amp; arr[key] === ndl) // in just one for, in order to improve the performance // deciding wich type of comparation will do before walk array if (strict) &#123; for (key in haystack) &#123; if (haystack[key] === needle) &#123; return true &#125; &#125; &#125; else &#123; for (key in haystack) &#123; if (haystack[key] == needle) &#123; // eslint-disable-line eqeqeq return true &#125; &#125; &#125; return false&#125;"},{"title":"PHP's array extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/array/index.html","permalink":"https://locutus.io/php/array/index.html","excerpt":"","text":""},{"title":"PHP's key in JavaScript","date":"2021-02-28T22:26:45.509Z","updated":"2021-02-28T22:26:45.509Z","comments":true,"path":"php/array/key/index.html","permalink":"https://locutus.io/php/array/key/index.html","excerpt":"","text":"module.exports = function key (arr) &#123; // discuss at: https://locutus.io/php/key/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Riddler (https://www.frontierwebdev.com/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: var $array = &#123;fruit1: 'apple', 'fruit2': 'orange'&#125; // example 1: key($array) // returns 1: 'fruit1' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const cursor = pointers[pointers.indexOf(arr) + 1] if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; let ct = 0 for (const k in arr) &#123; if (ct === cursor) &#123; return k &#125; ct++ &#125; // Empty return false &#125; if (arr.length === 0) &#123; return false &#125; return cursor&#125;"},{"title":"PHP's krsort in JavaScript","date":"2021-02-28T22:26:45.509Z","updated":"2021-02-28T22:26:45.509Z","comments":true,"path":"php/array/krsort/index.html","permalink":"https://locutus.io/php/array/krsort/index.html","excerpt":"","text":"module.exports = function krsort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/krsort/ // original by: GeekFG (https://geekfg.blogspot.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: pseudaria (https://github.com/pseudaria) // note 1: The examples are correct, this is a new way // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: krsort($data) // example 1: var $result = $data // returns 1: &#123;d: 'lemon', c: 'apple', b: 'banana', a: 'orange'&#125; // example 2: ini_set('locutus.sortByReference', true) // example 2: var $data = &#123;2: 'van', 3: 'Zonneveld', 1: 'Kevin'&#125; // example 2: krsort($data) // example 2: var $result = $data // returns 2: &#123;3: 'Zonneveld', 2: 'van', 1: 'Kevin'&#125; const i18nlgd = require('../i18n/i18n_loc_get_default') const strnatcmp = require('../strings/strnatcmp') const tmpArr = &#123;&#125; const keys = [] let sorter let i let k let sortByReference = false let populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings sorter = function (a, b) &#123; return strnatcmp(b, a) &#125; break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = i18nlgd() sorter = $locutus.locales[loc].sorting break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return (b - a) &#125; break case 'SORT_REGULAR': default: // compare items normally (don't change types) sorter = function (b, a) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; // Make a list of key names for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; keys.push(k) &#125; &#125; keys.sort(sorter) const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Rebuild array with sorted key names for (i = 0; i &lt; keys.length; i++) &#123; k = keys[i] tmpArr[k] = inputArr[k] if (sortByReference) &#123; delete inputArr[k] &#125; &#125; for (i in tmpArr) &#123; if (tmpArr.hasOwnProperty(i)) &#123; populateArr[i] = tmpArr[i] &#125; &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's next in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/next/index.html","permalink":"https://locutus.io/php/array/next/index.html","excerpt":"","text":"module.exports = function next (arr) &#123; // discuss at: https://locutus.io/php/next/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: var $transport = ['foot', 'bike', 'car', 'plane'] // example 1: next($transport) // example 1: next($transport) // returns 1: 'car' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const arrpos = pointers.indexOf(arr) const cursor = pointers[arrpos + 1] if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; let ct = 0 for (const k in arr) &#123; if (ct === cursor + 1) &#123; pointers[arrpos + 1] += 1 return arr[k] &#125; ct++ &#125; // End return false &#125; if (arr.length === 0 || cursor === (arr.length - 1)) &#123; return false &#125; pointers[arrpos + 1] += 1 return arr[pointers[arrpos + 1]]&#125;"},{"title":"PHP's pos in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/pos/index.html","permalink":"https://locutus.io/php/array/pos/index.html","excerpt":"","text":"module.exports = function pos (arr) &#123; // discuss at: https://locutus.io/php/pos/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: var $transport = ['foot', 'bike', 'car', 'plane'] // example 1: pos($transport) // returns 1: 'foot' const current = require('../array/current') return current(arr)&#125;"},{"title":"PHP's prev in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/prev/index.html","permalink":"https://locutus.io/php/array/prev/index.html","excerpt":"","text":"module.exports = function prev (arr) &#123; // discuss at: https://locutus.io/php/prev/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: var $transport = ['foot', 'bike', 'car', 'plane'] // example 1: prev($transport) // returns 1: false const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; const arrpos = pointers.indexOf(arr) const cursor = pointers[arrpos + 1] if (pointers.indexOf(arr) === -1 || cursor === 0) &#123; return false &#125; if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; let ct = 0 for (const k in arr) &#123; if (ct === cursor - 1) &#123; pointers[arrpos + 1] -= 1 return arr[k] &#125; ct++ &#125; // Shouldn't reach here &#125; if (arr.length === 0) &#123; return false &#125; pointers[arrpos + 1] -= 1 return arr[pointers[arrpos + 1]]&#125;"},{"title":"PHP's range in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/range/index.html","permalink":"https://locutus.io/php/array/range/index.html","excerpt":"","text":"module.exports = function range (low, high, step) &#123; // discuss at: https://locutus.io/php/range/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // example 1: range ( 0, 12 ) // returns 1: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] // example 2: range( 0, 100, 10 ) // returns 2: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100] // example 3: range( 'a', 'i' ) // returns 3: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'] // example 4: range( 'c', 'a' ) // returns 4: ['c', 'b', 'a'] const matrix = [] let iVal let endval let plus const walker = step || 1 let chars = false if (!isNaN(low) &amp;&amp; !isNaN(high)) &#123; iVal = low endval = high &#125; else if (isNaN(low) &amp;&amp; isNaN(high)) &#123; chars = true iVal = low.charCodeAt(0) endval = high.charCodeAt(0) &#125; else &#123; iVal = (isNaN(low) ? 0 : low) endval = (isNaN(high) ? 0 : high) &#125; plus = !(iVal &gt; endval) if (plus) &#123; while (iVal &lt;= endval) &#123; matrix.push(((chars) ? String.fromCharCode(iVal) : iVal)) iVal += walker &#125; &#125; else &#123; while (iVal &gt;= endval) &#123; matrix.push(((chars) ? String.fromCharCode(iVal) : iVal)) iVal -= walker &#125; &#125; return matrix&#125;"},{"title":"PHP's reset in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/reset/index.html","permalink":"https://locutus.io/php/array/reset/index.html","excerpt":"","text":"module.exports = function reset (arr) &#123; // discuss at: https://locutus.io/php/reset/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Legaev Andrey // revised by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store the array pointer // example 1: reset(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;) // returns 1: 'Kevin' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.pointers = $locutus.php.pointers || [] const pointers = $locutus.php.pointers const indexOf = function (value) &#123; for (let i = 0, length = this.length; i &lt; length; i++) &#123; if (this[i] === value) &#123; return i &#125; &#125; return -1 &#125; if (!pointers.indexOf) &#123; pointers.indexOf = indexOf &#125; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; const arrpos = pointers.indexOf(arr) if (Object.prototype.toString.call(arr) !== '[object Array]') &#123; for (const k in arr) &#123; if (pointers.indexOf(arr) === -1) &#123; pointers.push(arr, 0) &#125; else &#123; pointers[arrpos + 1] = 0 &#125; return arr[k] &#125; // Empty return false &#125; if (arr.length === 0) &#123; return false &#125; pointers[arrpos + 1] = 0 return arr[pointers[arrpos + 1]]&#125;"},{"title":"PHP's rsort in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/rsort/index.html","permalink":"https://locutus.io/php/array/rsort/index.html","excerpt":"","text":"module.exports = function rsort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/rsort/ // original by: Kevin van Zonneveld (https://kvz.io) // revised by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: SORT_STRING (as well as natsort and natcasesort) might also be // note 1: integrated into all of these functions by adapting the code at // note 1: https://sourcefrog.net/projects/natsort/natcompare.js // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $arr = ['Kevin', 'van', 'Zonneveld'] // example 1: rsort($arr) // example 1: var $result = $arr // returns 1: ['van', 'Zonneveld', 'Kevin'] // example 2: ini_set('locutus.sortByReference', true) // example 2: var $fruits = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 2: rsort($fruits) // example 2: var $result = $fruits // returns 2: &#123;0: 'orange', 1: 'lemon', 2: 'banana', 3: 'apple'&#125; // test: skip-1 const i18nlgd = require('../i18n/i18n_loc_get_default') const strnatcmp = require('../strings/strnatcmp') let sorter let i let k let sortByReference = false let populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings sorter = function (a, b) &#123; return strnatcmp(b, a) &#125; break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = i18nlgd() sorter = $locutus.locales[loc].sorting break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return (b - a) &#125; break case 'SORT_REGULAR': default: // compare items normally (don't change types) sorter = function (b, a) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr const valArr = [] for (k in inputArr) &#123; // Get key and value arrays if (inputArr.hasOwnProperty(k)) &#123; valArr.push(inputArr[k]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(sorter) for (i = 0; i &lt; valArr.length; i++) &#123; // Repopulate the old array populateArr[i] = valArr[i] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's shuffle in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/shuffle/index.html","permalink":"https://locutus.io/php/array/shuffle/index.html","excerpt":"","text":"module.exports = function shuffle (inputArr) &#123; // discuss at: https://locutus.io/php/shuffle/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // revised by: Kevin van Zonneveld (https://kvz.io) // revised by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: var $data = &#123;5:'a', 2:'3', 3:'c', 4:5, 'q':5&#125; // example 1: ini_set('locutus.sortByReference', true) // example 1: shuffle($data) // example 1: var $result = $data.q // returns 1: 5 const valArr = [] let k = '' let i = 0 let sortByReference = false let populateArr = [] for (k in inputArr) &#123; // Get key and value arrays if (inputArr.hasOwnProperty(k)) &#123; valArr.push(inputArr[k]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function () &#123; return 0.5 - Math.random() &#125;) const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr for (i = 0; i &lt; valArr.length; i++) &#123; // Repopulate the old array populateArr[i] = valArr[i] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's sizeof in JavaScript","date":"2021-02-28T22:26:45.517Z","updated":"2021-02-28T22:26:45.517Z","comments":true,"path":"php/array/sizeof/index.html","permalink":"https://locutus.io/php/array/sizeof/index.html","excerpt":"","text":"module.exports = function sizeof (mixedVar, mode) &#123; // discuss at: https://locutus.io/php/sizeof/ // original by: Philip Peterson // example 1: sizeof([[0,0],[0,-4]], 'COUNT_RECURSIVE') // returns 1: 6 // example 2: sizeof(&#123;'one' : [1,2,3,4,5]&#125;, 'COUNT_RECURSIVE') // returns 2: 6 const count = require('../array/count') return count(mixedVar, mode)&#125;"},{"title":"PHP's sort in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/array/sort/index.html","permalink":"https://locutus.io/php/array/sort/index.html","excerpt":"","text":"module.exports = function sort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/sort/ // original by: Kevin van Zonneveld (https://kvz.io) // revised by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: SORT_STRING (as well as natsort and natcasesort) might also be // note 1: integrated into all of these functions by adapting the code at // note 1: https://sourcefrog.net/projects/natsort/natcompare.js // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $arr = ['Kevin', 'van', 'Zonneveld'] // example 1: sort($arr) // example 1: var $result = $arr // returns 1: ['Kevin', 'Zonneveld', 'van'] // example 2: ini_set('locutus.sortByReference', true) // example 2: var $fruits = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 2: sort($fruits) // example 2: var $result = $fruits // returns 2: &#123;0: 'apple', 1: 'banana', 2: 'lemon', 3: 'orange'&#125; // test: skip-1 const i18nlgd = require('../i18n/i18n_loc_get_default') let sorter let i let k let sortByReference = false let populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings // leave sorter undefined, so built-in comparison is used break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = $locutus.php.locales[i18nlgd()] if (loc &amp;&amp; loc.sorting) &#123; // if sorting exists on locale object, use it // otherwise let sorter be undefined // to fallback to built-in behavior sorter = loc.sorting &#125; break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return (a - b) &#125; break case 'SORT_REGULAR': default: sorter = function (a, b) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr const valArr = [] for (k in inputArr) &#123; // Get key and value arrays if (inputArr.hasOwnProperty(k)) &#123; valArr.push(inputArr[k]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(sorter) for (i = 0; i &lt; valArr.length; i++) &#123; // Repopulate the old array populateArr[i] = valArr[i] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's uasort in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/array/uasort/index.html","permalink":"https://locutus.io/php/array/uasort/index.html","excerpt":"","text":"module.exports = function uasort (inputArr, sorter) &#123; // discuss at: https://locutus.io/php/uasort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // example 1: var $sorter = function (a, b) &#123; if (a &gt; b) &#123;return 1;&#125;if (a &lt; b) &#123;return -1;&#125; return 0;&#125; // example 1: var $fruits = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: uasort($fruits, $sorter) // example 1: var $result = $fruits // returns 1: &#123;c: 'apple', b: 'banana', d: 'lemon', a: 'orange'&#125; const valArr = [] let k = '' let i = 0 let sortByReference = false let populateArr = &#123;&#125; if (typeof sorter === 'string') &#123; sorter = this[sorter] &#125; else if (Object.prototype.toString.call(sorter) === '[object Array]') &#123; sorter = this[sorter[0]][sorter[1]] &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr for (k in inputArr) &#123; // Get key and value arrays if (inputArr.hasOwnProperty(k)) &#123; valArr.push([k, inputArr[k]]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function (a, b) &#123; return sorter(a[1], b[1]) &#125;) for (i = 0; i &lt; valArr.length; i++) &#123; // Repopulate the old array populateArr[valArr[i][0]] = valArr[i][1] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's uksort in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/array/uksort/index.html","permalink":"https://locutus.io/php/array/uksort/index.html","excerpt":"","text":"module.exports = function uksort (inputArr, sorter) &#123; // discuss at: https://locutus.io/php/uksort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: The examples are correct, this is a new way // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // example 1: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: uksort($data, function (key1, key2)&#123; return (key1 === key2 ? 0 : (key1 &gt; key2 ? 1 : -1)); &#125;) // example 1: var $result = $data // returns 1: &#123;a: 'orange', b: 'banana', c: 'apple', d: 'lemon'&#125; const tmpArr = &#123;&#125; const keys = [] let i = 0 let k = '' let sortByReference = false let populateArr = &#123;&#125; if (typeof sorter === 'string') &#123; sorter = this.window[sorter] &#125; // Make a list of key names for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; keys.push(k) &#125; &#125; // Sort key names try &#123; if (sorter) &#123; keys.sort(sorter) &#125; else &#123; keys.sort() &#125; &#125; catch (e) &#123; return false &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Rebuild array with sorted key names for (i = 0; i &lt; keys.length; i++) &#123; k = keys[i] tmpArr[k] = inputArr[k] if (sortByReference) &#123; delete inputArr[k] &#125; &#125; for (i in tmpArr) &#123; if (tmpArr.hasOwnProperty(i)) &#123; populateArr[i] = tmpArr[i] &#125; &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's usort in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/array/usort/index.html","permalink":"https://locutus.io/php/array/usort/index.html","excerpt":"","text":"module.exports = function usort (inputArr, sorter) &#123; // discuss at: https://locutus.io/php/usort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // example 1: var $stuff = &#123;d: '3', a: '1', b: '11', c: '4'&#125; // example 1: usort($stuff, function (a, b) &#123; return (a - b) &#125;) // example 1: var $result = $stuff // returns 1: &#123;0: '1', 1: '3', 2: '4', 3: '11'&#125; const valArr = [] let k = '' let i = 0 let sortByReference = false let populateArr = &#123;&#125; if (typeof sorter === 'string') &#123; sorter = this[sorter] &#125; else if (Object.prototype.toString.call(sorter) === '[object Array]') &#123; sorter = this[sorter[0]][sorter[1]] &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr for (k in inputArr) &#123; // Get key and value arrays if (inputArr.hasOwnProperty(k)) &#123; valArr.push(inputArr[k]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; try &#123; valArr.sort(sorter) &#125; catch (e) &#123; return false &#125; for (i = 0; i &lt; valArr.length; i++) &#123; // Repopulate the old array populateArr[i] = valArr[i] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's bcadd in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/bc/bcadd/index.html","permalink":"https://locutus.io/php/bc/bcadd/index.html","excerpt":"","text":"module.exports = function bcadd (leftOperand, rightOperand, scale) &#123; // discuss at: https://locutus.io/php/bcadd/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcadd('1', '2') // returns 1: '3' // example 2: bcadd('-1', '5', 4) // returns 2: '4.0000' // example 3: bcadd('1928372132132819737213', '8728932001983192837219398127471', 2) // returns 3: '8728932003911564969352217864684.00' const bc = require('../_helpers/_bc') const libbcmath = bc() let first, second, result if (typeof scale === 'undefined') &#123; scale = libbcmath.scale &#125; scale = ((scale &lt; 0) ? 0 : scale) // create objects first = libbcmath.bc_init_num() second = libbcmath.bc_init_num() result = libbcmath.bc_init_num() first = libbcmath.php_str2num(leftOperand.toString()) second = libbcmath.php_str2num(rightOperand.toString()) result = libbcmath.bc_add(first, second, scale) if (result.n_scale &gt; scale) &#123; result.n_scale = scale &#125; return result.toString()&#125;"},{"title":"PHP's bccomp in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/bc/bccomp/index.html","permalink":"https://locutus.io/php/bc/bccomp/index.html","excerpt":"","text":"module.exports = function bccomp (leftOperand, rightOperand, scale) &#123; // discuss at: https://locutus.io/php/bccomp/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bccomp('-1', '5', 4) // returns 1: -1 // example 2: bccomp('1928372132132819737213', '8728932001983192837219398127471') // returns 2: -1 // example 3: bccomp('1.00000000000000000001', '1', 2) // returns 3: 0 // example 4: bccomp('97321', '2321') // returns 4: 1 const bc = require('../_helpers/_bc') const libbcmath = bc() // bc_num let first, second if (typeof scale === 'undefined') &#123; scale = libbcmath.scale &#125; scale = ((scale &lt; 0) ? 0 : scale) first = libbcmath.bc_init_num() second = libbcmath.bc_init_num() // note bc_ not php_str2num first = libbcmath.bc_str2num(leftOperand.toString(), scale) // note bc_ not php_str2num second = libbcmath.bc_str2num(rightOperand.toString(), scale) return libbcmath.bc_compare(first, second, scale)&#125;"},{"title":"PHP's bcdiv in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/bc/bcdiv/index.html","permalink":"https://locutus.io/php/bc/bcdiv/index.html","excerpt":"","text":"module.exports = function bcdiv (leftOperand, rightOperand, scale) &#123; // discuss at: https://locutus.io/php/bcdiv/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcdiv('1', '2') // returns 1: '0' // example 2: bcdiv('1', '2', 2) // returns 2: '0.50' // example 3: bcdiv('-1', '5', 4) // returns 3: '-0.2000' // example 4: bcdiv('8728932001983192837219398127471', '1928372132132819737213', 2) // returns 4: '4526580661.75' const _bc = require('../_helpers/_bc') const libbcmath = _bc() let first, second, result if (typeof scale === 'undefined') &#123; scale = libbcmath.scale &#125; scale = ((scale &lt; 0) ? 0 : scale) // create objects first = libbcmath.bc_init_num() second = libbcmath.bc_init_num() result = libbcmath.bc_init_num() first = libbcmath.php_str2num(leftOperand.toString()) second = libbcmath.php_str2num(rightOperand.toString()) result = libbcmath.bc_divide(first, second, scale) if (result === -1) &#123; // error throw new Error(11, '(BC) Division by zero') &#125; if (result.n_scale &gt; scale) &#123; result.n_scale = scale &#125; return result.toString()&#125;"},{"title":"PHP's bcmul in JavaScript","date":"2021-02-28T22:26:45.525Z","updated":"2021-02-28T22:26:45.525Z","comments":true,"path":"php/bc/bcmul/index.html","permalink":"https://locutus.io/php/bc/bcmul/index.html","excerpt":"","text":"module.exports = function bcmul (leftOperand, rightOperand, scale) &#123; // discuss at: https://locutus.io/php/bcmul/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcmul('1', '2') // returns 1: '2' // example 2: bcmul('-3', '5') // returns 2: '-15' // example 3: bcmul('1234567890', '9876543210') // returns 3: '12193263111263526900' // example 4: bcmul('2.5', '1.5', 2) // returns 4: '3.75' const _bc = require('../_helpers/_bc') const libbcmath = _bc() let first, second, result if (typeof scale === 'undefined') &#123; scale = libbcmath.scale &#125; scale = ((scale &lt; 0) ? 0 : scale) // create objects first = libbcmath.bc_init_num() second = libbcmath.bc_init_num() result = libbcmath.bc_init_num() first = libbcmath.php_str2num(leftOperand.toString()) second = libbcmath.php_str2num(rightOperand.toString()) result = libbcmath.bc_multiply(first, second, scale) if (result.n_scale &gt; scale) &#123; result.n_scale = scale &#125; return result.toString()&#125;"},{"title":"PHP's bcround in JavaScript","date":"2021-02-28T22:26:45.529Z","updated":"2021-02-28T22:26:45.529Z","comments":true,"path":"php/bc/bcround/index.html","permalink":"https://locutus.io/php/bc/bcround/index.html","excerpt":"","text":"module.exports = function bcround (val, precision) &#123; // discuss at: https://locutus.io/php/bcround/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcround(1, 2) // returns 1: '1.00' const _bc = require('../_helpers/_bc') const libbcmath = _bc() let temp, result, digit let rightOperand // create number temp = libbcmath.bc_init_num() temp = libbcmath.php_str2num(val.toString()) // check if any rounding needs if (precision &gt;= temp.n_scale) &#123; // nothing to round, just add the zeros. while (temp.n_scale &lt; precision) &#123; temp.n_value[temp.n_len + temp.n_scale] = 0 temp.n_scale++ &#125; return temp.toString() &#125; // get the digit we are checking (1 after the precision) // loop through digits after the precision marker digit = temp.n_value[temp.n_len + precision] rightOperand = libbcmath.bc_init_num() rightOperand = libbcmath.bc_new_num(1, precision) if (digit &gt;= 5) &#123; // round away from zero by adding 1 (or -1) at the \"precision\".. // ie 1.44999 @ 3dp = (1.44999 + 0.001).toString().substr(0,5) rightOperand.n_value[rightOperand.n_len + rightOperand.n_scale - 1] = 1 if (temp.n_sign === libbcmath.MINUS) &#123; // round down rightOperand.n_sign = libbcmath.MINUS &#125; result = libbcmath.bc_add(temp, rightOperand, precision) &#125; else &#123; // leave-as-is.. just truncate it. result = temp &#125; if (result.n_scale &gt; precision) &#123; result.n_scale = precision &#125; return result.toString()&#125;"},{"title":"PHP's bcscale in JavaScript","date":"2021-02-28T22:26:45.529Z","updated":"2021-02-28T22:26:45.529Z","comments":true,"path":"php/bc/bcscale/index.html","permalink":"https://locutus.io/php/bc/bcscale/index.html","excerpt":"","text":"module.exports = function bcscale (scale) &#123; // discuss at: https://locutus.io/php/bcscale/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcscale(1) // returns 1: true const _bc = require('../_helpers/_bc') const libbcmath = _bc() scale = parseInt(scale, 10) if (isNaN(scale)) &#123; return false &#125; if (scale &lt; 0) &#123; return false &#125; libbcmath.scale = scale return true&#125;"},{"title":"PHP's bcsub in JavaScript","date":"2021-02-28T22:26:45.529Z","updated":"2021-02-28T22:26:45.529Z","comments":true,"path":"php/bc/bcsub/index.html","permalink":"https://locutus.io/php/bc/bcsub/index.html","excerpt":"","text":"module.exports = function bcsub (leftOperand, rightOperand, scale) &#123; // discuss at: https://locutus.io/php/bcsub/ // original by: lmeyrick (https://sourceforge.net/projects/bcmath-js/) // example 1: bcsub('1', '2') // returns 1: '-1' // example 2: bcsub('-1', '5', 4) // returns 2: '-6.0000' // example 3: bcsub('8728932001983192837219398127471', '1928372132132819737213', 2) // returns 3: '8728932000054820705086578390258.00' const _bc = require('../_helpers/_bc') const libbcmath = _bc() let first, second, result if (typeof scale === 'undefined') &#123; scale = libbcmath.scale &#125; scale = ((scale &lt; 0) ? 0 : scale) // create objects first = libbcmath.bc_init_num() second = libbcmath.bc_init_num() result = libbcmath.bc_init_num() first = libbcmath.php_str2num(leftOperand.toString()) second = libbcmath.php_str2num(rightOperand.toString()) result = libbcmath.bc_sub(first, second, scale) if (result.n_scale &gt; scale) &#123; result.n_scale = scale &#125; return result.toString()&#125;"},{"title":"PHP's bc extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/bc/index.html","permalink":"https://locutus.io/php/bc/index.html","excerpt":"","text":""},{"title":"PHP's ctype_alnum in JavaScript","date":"2021-02-28T22:26:45.529Z","updated":"2021-02-28T22:26:45.529Z","comments":true,"path":"php/ctype/ctype_alnum/index.html","permalink":"https://locutus.io/php/ctype/ctype_alnum/index.html","excerpt":"","text":"module.exports = function ctype_alnum (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_alnum/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_alnum('AbC12') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.an) !== -1&#125;"},{"title":"PHP's ctype_alpha in JavaScript","date":"2021-02-28T22:26:45.533Z","updated":"2021-02-28T22:26:45.533Z","comments":true,"path":"php/ctype/ctype_alpha/index.html","permalink":"https://locutus.io/php/ctype/ctype_alpha/index.html","excerpt":"","text":"module.exports = function ctype_alpha (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_alpha/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_alpha('Az') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.al) !== -1&#125;"},{"title":"PHP's ctype_cntrl in JavaScript","date":"2021-02-28T22:26:45.533Z","updated":"2021-02-28T22:26:45.533Z","comments":true,"path":"php/ctype/ctype_cntrl/index.html","permalink":"https://locutus.io/php/ctype/ctype_cntrl/index.html","excerpt":"","text":"module.exports = function ctype_cntrl (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_cntrl/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_cntrl('\\u0020') // returns 1: false // example 2: ctype_cntrl('\\u001F') // returns 2: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.ct) !== -1&#125;"},{"title":"PHP's ctype_digit in JavaScript","date":"2021-02-28T22:26:45.533Z","updated":"2021-02-28T22:26:45.533Z","comments":true,"path":"php/ctype/ctype_digit/index.html","permalink":"https://locutus.io/php/ctype/ctype_digit/index.html","excerpt":"","text":"module.exports = function ctype_digit (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_digit/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_digit('150') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.dg) !== -1&#125;"},{"title":"PHP's ctype_graph in JavaScript","date":"2021-02-28T22:26:45.533Z","updated":"2021-02-28T22:26:45.533Z","comments":true,"path":"php/ctype/ctype_graph/index.html","permalink":"https://locutus.io/php/ctype/ctype_graph/index.html","excerpt":"","text":"module.exports = function ctype_graph (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_graph/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_graph('!%') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.gr) !== -1&#125;"},{"title":"PHP's ctype_lower in JavaScript","date":"2021-02-28T22:26:45.537Z","updated":"2021-02-28T22:26:45.537Z","comments":true,"path":"php/ctype/ctype_lower/index.html","permalink":"https://locutus.io/php/ctype/ctype_lower/index.html","excerpt":"","text":"module.exports = function ctype_lower (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_lower/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_lower('abc') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.lw) !== -1&#125;"},{"title":"PHP's ctype_print in JavaScript","date":"2021-02-28T22:26:45.537Z","updated":"2021-02-28T22:26:45.537Z","comments":true,"path":"php/ctype/ctype_print/index.html","permalink":"https://locutus.io/php/ctype/ctype_print/index.html","excerpt":"","text":"module.exports = function ctype_print (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_print/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_print('AbC!#12') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.pr) !== -1&#125;"},{"title":"PHP's ctype_punct in JavaScript","date":"2021-02-28T22:26:45.537Z","updated":"2021-02-28T22:26:45.537Z","comments":true,"path":"php/ctype/ctype_punct/index.html","permalink":"https://locutus.io/php/ctype/ctype_punct/index.html","excerpt":"","text":"module.exports = function ctype_punct (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_punct/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_punct('!?') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.pu) !== -1&#125;"},{"title":"PHP's ctype_space in JavaScript","date":"2021-02-28T22:26:45.537Z","updated":"2021-02-28T22:26:45.537Z","comments":true,"path":"php/ctype/ctype_space/index.html","permalink":"https://locutus.io/php/ctype/ctype_space/index.html","excerpt":"","text":"module.exports = function ctype_space (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_space/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_space('\\t\\n') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.sp) !== -1&#125;"},{"title":"PHP's ctype_upper in JavaScript","date":"2021-02-28T22:26:45.541Z","updated":"2021-02-28T22:26:45.541Z","comments":true,"path":"php/ctype/ctype_upper/index.html","permalink":"https://locutus.io/php/ctype/ctype_upper/index.html","excerpt":"","text":"module.exports = function ctype_upper (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_upper/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_upper('AZ') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.up) !== -1&#125;"},{"title":"PHP's ctype_xdigit in JavaScript","date":"2021-02-28T22:26:45.541Z","updated":"2021-02-28T22:26:45.541Z","comments":true,"path":"php/ctype/ctype_xdigit/index.html","permalink":"https://locutus.io/php/ctype/ctype_xdigit/index.html","excerpt":"","text":"module.exports = function ctype_xdigit (text) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ctype_xdigit/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: ctype_xdigit('01dF') // returns 1: true const setlocale = require('../strings/setlocale') if (typeof text !== 'string') &#123; return false &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const p = $locutus.php return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.xd) !== -1&#125;"},{"title":"PHP's ctype extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/ctype/index.html","permalink":"https://locutus.io/php/ctype/index.html","excerpt":"","text":""},{"title":"PHP's checkdate in JavaScript","date":"2021-02-28T22:26:45.541Z","updated":"2021-02-28T22:26:45.541Z","comments":true,"path":"php/datetime/checkdate/index.html","permalink":"https://locutus.io/php/datetime/checkdate/index.html","excerpt":"","text":"module.exports = function checkdate (m, d, y) &#123; // discuss at: https://locutus.io/php/checkdate/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Pyerre // improved by: Theriault (https://github.com/Theriault) // example 1: checkdate(12, 31, 2000) // returns 1: true // example 2: checkdate(2, 29, 2001) // returns 2: false // example 3: checkdate(3, 31, 2008) // returns 3: true // example 4: checkdate(1, 390, 2000) // returns 4: false return m &gt; 0 &amp;&amp; m &lt; 13 &amp;&amp; y &gt; 0 &amp;&amp; y &lt; 32768 &amp;&amp; d &gt; 0 &amp;&amp; d &lt;= (new Date(y, m, 0)) .getDate()&#125;"},{"title":"PHP's date_parse in JavaScript","date":"2021-02-28T22:26:45.541Z","updated":"2021-02-28T22:26:45.541Z","comments":true,"path":"php/datetime/date_parse/index.html","permalink":"https://locutus.io/php/datetime/date_parse/index.html","excerpt":"","text":"module.exports = function date_parse (date) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/date_parse/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: date_parse('2006-12-12 10:00:00') // returns 1: &#123;year : 2006, month: 12, day: 12, hour: 10, minute: 0, second: 0, fraction: 0, is_localtime: false&#125; const strtotime = require('../datetime/strtotime') let ts try &#123; ts = strtotime(date) &#125; catch (e) &#123; ts = false &#125; if (!ts) &#123; return false &#125; const dt = new Date(ts * 1000) const retObj = &#123;&#125; retObj.year = dt.getFullYear() retObj.month = dt.getMonth() + 1 retObj.day = dt.getDate() retObj.hour = dt.getHours() retObj.minute = dt.getMinutes() retObj.second = dt.getSeconds() retObj.fraction = parseFloat('0.' + dt.getMilliseconds()) retObj.is_localtime = dt.getTimezoneOffset() !== 0 return retObj&#125;"},{"title":"PHP's getdate in JavaScript","date":"2021-02-28T22:26:45.557Z","updated":"2021-02-28T22:26:45.557Z","comments":true,"path":"php/datetime/getdate/index.html","permalink":"https://locutus.io/php/datetime/getdate/index.html","excerpt":"","text":"module.exports = function getdate (timestamp) &#123; // discuss at: https://locutus.io/php/getdate/ // original by: Paulo Freitas // input by: Alex // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: getdate(1055901520) // returns 1: &#123;'seconds': 40, 'minutes': 58, 'hours': 1, 'mday': 18, 'wday': 3, 'mon': 6, 'year': 2003, 'yday': 168, 'weekday': 'Wednesday', 'month': 'June', '0': 1055901520&#125; const _w = [ 'Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur' ] const _m = [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ] const d = ((typeof timestamp === 'undefined') ? new Date() : (timestamp instanceof Date) ? new Date(timestamp) // Not provided : new Date(timestamp * 1000) // Javascript Date() // UNIX timestamp (auto-convert to int) ) const w = d.getDay() const m = d.getMonth() const y = d.getFullYear() const r = &#123;&#125; r.seconds = d.getSeconds() r.minutes = d.getMinutes() r.hours = d.getHours() r.mday = d.getDate() r.wday = w r.mon = m + 1 r.year = y r.yday = Math.floor((d - (new Date(y, 0, 1))) / 86400000) r.weekday = _w[w] + 'day' r.month = _m[m] r['0'] = parseInt(d.getTime() / 1000, 10) return r&#125;"},{"title":"PHP's gettimeofday in JavaScript","date":"2021-02-28T22:26:45.557Z","updated":"2021-02-28T22:26:45.557Z","comments":true,"path":"php/datetime/gettimeofday/index.html","permalink":"https://locutus.io/php/datetime/gettimeofday/index.html","excerpt":"","text":"module.exports = function gettimeofday (returnFloat) &#123; // discuss at: https://locutus.io/php/gettimeofday/ // original by: Brett Zamir (https://brett-zamir.me) // original by: Josh Fraser (https://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/) // parts by: Breaking Par Consulting Inc (https://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7) // revised by: Theriault (https://github.com/Theriault) // example 1: var $obj = gettimeofday() // example 1: var $result = ('sec' in $obj &amp;&amp; 'usec' in $obj &amp;&amp; 'minuteswest' in $obj &amp;&amp;80, 'dsttime' in $obj) // returns 1: true // example 2: var $timeStamp = gettimeofday(true) // example 2: var $result = $timeStamp &gt; 1000000000 &amp;&amp; $timeStamp &lt; 2000000000 // returns 2: true const t = new Date() let y = 0 if (returnFloat) &#123; return t.getTime() / 1000 &#125; // Store current year. y = t.getFullYear() return &#123; sec: t.getUTCSeconds(), usec: t.getUTCMilliseconds() * 1000, minuteswest: t.getTimezoneOffset(), // Compare Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC to see if DST is observed. dsttime: 0 + (((new Date(y, 0)) - Date.UTC(y, 0)) !== ((new Date(y, 6)) - Date.UTC(y, 6))) &#125;&#125;"},{"title":"PHP's gmdate in JavaScript","date":"2021-02-28T22:26:45.557Z","updated":"2021-02-28T22:26:45.557Z","comments":true,"path":"php/datetime/gmdate/index.html","permalink":"https://locutus.io/php/datetime/gmdate/index.html","excerpt":"","text":"module.exports = function gmdate (format, timestamp) &#123; // discuss at: https://locutus.io/php/gmdate/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Alex // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: gmdate('H:m:s \\\\m \\\\i\\\\s \\\\m\\\\o\\\\n\\\\t\\\\h', 1062402400); // Return will depend on your timezone // returns 1: '07:09:40 m is month' const date = require('../datetime/date') const dt = typeof timestamp === 'undefined' ? new Date() // Not provided : timestamp instanceof Date ? new Date(timestamp) // Javascript Date() : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int) timestamp = Date.parse(dt.toUTCString().slice(0, -4)) / 1000 return date(format, timestamp)&#125;"},{"title":"PHP's gmmktime in JavaScript","date":"2021-02-28T22:26:45.565Z","updated":"2021-02-28T22:26:45.565Z","comments":true,"path":"php/datetime/gmmktime/index.html","permalink":"https://locutus.io/php/datetime/gmmktime/index.html","excerpt":"","text":"module.exports = function gmmktime () &#123; // discuss at: https://locutus.io/php/gmmktime/ // original by: Brett Zamir (https://brett-zamir.me) // original by: mktime // example 1: gmmktime(14, 10, 2, 2, 1, 2008) // returns 1: 1201875002 // example 2: gmmktime(0, 0, -1, 1, 1, 1970) // returns 2: -1 const d = new Date() const r = arguments let i = 0 const e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear'] for (i = 0; i &lt; e.length; i++) &#123; if (typeof r[i] === 'undefined') &#123; r[i] = d['getUTC' + e[i]]() // +1 to fix JS months. r[i] += (i === 3) &#125; else &#123; r[i] = parseInt(r[i], 10) if (isNaN(r[i])) &#123; return false &#125; &#125; &#125; // Map years 0-69 to 2000-2069 and years 70-100 to 1970-2000. r[5] += (r[5] &gt;= 0 ? (r[5] &lt;= 69 ? 2e3 : (r[5] &lt;= 100 ? 1900 : 0)) : 0) // Set year, month (-1 to fix JS months), and date. // !This must come before the call to setHours! d.setUTCFullYear(r[5], r[3] - 1, r[4]) // Set hours, minutes, and seconds. d.setUTCHours(r[0], r[1], r[2]) const time = d.getTime() // Divide milliseconds by 1000 to return seconds and drop decimal. // Add 1 second if negative or it'll be off from PHP by 1 second. return (time / 1e3 &gt;&gt; 0) - (time &lt; 0)&#125;"},{"title":"PHP's gmstrftime in JavaScript","date":"2021-02-28T22:26:45.565Z","updated":"2021-02-28T22:26:45.565Z","comments":true,"path":"php/datetime/gmstrftime/index.html","permalink":"https://locutus.io/php/datetime/gmstrftime/index.html","excerpt":"","text":"module.exports = function gmstrftime (format, timestamp) &#123; // discuss at: https://locutus.io/php/gmstrftime/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Alex // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: gmstrftime(\"%A\", 1062462400) // returns 1: 'Tuesday' const strftime = require('../datetime/strftime') const _date = (typeof timestamp === 'undefined') ? new Date() : (timestamp instanceof Date) ? new Date(timestamp) : new Date(timestamp * 1000) timestamp = Date.parse(_date.toUTCString().slice(0, -4)) / 1000 return strftime(format, timestamp)&#125;"},{"title":"PHP's idate in JavaScript","date":"2021-02-28T22:26:45.565Z","updated":"2021-02-28T22:26:45.565Z","comments":true,"path":"php/datetime/idate/index.html","permalink":"https://locutus.io/php/datetime/idate/index.html","excerpt":"","text":"module.exports = function idate (format, timestamp) &#123; // discuss at: https://locutus.io/php/idate/ // original by: Brett Zamir (https://brett-zamir.me) // original by: date // original by: gettimeofday // input by: Alex // bugfixed by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // example 1: idate('y', 1255633200) // returns 1: 9 if (format === undefined) &#123; throw new Error('idate() expects at least 1 parameter, 0 given') &#125; if (!format.length || format.length &gt; 1) &#123; throw new Error('idate format is one char') &#125; // @todo: Need to allow date_default_timezone_set() (check for $locutus.default_timezone and use) const _date = (typeof timestamp === 'undefined') ? new Date() : (timestamp instanceof Date) ? new Date(timestamp) : new Date(timestamp * 1000) let a switch (format) &#123; case 'B': return Math.floor(( (_date.getUTCHours() * 36e2) + (_date.getUTCMinutes() * 60) + _date.getUTCSeconds() + 36e2 ) / 86.4) % 1e3 case 'd': return _date.getDate() case 'h': return _date.getHours() % 12 || 12 case 'H': return _date.getHours() case 'i': return _date.getMinutes() case 'I': // capital 'i' // Logic original by getimeofday(). // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC. // If they are not equal, then DST is observed. a = _date.getFullYear() return 0 + (((new Date(a, 0)) - Date.UTC(a, 0)) !== ((new Date(a, 6)) - Date.UTC(a, 6))) case 'L': a = _date.getFullYear() return (!(a &amp; 3) &amp;&amp; (a % 1e2 || !(a % 4e2))) ? 1 : 0 case 'm': return _date.getMonth() + 1 case 's': return _date.getSeconds() case 't': return (new Date(_date.getFullYear(), _date.getMonth() + 1, 0)) .getDate() case 'U': return Math.round(_date.getTime() / 1000) case 'w': return _date.getDay() case 'W': a = new Date( _date.getFullYear(), _date.getMonth(), _date.getDate() - (_date.getDay() || 7) + 3 ) return 1 + Math.round((a - (new Date(a.getFullYear(), 0, 4))) / 864e5 / 7) case 'y': return parseInt((_date.getFullYear() + '') .slice(2), 10) // This function returns an integer, unlike _date() case 'Y': return _date.getFullYear() case 'z': return Math.floor((_date - new Date(_date.getFullYear(), 0, 1)) / 864e5) case 'Z': return -_date.getTimezoneOffset() * 60 default: throw new Error('Unrecognized _date format token') &#125;&#125;"},{"title":"PHP's datetime extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/datetime/index.html","permalink":"https://locutus.io/php/datetime/index.html","excerpt":"","text":""},{"title":"PHP's microtime in JavaScript","date":"2021-02-28T22:26:45.565Z","updated":"2021-02-28T22:26:45.565Z","comments":true,"path":"php/datetime/microtime/index.html","permalink":"https://locutus.io/php/datetime/microtime/index.html","excerpt":"","text":"module.exports = function microtime (getAsFloat) &#123; // discuss at: https://locutus.io/php/microtime/ // original by: Paulo Freitas // improved by: Dumitru Uzun (https://duzun.me) // example 1: var $timeStamp = microtime(true) // example 1: $timeStamp &gt; 1000000000 &amp;&amp; $timeStamp &lt; 2000000000 // returns 1: true // example 2: /^0\\.[0-9]&#123;1,6&#125; [0-9]&#123;10,10&#125;$/.test(microtime()) // returns 2: true let s let now if (typeof performance !== 'undefined' &amp;&amp; performance.now) &#123; now = (performance.now() + performance.timing.navigationStart) / 1e3 if (getAsFloat) &#123; return now &#125; // Math.round(now) s = now | 0 return (Math.round((now - s) * 1e6) / 1e6) + ' ' + s &#125; else &#123; now = (Date.now ? Date.now() : new Date().getTime()) / 1e3 if (getAsFloat) &#123; return now &#125; // Math.round(now) s = now | 0 return (Math.round((now - s) * 1e3) / 1e3) + ' ' + s &#125;&#125;"},{"title":"PHP's mktime in JavaScript","date":"2021-02-28T22:26:45.573Z","updated":"2021-02-28T22:26:45.573Z","comments":true,"path":"php/datetime/mktime/index.html","permalink":"https://locutus.io/php/datetime/mktime/index.html","excerpt":"","text":"module.exports = function mktime () &#123; // discuss at: https://locutus.io/php/mktime/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: baris ozdil // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: FGFEmperor // improved by: Brett Zamir (https://brett-zamir.me) // input by: gabriel paderni // input by: Yannoo // input by: jakes // input by: 3D-GRAF // input by: Chris // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Marc Palau // bugfixed by: Brett Zamir (https://brett-zamir.me) // revised by: Theriault (https://github.com/Theriault) // note 1: The return values of the following examples are // note 1: received only if your system's timezone is UTC. // example 1: mktime(14, 10, 2, 2, 1, 2008) // returns 1: 1201875002 // example 2: mktime(0, 0, 0, 0, 1, 2008) // returns 2: 1196467200 // example 3: var $make = mktime() // example 3: var $td = new Date() // example 3: var $real = Math.floor($td.getTime() / 1000) // example 3: var $diff = ($real - $make) // example 3: $diff &lt; 5 // returns 3: true // example 4: mktime(0, 0, 0, 13, 1, 1997) // returns 4: 883612800 // example 5: mktime(0, 0, 0, 1, 1, 1998) // returns 5: 883612800 // example 6: mktime(0, 0, 0, 1, 1, 98) // returns 6: 883612800 // example 7: mktime(23, 59, 59, 13, 0, 2010) // returns 7: 1293839999 // example 8: mktime(0, 0, -1, 1, 1, 1970) // returns 8: -1 const d = new Date() const r = arguments let i = 0 const e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear'] for (i = 0; i &lt; e.length; i++) &#123; if (typeof r[i] === 'undefined') &#123; r[i] = d['get' + e[i]]() // +1 to fix JS months. r[i] += (i === 3) &#125; else &#123; r[i] = parseInt(r[i], 10) if (isNaN(r[i])) &#123; return false &#125; &#125; &#125; // Map years 0-69 to 2000-2069 and years 70-100 to 1970-2000. r[5] += (r[5] &gt;= 0 ? (r[5] &lt;= 69 ? 2e3 : (r[5] &lt;= 100 ? 1900 : 0)) : 0) // Set year, month (-1 to fix JS months), and date. // !This must come before the call to setHours! d.setFullYear(r[5], r[3] - 1, r[4]) // Set hours, minutes, and seconds. d.setHours(r[0], r[1], r[2]) const time = d.getTime() // Divide milliseconds by 1000 to return seconds and drop decimal. // Add 1 second if negative or it'll be off from PHP by 1 second. return (time / 1e3 &gt;&gt; 0) - (time &lt; 0)&#125;"},{"title":"PHP's strftime in JavaScript","date":"2021-02-28T22:26:45.573Z","updated":"2021-02-28T22:26:45.573Z","comments":true,"path":"php/datetime/strftime/index.html","permalink":"https://locutus.io/php/datetime/strftime/index.html","excerpt":"","text":"module.exports = function strftime (fmt, timestamp) &#123; // discuss at: https://locutus.io/php/strftime/ // original by: Blues (https://tech.bluesmoon.info/) // reimplemented by: Brett Zamir (https://brett-zamir.me) // input by: Alex // bugfixed by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Uses global: locutus to store locale info // example 1: strftime(\"%A\", 1062462400); // Return value will depend on date and locale // returns 1: 'Tuesday' const setlocale = require('../strings/setlocale') const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const _xPad = function (x, pad, r) &#123; if (typeof r === 'undefined') &#123; r = 10 &#125; for (; parseInt(x, 10) &lt; r &amp;&amp; r &gt; 1; r /= 10) &#123; x = pad.toString() + x &#125; return x.toString() &#125; const locale = $locutus.php.localeCategories.LC_TIME const lcTime = $locutus.php.locales[locale].LC_TIME var _formats = &#123; a: function (d) &#123; return lcTime.a[d.getDay()] &#125;, A: function (d) &#123; return lcTime.A[d.getDay()] &#125;, b: function (d) &#123; return lcTime.b[d.getMonth()] &#125;, B: function (d) &#123; return lcTime.B[d.getMonth()] &#125;, C: function (d) &#123; return _xPad(parseInt(d.getFullYear() / 100, 10), 0) &#125;, d: ['getDate', '0'], e: ['getDate', ' '], g: function (d) &#123; return _xPad(parseInt(this.G(d) / 100, 10), 0) &#125;, G: function (d) &#123; let y = d.getFullYear() const V = parseInt(_formats.V(d), 10) const W = parseInt(_formats.W(d), 10) if (W &gt; V) &#123; y++ &#125; else if (W === 0 &amp;&amp; V &gt;= 52) &#123; y-- &#125; return y &#125;, H: ['getHours', '0'], I: function (d) &#123; const I = d.getHours() % 12 return _xPad(I === 0 ? 12 : I, 0) &#125;, j: function (d) &#123; let ms = d - new Date('' + d.getFullYear() + '/1/1 GMT') // Line differs from Yahoo implementation which would be // equivalent to replacing it here with: ms += d.getTimezoneOffset() * 60000 const doy = parseInt(ms / 60000 / 60 / 24, 10) + 1 return _xPad(doy, 0, 100) &#125;, k: ['getHours', '0'], // not in PHP, but implemented here (as in Yahoo) l: function (d) &#123; const l = d.getHours() % 12 return _xPad(l === 0 ? 12 : l, ' ') &#125;, m: function (d) &#123; return _xPad(d.getMonth() + 1, 0) &#125;, M: ['getMinutes', '0'], p: function (d) &#123; return lcTime.p[d.getHours() &gt;= 12 ? 1 : 0] &#125;, P: function (d) &#123; return lcTime.P[d.getHours() &gt;= 12 ? 1 : 0] &#125;, s: function (d) &#123; // Yahoo uses return parseInt(d.getTime()/1000, 10); return Date.parse(d) / 1000 &#125;, S: ['getSeconds', '0'], u: function (d) &#123; const dow = d.getDay() return ((dow === 0) ? 7 : dow) &#125;, U: function (d) &#123; const doy = parseInt(_formats.j(d), 10) const rdow = 6 - d.getDay() const woy = parseInt((doy + rdow) / 7, 10) return _xPad(woy, 0) &#125;, V: function (d) &#123; const woy = parseInt(_formats.W(d), 10) const dow11 = (new Date('' + d.getFullYear() + '/1/1')).getDay() // First week is 01 and not 00 as in the case of %U and %W, // so we add 1 to the final result except if day 1 of the year // is a Monday (then %W returns 01). // We also need to subtract 1 if the day 1 of the year is // Friday-Sunday, so the resulting equation becomes: let idow = woy + (dow11 &gt; 4 || dow11 &lt;= 1 ? 0 : 1) if (idow === 53 &amp;&amp; (new Date('' + d.getFullYear() + '/12/31')).getDay() &lt; 4) &#123; idow = 1 &#125; else if (idow === 0) &#123; idow = _formats.V(new Date('' + (d.getFullYear() - 1) + '/12/31')) &#125; return _xPad(idow, 0) &#125;, w: 'getDay', W: function (d) &#123; const doy = parseInt(_formats.j(d), 10) const rdow = 7 - _formats.u(d) const woy = parseInt((doy + rdow) / 7, 10) return _xPad(woy, 0, 10) &#125;, y: function (d) &#123; return _xPad(d.getFullYear() % 100, 0) &#125;, Y: 'getFullYear', z: function (d) &#123; const o = d.getTimezoneOffset() const H = _xPad(parseInt(Math.abs(o / 60), 10), 0) const M = _xPad(o % 60, 0) return (o &gt; 0 ? '-' : '+') + H + M &#125;, Z: function (d) &#123; return d.toString().replace(/^.*\\(([^)]+)\\)$/, '$1') &#125;, '%': function (d) &#123; return '%' &#125; &#125; const _date = (typeof timestamp === 'undefined') ? new Date() : (timestamp instanceof Date) ? new Date(timestamp) : new Date(timestamp * 1000) const _aggregates = &#123; c: 'locale', D: '%m/%d/%y', F: '%y-%m-%d', h: '%b', n: '\\n', r: 'locale', R: '%H:%M', t: '\\t', T: '%H:%M:%S', x: 'locale', X: 'locale' &#125; // First replace aggregates (run in a loop because an agg may be made up of other aggs) while (fmt.match(/%[cDFhnrRtTxX]/)) &#123; fmt = fmt.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) &#123; const f = _aggregates[m1] return (f === 'locale' ? lcTime[m1] : f) &#125;) &#125; // Now replace formats - we need a closure so that the date object gets passed through const str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) &#123; const f = _formats[m1] if (typeof f === 'string') &#123; return _date[f]() &#125; else if (typeof f === 'function') &#123; return f(_date) &#125; else if (typeof f === 'object' &amp;&amp; typeof f[0] === 'string') &#123; return _xPad(_date[f[0]](), f[1]) &#125; else &#123; // Shouldn't reach here return m1 &#125; &#125;) return str&#125;"},{"title":"PHP's time in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/datetime/time/index.html","permalink":"https://locutus.io/php/datetime/time/index.html","excerpt":"","text":"module.exports = function time () &#123; // discuss at: https://locutus.io/php/time/ // original by: GeekFG (https://geekfg.blogspot.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: metjay // improved by: HKM // example 1: var $timeStamp = time() // example 1: var $result = $timeStamp &gt; 1000000000 &amp;&amp; $timeStamp &lt; 2000000000 // returns 1: true return Math.floor(new Date().getTime() / 1000)&#125;"},{"title":"PHP's escapeshellarg in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/exec/escapeshellarg/index.html","permalink":"https://locutus.io/php/exec/escapeshellarg/index.html","excerpt":"","text":"module.exports = function escapeshellarg (arg) &#123; // discuss at: https://locutus.io/php/escapeshellarg/ // Warning: this function emulates escapeshellarg() for php-running-on-linux // the function behaves differently when running on Windows, which is not covered by this code. // // original by: Felix Geisendoerfer (https://www.debuggable.com/felix) // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: divinity76 (https://github.com/divinity76) // example 1: escapeshellarg(\"kevin's birthday\") // returns 1: \"'kevin'\\\\''s birthday'\" // example 2: escapeshellarg(\"/home'; whoami;''\") // returns 2: \"'/home'\\\\''; whoami;'\\\\'''\\\\'''\" if (arg.indexOf('\\x00') !== -1) &#123; throw new Error('escapeshellarg(): Argument #1 ($arg) must not contain any null bytes') &#125; let ret = '' ret = arg.replace(/'/g, '\\'\\\\\\'\\'') return \"'\" + ret + \"'\"&#125;"},{"title":"PHP's exec extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/exec/index.html","permalink":"https://locutus.io/php/exec/index.html","excerpt":"","text":""},{"title":"PHP's basename in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/filesystem/basename/index.html","permalink":"https://locutus.io/php/filesystem/basename/index.html","excerpt":"","text":"module.exports = function basename (path, suffix) &#123; // discuss at: https://locutus.io/php/basename/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Ash Searle (https://hexmen.com/blog/) // improved by: Lincoln Ramsay // improved by: djmix // improved by: Dmitry Gorelenkov // example 1: basename('/www/site/home.htm', '.htm') // returns 1: 'home' // example 2: basename('ecra.php?p=1') // returns 2: 'ecra.php?p=1' // example 3: basename('/some/path/') // returns 3: 'path' // example 4: basename('/some/path_ext.ext/','.ext') // returns 4: 'path_ext' let b = path const lastChar = b.charAt(b.length - 1) if (lastChar === '/' || lastChar === '\\\\') &#123; b = b.slice(0, -1) &#125; b = b.replace(/^.*[/\\\\]/g, '') if (typeof suffix === 'string' &amp;&amp; b.substr(b.length - suffix.length) === suffix) &#123; b = b.substr(0, b.length - suffix.length) &#125; return b&#125;"},{"title":"PHP's dirname in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/filesystem/dirname/index.html","permalink":"https://locutus.io/php/filesystem/dirname/index.html","excerpt":"","text":"module.exports = function dirname (path) &#123; // discuss at: https://locutus.io/php/dirname/ // original by: Ozh // improved by: XoraX (https://www.xorax.info) // example 1: dirname('/etc/passwd') // returns 1: '/etc' // example 2: dirname('c:/Temp/x') // returns 2: 'c:/Temp' // example 3: dirname('/dir/test/') // returns 3: '/dir' return path.replace(/\\\\/g, '/') .replace(/\\/[^/]*\\/?$/, '')&#125;"},{"title":"PHP's file_get_contents in JavaScript","date":"2021-02-28T22:26:45.593Z","updated":"2021-02-28T22:26:45.593Z","comments":true,"path":"php/filesystem/file_get_contents/index.html","permalink":"https://locutus.io/php/filesystem/file_get_contents/index.html","excerpt":"","text":"module.exports = function file_get_contents (url, flags, context, offset, maxLen) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/file_get_contents/ // original by: Legaev Andrey // input by: Jani Hartikainen // input by: Raphael (Ao) RUDLER // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // reimplemented by: Kevin van Zonneveld (https://kvz.io) // note 1: This used to work in the browser via blocking ajax // note 1: requests in 1.3.2 and earlier // note 1: but then people started using that for real app, // note 1: so we deprecated this behavior, // note 1: so this function is now Node-only // example 1: var $buf = file_get_contents('test/never-change.txt') // example 1: var $result = $buf.indexOf('hash') !== -1 // returns 1: true const fs = require('fs') return fs.readFileSync(url, 'utf-8')&#125;"},{"title":"PHP's filesystem extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/filesystem/index.html","permalink":"https://locutus.io/php/filesystem/index.html","excerpt":"","text":""},{"title":"PHP's pathinfo in JavaScript","date":"2021-02-28T22:26:45.593Z","updated":"2021-02-28T22:26:45.593Z","comments":true,"path":"php/filesystem/pathinfo/index.html","permalink":"https://locutus.io/php/filesystem/pathinfo/index.html","excerpt":"","text":"module.exports = function pathinfo (path, options) &#123; // discuss at: https://locutus.io/php/pathinfo/ // original by: Nate // revised by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Dmitry Gorelenkov // input by: Timo // note 1: Inspired by actual PHP source: php5-5.2.6/ext/standard/string.c line #1559 // note 1: The way the bitwise arguments are handled allows for greater flexibility // note 1: &amp; compatability. We might even standardize this // note 1: code and use a similar approach for // note 1: other bitwise PHP functions // note 1: Locutus tries very hard to stay away from a core.js // note 1: file with global dependencies, because we like // note 1: that you can just take a couple of functions and be on your way. // note 1: But by way we implemented this function, // note 1: if you want you can still declare the PATHINFO_* // note 1: yourself, and then you can use: // note 1: pathinfo('/www/index.html', PATHINFO_BASENAME | PATHINFO_EXTENSION); // note 1: which makes it fully compliant with PHP syntax. // example 1: pathinfo('/www/htdocs/index.html', 1) // returns 1: '/www/htdocs' // example 2: pathinfo('/www/htdocs/index.html', 'PATHINFO_BASENAME') // returns 2: 'index.html' // example 3: pathinfo('/www/htdocs/index.html', 'PATHINFO_EXTENSION') // returns 3: 'html' // example 4: pathinfo('/www/htdocs/index.html', 'PATHINFO_FILENAME') // returns 4: 'index' // example 5: pathinfo('/www/htdocs/index.html', 2 | 4) // returns 5: &#123;basename: 'index.html', extension: 'html'&#125; // example 6: pathinfo('/www/htdocs/index.html', 'PATHINFO_ALL') // returns 6: &#123;dirname: '/www/htdocs', basename: 'index.html', extension: 'html', filename: 'index'&#125; // example 7: pathinfo('/www/htdocs/index.html') // returns 7: &#123;dirname: '/www/htdocs', basename: 'index.html', extension: 'html', filename: 'index'&#125; const basename = require('../filesystem/basename') let opt = '' let realOpt = '' let optName = '' let optTemp = 0 const tmpArr = &#123;&#125; let cnt = 0 let i = 0 let haveBasename = false let haveExtension = false let haveFilename = false // Input defaulting &amp; sanitation if (!path) &#123; return false &#125; if (!options) &#123; options = 'PATHINFO_ALL' &#125; // Initialize binary arguments. Both the string &amp; integer (constant) input is // allowed const OPTS = &#123; PATHINFO_DIRNAME: 1, PATHINFO_BASENAME: 2, PATHINFO_EXTENSION: 4, PATHINFO_FILENAME: 8, PATHINFO_ALL: 0 &#125; // PATHINFO_ALL sums up all previously defined PATHINFOs (could just pre-calculate) for (optName in OPTS) &#123; if (OPTS.hasOwnProperty(optName)) &#123; OPTS.PATHINFO_ALL = OPTS.PATHINFO_ALL | OPTS[optName] &#125; &#125; if (typeof options !== 'number') &#123; // Allow for a single string or an array of string flags options = [].concat(options) for (i = 0; i &lt; options.length; i++) &#123; // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4 if (OPTS[options[i]]) &#123; optTemp = optTemp | OPTS[options[i]] &#125; &#125; options = optTemp &#125; // Internal Functions const _getExt = function (path) &#123; const str = path + '' const dotP = str.lastIndexOf('.') + 1 return !dotP ? false : dotP !== str.length ? str.substr(dotP) : '' &#125; // Gather path infos if (options &amp; OPTS.PATHINFO_DIRNAME) &#123; const dirName = path .replace(/\\\\/g, '/') .replace(/\\/[^/]*\\/?$/, '') // dirname tmpArr.dirname = dirName === path ? '.' : dirName &#125; if (options &amp; OPTS.PATHINFO_BASENAME) &#123; if (haveBasename === false) &#123; haveBasename = basename(path) &#125; tmpArr.basename = haveBasename &#125; if (options &amp; OPTS.PATHINFO_EXTENSION) &#123; if (haveBasename === false) &#123; haveBasename = basename(path) &#125; if (haveExtension === false) &#123; haveExtension = _getExt(haveBasename) &#125; if (haveExtension !== false) &#123; tmpArr.extension = haveExtension &#125; &#125; if (options &amp; OPTS.PATHINFO_FILENAME) &#123; if (haveBasename === false) &#123; haveBasename = basename(path) &#125; if (haveExtension === false) &#123; haveExtension = _getExt(haveBasename) &#125; if (haveFilename === false) &#123; haveFilename = haveBasename.slice(0, haveBasename.length - (haveExtension ? haveExtension.length + 1 : haveExtension === false ? 0 : 1 ) ) &#125; tmpArr.filename = haveFilename &#125; // If array contains only 1 element: return string cnt = 0 for (opt in tmpArr) &#123; if (tmpArr.hasOwnProperty(opt)) &#123; cnt++ realOpt = opt &#125; &#125; if (cnt === 1) &#123; return tmpArr[realOpt] &#125; // Return full-blown array return tmpArr&#125;"},{"title":"PHP's realpath in JavaScript","date":"2021-02-28T22:26:45.597Z","updated":"2021-02-28T22:26:45.597Z","comments":true,"path":"php/filesystem/realpath/index.html","permalink":"https://locutus.io/php/filesystem/realpath/index.html","excerpt":"","text":"module.exports = function realpath (path) &#123; // discuss at: https://locutus.io/php/realpath/ // original by: mk.keck // improved by: Kevin van Zonneveld (https://kvz.io) // note 1: Returned path is an url like e.g. 'https://yourhost.tld/path/' // example 1: realpath('some/dir/.././_supporters/pj_test_supportfile_1.htm') // returns 1: 'some/_supporters/pj_test_supportfile_1.htm' if (typeof window === 'undefined') &#123; const nodePath = require('path') return nodePath.normalize(path) &#125; let p = 0 let arr = [] // Save the root, if not given const r = this.window.location.href // Avoid input failures // Check if there's a port in path (like 'https://') path = (path + '').replace('\\\\', '/') if (path.indexOf('://') !== -1) &#123; p = 1 &#125; // Ok, there's not a port in path, so let's take the root if (!p) &#123; path = r.substring(0, r.lastIndexOf('/') + 1) + path &#125; // Explode the given path into it's parts arr = path.split('/') // The path is an array now path = [] // Foreach part make a check for (const k in arr) &#123; // This is'nt really interesting if (arr[k] === '.') &#123; continue &#125; // This reduces the realpath if (arr[k] === '..') &#123; /* But only if there more than 3 parts in the path-array. * The first three parts are for the uri */ if (path.length &gt; 3) &#123; path.pop() &#125; &#125; else &#123; // This adds parts to the realpath // But only if the part is not empty or the uri // (the first three parts ar needed) was not // saved if ((path.length &lt; 2) || (arr[k] !== '')) &#123; path.push(arr[k]) &#125; &#125; &#125; // Returns the absloute path as a string return path.join('/')&#125;"},{"title":"PHP's call_user_func in JavaScript","date":"2021-02-28T22:26:45.597Z","updated":"2021-02-28T22:26:45.597Z","comments":true,"path":"php/funchand/call_user_func/index.html","permalink":"https://locutus.io/php/funchand/call_user_func/index.html","excerpt":"","text":"module.exports = function call_user_func (cb, parameters) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/call_user_func/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Diplom@t (https://difane.com/) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Depends on call_user_func_array which in turn depends on the `cb` that is passed, // note 1: this function can use `eval`. // note 1: The `eval` input is however checked to only allow valid function names, // note 1: So it should not be unsafer than uses without eval (seeing as you can) // note 1: already pass any function to be executed here. // example 1: call_user_func('isNaN', 'a') // returns 1: true const callUserFuncArray = require('../funchand/call_user_func_array') parameters = Array.prototype.slice.call(arguments, 1) return callUserFuncArray(cb, parameters)&#125;"},{"title":"PHP's call_user_func_array in JavaScript","date":"2021-02-28T22:26:45.593Z","updated":"2021-02-28T22:26:45.593Z","comments":true,"path":"php/funchand/call_user_func_array/index.html","permalink":"https://locutus.io/php/funchand/call_user_func_array/index.html","excerpt":"","text":"module.exports = function call_user_func_array (cb, parameters) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/call_user_func_array/ // original by: Thiago Mata (https://thiagomata.blog.com) // revised by: Jon Hohle // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Diplom@t (https://difane.com/) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Depending on the `cb` that is passed, // note 1: this function can use `eval` and/or `new Function`. // note 1: The `eval` input is however checked to only allow valid function names, // note 1: So it should not be unsafer than uses without eval (seeing as you can) // note 1: already pass any function to be executed here. // example 1: call_user_func_array('isNaN', ['a']) // returns 1: true // example 2: call_user_func_array('isNaN', [1]) // returns 2: false const $global = (typeof window !== 'undefined' ? window : global) let func let scope = null const validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/ if (typeof cb === 'string') &#123; if (typeof $global[cb] === 'function') &#123; func = $global[cb] &#125; else if (cb.match(validJSFunctionNamePattern)) &#123; func = (new Function(null, 'return ' + cb)()) // eslint-disable-line no-new-func &#125; &#125; else if (Object.prototype.toString.call(cb) === '[object Array]') &#123; if (typeof cb[0] === 'string') &#123; if (cb[0].match(validJSFunctionNamePattern)) &#123; func = eval(cb[0] + \"['\" + cb[1] + \"']\") // eslint-disable-line no-eval &#125; &#125; else &#123; func = cb[0][cb[1]] &#125; if (typeof cb[0] === 'string') &#123; if (typeof $global[cb[0]] === 'function') &#123; scope = $global[cb[0]] &#125; else if (cb[0].match(validJSFunctionNamePattern)) &#123; scope = eval(cb[0]) // eslint-disable-line no-eval &#125; &#125; else if (typeof cb[0] === 'object') &#123; scope = cb[0] &#125; &#125; else if (typeof cb === 'function') &#123; func = cb &#125; if (typeof func !== 'function') &#123; throw new Error(func + ' is not a valid function') &#125; return func.apply(scope, parameters)&#125;"},{"title":"PHP's create_function in JavaScript","date":"2021-02-28T22:26:45.597Z","updated":"2021-02-28T22:26:45.597Z","comments":true,"path":"php/funchand/create_function/index.html","permalink":"https://locutus.io/php/funchand/create_function/index.html","excerpt":"","text":"module.exports = function create_function (args, code) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/create_function/ // original by: Johnny Mast (https://www.phpvrouwen.nl) // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: var $f = create_function('a, b', 'return (a + b)') // example 1: $f(1, 2) // returns 1: 3 try &#123; return Function.apply(null, args.split(',').concat(code)) &#125; catch (e) &#123; return false &#125;&#125;"},{"title":"PHP's function_exists in JavaScript","date":"2021-02-28T22:26:45.597Z","updated":"2021-02-28T22:26:45.597Z","comments":true,"path":"php/funchand/function_exists/index.html","permalink":"https://locutus.io/php/funchand/function_exists/index.html","excerpt":"","text":"module.exports = function function_exists (funcName) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/function_exists/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Steve Clay // improved by: Legaev Andrey // improved by: Brett Zamir (https://brett-zamir.me) // example 1: function_exists('isFinite') // returns 1: true // test: skip-1 const $global = (typeof window !== 'undefined' ? window : global) if (typeof funcName === 'string') &#123; funcName = $global[funcName] &#125; return typeof funcName === 'function'&#125;"},{"title":"PHP's get_defined_functions in JavaScript","date":"2021-02-28T22:26:45.597Z","updated":"2021-02-28T22:26:45.597Z","comments":true,"path":"php/funchand/get_defined_functions/index.html","permalink":"https://locutus.io/php/funchand/get_defined_functions/index.html","excerpt":"","text":"module.exports = function get_defined_functions () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/get_defined_functions/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Test case 1: If get_defined_functions can find // note 1: itself in the defined functions, it worked :) // example 1: function test_in_array (array, p_val) &#123;for(var i = 0, l = array.length; i &lt; l; i++) &#123;if (array[i] === p_val) return true&#125; return false&#125; // example 1: var $funcs = get_defined_functions() // example 1: var $found = test_in_array($funcs, 'get_defined_functions') // example 1: var $result = $found // returns 1: true // test: skip-1 const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; let i = '' const arr = [] const already = &#123;&#125; for (i in $global) &#123; try &#123; if (typeof $global[i] === 'function') &#123; if (!already[i]) &#123; already[i] = 1 arr.push(i) &#125; &#125; else if (typeof $global[i] === 'object') &#123; for (const j in $global[i]) &#123; if (typeof $global[j] === 'function' &amp;&amp; $global[j] &amp;&amp; !already[j]) &#123; already[j] = 1 arr.push(j) &#125; &#125; &#125; &#125; catch (e) &#123; // Some objects in Firefox throw exceptions when their // properties are accessed (e.g., sessionStorage) &#125; &#125; return arr&#125;"},{"title":"PHP's funchand extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/funchand/index.html","permalink":"https://locutus.io/php/funchand/index.html","excerpt":"","text":""},{"title":"PHP's i18n_loc_get_default in JavaScript","date":"2021-02-28T22:26:45.605Z","updated":"2021-02-28T22:26:45.605Z","comments":true,"path":"php/i18n/i18n_loc_get_default/index.html","permalink":"https://locutus.io/php/i18n/i18n_loc_get_default/index.html","excerpt":"","text":"module.exports = function i18n_loc_get_default () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/i18n_loc_get_default/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Renamed in PHP6 from locale_get_default(). Not listed yet at php.net. // note 1: List of locales at &lt;https://demo.icu-project.org/icu-bin/locexp&gt; // note 1: To be usable with sort() if it is passed the `SORT_LOCALE_STRING` // note 1: sorting flag: https://php.net/manual/en/function.sort.php // example 1: i18n_loc_get_default() // returns 1: 'en_US_POSIX' // example 2: i18n_loc_set_default('pt_PT') // example 2: i18n_loc_get_default() // returns 2: 'pt_PT' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; return $locutus.php.locale_default || 'en_US_POSIX'&#125;"},{"title":"PHP's i18n_loc_set_default in JavaScript","date":"2021-02-28T22:26:45.605Z","updated":"2021-02-28T22:26:45.605Z","comments":true,"path":"php/i18n/i18n_loc_set_default/index.html","permalink":"https://locutus.io/php/i18n/i18n_loc_set_default/index.html","excerpt":"","text":"module.exports = function i18n_loc_set_default (name) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/i18n_loc_set_default/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Renamed in PHP6 from locale_set_default(). Not listed yet at php.net // note 1: List of locales at https://demo.icu-project.org/icu-bin/locexp (use for implementing other locales here) // note 1: To be usable with sort() if it is passed the SORT_LOCALE_STRING sorting flag: https://php.net/manual/en/function.sort.php // example 1: i18n_loc_set_default('pt_PT') // returns 1: true const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; $locutus.php.locales.en_US_POSIX = &#123; sorting: function (str1, str2) &#123; // @todo: This one taken from strcmp, but need for other locales; // we don't use localeCompare since its locale is not settable return (str1 === str2) ? 0 : ((str1 &gt; str2) ? 1 : -1) &#125; &#125; $locutus.php.locale_default = name return true&#125;"},{"title":"PHP's i18n extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/i18n/index.html","permalink":"https://locutus.io/php/i18n/index.html","excerpt":"","text":""},{"title":"PHP's assert_options in JavaScript","date":"2021-02-28T22:26:45.605Z","updated":"2021-02-28T22:26:45.605Z","comments":true,"path":"php/info/assert_options/index.html","permalink":"https://locutus.io/php/info/assert_options/index.html","excerpt":"","text":"module.exports = function assert_options (what, value) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/assert_options/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: assert_options('ASSERT_CALLBACK') // returns 1: null let iniKey, defaultVal switch (what) &#123; case 'ASSERT_ACTIVE': iniKey = 'assert.active' defaultVal = 1 break case 'ASSERT_WARNING': iniKey = 'assert.warning' defaultVal = 1 var msg = 'We have not yet implemented warnings for us to throw ' msg += 'in JavaScript (assert_options())' throw new Error(msg) case 'ASSERT_BAIL': iniKey = 'assert.bail' defaultVal = 0 break case 'ASSERT_QUIET_EVAL': iniKey = 'assert.quiet_eval' defaultVal = 0 break case 'ASSERT_CALLBACK': iniKey = 'assert.callback' defaultVal = null break default: throw new Error('Improper type for assert_options()') &#125; // I presume this is to be the most recent value, instead of the default value const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')(iniKey) : undefined) || defaultVal return iniVal&#125;"},{"title":"PHP's getenv in JavaScript","date":"2021-02-28T22:26:45.605Z","updated":"2021-02-28T22:26:45.605Z","comments":true,"path":"php/info/getenv/index.html","permalink":"https://locutus.io/php/info/getenv/index.html","excerpt":"","text":"module.exports = function getenv (varname) &#123; // discuss at: https://locutus.io/php/getenv/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: getenv('LC_ALL') // returns 1: false if (typeof process !== 'undefined' || !process.env || !process.env[varname]) &#123; return false &#125; return process.env[varname]&#125;"},{"title":"PHP's info extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/info/index.html","permalink":"https://locutus.io/php/info/index.html","excerpt":"","text":""},{"title":"PHP's ini_get in JavaScript","date":"2021-02-28T22:26:45.609Z","updated":"2021-02-28T22:26:45.609Z","comments":true,"path":"php/info/ini_get/index.html","permalink":"https://locutus.io/php/info/ini_get/index.html","excerpt":"","text":"module.exports = function ini_get (varname) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ini_get/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: The ini values must be set by ini_set or manually within an ini file // example 1: ini_set('date.timezone', 'Asia/Hong_Kong') // example 1: ini_get('date.timezone') // returns 1: 'Asia/Hong_Kong' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.ini = $locutus.php.ini || &#123;&#125; if ($locutus.php.ini[varname] &amp;&amp; $locutus.php.ini[varname].local_value !== undefined) &#123; if ($locutus.php.ini[varname].local_value === null) &#123; return '' &#125; return $locutus.php.ini[varname].local_value &#125; return ''&#125;"},{"title":"PHP's ini_set in JavaScript","date":"2021-02-28T22:26:45.609Z","updated":"2021-02-28T22:26:45.609Z","comments":true,"path":"php/info/ini_set/index.html","permalink":"https://locutus.io/php/info/ini_set/index.html","excerpt":"","text":"module.exports = function ini_set (varname, newvalue) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/ini_set/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: This will not set a global_value or access level for the ini item // example 1: ini_set('date.timezone', 'Asia/Hong_Kong') // example 1: ini_set('date.timezone', 'America/Chicago') // returns 1: 'Asia/Hong_Kong' const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.ini = $locutus.php.ini || &#123;&#125; $locutus.php.ini = $locutus.php.ini || &#123;&#125; $locutus.php.ini[varname] = $locutus.php.ini[varname] || &#123;&#125; const oldval = $locutus.php.ini[varname].local_value const lowerStr = (newvalue + '').toLowerCase().trim() if (newvalue === true || lowerStr === 'on' || lowerStr === '1') &#123; newvalue = 'on' &#125; if (newvalue === false || lowerStr === 'off' || lowerStr === '0') &#123; newvalue = 'off' &#125; const _setArr = function (oldval) &#123; // Although these are set individually, they are all accumulated if (typeof oldval === 'undefined') &#123; $locutus.ini[varname].local_value = [] &#125; $locutus.ini[varname].local_value.push(newvalue) &#125; switch (varname) &#123; case 'extension': _setArr(oldval, newvalue) break default: $locutus.php.ini[varname].local_value = newvalue break &#125; return oldval&#125;"},{"title":"PHP's set_time_limit in JavaScript","date":"2021-02-28T22:26:45.609Z","updated":"2021-02-28T22:26:45.609Z","comments":true,"path":"php/info/set_time_limit/index.html","permalink":"https://locutus.io/php/info/set_time_limit/index.html","excerpt":"","text":"module.exports = function set_time_limit (seconds) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/set_time_limit/ // original by: Brett Zamir (https://brett-zamir.me) // test: skip-all // example 1: set_time_limit(4) // returns 1: undefined const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; setTimeout(function () &#123; if (!$locutus.php.timeoutStatus) &#123; $locutus.php.timeoutStatus = true &#125; throw new Error('Maximum execution time exceeded') &#125;, seconds * 1000)&#125;"},{"title":"PHP's version_compare in JavaScript","date":"2021-02-28T22:26:45.609Z","updated":"2021-02-28T22:26:45.609Z","comments":true,"path":"php/info/version_compare/index.html","permalink":"https://locutus.io/php/info/version_compare/index.html","excerpt":"","text":"module.exports = function version_compare (v1, v2, operator) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/version_compare/ // original by: Philippe Jausions (https://pear.php.net/user/jausions) // original by: Aidan Lister (https://aidanlister.com/) // reimplemented by: Kankrelune (https://www.webfaktory.info/) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Scott Baker // improved by: Theriault (https://github.com/Theriault) // example 1: version_compare('8.2.5rc', '8.2.5a') // returns 1: 1 // example 2: version_compare('8.2.50', '8.2.52', '&lt;') // returns 2: true // example 3: version_compare('5.3.0-dev', '5.3.0') // returns 3: -1 // example 4: version_compare('4.1.0.52','4.01.0.51') // returns 4: 1 // Important: compare must be initialized at 0. let i let x let compare = 0 // vm maps textual PHP versions to negatives so they're less than 0. // PHP currently defines these as CASE-SENSITIVE. It is important to // leave these as negatives so that they can come before numerical versions // and as if no letters were there to begin with. // (1alpha is &lt; 1 and &lt; 1.1 but &gt; 1dev1) // If a non-numerical value can't be mapped to this table, it receives // -7 as its value. const vm = &#123; dev: -6, alpha: -5, a: -5, beta: -4, b: -4, RC: -3, rc: -3, '#': -2, p: 1, pl: 1 &#125; // This function will be called to prepare each version argument. // It replaces every _, -, and + with a dot. // It surrounds any nonsequence of numbers/dots with dots. // It replaces sequences of dots with a single dot. // version_compare('4..0', '4.0') === 0 // Important: A string of 0 length needs to be converted into a value // even less than an unexisting value in vm (-7), hence [-8]. // It's also important to not strip spaces because of this. // version_compare('', ' ') === 1 const _prepVersion = function (v) &#123; v = ('' + v).replace(/[_\\-+]/g, '.') v = v.replace(/([^.\\d]+)/g, '.$1.').replace(/\\.&#123;2,&#125;/g, '.') return (!v.length ? [-8] : v.split('.')) &#125; // This converts a version component to a number. // Empty component becomes 0. // Non-numerical component becomes a negative number. // Numerical component becomes itself as an integer. const _numVersion = function (v) &#123; return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10)) &#125; v1 = _prepVersion(v1) v2 = _prepVersion(v2) x = Math.max(v1.length, v2.length) for (i = 0; i &lt; x; i++) &#123; if (v1[i] === v2[i]) &#123; continue &#125; v1[i] = _numVersion(v1[i]) v2[i] = _numVersion(v2[i]) if (v1[i] &lt; v2[i]) &#123; compare = -1 break &#125; else if (v1[i] &gt; v2[i]) &#123; compare = 1 break &#125; &#125; if (!operator) &#123; return compare &#125; // Important: operator is CASE-SENSITIVE. // \"No operator\" seems to be treated as \"&lt;.\" // Any other values seem to make the function return null. switch (operator) &#123; case '&gt;': case 'gt': return (compare &gt; 0) case '&gt;=': case 'ge': return (compare &gt;= 0) case '&lt;=': case 'le': return (compare &lt;= 0) case '===': case '=': case 'eq': return (compare === 0) case '&lt;&gt;': case '!==': case 'ne': return (compare !== 0) case '': case '&lt;': case 'lt': return (compare &lt; 0) default: return null &#125;&#125;"},{"title":"PHP's json extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/json/index.html","permalink":"https://locutus.io/php/json/index.html","excerpt":"","text":""},{"title":"PHP's json_decode in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/json/json_decode/index.html","permalink":"https://locutus.io/php/json/json_decode/index.html","excerpt":"","text":"module.exports = function json_decode (strJson) &#123; // eslint-disable-line camelcase // discuss at: https://phpjs.org/functions/json_decode/ // original by: Public Domain (https://www.json.org/json2.js) // reimplemented by: Kevin van Zonneveld (https://kevin.vanzonneveld.net) // improved by: T.J. Leahy // improved by: Michael White // note 1: If node or the browser does not offer JSON.parse, // note 1: this function falls backslash // note 1: to its own implementation using eval, and hence should be considered unsafe // example 1: json_decode('[ 1 ]') // returns 1: [1] /* https://www.JSON.org/json2.js 2008-11-19 Public Domain. NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK. See https://www.JSON.org/js.html */ const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; const json = $global.JSON if (typeof json === 'object' &amp;&amp; typeof json.parse === 'function') &#123; try &#123; return json.parse(strJson) &#125; catch (err) &#123; if (!(err instanceof SyntaxError)) &#123; throw new Error('Unexpected error type in json_decode()') &#125; // usable by json_last_error() $locutus.php.last_error_json = 4 return null &#125; &#125; const chars = [ '\\u0000', '\\u00ad', '\\u0600-\\u0604', '\\u070f', '\\u17b4', '\\u17b5', '\\u200c-\\u200f', '\\u2028-\\u202f', '\\u2060-\\u206f', '\\ufeff', '\\ufff0-\\uffff' ].join('') const cx = new RegExp('[' + chars + ']', 'g') let j let text = strJson // Parsing happens in four stages. In the first stage, we replace certain // Unicode characters with escape sequences. JavaScript handles many characters // incorrectly, either silently deleting them, or treating them as line endings. cx.lastIndex = 0 if (cx.test(text)) &#123; text = text.replace(cx, function (a) &#123; return '\\\\u' + ('0000' + a.charCodeAt(0) .toString(16)) .slice(-4) &#125;) &#125; // In the second stage, we run the text against regular expressions that look // for non-JSON patterns. We are especially concerned with '()' and 'new' // because they can cause invocation, and '=' because it can cause mutation. // But just to be safe, we want to reject all unexpected forms. // We split the second stage into 4 regexp operations in order to work around // crippling inefficiencies in IE's and Safari's regexp engines. First we // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we // replace all simple value tokens with ']' characters. Third, we delete all // open brackets that follow a colon or comma or that begin the text. Finally, // we look to see that the remaining characters are only whitespace or ']' or // ',' or ':' or '&#123;' or '&#125;'. If that is so, then the text is safe for eval. const m = (/^[\\],:&#123;&#125;\\s]*$/) .test(text.replace(/\\\\(?:[\"\\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, '@') .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?/g, ']') .replace(/(?:^|:|,)(?:\\s*\\[)+/g, '')) if (m) &#123; // In the third stage we use the eval function to compile the text into a // JavaScript structure. The '&#123;' operator is subject to a syntactic ambiguity // in JavaScript: it can begin a block or an object literal. We wrap the text // in parens to eliminate the ambiguity. j = eval('(' + text + ')') // eslint-disable-line no-eval return j &#125; // usable by json_last_error() $locutus.php.last_error_json = 4 return null&#125;"},{"title":"PHP's json_encode in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/json/json_encode/index.html","permalink":"https://locutus.io/php/json/json_encode/index.html","excerpt":"","text":"module.exports = function json_encode (mixedVal) &#123; // eslint-disable-line camelcase // discuss at: https://phpjs.org/functions/json_encode/ // original by: Public Domain (https://www.json.org/json2.js) // reimplemented by: Kevin van Zonneveld (https://kevin.vanzonneveld.net) // improved by: Michael White // input by: felix // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: json_encode('Kevin') // returns 1: '\"Kevin\"' /* https://www.JSON.org/json2.js 2008-11-19 Public Domain. NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK. See https://www.JSON.org/js.html */ const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; const json = $global.JSON let retVal try &#123; if (typeof json === 'object' &amp;&amp; typeof json.stringify === 'function') &#123; // Errors will not be caught here if our own equivalent to resource retVal = json.stringify(mixedVal) if (retVal === undefined) &#123; throw new SyntaxError('json_encode') &#125; return retVal &#125; const value = mixedVal const quote = function (string) &#123; const escapeChars = [ '\\u0000-\\u001f', '\\u007f-\\u009f', '\\u00ad', '\\u0600-\\u0604', '\\u070f', '\\u17b4', '\\u17b5', '\\u200c-\\u200f', '\\u2028-\\u202f', '\\u2060-\\u206f', '\\ufeff', '\\ufff0-\\uffff' ].join('') const escapable = new RegExp('[\\\\\"' + escapeChars + ']', 'g') const meta = &#123; // table of character substitutions '\\b': '\\\\b', '\\t': '\\\\t', '\\n': '\\\\n', '\\f': '\\\\f', '\\r': '\\\\r', '\"': '\\\\\"', '\\\\': '\\\\\\\\' &#125; escapable.lastIndex = 0 return escapable.test(string) ? '\"' + string.replace(escapable, function (a) &#123; const c = meta[a] return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0) .toString(16)) .slice(-4) &#125;) + '\"' : '\"' + string + '\"' &#125; var _str = function (key, holder) &#123; let gap = '' const indent = ' ' // The loop counter. let i = 0 // The member key. let k = '' // The member value. let v = '' let length = 0 const mind = gap let partial = [] let value = holder[key] // If the value has a toJSON method, call it to obtain a replacement value. if (value &amp;&amp; typeof value === 'object' &amp;&amp; typeof value.toJSON === 'function') &#123; value = value.toJSON(key) &#125; // What happens next depends on the value's type. switch (typeof value) &#123; case 'string': return quote(value) case 'number': // JSON numbers must be finite. Encode non-finite numbers as null. return isFinite(value) ? String(value) : 'null' case 'boolean': // If the value is a boolean or null, convert it to a string. return String(value) case 'object': // If the type is 'object', we might be dealing with an object or an array or // null. // Due to a specification blunder in ECMAScript, typeof null is 'object', // so watch out for that case. if (!value) &#123; return 'null' &#125; // Make an array to hold the partial results of stringifying this object value. gap += indent partial = [] // Is the value an array? if (Object.prototype.toString.apply(value) === '[object Array]') &#123; // The value is an array. Stringify every element. Use null as a placeholder // for non-JSON values. length = value.length for (i = 0; i &lt; length; i += 1) &#123; partial[i] = _str(i, value) || 'null' &#125; // Join all of the elements together, separated with commas, and wrap them in // brackets. v = partial.length === 0 ? '[]' : gap ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' : '[' + partial.join(',') + ']' // gap = mind // not used return v &#125; // Iterate through all of the keys in the object. for (k in value) &#123; if (Object.hasOwnProperty.call(value, k)) &#123; v = _str(k, value) if (v) &#123; partial.push(quote(k) + (gap ? ': ' : ':') + v) &#125; &#125; &#125; // Join all of the member texts together, separated with commas, // and wrap them in braces. v = partial.length === 0 ? '&#123;&#125;' : gap ? '&#123;\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '&#125;' : '&#123;' + partial.join(',') + '&#125;' // gap = mind // Not used return v case 'undefined': case 'function': default: throw new SyntaxError('json_encode') &#125; &#125; // Make a fake root object containing our value under the key of ''. // Return the result of stringifying the value. return _str('', &#123; '': value &#125;) &#125; catch (err) &#123; // @todo: ensure error handling above throws a SyntaxError in all cases where it could // (i.e., when the JSON global is not available and there is an error) if (!(err instanceof SyntaxError)) &#123; throw new Error('Unexpected error type in json_encode()') &#125; // usable by json_last_error() $locutus.php.last_error_json = 4 return null &#125;&#125;"},{"title":"PHP's json_last_error in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/json/json_last_error/index.html","permalink":"https://locutus.io/php/json/json_last_error/index.html","excerpt":"","text":"module.exports = function json_last_error () &#123; // eslint-disable-line camelcase // discuss at: https://phpjs.org/functions/json_last_error/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: json_last_error() // returns 1: 0 // JSON_ERROR_NONE = 0 // max depth limit to be removed per PHP comments in json.c (not possible in JS?): // JSON_ERROR_DEPTH = 1 // internal use? also not documented: // JSON_ERROR_STATE_MISMATCH = 2 // [\\u0000-\\u0008\\u000B-\\u000C\\u000E-\\u001F] if used directly within json_decode(): // JSON_ERROR_CTRL_CHAR = 3 // but JSON functions auto-escape these, so error not possible in JavaScript // JSON_ERROR_SYNTAX = 4 const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; return $locutus.php &amp;&amp; $locutus.php.last_error_json ? $locutus.php.last_error_json : 0&#125;"},{"title":"PHP's abs in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/math/abs/index.html","permalink":"https://locutus.io/php/math/abs/index.html","excerpt":"","text":"module.exports = function abs (mixedNumber) &#123; // discuss at: https://locutus.io/php/abs/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Karol Kowalski // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // example 1: abs(4.2) // returns 1: 4.2 // example 2: abs(-4.2) // returns 2: 4.2 // example 3: abs(-5) // returns 3: 5 // example 4: abs('_argos') // returns 4: 0 return Math.abs(mixedNumber) || 0&#125;"},{"title":"PHP's acos in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/math/acos/index.html","permalink":"https://locutus.io/php/math/acos/index.html","excerpt":"","text":"module.exports = function acos (arg) &#123; // discuss at: https://locutus.io/php/acos/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // note 1: Sorry about the crippled test. Needed because precision differs accross platforms. // example 1: (acos(0.3) + '').substr(0, 17) // returns 1: \"1.266103672779499\" return Math.acos(arg)&#125;"},{"title":"PHP's acosh in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/math/acosh/index.html","permalink":"https://locutus.io/php/math/acosh/index.html","excerpt":"","text":"module.exports = function acosh (arg) &#123; // discuss at: https://locutus.io/php/acosh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: acosh(8723321.4) // returns 1: 16.674657798418625 return Math.log(arg + Math.sqrt(arg * arg - 1))&#125;"},{"title":"PHP's asin in JavaScript","date":"2021-02-28T22:26:45.613Z","updated":"2021-02-28T22:26:45.613Z","comments":true,"path":"php/math/asin/index.html","permalink":"https://locutus.io/php/math/asin/index.html","excerpt":"","text":"module.exports = function asin (arg) &#123; // discuss at: https://locutus.io/php/asin/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // note 1: Sorry about the crippled test. Needed because precision differs accross platforms. // example 1: (asin(0.3) + '').substr(0, 17) // returns 1: \"0.304692654015397\" return Math.asin(arg)&#125;"},{"title":"PHP's asinh in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/asinh/index.html","permalink":"https://locutus.io/php/math/asinh/index.html","excerpt":"","text":"module.exports = function asinh (arg) &#123; // discuss at: https://locutus.io/php/asinh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: asinh(8723321.4) // returns 1: 16.67465779841863 return Math.log(arg + Math.sqrt(arg * arg + 1))&#125;"},{"title":"PHP's atan in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/atan/index.html","permalink":"https://locutus.io/php/math/atan/index.html","excerpt":"","text":"module.exports = function atan (arg) &#123; // discuss at: https://locutus.io/php/atan/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: atan(8723321.4) // returns 1: 1.5707962121596615 return Math.atan(arg)&#125;"},{"title":"PHP's atan2 in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/atan2/index.html","permalink":"https://locutus.io/php/math/atan2/index.html","excerpt":"","text":"module.exports = function atan2 (y, x) &#123; // discuss at: https://locutus.io/php/atan2/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: atan2(1, 1) // returns 1: 0.7853981633974483 return Math.atan2(y, x)&#125;"},{"title":"PHP's atanh in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/atanh/index.html","permalink":"https://locutus.io/php/math/atanh/index.html","excerpt":"","text":"module.exports = function atanh (arg) &#123; // discuss at: https://locutus.io/php/atanh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: atanh(0.3) // returns 1: 0.3095196042031118 return 0.5 * Math.log((1 + arg) / (1 - arg))&#125;"},{"title":"PHP's base_convert in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/base_convert/index.html","permalink":"https://locutus.io/php/math/base_convert/index.html","excerpt":"","text":"module.exports = function base_convert (number, frombase, tobase) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/base_convert/ // original by: Philippe Baumann // improved by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: base_convert('A37334', 16, 2) // returns 1: '101000110111001100110100' return parseInt(number + '', frombase | 0) .toString(tobase | 0)&#125;"},{"title":"PHP's bindec in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/bindec/index.html","permalink":"https://locutus.io/php/math/bindec/index.html","excerpt":"","text":"module.exports = function bindec (binaryString) &#123; // discuss at: https://locutus.io/php/bindec/ // original by: Philippe Baumann // example 1: bindec('110011') // returns 1: 51 // example 2: bindec('000110011') // returns 2: 51 // example 3: bindec('111') // returns 3: 7 binaryString = (binaryString + '').replace(/[^01]/gi, '') return parseInt(binaryString, 2)&#125;"},{"title":"PHP's ceil in JavaScript","date":"2021-02-28T22:26:45.617Z","updated":"2021-02-28T22:26:45.617Z","comments":true,"path":"php/math/ceil/index.html","permalink":"https://locutus.io/php/math/ceil/index.html","excerpt":"","text":"module.exports = function ceil (value) &#123; // discuss at: https://locutus.io/php/ceil/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: ceil(8723321.4) // returns 1: 8723322 return Math.ceil(value)&#125;"},{"title":"PHP's cos in JavaScript","date":"2021-02-28T22:26:45.621Z","updated":"2021-02-28T22:26:45.621Z","comments":true,"path":"php/math/cos/index.html","permalink":"https://locutus.io/php/math/cos/index.html","excerpt":"","text":"module.exports = function cos (arg) &#123; // discuss at: https://locutus.io/php/cos/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: Math.ceil(cos(8723321.4) * 10000000) // returns 1: -1812718 return Math.cos(arg)&#125;"},{"title":"PHP's cosh in JavaScript","date":"2021-02-28T22:26:45.621Z","updated":"2021-02-28T22:26:45.621Z","comments":true,"path":"php/math/cosh/index.html","permalink":"https://locutus.io/php/math/cosh/index.html","excerpt":"","text":"module.exports = function cosh (arg) &#123; // discuss at: https://locutus.io/php/cosh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: cosh(-0.18127180117607017) // returns 1: 1.0164747716114113 return (Math.exp(arg) + Math.exp(-arg)) / 2&#125;"},{"title":"PHP's decbin in JavaScript","date":"2021-02-28T22:26:45.621Z","updated":"2021-02-28T22:26:45.621Z","comments":true,"path":"php/math/decbin/index.html","permalink":"https://locutus.io/php/math/decbin/index.html","excerpt":"","text":"module.exports = function decbin (number) &#123; // discuss at: https://locutus.io/php/decbin/ // original by: Enrique Gonzalez // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript // input by: pilus // input by: nord_ua // example 1: decbin(12) // returns 1: '1100' // example 2: decbin(26) // returns 2: '11010' // example 3: decbin('26') // returns 3: '11010' if (number &lt; 0) &#123; number = 0xFFFFFFFF + number + 1 &#125; return parseInt(number, 10) .toString(2)&#125;"},{"title":"PHP's dechex in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/dechex/index.html","permalink":"https://locutus.io/php/math/dechex/index.html","excerpt":"","text":"module.exports = function dechex (number) &#123; // discuss at: https://locutus.io/php/dechex/ // original by: Philippe Baumann // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript // input by: pilus // example 1: dechex(10) // returns 1: 'a' // example 2: dechex(47) // returns 2: '2f' // example 3: dechex(-1415723993) // returns 3: 'ab9dc427' if (number &lt; 0) &#123; number = 0xFFFFFFFF + number + 1 &#125; return parseInt(number, 10) .toString(16)&#125;"},{"title":"PHP's decoct in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/decoct/index.html","permalink":"https://locutus.io/php/math/decoct/index.html","excerpt":"","text":"module.exports = function decoct (number) &#123; // discuss at: https://locutus.io/php/decoct/ // original by: Enrique Gonzalez // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript // input by: pilus // example 1: decoct(15) // returns 1: '17' // example 2: decoct(264) // returns 2: '410' if (number &lt; 0) &#123; number = 0xFFFFFFFF + number + 1 &#125; return parseInt(number, 10) .toString(8)&#125;"},{"title":"PHP's deg2rad in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/deg2rad/index.html","permalink":"https://locutus.io/php/math/deg2rad/index.html","excerpt":"","text":"module.exports = function deg2rad (angle) &#123; // discuss at: https://locutus.io/php/deg2rad/ // original by: Enrique Gonzalez // improved by: Thomas Grainger (https://graingert.co.uk) // example 1: deg2rad(45) // returns 1: 0.7853981633974483 return angle * 0.017453292519943295 // (angle / 180) * Math.PI;&#125;"},{"title":"PHP's exp in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/exp/index.html","permalink":"https://locutus.io/php/math/exp/index.html","excerpt":"","text":"module.exports = function exp (arg) &#123; // discuss at: https://locutus.io/php/exp/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: exp(0.3) // returns 1: 1.3498588075760032 return Math.exp(arg)&#125;"},{"title":"PHP's expm1 in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/expm1/index.html","permalink":"https://locutus.io/php/math/expm1/index.html","excerpt":"","text":"module.exports = function expm1 (x) &#123; // discuss at: https://locutus.io/php/expm1/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Robert Eisele (https://www.xarg.org/) // note 1: Precision 'n' can be adjusted as desired // example 1: expm1(1e-15) // returns 1: 1.0000000000000007e-15 return (x &lt; 1e-5 &amp;&amp; x &gt; -1e-5) ? x + 0.5 * x * x : Math.exp(x) - 1&#125;"},{"title":"PHP's floor in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/floor/index.html","permalink":"https://locutus.io/php/math/floor/index.html","excerpt":"","text":"module.exports = function floor (value) &#123; // discuss at: https://locutus.io/php/floor/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: floor(8723321.4) // returns 1: 8723321 return Math.floor(value)&#125;"},{"title":"PHP's fmod in JavaScript","date":"2021-02-28T22:26:45.625Z","updated":"2021-02-28T22:26:45.625Z","comments":true,"path":"php/math/fmod/index.html","permalink":"https://locutus.io/php/math/fmod/index.html","excerpt":"","text":"module.exports = function fmod (x, y) &#123; // discuss at: https://locutus.io/php/fmod/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // example 1: fmod(5.7, 1.3) // returns 1: 0.5 let tmp let tmp2 let p = 0 let pY = 0 let l = 0.0 let l2 = 0.0 tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/) p = parseInt(tmp[2], 10) - (tmp[1] + '').length tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/) pY = parseInt(tmp[2], 10) - (tmp[1] + '').length if (pY &gt; p) &#123; p = pY &#125; tmp2 = (x % y) if (p &lt; -100 || p &gt; 20) &#123; // toFixed will give an out of bound error so we fix it like this: l = Math.round(Math.log(tmp2) / Math.log(10)) l2 = Math.pow(10, l) return (tmp2 / l2).toFixed(l - p) * l2 &#125; else &#123; return parseFloat(tmp2.toFixed(-p)) &#125;&#125;"},{"title":"PHP's getrandmax in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/getrandmax/index.html","permalink":"https://locutus.io/php/math/getrandmax/index.html","excerpt":"","text":"module.exports = function getrandmax () &#123; // discuss at: https://locutus.io/php/getrandmax/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: getrandmax() // returns 1: 2147483647 return 2147483647&#125;"},{"title":"PHP's hexdec in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/hexdec/index.html","permalink":"https://locutus.io/php/math/hexdec/index.html","excerpt":"","text":"module.exports = function hexdec (hexString) &#123; // discuss at: https://locutus.io/php/hexdec/ // original by: Philippe Baumann // example 1: hexdec('that') // returns 1: 10 // example 2: hexdec('a0') // returns 2: 160 hexString = (hexString + '').replace(/[^a-f0-9]/gi, '') return parseInt(hexString, 16)&#125;"},{"title":"PHP's hypot in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/hypot/index.html","permalink":"https://locutus.io/php/math/hypot/index.html","excerpt":"","text":"module.exports = function hypot (x, y) &#123; // discuss at: https://locutus.io/php/hypot/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // imprived by: Robert Eisele (https://www.xarg.org/) // example 1: hypot(3, 4) // returns 1: 5 // example 2: hypot([], 'a') // returns 2: null x = Math.abs(x) y = Math.abs(y) let t = Math.min(x, y) x = Math.max(x, y) t = t / x return x * Math.sqrt(1 + t * t) || null&#125;"},{"title":"PHP's math extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/math/index.html","permalink":"https://locutus.io/php/math/index.html","excerpt":"","text":""},{"title":"PHP's is_finite in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/is_finite/index.html","permalink":"https://locutus.io/php/math/is_finite/index.html","excerpt":"","text":"module.exports = function is_finite (val) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_finite/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: is_finite(Infinity) // returns 1: false // example 2: is_finite(-Infinity) // returns 2: false // example 3: is_finite(0) // returns 3: true let warningType = '' if (val === Infinity || val === -Infinity) &#123; return false &#125; // Some warnings for maximum PHP compatibility if (typeof val === 'object') &#123; warningType = (Object.prototype.toString.call(val) === '[object Array]' ? 'array' : 'object') &#125; else if (typeof val === 'string' &amp;&amp; !val.match(/^[+-]?\\d/)) &#123; // simulate PHP's behaviour: '-9a' doesn't give a warning, but 'a9' does. warningType = 'string' &#125; if (warningType) &#123; const msg = 'Warning: is_finite() expects parameter 1 to be double, ' + warningType + ' given' throw new Error(msg) &#125; return true&#125;"},{"title":"PHP's is_infinite in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/is_infinite/index.html","permalink":"https://locutus.io/php/math/is_infinite/index.html","excerpt":"","text":"module.exports = function is_infinite (val) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_infinite/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: is_infinite(Infinity) // returns 1: true // example 2: is_infinite(-Infinity) // returns 2: true // example 3: is_infinite(0) // returns 3: false let warningType = '' if (val === Infinity || val === -Infinity) &#123; return true &#125; // Some warnings for maximum PHP compatibility if (typeof val === 'object') &#123; warningType = (Object.prototype.toString.call(val) === '[object Array]' ? 'array' : 'object') &#125; else if (typeof val === 'string' &amp;&amp; !val.match(/^[+-]?\\d/)) &#123; // simulate PHP's behaviour: '-9a' doesn't give a warning, but 'a9' does. warningType = 'string' &#125; if (warningType) &#123; const msg = 'Warning: is_infinite() expects parameter 1 to be double, ' + warningType + ' given' throw new Error(msg) &#125; return false&#125;"},{"title":"PHP's is_nan in JavaScript","date":"2021-02-28T22:26:45.629Z","updated":"2021-02-28T22:26:45.629Z","comments":true,"path":"php/math/is_nan/index.html","permalink":"https://locutus.io/php/math/is_nan/index.html","excerpt":"","text":"module.exports = function is_nan (val) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_nan/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // input by: Robin // example 1: is_nan(NaN) // returns 1: true // example 2: is_nan(0) // returns 2: false let warningType = '' if (typeof val === 'number' &amp;&amp; isNaN(val)) &#123; return true &#125; // Some errors for maximum PHP compatibility if (typeof val === 'object') &#123; warningType = (Object.prototype.toString.call(val) === '[object Array]' ? 'array' : 'object') &#125; else if (typeof val === 'string' &amp;&amp; !val.match(/^[+-]?\\d/)) &#123; // simulate PHP's behaviour: '-9a' doesn't give a warning, but 'a9' does. warningType = 'string' &#125; if (warningType) &#123; throw new Error('Warning: is_nan() expects parameter 1 to be double, ' + warningType + ' given') &#125; return false&#125;"},{"title":"PHP's lcg_value in JavaScript","date":"2021-02-28T22:26:45.633Z","updated":"2021-02-28T22:26:45.633Z","comments":true,"path":"php/math/lcg_value/index.html","permalink":"https://locutus.io/php/math/lcg_value/index.html","excerpt":"","text":"module.exports = function lcg_value () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/lcg_value/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: var $rnd = lcg_value() // example 1: var $result = $rnd &gt;= 0 &amp;&amp; $rnd &lt;= 1 // returns 1: true return Math.random()&#125;"},{"title":"PHP's log in JavaScript","date":"2021-02-28T22:26:45.633Z","updated":"2021-02-28T22:26:45.633Z","comments":true,"path":"php/math/log/index.html","permalink":"https://locutus.io/php/math/log/index.html","excerpt":"","text":"module.exports = function log (arg, base) &#123; // discuss at: https://locutus.io/php/log/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: log(8723321.4, 7) // returns 1: 8.212871815082147 return (typeof base === 'undefined') ? Math.log(arg) : Math.log(arg) / Math.log(base)&#125;"},{"title":"PHP's log10 in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/log10/index.html","permalink":"https://locutus.io/php/math/log10/index.html","excerpt":"","text":"module.exports = function log10 (arg) &#123; // discuss at: https://locutus.io/php/log10/ // original by: Philip Peterson // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Tod Gentille // improved by: Brett Zamir (https://brett-zamir.me) // example 1: log10(10) // returns 1: 1 // example 2: log10(1) // returns 2: 0 return Math.log(arg) / 2.302585092994046 // Math.LN10&#125;"},{"title":"PHP's log1p in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/log1p/index.html","permalink":"https://locutus.io/php/math/log1p/index.html","excerpt":"","text":"module.exports = function log1p (x) &#123; // discuss at: https://locutus.io/php/log1p/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Robert Eisele (https://www.xarg.org/) // note 1: Precision 'n' can be adjusted as desired // example 1: log1p(1e-15) // returns 1: 9.999999999999995e-16 let ret = 0 // degree of precision const n = 50 if (x &lt;= -1) &#123; // JavaScript style would be to return Number.NEGATIVE_INFINITY return '-INF' &#125; if (x &lt; 0 || x &gt; 1) &#123; return Math.log(1 + x) &#125; for (let i = 1; i &lt; n; i++) &#123; ret += Math.pow(-x, i) / i &#125; return -ret&#125;"},{"title":"PHP's max in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/max/index.html","permalink":"https://locutus.io/php/math/max/index.html","excerpt":"","text":"module.exports = function max () &#123; // discuss at: https://locutus.io/php/max/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Jack // note 1: Long code cause we're aiming for maximum PHP compatibility // example 1: max(1, 3, 5, 6, 7) // returns 1: 7 // example 2: max([2, 4, 5]) // returns 2: 5 // example 3: max(0, 'hello') // returns 3: 0 // example 4: max('hello', 0) // returns 4: 'hello' // example 5: max(-1, 'hello') // returns 5: 'hello' // example 6: max([2, 4, 8], [2, 5, 7]) // returns 6: [2, 5, 7] let ar let retVal let i = 0 let n = 0 const argv = arguments const argc = argv.length const _obj2Array = function (obj) &#123; if (Object.prototype.toString.call(obj) === '[object Array]') &#123; return obj &#125; else &#123; const ar = [] for (const i in obj) &#123; if (obj.hasOwnProperty(i)) &#123; ar.push(obj[i]) &#125; &#125; return ar &#125; &#125; var _compare = function (current, next) &#123; let i = 0 let n = 0 let tmp = 0 let nl = 0 let cl = 0 if (current === next) &#123; return 0 &#125; else if (typeof current === 'object') &#123; if (typeof next === 'object') &#123; current = _obj2Array(current) next = _obj2Array(next) cl = current.length nl = next.length if (nl &gt; cl) &#123; return 1 &#125; else if (nl &lt; cl) &#123; return -1 &#125; for (i = 0, n = cl; i &lt; n; ++i) &#123; tmp = _compare(current[i], next[i]) if (tmp === 1) &#123; return 1 &#125; else if (tmp === -1) &#123; return -1 &#125; &#125; return 0 &#125; return -1 &#125; else if (typeof next === 'object') &#123; return 1 &#125; else if (isNaN(next) &amp;&amp; !isNaN(current)) &#123; if (current === 0) &#123; return 0 &#125; return (current &lt; 0 ? 1 : -1) &#125; else if (isNaN(current) &amp;&amp; !isNaN(next)) &#123; if (next === 0) &#123; return 0 &#125; return (next &gt; 0 ? 1 : -1) &#125; if (next === current) &#123; return 0 &#125; return (next &gt; current ? 1 : -1) &#125; if (argc === 0) &#123; throw new Error('At least one value should be passed to max()') &#125; else if (argc === 1) &#123; if (typeof argv[0] === 'object') &#123; ar = _obj2Array(argv[0]) &#125; else &#123; throw new Error('Wrong parameter count for max()') &#125; if (ar.length === 0) &#123; throw new Error('Array must contain at least one element for max()') &#125; &#125; else &#123; ar = argv &#125; retVal = ar[0] for (i = 1, n = ar.length; i &lt; n; ++i) &#123; if (_compare(retVal, ar[i]) === 1) &#123; retVal = ar[i] &#125; &#125; return retVal&#125;"},{"title":"PHP's min in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/min/index.html","permalink":"https://locutus.io/php/math/min/index.html","excerpt":"","text":"module.exports = function min () &#123; // discuss at: https://locutus.io/php/min/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Jack // note 1: Long code cause we're aiming for maximum PHP compatibility // example 1: min(1, 3, 5, 6, 7) // returns 1: 1 // example 2: min([2, 4, 5]) // returns 2: 2 // example 3: min(0, 'hello') // returns 3: 0 // example 4: min('hello', 0) // returns 4: 'hello' // example 5: min(-1, 'hello') // returns 5: -1 // example 6: min([2, 4, 8], [2, 5, 7]) // returns 6: [2, 4, 8] let ar let retVal let i = 0 let n = 0 const argv = arguments const argc = argv.length const _obj2Array = function (obj) &#123; if (Object.prototype.toString.call(obj) === '[object Array]') &#123; return obj &#125; const ar = [] for (const i in obj) &#123; if (obj.hasOwnProperty(i)) &#123; ar.push(obj[i]) &#125; &#125; return ar &#125; var _compare = function (current, next) &#123; let i = 0 let n = 0 let tmp = 0 let nl = 0 let cl = 0 if (current === next) &#123; return 0 &#125; else if (typeof current === 'object') &#123; if (typeof next === 'object') &#123; current = _obj2Array(current) next = _obj2Array(next) cl = current.length nl = next.length if (nl &gt; cl) &#123; return 1 &#125; else if (nl &lt; cl) &#123; return -1 &#125; for (i = 0, n = cl; i &lt; n; ++i) &#123; tmp = _compare(current[i], next[i]) if (tmp === 1) &#123; return 1 &#125; else if (tmp === -1) &#123; return -1 &#125; &#125; return 0 &#125; return -1 &#125; else if (typeof next === 'object') &#123; return 1 &#125; else if (isNaN(next) &amp;&amp; !isNaN(current)) &#123; if (current === 0) &#123; return 0 &#125; return (current &lt; 0 ? 1 : -1) &#125; else if (isNaN(current) &amp;&amp; !isNaN(next)) &#123; if (next === 0) &#123; return 0 &#125; return (next &gt; 0 ? 1 : -1) &#125; if (next === current) &#123; return 0 &#125; return (next &gt; current ? 1 : -1) &#125; if (argc === 0) &#123; throw new Error('At least one value should be passed to min()') &#125; else if (argc === 1) &#123; if (typeof argv[0] === 'object') &#123; ar = _obj2Array(argv[0]) &#125; else &#123; throw new Error('Wrong parameter count for min()') &#125; if (ar.length === 0) &#123; throw new Error('Array must contain at least one element for min()') &#125; &#125; else &#123; ar = argv &#125; retVal = ar[0] for (i = 1, n = ar.length; i &lt; n; ++i) &#123; if (_compare(retVal, ar[i]) === -1) &#123; retVal = ar[i] &#125; &#125; return retVal&#125;"},{"title":"PHP's mt_getrandmax in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/mt_getrandmax/index.html","permalink":"https://locutus.io/php/math/mt_getrandmax/index.html","excerpt":"","text":"module.exports = function mt_getrandmax () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/mt_getrandmax/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: mt_getrandmax() // returns 1: 2147483647 return 2147483647&#125;"},{"title":"PHP's mt_rand in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/mt_rand/index.html","permalink":"https://locutus.io/php/math/mt_rand/index.html","excerpt":"","text":"module.exports = function mt_rand (min, max) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/mt_rand/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // input by: Kongo // example 1: mt_rand(1, 1) // returns 1: 1 const argc = arguments.length if (argc === 0) &#123; min = 0 max = 2147483647 &#125; else if (argc === 1) &#123; throw new Error('Warning: mt_rand() expects exactly 2 parameters, 1 given') &#125; else &#123; min = parseInt(min, 10) max = parseInt(max, 10) &#125; return Math.floor(Math.random() * (max - min + 1)) + min&#125;"},{"title":"PHP's octdec in JavaScript","date":"2021-02-28T22:26:45.637Z","updated":"2021-02-28T22:26:45.637Z","comments":true,"path":"php/math/octdec/index.html","permalink":"https://locutus.io/php/math/octdec/index.html","excerpt":"","text":"module.exports = function octdec (octString) &#123; // discuss at: https://locutus.io/php/octdec/ // original by: Philippe Baumann // example 1: octdec('77') // returns 1: 63 octString = (octString + '').replace(/[^0-7]/gi, '') return parseInt(octString, 8)&#125;"},{"title":"PHP's pi in JavaScript","date":"2021-02-28T22:26:45.641Z","updated":"2021-02-28T22:26:45.641Z","comments":true,"path":"php/math/pi/index.html","permalink":"https://locutus.io/php/math/pi/index.html","excerpt":"","text":"module.exports = function pi () &#123; // discuss at: https://locutus.io/php/pi/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: dude // example 1: pi(8723321.4) // returns 1: 3.141592653589793 return 3.141592653589793 // Math.PI&#125;"},{"title":"PHP's pow in JavaScript","date":"2021-02-28T22:26:45.645Z","updated":"2021-02-28T22:26:45.645Z","comments":true,"path":"php/math/pow/index.html","permalink":"https://locutus.io/php/math/pow/index.html","excerpt":"","text":"module.exports = function pow (base, exp) &#123; // discuss at: https://locutus.io/php/pow/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Waldo Malqui Silva (https://fayr.us/waldo/) // example 1: pow(8723321.4, 7) // returns 1: 3.8439091680779e+48 return Number(Math.pow(base, exp).toPrecision(15))&#125;"},{"title":"PHP's rad2deg in JavaScript","date":"2021-02-28T22:26:45.645Z","updated":"2021-02-28T22:26:45.645Z","comments":true,"path":"php/math/rad2deg/index.html","permalink":"https://locutus.io/php/math/rad2deg/index.html","excerpt":"","text":"module.exports = function rad2deg (angle) &#123; // discuss at: https://locutus.io/php/rad2deg/ // original by: Enrique Gonzalez // improved by: Brett Zamir (https://brett-zamir.me) // example 1: rad2deg(3.141592653589793) // returns 1: 180 return angle * 57.29577951308232 // angle / Math.PI * 180&#125;"},{"title":"PHP's rand in JavaScript","date":"2021-02-28T22:26:45.645Z","updated":"2021-02-28T22:26:45.645Z","comments":true,"path":"php/math/rand/index.html","permalink":"https://locutus.io/php/math/rand/index.html","excerpt":"","text":"module.exports = function rand (min, max) &#123; // discuss at: https://locutus.io/php/rand/ // original by: Leslie Hoare // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // note 1: See the commented out code below for a version which // note 1: will work with our experimental (though probably unnecessary) // note 1: srand() function) // example 1: rand(1, 1) // returns 1: 1 const argc = arguments.length if (argc === 0) &#123; min = 0 max = 2147483647 &#125; else if (argc === 1) &#123; throw new Error('Warning: rand() expects exactly 2 parameters, 1 given') &#125; return Math.floor(Math.random() * (max - min + 1)) + min&#125;"},{"title":"PHP's round in JavaScript","date":"2021-02-28T22:26:45.645Z","updated":"2021-02-28T22:26:45.645Z","comments":true,"path":"php/math/round/index.html","permalink":"https://locutus.io/php/math/round/index.html","excerpt":"","text":"function roundToInt (value, mode) &#123; let tmp = Math.floor(Math.abs(value) + 0.5) if ( (mode === 'PHP_ROUND_HALF_DOWN' &amp;&amp; value === (tmp - 0.5)) || (mode === 'PHP_ROUND_HALF_EVEN' &amp;&amp; value === (0.5 + 2 * Math.floor(tmp / 2))) || (mode === 'PHP_ROUND_HALF_ODD' &amp;&amp; value === (0.5 + 2 * Math.floor(tmp / 2) - 1))) &#123; tmp -= 1 &#125; return value &lt; 0 ? -tmp : tmp&#125;module.exports = function round (value, precision = 0, mode = 'PHP_ROUND_HALF_UP') &#123; // discuss at: https://locutus.io/php/round/ // original by: Philip Peterson // revised by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: T.Wild // revised by: Rafał Kukawski (https://blog.kukawski.pl) // input by: Greenseed // input by: meo // input by: William // input by: Josep Sanz (https://www.ws3.es/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // revised by: Rafał Kukawski // example 1: round(1241757, -3) // returns 1: 1242000 // example 2: round(3.6) // returns 2: 4 // example 3: round(2.835, 2) // returns 3: 2.84 // example 4: round(1.1749999999999, 2) // returns 4: 1.17 // example 5: round(58551.799999999996, 2) // returns 5: 58551.8 // example 6: round(4096.485, 2) // returns 6: 4096.49 const floatCast = require('../_helpers/_php_cast_float') const intCast = require('../_helpers/_php_cast_int') let p // the code is heavily based on the native PHP implementation // https://github.com/php/php-src/blob/PHP-7.4/ext/standard/math.c#L355 value = floatCast(value) precision = intCast(precision) p = Math.pow(10, precision) if (isNaN(value) || !isFinite(value)) &#123; return value &#125; // if value already integer and positive precision // then nothing to do, return early if (Math.trunc(value) === value &amp;&amp; precision &gt;= 0) &#123; return value &#125; // PHP does a pre-rounding before rounding to desired precision // https://wiki.php.net/rfc/rounding#pre-rounding_to_the_value_s_precision_if_possible const preRoundPrecision = 14 - Math.floor(Math.log10(Math.abs(value))) if (preRoundPrecision &gt; precision &amp;&amp; preRoundPrecision - 15 &lt; precision) &#123; value = roundToInt(value * Math.pow(10, preRoundPrecision), mode) value /= Math.pow(10, Math.abs(precision - preRoundPrecision)) &#125; else &#123; value *= p &#125; value = roundToInt(value, mode) return value / p&#125;"},{"title":"PHP's sin in JavaScript","date":"2021-02-28T22:26:45.649Z","updated":"2021-02-28T22:26:45.649Z","comments":true,"path":"php/math/sin/index.html","permalink":"https://locutus.io/php/math/sin/index.html","excerpt":"","text":"module.exports = function sin (arg) &#123; // discuss at: https://locutus.io/php/sin/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: Math.ceil(sin(8723321.4) * 10000000) // returns 1: -9834330 return Math.sin(arg)&#125;"},{"title":"PHP's sinh in JavaScript","date":"2021-02-28T22:26:45.649Z","updated":"2021-02-28T22:26:45.649Z","comments":true,"path":"php/math/sinh/index.html","permalink":"https://locutus.io/php/math/sinh/index.html","excerpt":"","text":"module.exports = function sinh (arg) &#123; // discuss at: https://locutus.io/php/sinh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: sinh(-0.9834330348825909) // returns 1: -1.1497971402636502 return (Math.exp(arg) - Math.exp(-arg)) / 2&#125;"},{"title":"PHP's sqrt in JavaScript","date":"2021-02-28T22:26:45.649Z","updated":"2021-02-28T22:26:45.649Z","comments":true,"path":"php/math/sqrt/index.html","permalink":"https://locutus.io/php/math/sqrt/index.html","excerpt":"","text":"module.exports = function sqrt (arg) &#123; // discuss at: https://locutus.io/php/sqrt/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: sqrt(8723321.4) // returns 1: 2953.5269424875746 return Math.sqrt(arg)&#125;"},{"title":"PHP's tan in JavaScript","date":"2021-02-28T22:26:45.649Z","updated":"2021-02-28T22:26:45.649Z","comments":true,"path":"php/math/tan/index.html","permalink":"https://locutus.io/php/math/tan/index.html","excerpt":"","text":"module.exports = function tan (arg) &#123; // discuss at: https://locutus.io/php/tan/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: Math.ceil(tan(8723321.4) * 10000000) // returns 1: 54251849 return Math.tan(arg)&#125;"},{"title":"PHP's tanh in JavaScript","date":"2021-02-28T22:26:45.653Z","updated":"2021-02-28T22:26:45.653Z","comments":true,"path":"php/math/tanh/index.html","permalink":"https://locutus.io/php/math/tanh/index.html","excerpt":"","text":"module.exports = function tanh (arg) &#123; // discuss at: https://locutus.io/php/tanh/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // imprived by: Robert Eisele (https://www.xarg.org/) // example 1: tanh(5.4251848798444815) // returns 1: 0.9999612058841574 return 1 - 2 / (Math.exp(2 * arg) + 1)&#125;"},{"title":"PHP's misc extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/misc/index.html","permalink":"https://locutus.io/php/misc/index.html","excerpt":"","text":""},{"title":"PHP's uniqid in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/misc/uniqid/index.html","permalink":"https://locutus.io/php/misc/uniqid/index.html","excerpt":"","text":"module.exports = function uniqid (prefix, moreEntropy) &#123; // discuss at: https://locutus.io/php/uniqid/ // original by: Kevin van Zonneveld (https://kvz.io) // revised by: Kankrelune (https://www.webfaktory.info/) // note 1: Uses an internal counter (in locutus global) to avoid collision // example 1: var $id = uniqid() // example 1: var $result = $id.length === 13 // returns 1: true // example 2: var $id = uniqid('foo') // example 2: var $result = $id.length === (13 + 'foo'.length) // returns 2: true // example 3: var $id = uniqid('bar', true) // example 3: var $result = $id.length === (23 + 'bar'.length) // returns 3: true if (typeof prefix === 'undefined') &#123; prefix = '' &#125; let retId const _formatSeed = function (seed, reqWidth) &#123; seed = parseInt(seed, 10).toString(16) // to hex str if (reqWidth &lt; seed.length) &#123; // so long we split return seed.slice(seed.length - reqWidth) &#125; if (reqWidth &gt; seed.length) &#123; // so short we pad return Array(1 + (reqWidth - seed.length)).join('0') + seed &#125; return seed &#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; if (!$locutus.php.uniqidSeed) &#123; // init seed with big random int $locutus.php.uniqidSeed = Math.floor(Math.random() * 0x75bcd15) &#125; $locutus.php.uniqidSeed++ // start with prefix, add current milliseconds hex string retId = prefix retId += _formatSeed(parseInt(new Date().getTime() / 1000, 10), 8) // add seed hex string retId += _formatSeed($locutus.php.uniqidSeed, 5) if (moreEntropy) &#123; // for more entropy we add a float lower to 10 retId += (Math.random() * 10).toFixed(8).toString() &#125; return retId&#125;"},{"title":"PHP's gopher_parsedir in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/net-gopher/gopher_parsedir/index.html","permalink":"https://locutus.io/php/net-gopher/gopher_parsedir/index.html","excerpt":"","text":"module.exports = function gopher_parsedir (dirent) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/gopher_parsedir/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var entry = gopher_parsedir('0All about my gopher site.\\t/allabout.txt\\tgopher.example.com\\t70\\u000d\\u000a') // example 1: entry.title // returns 1: 'All about my gopher site.' /* Types * 0 = plain text file * 1 = directory menu listing * 2 = CSO search query * 3 = error message * 4 = BinHex encoded text file * 5 = binary archive file * 6 = UUEncoded text file * 7 = search engine query * 8 = telnet session pointer * 9 = binary file * g = Graphics file format, primarily a GIF file * h = HTML file * i = informational message * s = Audio file format, primarily a WAV file */ const entryPattern = /^(.)(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\u000d\\u000a$/ const entry = dirent.match(entryPattern) if (entry === null) &#123; throw new Error('Could not parse the directory entry') // return false; &#125; let type = entry[1] switch (type) &#123; case 'i': // GOPHER_INFO type = 255 break case '1': // GOPHER_DIRECTORY type = 1 break case '0': // GOPHER_DOCUMENT type = 0 break case '4': // GOPHER_BINHEX type = 4 break case '5': // GOPHER_DOSBINARY type = 5 break case '6': // GOPHER_UUENCODED type = 6 break case '9': // GOPHER_BINARY type = 9 break case 'h': // GOPHER_HTTP type = 254 break default: return &#123; type: -1, data: dirent &#125; // GOPHER_UNKNOWN &#125; return &#123; type: type, title: entry[2], path: entry[3], host: entry[4], port: entry[5] &#125;&#125;"},{"title":"PHP's net-gopher extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/net-gopher/index.html","permalink":"https://locutus.io/php/net-gopher/index.html","excerpt":"","text":""},{"title":"PHP's network extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/network/index.html","permalink":"https://locutus.io/php/network/index.html","excerpt":"","text":""},{"title":"PHP's inet_ntop in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/network/inet_ntop/index.html","permalink":"https://locutus.io/php/network/inet_ntop/index.html","excerpt":"","text":"module.exports = function inet_ntop (a) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/inet_ntop/ // original by: Theriault (https://github.com/Theriault) // example 1: inet_ntop('\\x7F\\x00\\x00\\x01') // returns 1: '127.0.0.1' // _example 2: inet_ntop('\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\1') // _returns 2: '::1' let i = 0 let m = '' const c = [] a += '' if (a.length === 4) &#123; // IPv4 return [ a.charCodeAt(0), a.charCodeAt(1), a.charCodeAt(2), a.charCodeAt(3) ].join('.') &#125; else if (a.length === 16) &#123; // IPv6 for (i = 0; i &lt; 16; i++) &#123; c.push(((a.charCodeAt(i++) &lt;&lt; 8) + a.charCodeAt(i)).toString(16)) &#125; return c.join(':') .replace(/((^|:)0(?=:|$))+:?/g, function (t) &#123; m = (t.length &gt; m.length) ? t : m return t &#125;) .replace(m || ' ', '::') &#125; else &#123; // Invalid length return false &#125;&#125;"},{"title":"PHP's inet_pton in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/network/inet_pton/index.html","permalink":"https://locutus.io/php/network/inet_pton/index.html","excerpt":"","text":"module.exports = function inet_pton (a) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/inet_pton/ // original by: Theriault (https://github.com/Theriault) // improved by: alromh87 and JamieSlome // example 1: inet_pton('::') // returns 1: '\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0' // example 2: inet_pton('127.0.0.1') // returns 2: '\\x7F\\x00\\x00\\x01' let m let i let j const f = String.fromCharCode // IPv4 m = a.match(/^(?:\\d&#123;1,3&#125;(?:\\.|$))&#123;4&#125;/) if (m) &#123; m = m[0].split('.') m = f(m[0], m[1], m[2], m[3]) // Return if 4 bytes, otherwise false. return m.length === 4 ? m : false &#125; // IPv6 if (a.length &gt; 39) &#123; return false &#125; m = a.split('::') if (m.length &gt; 2) &#123; return false &#125; // :: can't be used more than once in IPv6. const reHexDigits = /^[\\da-f]&#123;1,4&#125;$/i for (j = 0; j &lt; m.length; j++) &#123; if (m[j].length === 0) &#123; // Skip if empty. continue &#125; m[j] = m[j].split(':') for (i = 0; i &lt; m[j].length; i++) &#123; let hextet = m[j][i] // check if valid hex string up to 4 chars if (!reHexDigits.test(hextet)) &#123; return false &#125; hextet = parseInt(hextet, 16) // Would be NaN if it was blank, return false. if (isNaN(hextet)) &#123; // Invalid IP. return false &#125; m[j][i] = f(hextet &gt;&gt; 8, hextet &amp; 0xFF) &#125; m[j] = m[j].join('') &#125; return m.join('\\x00'.repeat(16 - m.reduce((tl, m) =&gt; tl + m.length, 0)))&#125;"},{"title":"PHP's ip2long in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/network/ip2long/index.html","permalink":"https://locutus.io/php/network/ip2long/index.html","excerpt":"","text":"module.exports = function ip2long (argIP) &#123; // discuss at: https://locutus.io/php/ip2long/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Victor // revised by: fearphage (https://my.opera.com/fearphage/) // revised by: Theriault (https://github.com/Theriault) // estarget: es2015 // example 1: ip2long('192.0.34.166') // returns 1: 3221234342 // example 2: ip2long('0.0xABCDEF') // returns 2: 11259375 // example 3: ip2long('255.255.255.256') // returns 3: false let i = 0 // PHP allows decimal, octal, and hexadecimal IP components. // PHP allows between 1 (e.g. 127) to 4 (e.g 127.0.0.1) components. const pattern = new RegExp([ '^([1-9]\\\\d*|0[0-7]*|0x[\\\\da-f]+)', '(?:\\\\.([1-9]\\\\d*|0[0-7]*|0x[\\\\da-f]+))?', '(?:\\\\.([1-9]\\\\d*|0[0-7]*|0x[\\\\da-f]+))?', '(?:\\\\.([1-9]\\\\d*|0[0-7]*|0x[\\\\da-f]+))?$' ].join(''), 'i') argIP = argIP.match(pattern) // Verify argIP format. if (!argIP) &#123; // Invalid format. return false &#125; // Reuse argIP variable for component counter. argIP[0] = 0 for (i = 1; i &lt; 5; i += 1) &#123; argIP[0] += !!((argIP[i] || '').length) argIP[i] = parseInt(argIP[i]) || 0 &#125; // Continue to use argIP for overflow values. // PHP does not allow any component to overflow. argIP.push(256, 256, 256, 256) // Recalculate overflow of last component supplied to make up for missing components. argIP[4 + argIP[0]] *= Math.pow(256, 4 - argIP[0]) if (argIP[1] &gt;= argIP[5] || argIP[2] &gt;= argIP[6] || argIP[3] &gt;= argIP[7] || argIP[4] &gt;= argIP[8]) &#123; return false &#125; return argIP[1] * (argIP[0] === 1 || 16777216) + argIP[2] * (argIP[0] &lt;= 2 || 65536) + argIP[3] * (argIP[0] &lt;= 3 || 256) + argIP[4] * 1&#125;"},{"title":"PHP's long2ip in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/network/long2ip/index.html","permalink":"https://locutus.io/php/network/long2ip/index.html","excerpt":"","text":"module.exports = function long2ip (ip) &#123; // discuss at: https://locutus.io/php/long2ip/ // original by: Waldo Malqui Silva (https://fayr.us/waldo/) // example 1: long2ip( 3221234342 ) // returns 1: '192.0.34.166' if (!isFinite(ip)) &#123; return false &#125; return [ip &gt;&gt;&gt; 24 &amp; 0xFF, ip &gt;&gt;&gt; 16 &amp; 0xFF, ip &gt;&gt;&gt; 8 &amp; 0xFF, ip &amp; 0xFF].join('.')&#125;"},{"title":"PHP's setcookie in JavaScript","date":"2021-02-28T22:26:45.661Z","updated":"2021-02-28T22:26:45.661Z","comments":true,"path":"php/network/setcookie/index.html","permalink":"https://locutus.io/php/network/setcookie/index.html","excerpt":"","text":"module.exports = function setcookie (name, value, expires, path, domain, secure) &#123; // discuss at: https://locutus.io/php/setcookie/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // bugfixed by: Andreas // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Kevin van Zonneveld (https://kvz.io) // example 1: setcookie('author_name', 'Kevin van Zonneveld') // returns 1: true const setrawcookie = require('../network/setrawcookie') return setrawcookie(name, encodeURIComponent(value), expires, path, domain, secure)&#125;"},{"title":"PHP's setrawcookie in JavaScript","date":"2021-02-28T22:26:45.661Z","updated":"2021-02-28T22:26:45.661Z","comments":true,"path":"php/network/setrawcookie/index.html","permalink":"https://locutus.io/php/network/setrawcookie/index.html","excerpt":"","text":"module.exports = function setrawcookie (name, value, expires, path, domain, secure) &#123; // discuss at: https://locutus.io/php/setrawcookie/ // original by: Brett Zamir (https://brett-zamir.me) // original by: setcookie // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Michael // note 1: This function requires access to the `window` global and is Browser-only // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: setrawcookie('author_name', 'Kevin van Zonneveld') // returns 1: true if (typeof window === 'undefined') &#123; return true &#125; if (typeof expires === 'string' &amp;&amp; (/^\\d+$/).test(expires)) &#123; expires = parseInt(expires, 10) &#125; if (expires instanceof Date) &#123; expires = expires.toUTCString() &#125; else if (typeof expires === 'number') &#123; expires = (new Date(expires * 1e3)).toUTCString() &#125; const r = [name + '=' + value] let i = '' const s = &#123; expires: expires, path: path, domain: domain &#125; for (i in s) &#123; if (s.hasOwnProperty(i)) &#123; // Exclude items on Object.prototype s[i] &amp;&amp; r.push(i + '=' + s[i]) &#125; &#125; if (secure) &#123; r.push('secure') &#125; window.document.cookie = r.join(';') return true&#125;"},{"title":"PHP's pcre extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/pcre/index.html","permalink":"https://locutus.io/php/pcre/index.html","excerpt":"","text":""},{"title":"PHP's preg_match in JavaScript","date":"2021-02-28T22:26:45.661Z","updated":"2021-02-28T22:26:45.661Z","comments":true,"path":"php/pcre/preg_match/index.html","permalink":"https://locutus.io/php/pcre/preg_match/index.html","excerpt":"","text":"module.exports = function preg_match (regex, str) &#123; // eslint-disable-line camelcase // original by: Muhammad Humayun (https://github.com/ronypt) // example 1: preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]&#123;2,6&#125;$\", \"rony@pharaohtools.com\") // returns 1: true // example 2: preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]&#123;2,6&#125;$\", \"ronypharaohtools.com\") // returns 2: false return (new RegExp(regex).test(str))&#125;"},{"title":"PHP's preg_quote in JavaScript","date":"2021-02-28T22:26:45.661Z","updated":"2021-02-28T22:26:45.661Z","comments":true,"path":"php/pcre/preg_quote/index.html","permalink":"https://locutus.io/php/pcre/preg_quote/index.html","excerpt":"","text":"module.exports = function preg_quote (str, delimiter) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/preg_quote/ // original by: booeyOH // improved by: Ates Goral (https://magnetiq.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: preg_quote(\"$40\") // returns 1: '\\\\$40' // example 2: preg_quote(\"*RRRING* Hello?\") // returns 2: '\\\\*RRRING\\\\* Hello\\\\?' // example 3: preg_quote(\"\\\\.+*?[^]$()&#123;&#125;=!&lt;&gt;|:\") // returns 3: '\\\\\\\\\\\\.\\\\+\\\\*\\\\?\\\\[\\\\^\\\\]\\\\$\\\\(\\\\)\\\\&#123;\\\\&#125;\\\\=\\\\!\\\\&lt;\\\\&gt;\\\\|\\\\:' return (str + '') .replace(new RegExp('[.\\\\\\\\+*?\\\\[\\\\^\\\\]$()&#123;&#125;=!&lt;&gt;|:\\\\' + (delimiter || '') + '-]', 'g'), '\\\\$&amp;')&#125;"},{"title":"PHP's preg_replace in JavaScript","date":"2021-02-28T22:26:45.661Z","updated":"2021-02-28T22:26:45.661Z","comments":true,"path":"php/pcre/preg_replace/index.html","permalink":"https://locutus.io/php/pcre/preg_replace/index.html","excerpt":"","text":"module.exports = function preg_replace (pattern, replacement, string) &#123; // eslint-disable-line camelcase // original by: rony2k6 (https://github.com/rony2k6) // example 1: preg_replace('/xmas/i', 'Christmas', 'It was the night before Xmas.') // returns 1: \"It was the night before Christmas.\" // example 2: preg_replace('/xmas/ig', 'Christmas', 'xMas: It was the night before Xmas.') // returns 2: \"Christmas: It was the night before Christmas.\" // example 3: preg_replace('\\/(\\\\w+) (\\\\d+), (\\\\d+)\\/i', '$11,$3', 'April 15, 2003') // returns 3: \"April1,2003\" // example 4: preg_replace('/[^a-zA-Z0-9]+/', '', 'The Development of code . http://www.') // returns 4: \"TheDevelopmentofcodehttpwww\" // example 5: preg_replace('/[^A-Za-z0-9_\\\\s]/', '', 'D\"usseldorfer H\"auptstrasse') // returns 5: \"Dusseldorfer Hauptstrasse\" let _flag = pattern.substr(pattern.lastIndexOf(pattern[0]) + 1) _flag = (_flag !== '') ? _flag : 'g' const _pattern = pattern.substr(1, pattern.lastIndexOf(pattern[0]) - 1) const regex = new RegExp(_pattern, _flag) const result = string.replace(regex, replacement) return result&#125;"},{"title":"PHP's sql_regcase in JavaScript","date":"2021-02-28T22:26:45.665Z","updated":"2021-02-28T22:26:45.665Z","comments":true,"path":"php/pcre/sql_regcase/index.html","permalink":"https://locutus.io/php/pcre/sql_regcase/index.html","excerpt":"","text":"module.exports = function sql_regcase (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/sql_regcase/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: sql_regcase('Foo - bar.') // returns 1: '[Ff][Oo][Oo] - [Bb][Aa][Rr].' const setlocale = require('../strings/setlocale') let i = 0 let upper = '' let lower = '' let pos = 0 let retStr = '' setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; upper = $locutus.php.locales[$locutus.php.localeCategories.LC_CTYPE].LC_CTYPE.upper lower = $locutus.php.locales[$locutus.php.localeCategories.LC_CTYPE].LC_CTYPE.lower // @todo: Make this more readable for (i = 0; i &lt; str.length; i++) &#123; if (((pos = upper.indexOf(str.charAt(i))) !== -1) || ((pos = lower.indexOf(str.charAt(i))) !== -1)) &#123; retStr += '[' + upper.charAt(pos) + lower.charAt(pos) + ']' &#125; else &#123; retStr += str.charAt(i) &#125; &#125; return retStr&#125;"},{"title":"PHP's addcslashes in JavaScript","date":"2021-02-28T22:26:45.665Z","updated":"2021-02-28T22:26:45.665Z","comments":true,"path":"php/strings/addcslashes/index.html","permalink":"https://locutus.io/php/strings/addcslashes/index.html","excerpt":"","text":"module.exports = function addcslashes (str, charlist) &#123; // discuss at: https://locutus.io/php/addcslashes/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: We show double backslashes in the return value example // note 1: code below because a JavaScript string will not // note 1: render them as backslashes otherwise // example 1: addcslashes('foo[ ]', 'A..z'); // Escape all ASCII within capital A to lower z range, including square brackets // returns 1: \"\\\\f\\\\o\\\\o\\\\[ \\\\]\" // example 2: addcslashes(\"zoo['.']\", 'z..A'); // Only escape z, period, and A here since not a lower-to-higher range // returns 2: \"\\\\zoo['\\\\.']\" // _example 3: addcslashes(\"@a\\u0000\\u0010\\u00A9\", \"\\0..\\37!@\\177..\\377\"); // Escape as octals those specified and less than 32 (0x20) or greater than 126 (0x7E), but not otherwise // _returns 3: '\\\\@a\\\\000\\\\020\\\\302\\\\251' // _example 4: addcslashes(\"\\u0020\\u007E\", \"\\40..\\175\"); // Those between 32 (0x20 or 040) and 126 (0x7E or 0176) decimal value will be backslashed if specified (not octalized) // _returns 4: '\\\\ ~' // _example 5: addcslashes(\"\\r\\u0007\\n\", '\\0..\\37'); // Recognize C escape sequences if specified // _returns 5: \"\\\\r\\\\a\\\\n\" // _example 6: addcslashes(\"\\r\\u0007\\n\", '\\0'); // Do not recognize C escape sequences if not specified // _returns 6: \"\\r\\u0007\\n\" let target = '' const chrs = [] let i = 0 let j = 0 let c = '' let next = '' let rangeBegin = '' let rangeEnd = '' let chr = '' let begin = 0 let end = 0 let octalLength = 0 let postOctalPos = 0 let cca = 0 let escHexGrp = [] let encoded = '' const percentHex = /%([\\dA-Fa-f]+)/g const _pad = function (n, c) &#123; if ((n = n + '').length &lt; c) &#123; return new Array(++c - n.length).join('0') + n &#125; return n &#125; for (i = 0; i &lt; charlist.length; i++) &#123; c = charlist.charAt(i) next = charlist.charAt(i + 1) if (c === '\\\\' &amp;&amp; next &amp;&amp; (/\\d/).test(next)) &#123; // Octal rangeBegin = charlist.slice(i + 1).match(/^\\d+/)[0] octalLength = rangeBegin.length postOctalPos = i + octalLength + 1 if (charlist.charAt(postOctalPos) + charlist.charAt(postOctalPos + 1) === '..') &#123; // Octal begins range begin = rangeBegin.charCodeAt(0) if ((/\\\\\\d/).test(charlist.charAt(postOctalPos + 2) + charlist.charAt(postOctalPos + 3))) &#123; // Range ends with octal rangeEnd = charlist.slice(postOctalPos + 3).match(/^\\d+/)[0] // Skip range end backslash i += 1 &#125; else if (charlist.charAt(postOctalPos + 2)) &#123; // Range ends with character rangeEnd = charlist.charAt(postOctalPos + 2) &#125; else &#123; throw new Error('Range with no end point') &#125; end = rangeEnd.charCodeAt(0) if (end &gt; begin) &#123; // Treat as a range for (j = begin; j &lt;= end; j++) &#123; chrs.push(String.fromCharCode(j)) &#125; &#125; else &#123; // Supposed to treat period, begin and end as individual characters only, not a range chrs.push('.', rangeBegin, rangeEnd) &#125; // Skip dots and range end (already skipped range end backslash if present) i += rangeEnd.length + 2 &#125; else &#123; // Octal is by itself chr = String.fromCharCode(parseInt(rangeBegin, 8)) chrs.push(chr) &#125; // Skip range begin i += octalLength &#125; else if (next + charlist.charAt(i + 2) === '..') &#123; // Character begins range rangeBegin = c begin = rangeBegin.charCodeAt(0) if ((/\\\\\\d/).test(charlist.charAt(i + 3) + charlist.charAt(i + 4))) &#123; // Range ends with octal rangeEnd = charlist.slice(i + 4).match(/^\\d+/)[0] // Skip range end backslash i += 1 &#125; else if (charlist.charAt(i + 3)) &#123; // Range ends with character rangeEnd = charlist.charAt(i + 3) &#125; else &#123; throw new Error('Range with no end point') &#125; end = rangeEnd.charCodeAt(0) if (end &gt; begin) &#123; // Treat as a range for (j = begin; j &lt;= end; j++) &#123; chrs.push(String.fromCharCode(j)) &#125; &#125; else &#123; // Supposed to treat period, begin and end as individual characters only, not a range chrs.push('.', rangeBegin, rangeEnd) &#125; // Skip dots and range end (already skipped range end backslash if present) i += rangeEnd.length + 2 &#125; else &#123; // Character is by itself chrs.push(c) &#125; &#125; for (i = 0; i &lt; str.length; i++) &#123; c = str.charAt(i) if (chrs.indexOf(c) !== -1) &#123; target += '\\\\' cca = c.charCodeAt(0) if (cca &lt; 32 || cca &gt; 126) &#123; // Needs special escaping switch (c) &#123; case '\\n': target += 'n' break case '\\t': target += 't' break case '\\u000D': target += 'r' break case '\\u0007': target += 'a' break case '\\v': target += 'v' break case '\\b': target += 'b' break case '\\f': target += 'f' break default: // target += _pad(cca.toString(8), 3);break; // Sufficient for UTF-16 encoded = encodeURIComponent(c) // 3-length-padded UTF-8 octets if ((escHexGrp = percentHex.exec(encoded)) !== null) &#123; // already added a slash above: target += _pad(parseInt(escHexGrp[1], 16).toString(8), 3) &#125; while ((escHexGrp = percentHex.exec(encoded)) !== null) &#123; target += '\\\\' + _pad(parseInt(escHexGrp[1], 16).toString(8), 3) &#125; break &#125; &#125; else &#123; // Perform regular backslashed escaping target += c &#125; &#125; else &#123; // Just add the character unescaped target += c &#125; &#125; return target&#125;"},{"title":"PHP's addslashes in JavaScript","date":"2021-02-28T22:26:45.669Z","updated":"2021-02-28T22:26:45.669Z","comments":true,"path":"php/strings/addslashes/index.html","permalink":"https://locutus.io/php/strings/addslashes/index.html","excerpt":"","text":"module.exports = function addslashes (str) &#123; // discuss at: https://locutus.io/php/addslashes/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Ates Goral (https://magnetiq.com) // improved by: marrtins // improved by: Nate // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Oskar Larsson Högfeldt (https://oskar-lh.name/) // input by: Denny Wardhana // example 1: addslashes(\"kevin's birthday\") // returns 1: \"kevin\\\\'s birthday\" return (str + '') .replace(/[\\\\\"']/g, '\\\\$&amp;') .replace(/\\u0000/g, '\\\\0')&#125;"},{"title":"PHP's bin2hex in JavaScript","date":"2021-02-28T22:26:45.669Z","updated":"2021-02-28T22:26:45.669Z","comments":true,"path":"php/strings/bin2hex/index.html","permalink":"https://locutus.io/php/strings/bin2hex/index.html","excerpt":"","text":"module.exports = function bin2hex (s) &#123; // discuss at: https://locutus.io/php/bin2hex/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Linuxworld // improved by: ntoniazzi (https://locutus.io/php/bin2hex:361#comment_177616) // example 1: bin2hex('Kev') // returns 1: '4b6576' // example 2: bin2hex(String.fromCharCode(0x00)) // returns 2: '00' let i let l let o = '' let n s += '' for (i = 0, l = s.length; i &lt; l; i++) &#123; n = s.charCodeAt(i) .toString(16) o += n.length &lt; 2 ? '0' + n : n &#125; return o&#125;"},{"title":"PHP's chop in JavaScript","date":"2021-02-28T22:26:45.669Z","updated":"2021-02-28T22:26:45.669Z","comments":true,"path":"php/strings/chop/index.html","permalink":"https://locutus.io/php/strings/chop/index.html","excerpt":"","text":"module.exports = function chop (str, charlist) &#123; // discuss at: https://locutus.io/php/chop/ // original by: Paulo Freitas // example 1: chop(' Kevin van Zonneveld ') // returns 1: ' Kevin van Zonneveld' const rtrim = require('../strings/rtrim') return rtrim(str, charlist)&#125;"},{"title":"PHP's chr in JavaScript","date":"2021-02-28T22:26:45.669Z","updated":"2021-02-28T22:26:45.669Z","comments":true,"path":"php/strings/chr/index.html","permalink":"https://locutus.io/php/strings/chr/index.html","excerpt":"","text":"module.exports = function chr (codePt) &#123; // discuss at: https://locutus.io/php/chr/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: chr(75) === 'K' // example 1: chr(65536) === '\\uD800\\uDC00' // returns 1: true // returns 1: true if (codePt &gt; 0xFFFF) &#123; // Create a four-byte string (length 2) since this code point is high // enough for the UTF-16 encoding (JavaScript internal use), to // require representation with two surrogates (reserved non-characters // used for building other characters; the first is \"high\" and the next \"low\") codePt -= 0x10000 return String.fromCharCode(0xD800 + (codePt &gt;&gt; 10), 0xDC00 + (codePt &amp; 0x3FF)) &#125; return String.fromCharCode(codePt)&#125;"},{"title":"PHP's chunk_split in JavaScript","date":"2021-02-28T22:26:45.681Z","updated":"2021-02-28T22:26:45.681Z","comments":true,"path":"php/strings/chunk_split/index.html","permalink":"https://locutus.io/php/strings/chunk_split/index.html","excerpt":"","text":"module.exports = function chunk_split (body, chunklen, end) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/chunk_split/ // original by: Paulo Freitas // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // improved by: Theriault (https://github.com/Theriault) // example 1: chunk_split('Hello world!', 1, '*') // returns 1: 'H*e*l*l*o* *w*o*r*l*d*!*' // example 2: chunk_split('Hello world!', 10, '*') // returns 2: 'Hello worl*d!*' chunklen = parseInt(chunklen, 10) || 76 end = end || '\\r\\n' if (chunklen &lt; 1) &#123; return false &#125; return body.match(new RegExp('.&#123;0,' + chunklen + '&#125;', 'g')) .join(end)&#125;"},{"title":"PHP's convert_uuencode in JavaScript","date":"2021-02-28T22:26:45.681Z","updated":"2021-02-28T22:26:45.681Z","comments":true,"path":"php/strings/convert_uuencode/index.html","permalink":"https://locutus.io/php/strings/convert_uuencode/index.html","excerpt":"","text":"module.exports = function convert_uuencode (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/convert_uuencode/ // original by: Ole Vrijenhoek // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // reimplemented by: Ole Vrijenhoek // example 1: convert_uuencode(\"test\\ntext text\\r\\n\") // returns 1: \"0=&amp;5S=`IT97AT('1E&gt;'0-\\\"@\\n`\\n\" const isScalar = require('../var/is_scalar') const chr = function (c) &#123; return String.fromCharCode(c) &#125; if (!str || str === '') &#123; return chr(0) &#125; else if (!isScalar(str)) &#123; return false &#125; let c = 0 let u = 0 let i = 0 let a = 0 let encoded = '' let tmp1 = '' let tmp2 = '' let bytes = &#123;&#125; // divide string into chunks of 45 characters const chunk = function () &#123; bytes = str.substr(u, 45).split('') for (i in bytes) &#123; bytes[i] = bytes[i].charCodeAt(0) &#125; return bytes.length || 0 &#125; while ((c = chunk()) !== 0) &#123; u += 45 // New line encoded data starts with number of bytes encoded. encoded += chr(c + 32) // Convert each char in bytes[] to a byte for (i in bytes) &#123; tmp1 = bytes[i].toString(2) while (tmp1.length &lt; 8) &#123; tmp1 = '0' + tmp1 &#125; tmp2 += tmp1 &#125; while (tmp2.length % 6) &#123; tmp2 = tmp2 + '0' &#125; for (i = 0; i &lt;= (tmp2.length / 6) - 1; i++) &#123; tmp1 = tmp2.substr(a, 6) if (tmp1 === '000000') &#123; encoded += chr(96) &#125; else &#123; encoded += chr(parseInt(tmp1, 2) + 32) &#125; a += 6 &#125; a = 0 tmp2 = '' encoded += '\\n' &#125; // Add termination characters encoded += chr(96) + '\\n' return encoded&#125;"},{"title":"PHP's count_chars in JavaScript","date":"2021-02-28T22:26:45.685Z","updated":"2021-02-28T22:26:45.685Z","comments":true,"path":"php/strings/count_chars/index.html","permalink":"https://locutus.io/php/strings/count_chars/index.html","excerpt":"","text":"module.exports = function count_chars (str, mode) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/count_chars/ // original by: Ates Goral (https://magnetiq.com) // improved by: Jack // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // revised by: Theriault (https://github.com/Theriault) // example 1: count_chars(\"Hello World!\", 3) // returns 1: \" !HWdelor\" // example 2: count_chars(\"Hello World!\", 1) // returns 2: &#123;32:1,33:1,72:1,87:1,100:1,101:1,108:3,111:2,114:1&#125; const result = &#123;&#125; const resultArr = [] let i str = ('' + str) .split('') .sort() .join('') .match(/(.)\\1*/g) if ((mode &amp; 1) === 0) &#123; for (i = 0; i !== 256; i++) &#123; result[i] = 0 &#125; &#125; if (mode === 2 || mode === 4) &#123; for (i = 0; i !== str.length; i += 1) &#123; delete result[str[i].charCodeAt(0)] &#125; for (i in result) &#123; result[i] = (mode === 4) ? String.fromCharCode(i) : 0 &#125; &#125; else if (mode === 3) &#123; for (i = 0; i !== str.length; i += 1) &#123; result[i] = str[i].slice(0, 1) &#125; &#125; else &#123; for (i = 0; i !== str.length; i += 1) &#123; result[str[i].charCodeAt(0)] = str[i].length &#125; &#125; if (mode &lt; 3) &#123; return result &#125; for (i in result) &#123; resultArr.push(result[i]) &#125; return resultArr.join('')&#125;"},{"title":"PHP's crc32 in JavaScript","date":"2021-02-28T22:26:45.685Z","updated":"2021-02-28T22:26:45.685Z","comments":true,"path":"php/strings/crc32/index.html","permalink":"https://locutus.io/php/strings/crc32/index.html","excerpt":"","text":"module.exports = function crc32 (str) &#123; // discuss at: https://locutus.io/php/crc32/ // original by: Webtoolkit.info (https://www.webtoolkit.info/) // improved by: T0bsn // example 1: crc32('Kevin van Zonneveld') // returns 1: 1249991249 const utf8Encode = require('../xml/utf8_encode') str = utf8Encode(str) const table = [ '00000000', '77073096', 'EE0E612C', '990951BA', '076DC419', '706AF48F', 'E963A535', '9E6495A3', '0EDB8832', '79DCB8A4', 'E0D5E91E', '97D2D988', '09B64C2B', '7EB17CBD', 'E7B82D07', '90BF1D91', '1DB71064', '6AB020F2', 'F3B97148', '84BE41DE', '1ADAD47D', '6DDDE4EB', 'F4D4B551', '83D385C7', '136C9856', '646BA8C0', 'FD62F97A', '8A65C9EC', '14015C4F', '63066CD9', 'FA0F3D63', '8D080DF5', '3B6E20C8', '4C69105E', 'D56041E4', 'A2677172', '3C03E4D1', '4B04D447', 'D20D85FD', 'A50AB56B', '35B5A8FA', '42B2986C', 'DBBBC9D6', 'ACBCF940', '32D86CE3', '45DF5C75', 'DCD60DCF', 'ABD13D59', '26D930AC', '51DE003A', 'C8D75180', 'BFD06116', '21B4F4B5', '56B3C423', 'CFBA9599', 'B8BDA50F', '2802B89E', '5F058808', 'C60CD9B2', 'B10BE924', '2F6F7C87', '58684C11', 'C1611DAB', 'B6662D3D', '76DC4190', '01DB7106', '98D220BC', 'EFD5102A', '71B18589', '06B6B51F', '9FBFE4A5', 'E8B8D433', '7807C9A2', '0F00F934', '9609A88E', 'E10E9818', '7F6A0DBB', '086D3D2D', '91646C97', 'E6635C01', '6B6B51F4', '1C6C6162', '856530D8', 'F262004E', '6C0695ED', '1B01A57B', '8208F4C1', 'F50FC457', '65B0D9C6', '12B7E950', '8BBEB8EA', 'FCB9887C', '62DD1DDF', '15DA2D49', '8CD37CF3', 'FBD44C65', '4DB26158', '3AB551CE', 'A3BC0074', 'D4BB30E2', '4ADFA541', '3DD895D7', 'A4D1C46D', 'D3D6F4FB', '4369E96A', '346ED9FC', 'AD678846', 'DA60B8D0', '44042D73', '33031DE5', 'AA0A4C5F', 'DD0D7CC9', '5005713C', '270241AA', 'BE0B1010', 'C90C2086', '5768B525', '206F85B3', 'B966D409', 'CE61E49F', '5EDEF90E', '29D9C998', 'B0D09822', 'C7D7A8B4', '59B33D17', '2EB40D81', 'B7BD5C3B', 'C0BA6CAD', 'EDB88320', '9ABFB3B6', '03B6E20C', '74B1D29A', 'EAD54739', '9DD277AF', '04DB2615', '73DC1683', 'E3630B12', '94643B84', '0D6D6A3E', '7A6A5AA8', 'E40ECF0B', '9309FF9D', '0A00AE27', '7D079EB1', 'F00F9344', '8708A3D2', '1E01F268', '6906C2FE', 'F762575D', '806567CB', '196C3671', '6E6B06E7', 'FED41B76', '89D32BE0', '10DA7A5A', '67DD4ACC', 'F9B9DF6F', '8EBEEFF9', '17B7BE43', '60B08ED5', 'D6D6A3E8', 'A1D1937E', '38D8C2C4', '4FDFF252', 'D1BB67F1', 'A6BC5767', '3FB506DD', '48B2364B', 'D80D2BDA', 'AF0A1B4C', '36034AF6', '41047A60', 'DF60EFC3', 'A867DF55', '316E8EEF', '4669BE79', 'CB61B38C', 'BC66831A', '256FD2A0', '5268E236', 'CC0C7795', 'BB0B4703', '220216B9', '5505262F', 'C5BA3BBE', 'B2BD0B28', '2BB45A92', '5CB36A04', 'C2D7FFA7', 'B5D0CF31', '2CD99E8B', '5BDEAE1D', '9B64C2B0', 'EC63F226', '756AA39C', '026D930A', '9C0906A9', 'EB0E363F', '72076785', '05005713', '95BF4A82', 'E2B87A14', '7BB12BAE', '0CB61B38', '92D28E9B', 'E5D5BE0D', '7CDCEFB7', '0BDBDF21', '86D3D2D4', 'F1D4E242', '68DDB3F8', '1FDA836E', '81BE16CD', 'F6B9265B', '6FB077E1', '18B74777', '88085AE6', 'FF0F6A70', '66063BCA', '11010B5C', '8F659EFF', 'F862AE69', '616BFFD3', '166CCF45', 'A00AE278', 'D70DD2EE', '4E048354', '3903B3C2', 'A7672661', 'D06016F7', '4969474D', '3E6E77DB', 'AED16A4A', 'D9D65ADC', '40DF0B66', '37D83BF0', 'A9BCAE53', 'DEBB9EC5', '47B2CF7F', '30B5FFE9', 'BDBDF21C', 'CABAC28A', '53B39330', '24B4A3A6', 'BAD03605', 'CDD70693', '54DE5729', '23D967BF', 'B3667A2E', 'C4614AB8', '5D681B02', '2A6F2B94', 'B40BBE37', 'C30C8EA1', '5A05DF1B', '2D02EF8D' ].join(' ') // @todo: ^-- Now that `table` is an array, maybe we can use that directly using slices, // instead of converting it to a string and substringing let crc = 0 let x = 0 let y = 0 crc = crc ^ (-1) for (let i = 0, iTop = str.length; i &lt; iTop; i++) &#123; y = (crc ^ str.charCodeAt(i)) &amp; 0xFF x = '0x' + table.substr(y * 9, 8) crc = (crc &gt;&gt;&gt; 8) ^ x &#125; return crc ^ (-1)&#125;"},{"title":"PHP's echo in JavaScript","date":"2021-02-28T22:26:45.693Z","updated":"2021-02-28T22:26:45.693Z","comments":true,"path":"php/strings/echo/index.html","permalink":"https://locutus.io/php/strings/echo/index.html","excerpt":"","text":"module.exports = function echo () &#123; // discuss at: https://locutus.io/php/echo/ // original by: Philip Peterson // improved by: echo is bad // improved by: Nate // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // revised by: Der Simon (https://innerdom.sourceforge.net/) // bugfixed by: Eugene Bulkin (https://doubleaw.com/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: EdorFaus // note 1: In 1.3.2 and earlier, this function wrote to the body of the document when it // note 1: was called in webbrowsers, in addition to supporting XUL. // note 1: This involved &gt;100 lines of boilerplate to do this in a safe way. // note 1: Since I can't imageine a complelling use-case for this, and XUL is deprecated // note 1: I have removed this behavior in favor of just calling `console.log` // note 2: You'll see functions depends on `echo` instead of `console.log` as we'll want // note 2: to have 1 contact point to interface with the outside world, so that it's easy // note 2: to support other ways of printing output. // revised by: Kevin van Zonneveld (https://kvz.io) // input by: JB // example 1: echo('Hello world') // returns 1: undefined const args = Array.prototype.slice.call(arguments) return console.log(args.join(' '))&#125;"},{"title":"PHP's explode in JavaScript","date":"2021-02-28T22:26:45.693Z","updated":"2021-02-28T22:26:45.693Z","comments":true,"path":"php/strings/explode/index.html","permalink":"https://locutus.io/php/strings/explode/index.html","excerpt":"","text":"module.exports = function explode (delimiter, string, limit) &#123; // discuss at: https://locutus.io/php/explode/ // original by: Kevin van Zonneveld (https://kvz.io) // example 1: explode(' ', 'Kevin van Zonneveld') // returns 1: [ 'Kevin', 'van', 'Zonneveld' ] if (arguments.length &lt; 2 || typeof delimiter === 'undefined' || typeof string === 'undefined') &#123; return null &#125; if (delimiter === '' || delimiter === false || delimiter === null) &#123; return false &#125; if (typeof delimiter === 'function' || typeof delimiter === 'object' || typeof string === 'function' || typeof string === 'object') &#123; return &#123; 0: '' &#125; &#125; if (delimiter === true) &#123; delimiter = '1' &#125; // Here we go... delimiter += '' string += '' const s = string.split(delimiter) if (typeof limit === 'undefined') return s // Support for limit if (limit === 0) limit = 1 // Positive limit if (limit &gt; 0) &#123; if (limit &gt;= s.length) &#123; return s &#125; return s .slice(0, limit - 1) .concat([s.slice(limit - 1) .join(delimiter) ]) &#125; // Negative limit if (-limit &gt;= s.length) &#123; return [] &#125; s.splice(s.length + limit) return s&#125;"},{"title":"PHP's get_html_translation_table in JavaScript","date":"2021-02-28T22:26:45.693Z","updated":"2021-02-28T22:26:45.693Z","comments":true,"path":"php/strings/get_html_translation_table/index.html","permalink":"https://locutus.io/php/strings/get_html_translation_table/index.html","excerpt":"","text":"module.exports = function get_html_translation_table (table, quoteStyle) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/get_html_translation_table/ // original by: Philip Peterson // revised by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: noname // bugfixed by: Alex // bugfixed by: Marco // bugfixed by: madipta // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: T.Wild // improved by: KELAN // improved by: Brett Zamir (https://brett-zamir.me) // input by: Frank Forte // input by: Ratheous // note 1: It has been decided that we're not going to add global // note 1: dependencies to Locutus, meaning the constants are not // note 1: real constants, but strings instead. Integers are also supported if someone // note 1: chooses to create the constants themselves. // example 1: get_html_translation_table('HTML_SPECIALCHARS') // returns 1: &#123;'\"': '&amp;quot;', '&amp;': '&amp;amp;', '&lt;': '&amp;lt;', '&gt;': '&amp;gt;'&#125; const entities = &#123;&#125; const hashMap = &#123;&#125; let decimal const constMappingTable = &#123;&#125; const constMappingQuoteStyle = &#123;&#125; let useTable = &#123;&#125; let useQuoteStyle = &#123;&#125; // Translate arguments constMappingTable[0] = 'HTML_SPECIALCHARS' constMappingTable[1] = 'HTML_ENTITIES' constMappingQuoteStyle[0] = 'ENT_NOQUOTES' constMappingQuoteStyle[2] = 'ENT_COMPAT' constMappingQuoteStyle[3] = 'ENT_QUOTES' useTable = !isNaN(table) ? constMappingTable[table] : table ? table.toUpperCase() : 'HTML_SPECIALCHARS' useQuoteStyle = !isNaN(quoteStyle) ? constMappingQuoteStyle[quoteStyle] : quoteStyle ? quoteStyle.toUpperCase() : 'ENT_COMPAT' if (useTable !== 'HTML_SPECIALCHARS' &amp;&amp; useTable !== 'HTML_ENTITIES') &#123; throw new Error('Table: ' + useTable + ' not supported') &#125; entities['38'] = '&amp;amp;' if (useTable === 'HTML_ENTITIES') &#123; entities['160'] = '&amp;nbsp;' entities['161'] = '&amp;iexcl;' entities['162'] = '&amp;cent;' entities['163'] = '&amp;pound;' entities['164'] = '&amp;curren;' entities['165'] = '&amp;yen;' entities['166'] = '&amp;brvbar;' entities['167'] = '&amp;sect;' entities['168'] = '&amp;uml;' entities['169'] = '&amp;copy;' entities['170'] = '&amp;ordf;' entities['171'] = '&amp;laquo;' entities['172'] = '&amp;not;' entities['173'] = '&amp;shy;' entities['174'] = '&amp;reg;' entities['175'] = '&amp;macr;' entities['176'] = '&amp;deg;' entities['177'] = '&amp;plusmn;' entities['178'] = '&amp;sup2;' entities['179'] = '&amp;sup3;' entities['180'] = '&amp;acute;' entities['181'] = '&amp;micro;' entities['182'] = '&amp;para;' entities['183'] = '&amp;middot;' entities['184'] = '&amp;cedil;' entities['185'] = '&amp;sup1;' entities['186'] = '&amp;ordm;' entities['187'] = '&amp;raquo;' entities['188'] = '&amp;frac14;' entities['189'] = '&amp;frac12;' entities['190'] = '&amp;frac34;' entities['191'] = '&amp;iquest;' entities['192'] = '&amp;Agrave;' entities['193'] = '&amp;Aacute;' entities['194'] = '&amp;Acirc;' entities['195'] = '&amp;Atilde;' entities['196'] = '&amp;Auml;' entities['197'] = '&amp;Aring;' entities['198'] = '&amp;AElig;' entities['199'] = '&amp;Ccedil;' entities['200'] = '&amp;Egrave;' entities['201'] = '&amp;Eacute;' entities['202'] = '&amp;Ecirc;' entities['203'] = '&amp;Euml;' entities['204'] = '&amp;Igrave;' entities['205'] = '&amp;Iacute;' entities['206'] = '&amp;Icirc;' entities['207'] = '&amp;Iuml;' entities['208'] = '&amp;ETH;' entities['209'] = '&amp;Ntilde;' entities['210'] = '&amp;Ograve;' entities['211'] = '&amp;Oacute;' entities['212'] = '&amp;Ocirc;' entities['213'] = '&amp;Otilde;' entities['214'] = '&amp;Ouml;' entities['215'] = '&amp;times;' entities['216'] = '&amp;Oslash;' entities['217'] = '&amp;Ugrave;' entities['218'] = '&amp;Uacute;' entities['219'] = '&amp;Ucirc;' entities['220'] = '&amp;Uuml;' entities['221'] = '&amp;Yacute;' entities['222'] = '&amp;THORN;' entities['223'] = '&amp;szlig;' entities['224'] = '&amp;agrave;' entities['225'] = '&amp;aacute;' entities['226'] = '&amp;acirc;' entities['227'] = '&amp;atilde;' entities['228'] = '&amp;auml;' entities['229'] = '&amp;aring;' entities['230'] = '&amp;aelig;' entities['231'] = '&amp;ccedil;' entities['232'] = '&amp;egrave;' entities['233'] = '&amp;eacute;' entities['234'] = '&amp;ecirc;' entities['235'] = '&amp;euml;' entities['236'] = '&amp;igrave;' entities['237'] = '&amp;iacute;' entities['238'] = '&amp;icirc;' entities['239'] = '&amp;iuml;' entities['240'] = '&amp;eth;' entities['241'] = '&amp;ntilde;' entities['242'] = '&amp;ograve;' entities['243'] = '&amp;oacute;' entities['244'] = '&amp;ocirc;' entities['245'] = '&amp;otilde;' entities['246'] = '&amp;ouml;' entities['247'] = '&amp;divide;' entities['248'] = '&amp;oslash;' entities['249'] = '&amp;ugrave;' entities['250'] = '&amp;uacute;' entities['251'] = '&amp;ucirc;' entities['252'] = '&amp;uuml;' entities['253'] = '&amp;yacute;' entities['254'] = '&amp;thorn;' entities['255'] = '&amp;yuml;' &#125; if (useQuoteStyle !== 'ENT_NOQUOTES') &#123; entities['34'] = '&amp;quot;' &#125; if (useQuoteStyle === 'ENT_QUOTES') &#123; entities['39'] = '&amp;#39;' &#125; entities['60'] = '&amp;lt;' entities['62'] = '&amp;gt;' // ascii decimals to real symbols for (decimal in entities) &#123; if (entities.hasOwnProperty(decimal)) &#123; hashMap[String.fromCharCode(decimal)] = entities[decimal] &#125; &#125; return hashMap&#125;"},{"title":"PHP's hex2bin in JavaScript","date":"2021-02-28T22:26:45.693Z","updated":"2021-02-28T22:26:45.693Z","comments":true,"path":"php/strings/hex2bin/index.html","permalink":"https://locutus.io/php/strings/hex2bin/index.html","excerpt":"","text":"module.exports = function hex2bin (s) &#123; // discuss at: https://locutus.io/php/hex2bin/ // original by: Dumitru Uzun (https://duzun.me) // example 1: hex2bin('44696d61') // returns 1: 'Dima' // example 2: hex2bin('00') // returns 2: '\\x00' // example 3: hex2bin('2f1q') // returns 3: false const ret = [] let i = 0 let l s += '' for (l = s.length; i &lt; l; i += 2) &#123; const c = parseInt(s.substr(i, 1), 16) const k = parseInt(s.substr(i + 1, 1), 16) if (isNaN(c) || isNaN(k)) return false ret.push((c &lt;&lt; 4) | k) &#125; return String.fromCharCode.apply(String, ret)&#125;"},{"title":"PHP's html_entity_decode in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/html_entity_decode/index.html","permalink":"https://locutus.io/php/strings/html_entity_decode/index.html","excerpt":"","text":"module.exports = function html_entity_decode (string, quoteStyle) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/html_entity_decode/ // original by: john (https://www.jd-tech.net) // input by: ger // input by: Ratheous // input by: Nick Kolosov (https://sammy.ru) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: marc andreu // revised by: Kevin van Zonneveld (https://kvz.io) // revised by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Fox // example 1: html_entity_decode('Kevin &amp;amp; van Zonneveld') // returns 1: 'Kevin &amp; van Zonneveld' // example 2: html_entity_decode('&amp;amp;lt;') // returns 2: '&amp;lt;' const getHtmlTranslationTable = require('../strings/get_html_translation_table') let tmpStr = '' let entity = '' let symbol = '' tmpStr = string.toString() const hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle) if (hashMap === false) &#123; return false &#125; // @todo: &amp;amp; problem // https://locutus.io/php/get_html_translation_table:416#comment_97660 delete (hashMap['&amp;']) hashMap['&amp;'] = '&amp;amp;' for (symbol in hashMap) &#123; entity = hashMap[symbol] tmpStr = tmpStr.split(entity).join(symbol) &#125; tmpStr = tmpStr.split('&amp;#039;').join(\"'\") return tmpStr&#125;"},{"title":"PHP's htmlentities in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/htmlentities/index.html","permalink":"https://locutus.io/php/strings/htmlentities/index.html","excerpt":"","text":"module.exports = function htmlentities (string, quoteStyle, charset, doubleEncode) &#123; // discuss at: https://locutus.io/php/htmlentities/ // original by: Kevin van Zonneveld (https://kvz.io) // revised by: Kevin van Zonneveld (https://kvz.io) // revised by: Kevin van Zonneveld (https://kvz.io) // improved by: nobbler // improved by: Jack // improved by: Rafał Kukawski (https://blog.kukawski.pl) // improved by: Dj (https://locutus.io/php/htmlentities:425#comment_134018) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: Ratheous // note 1: function is compatible with PHP 5.2 and older // example 1: htmlentities('Kevin &amp; van Zonneveld') // returns 1: 'Kevin &amp;amp; van Zonneveld' // example 2: htmlentities(\"foo'bar\",\"ENT_QUOTES\") // returns 2: 'foo&amp;#039;bar' const getHtmlTranslationTable = require('../strings/get_html_translation_table') const hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle) string = string === null ? '' : string + '' if (!hashMap) &#123; return false &#125; if (quoteStyle &amp;&amp; quoteStyle === 'ENT_QUOTES') &#123; hashMap[\"'\"] = '&amp;#039;' &#125; doubleEncode = doubleEncode === null || !!doubleEncode const regex = new RegExp('&amp;(?:#\\\\d+|#x[\\\\da-f]+|[a-zA-Z][\\\\da-z]*);|[' + Object.keys(hashMap) .join('') // replace regexp special chars .replace(/([()[\\]&#123;&#125;\\-.*+?^$|/\\\\])/g, '\\\\$1') + ']', 'g') return string.replace(regex, function (ent) &#123; if (ent.length &gt; 1) &#123; return doubleEncode ? hashMap['&amp;'] + ent.substr(1) : ent &#125; return hashMap[ent] &#125;)&#125;"},{"title":"PHP's htmlspecialchars in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/htmlspecialchars/index.html","permalink":"https://locutus.io/php/strings/htmlspecialchars/index.html","excerpt":"","text":"module.exports = function htmlspecialchars (string, quoteStyle, charset, doubleEncode) &#123; // discuss at: https://locutus.io/php/htmlspecialchars/ // original by: Mirek Slugen // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Nathan // bugfixed by: Arno // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // revised by: Kevin van Zonneveld (https://kvz.io) // input by: Ratheous // input by: Mailfaker (https://www.weedem.fr/) // input by: felix // reimplemented by: Brett Zamir (https://brett-zamir.me) // note 1: charset argument not supported // example 1: htmlspecialchars(\"&lt;a href='test'&gt;Test&lt;/a&gt;\", 'ENT_QUOTES') // returns 1: '&amp;lt;a href=&amp;#039;test&amp;#039;&amp;gt;Test&amp;lt;/a&amp;gt;' // example 2: htmlspecialchars(\"ab\\\"c'd\", ['ENT_NOQUOTES', 'ENT_QUOTES']) // returns 2: 'ab\"c&amp;#039;d' // example 3: htmlspecialchars('my \"&amp;entity;\" is still here', null, null, false) // returns 3: 'my &amp;quot;&amp;entity;&amp;quot; is still here' let optTemp = 0 let i = 0 let noquotes = false if (typeof quoteStyle === 'undefined' || quoteStyle === null) &#123; quoteStyle = 2 &#125; string = string || '' string = string.toString() if (doubleEncode !== false) &#123; // Put this first to avoid double-encoding string = string.replace(/&amp;/g, '&amp;amp;') &#125; string = string .replace(/&lt;/g, '&amp;lt;') .replace(/&gt;/g, '&amp;gt;') const OPTS = &#123; ENT_NOQUOTES: 0, ENT_HTML_QUOTE_SINGLE: 1, ENT_HTML_QUOTE_DOUBLE: 2, ENT_COMPAT: 2, ENT_QUOTES: 3, ENT_IGNORE: 4 &#125; if (quoteStyle === 0) &#123; noquotes = true &#125; if (typeof quoteStyle !== 'number') &#123; // Allow for a single string or an array of string flags quoteStyle = [].concat(quoteStyle) for (i = 0; i &lt; quoteStyle.length; i++) &#123; // Resolve string input to bitwise e.g. 'ENT_IGNORE' becomes 4 if (OPTS[quoteStyle[i]] === 0) &#123; noquotes = true &#125; else if (OPTS[quoteStyle[i]]) &#123; optTemp = optTemp | OPTS[quoteStyle[i]] &#125; &#125; quoteStyle = optTemp &#125; if (quoteStyle &amp; OPTS.ENT_HTML_QUOTE_SINGLE) &#123; string = string.replace(/'/g, '&amp;#039;') &#125; if (!noquotes) &#123; string = string.replace(/\"/g, '&amp;quot;') &#125; return string&#125;"},{"title":"PHP's htmlspecialchars_decode in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/htmlspecialchars_decode/index.html","permalink":"https://locutus.io/php/strings/htmlspecialchars_decode/index.html","excerpt":"","text":"module.exports = function htmlspecialchars_decode (string, quoteStyle) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/htmlspecialchars_decode/ // original by: Mirek Slugen // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Mateusz \"loonquawl\" Zalega // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: ReverseSyntax // input by: Slawomir Kaniecki // input by: Scott Cariss // input by: Francois // input by: Ratheous // input by: Mailfaker (https://www.weedem.fr/) // revised by: Kevin van Zonneveld (https://kvz.io) // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: htmlspecialchars_decode(\"&lt;p&gt;this -&amp;gt; &amp;quot;&lt;/p&gt;\", 'ENT_NOQUOTES') // returns 1: '&lt;p&gt;this -&gt; &amp;quot;&lt;/p&gt;' // example 2: htmlspecialchars_decode(\"&amp;amp;quot;\") // returns 2: '&amp;quot;' let optTemp = 0 let i = 0 let noquotes = false if (typeof quoteStyle === 'undefined') &#123; quoteStyle = 2 &#125; string = string.toString() .replace(/&amp;lt;/g, '&lt;') .replace(/&amp;gt;/g, '&gt;') const OPTS = &#123; ENT_NOQUOTES: 0, ENT_HTML_QUOTE_SINGLE: 1, ENT_HTML_QUOTE_DOUBLE: 2, ENT_COMPAT: 2, ENT_QUOTES: 3, ENT_IGNORE: 4 &#125; if (quoteStyle === 0) &#123; noquotes = true &#125; if (typeof quoteStyle !== 'number') &#123; // Allow for a single string or an array of string flags quoteStyle = [].concat(quoteStyle) for (i = 0; i &lt; quoteStyle.length; i++) &#123; // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4 if (OPTS[quoteStyle[i]] === 0) &#123; noquotes = true &#125; else if (OPTS[quoteStyle[i]]) &#123; optTemp = optTemp | OPTS[quoteStyle[i]] &#125; &#125; quoteStyle = optTemp &#125; if (quoteStyle &amp; OPTS.ENT_HTML_QUOTE_SINGLE) &#123; // PHP doesn't currently escape if more than one 0, but it should: string = string.replace(/&amp;#0*39;/g, \"'\") // This would also be useful here, but not a part of PHP: // string = string.replace(/&amp;apos;|&amp;#x0*27;/g, \"'\"); &#125; if (!noquotes) &#123; string = string.replace(/&amp;quot;/g, '\"') &#125; // Put this in last place to avoid escape being double-decoded string = string.replace(/&amp;amp;/g, '&amp;') return string&#125;"},{"title":"PHP's implode in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/implode/index.html","permalink":"https://locutus.io/php/strings/implode/index.html","excerpt":"","text":"module.exports = function implode (glue, pieces) &#123; // discuss at: https://locutus.io/php/implode/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Itsacon (https://www.itsacon.net/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: implode(' ', ['Kevin', 'van', 'Zonneveld']) // returns 1: 'Kevin van Zonneveld' // example 2: implode(' ', &#123;first:'Kevin', last: 'van Zonneveld'&#125;) // returns 2: 'Kevin van Zonneveld' let i = '' let retVal = '' let tGlue = '' if (arguments.length === 1) &#123; pieces = glue glue = '' &#125; if (typeof pieces === 'object') &#123; if (Object.prototype.toString.call(pieces) === '[object Array]') &#123; return pieces.join(glue) &#125; for (i in pieces) &#123; retVal += tGlue + pieces[i] tGlue = glue &#125; return retVal &#125; return pieces&#125;"},{"title":"PHP's strings extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/strings/index.html","permalink":"https://locutus.io/php/strings/index.html","excerpt":"","text":""},{"title":"PHP's join in JavaScript","date":"2021-02-28T22:26:45.697Z","updated":"2021-02-28T22:26:45.697Z","comments":true,"path":"php/strings/join/index.html","permalink":"https://locutus.io/php/strings/join/index.html","excerpt":"","text":"module.exports = function join (glue, pieces) &#123; // discuss at: https://locutus.io/php/join/ // original by: Kevin van Zonneveld (https://kvz.io) // example 1: join(' ', ['Kevin', 'van', 'Zonneveld']) // returns 1: 'Kevin van Zonneveld' const implode = require('../strings/implode') return implode(glue, pieces)&#125;"},{"title":"PHP's lcfirst in JavaScript","date":"2021-02-28T22:26:45.701Z","updated":"2021-02-28T22:26:45.701Z","comments":true,"path":"php/strings/lcfirst/index.html","permalink":"https://locutus.io/php/strings/lcfirst/index.html","excerpt":"","text":"module.exports = function lcfirst (str) &#123; // discuss at: https://locutus.io/php/lcfirst/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: lcfirst('Kevin Van Zonneveld') // returns 1: 'kevin Van Zonneveld' str += '' const f = str.charAt(0) .toLowerCase() return f + str.substr(1)&#125;"},{"title":"PHP's levenshtein in JavaScript","date":"2021-02-28T22:26:45.701Z","updated":"2021-02-28T22:26:45.701Z","comments":true,"path":"php/strings/levenshtein/index.html","permalink":"https://locutus.io/php/strings/levenshtein/index.html","excerpt":"","text":"module.exports = function levenshtein (s1, s2, costIns, costRep, costDel) &#123; // discuss at: https://locutus.io/php/levenshtein/ // original by: Carlos R. L. Rodrigues (https://www.jsfromhell.com) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Andrea Giammarchi (https://webreflection.blogspot.com) // reimplemented by: Brett Zamir (https://brett-zamir.me) // reimplemented by: Alexander M Beedie // reimplemented by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: levenshtein('Kevin van Zonneveld', 'Kevin van Sommeveld') // returns 1: 3 // example 2: levenshtein(\"carrrot\", \"carrots\") // returns 2: 2 // example 3: levenshtein(\"carrrot\", \"carrots\", 2, 3, 4) // returns 3: 6 // var LEVENSHTEIN_MAX_LENGTH = 255 // PHP limits the function to max 255 character-long strings costIns = costIns == null ? 1 : +costIns costRep = costRep == null ? 1 : +costRep costDel = costDel == null ? 1 : +costDel if (s1 === s2) &#123; return 0 &#125; const l1 = s1.length const l2 = s2.length if (l1 === 0) &#123; return l2 * costIns &#125; if (l2 === 0) &#123; return l1 * costDel &#125; // Enable the 3 lines below to set the same limits on string length as PHP does // if (l1 &gt; LEVENSHTEIN_MAX_LENGTH || l2 &gt; LEVENSHTEIN_MAX_LENGTH) &#123; // return -1; // &#125; let split = false try &#123; split = !('0')[0] &#125; catch (e) &#123; // Earlier IE may not support access by string index split = true &#125; if (split) &#123; s1 = s1.split('') s2 = s2.split('') &#125; let p1 = new Array(l2 + 1) let p2 = new Array(l2 + 1) let i1, i2, c0, c1, c2, tmp for (i2 = 0; i2 &lt;= l2; i2++) &#123; p1[i2] = i2 * costIns &#125; for (i1 = 0; i1 &lt; l1; i1++) &#123; p2[0] = p1[0] + costDel for (i2 = 0; i2 &lt; l2; i2++) &#123; c0 = p1[i2] + ((s1[i1] === s2[i2]) ? 0 : costRep) c1 = p1[i2 + 1] + costDel if (c1 &lt; c0) &#123; c0 = c1 &#125; c2 = p2[i2] + costIns if (c2 &lt; c0) &#123; c0 = c2 &#125; p2[i2 + 1] = c0 &#125; tmp = p1 p1 = p2 p2 = tmp &#125; c0 = p1[l2] return c0&#125;"},{"title":"PHP's localeconv in JavaScript","date":"2021-02-28T22:26:45.701Z","updated":"2021-02-28T22:26:45.701Z","comments":true,"path":"php/strings/localeconv/index.html","permalink":"https://locutus.io/php/strings/localeconv/index.html","excerpt":"","text":"module.exports = function localeconv () &#123; // discuss at: https://locutus.io/php/localeconv/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: setlocale('LC_ALL', 'en_US') // example 1: localeconv() // returns 1: &#123;decimal_point: '.', thousands_sep: '', positive_sign: '', negative_sign: '-', int_frac_digits: 2, frac_digits: 2, p_cs_precedes: 1, p_sep_by_space: 0, n_cs_precedes: 1, n_sep_by_space: 0, p_sign_posn: 1, n_sign_posn: 1, grouping: [], int_curr_symbol: 'USD ', currency_symbol: '$', mon_decimal_point: '.', mon_thousands_sep: ',', mon_grouping: [3, 3]&#125; const setlocale = require('../strings/setlocale') const arr = &#123;&#125; let prop = '' // ensure setup of localization variables takes place, if not already setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; // Make copies for (prop in $locutus.php.locales[$locutus.php.localeCategories.LC_NUMERIC].LC_NUMERIC) &#123; arr[prop] = $locutus.php.locales[$locutus.php.localeCategories.LC_NUMERIC].LC_NUMERIC[prop] &#125; for (prop in $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY].LC_MONETARY) &#123; arr[prop] = $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY].LC_MONETARY[prop] &#125; return arr&#125;"},{"title":"PHP's ltrim in JavaScript","date":"2021-02-28T22:26:45.705Z","updated":"2021-02-28T22:26:45.705Z","comments":true,"path":"php/strings/ltrim/index.html","permalink":"https://locutus.io/php/strings/ltrim/index.html","excerpt":"","text":"module.exports = function ltrim (str, charlist) &#123; // discuss at: https://locutus.io/php/ltrim/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Erkekjetter // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: ltrim(' Kevin van Zonneveld ') // returns 1: 'Kevin van Zonneveld ' charlist = !charlist ? ' \\\\s\\u00A0' : (charlist + '') .replace(/([[\\]().?/*&#123;&#125;+$^:])/g, '$1') const re = new RegExp('^[' + charlist + ']+', 'g') return (str + '') .replace(re, '')&#125;"},{"title":"PHP's md5_file in JavaScript","date":"2021-02-28T22:26:45.705Z","updated":"2021-02-28T22:26:45.705Z","comments":true,"path":"php/strings/md5_file/index.html","permalink":"https://locutus.io/php/strings/md5_file/index.html","excerpt":"","text":"module.exports = function md5_file (str_filename) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/md5_file/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // note 1: Relies on file_get_contents which does not work in the browser, so Node only. // note 2: Keep in mind that in accordance with PHP, the whole file is buffered and then // note 2: hashed. We'd recommend Node's native crypto modules for faster and more // note 2: efficient hashing // example 1: md5_file('test/never-change.txt') // returns 1: 'bc3aa724b0ec7dce4c26e7f4d0d9b064' const fileGetContents = require('../filesystem/file_get_contents') const md5 = require('../strings/md5') const buf = fileGetContents(str_filename) if (buf === false) &#123; return false &#125; return md5(buf)&#125;"},{"title":"PHP's metaphone in JavaScript","date":"2021-02-28T22:26:45.709Z","updated":"2021-02-28T22:26:45.709Z","comments":true,"path":"php/strings/metaphone/index.html","permalink":"https://locutus.io/php/strings/metaphone/index.html","excerpt":"","text":"module.exports = function metaphone (word, maxPhonemes) &#123; // discuss at: https://locutus.io/php/metaphone/ // original by: Greg Frazier // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: metaphone('Gnu') // returns 1: 'N' // example 2: metaphone('bigger') // returns 2: 'BKR' // example 3: metaphone('accuracy') // returns 3: 'AKKRS' // example 4: metaphone('batch batcher') // returns 4: 'BXBXR' const type = typeof word if (type === 'undefined' || type === 'object' &amp;&amp; word !== null) &#123; // weird! return null &#125; // infinity and NaN values are treated as strings if (type === 'number') &#123; if (isNaN(word)) &#123; word = 'NAN' &#125; else if (!isFinite(word)) &#123; word = 'INF' &#125; &#125; if (maxPhonemes &lt; 0) &#123; return false &#125; maxPhonemes = Math.floor(+maxPhonemes) || 0 // alpha depends on locale, so this var might need an update // or should be turned into a regex // for now assuming pure a-z const alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' const vowel = 'AEIOU' const soft = 'EIY' const leadingNonAlpha = new RegExp('^[^' + alpha + ']+') word = typeof word === 'string' ? word : '' word = word.toUpperCase().replace(leadingNonAlpha, '') if (!word) &#123; return '' &#125; const is = function (p, c) &#123; return c !== '' &amp;&amp; p.indexOf(c) !== -1 &#125; let i = 0 let cc = word.charAt(0) // current char. Short name because it's used all over the function let nc = word.charAt(1) // next char let nnc // after next char let pc // previous char const l = word.length let meta = '' // traditional is an internal param that could be exposed for now let it be a local var const traditional = true switch (cc) &#123; case 'A': meta += nc === 'E' ? nc : cc i += 1 break case 'G': case 'K': case 'P': if (nc === 'N') &#123; meta += nc i += 2 &#125; break case 'W': if (nc === 'R') &#123; meta += nc i += 2 &#125; else if (nc === 'H' || is(vowel, nc)) &#123; meta += 'W' i += 2 &#125; break case 'X': meta += 'S' i += 1 break case 'E': case 'I': case 'O': case 'U': meta += cc i++ break &#125; for (; i &lt; l &amp;&amp; (maxPhonemes === 0 || meta.length &lt; maxPhonemes); i += 1) &#123; // eslint-disable-line no-unmodified-loop-condition,max-len cc = word.charAt(i) nc = word.charAt(i + 1) pc = word.charAt(i - 1) nnc = word.charAt(i + 2) if (cc === pc &amp;&amp; cc !== 'C') &#123; continue &#125; switch (cc) &#123; case 'B': if (pc !== 'M') &#123; meta += cc &#125; break case 'C': if (is(soft, nc)) &#123; if (nc === 'I' &amp;&amp; nnc === 'A') &#123; meta += 'X' &#125; else if (pc !== 'S') &#123; meta += 'S' &#125; &#125; else if (nc === 'H') &#123; meta += !traditional &amp;&amp; (nnc === 'R' || pc === 'S') ? 'K' : 'X' i += 1 &#125; else &#123; meta += 'K' &#125; break case 'D': if (nc === 'G' &amp;&amp; is(soft, nnc)) &#123; meta += 'J' i += 1 &#125; else &#123; meta += 'T' &#125; break case 'G': if (nc === 'H') &#123; if (!(is('BDH', word.charAt(i - 3)) || word.charAt(i - 4) === 'H')) &#123; meta += 'F' i += 1 &#125; &#125; else if (nc === 'N') &#123; if (is(alpha, nnc) &amp;&amp; word.substr(i + 1, 3) !== 'NED') &#123; meta += 'K' &#125; &#125; else if (is(soft, nc) &amp;&amp; pc !== 'G') &#123; meta += 'J' &#125; else &#123; meta += 'K' &#125; break case 'H': if (is(vowel, nc) &amp;&amp; !is('CGPST', pc)) &#123; meta += cc &#125; break case 'K': if (pc !== 'C') &#123; meta += 'K' &#125; break case 'P': meta += nc === 'H' ? 'F' : cc break case 'Q': meta += 'K' break case 'S': if (nc === 'I' &amp;&amp; is('AO', nnc)) &#123; meta += 'X' &#125; else if (nc === 'H') &#123; meta += 'X' i += 1 &#125; else if (!traditional &amp;&amp; word.substr(i + 1, 3) === 'CHW') &#123; meta += 'X' i += 2 &#125; else &#123; meta += 'S' &#125; break case 'T': if (nc === 'I' &amp;&amp; is('AO', nnc)) &#123; meta += 'X' &#125; else if (nc === 'H') &#123; meta += '0' i += 1 &#125; else if (word.substr(i + 1, 2) !== 'CH') &#123; meta += 'T' &#125; break case 'V': meta += 'F' break case 'W': case 'Y': if (is(vowel, nc)) &#123; meta += cc &#125; break case 'X': meta += 'KS' break case 'Z': meta += 'S' break case 'F': case 'J': case 'L': case 'M': case 'N': case 'R': meta += cc break &#125; &#125; return meta&#125;"},{"title":"PHP's nl2br in JavaScript","date":"2021-02-28T22:26:45.721Z","updated":"2021-02-28T22:26:45.721Z","comments":true,"path":"php/strings/nl2br/index.html","permalink":"https://locutus.io/php/strings/nl2br/index.html","excerpt":"","text":"module.exports = function nl2br (str, isXhtml) &#123; // discuss at: https://locutus.io/php/nl2br/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Philip Peterson // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Atli Þór // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Maximusya // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Reynier de la Rosa (https://scriptinside.blogspot.com.es/) // input by: Brett Zamir (https://brett-zamir.me) // example 1: nl2br('Kevin\\nvan\\nZonneveld') // returns 1: 'Kevin&lt;br /&gt;\\nvan&lt;br /&gt;\\nZonneveld' // example 2: nl2br(\"\\nOne\\nTwo\\n\\nThree\\n\", false) // returns 2: '&lt;br&gt;\\nOne&lt;br&gt;\\nTwo&lt;br&gt;\\n&lt;br&gt;\\nThree&lt;br&gt;\\n' // example 3: nl2br(\"\\nOne\\nTwo\\n\\nThree\\n\", true) // returns 3: '&lt;br /&gt;\\nOne&lt;br /&gt;\\nTwo&lt;br /&gt;\\n&lt;br /&gt;\\nThree&lt;br /&gt;\\n' // example 4: nl2br(null) // returns 4: '' // Some latest browsers when str is null return and unexpected null value if (typeof str === 'undefined' || str === null) &#123; return '' &#125; // Adjust comment to avoid issue on locutus.io display const breakTag = (isXhtml || typeof isXhtml === 'undefined') ? '&lt;br ' + '/&gt;' : '&lt;br&gt;' return (str + '') .replace(/(\\r\\n|\\n\\r|\\r|\\n)/g, breakTag + '$1')&#125;"},{"title":"PHP's nl_langinfo in JavaScript","date":"2021-02-28T22:26:45.713Z","updated":"2021-02-28T22:26:45.713Z","comments":true,"path":"php/strings/nl_langinfo/index.html","permalink":"https://locutus.io/php/strings/nl_langinfo/index.html","excerpt":"","text":"module.exports = function nl_langinfo (item) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/nl_langinfo/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: nl_langinfo('DAY_1') // returns 1: 'Sunday' const setlocale = require('../strings/setlocale') setlocale('LC_ALL', 0) // Ensure locale data is available const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; let loc = $locutus.php.locales[$locutus.php.localeCategories.LC_TIME] if (item.indexOf('ABDAY_') === 0) &#123; return loc.LC_TIME.a[parseInt(item.replace(/^ABDAY_/, ''), 10) - 1] &#125; else if (item.indexOf('DAY_') === 0) &#123; return loc.LC_TIME.A[parseInt(item.replace(/^DAY_/, ''), 10) - 1] &#125; else if (item.indexOf('ABMON_') === 0) &#123; return loc.LC_TIME.b[parseInt(item.replace(/^ABMON_/, ''), 10) - 1] &#125; else if (item.indexOf('MON_') === 0) &#123; return loc.LC_TIME.B[parseInt(item.replace(/^MON_/, ''), 10) - 1] &#125; else &#123; switch (item) &#123; // More LC_TIME case 'AM_STR': return loc.LC_TIME.p[0] case 'PM_STR': return loc.LC_TIME.p[1] case 'D_T_FMT': return loc.LC_TIME.c case 'D_FMT': return loc.LC_TIME.x case 'T_FMT': return loc.LC_TIME.X case 'T_FMT_AMPM': return loc.LC_TIME.r case 'ERA': case 'ERA_YEAR': case 'ERA_D_T_FMT': case 'ERA_D_FMT': case 'ERA_T_FMT': // all fall-throughs return loc.LC_TIME[item] &#125; loc = $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY] if (item === 'CRNCYSTR') &#123; // alias item = 'CURRENCY_SYMBOL' &#125; switch (item) &#123; case 'INT_CURR_SYMBOL': case 'CURRENCY_SYMBOL': case 'MON_DECIMAL_POINT': case 'MON_THOUSANDS_SEP': case 'POSITIVE_SIGN': case 'NEGATIVE_SIGN': case 'INT_FRAC_DIGITS': case 'FRAC_DIGITS': case 'P_CS_PRECEDES': case 'P_SEP_BY_SPACE': case 'N_CS_PRECEDES': case 'N_SEP_BY_SPACE': case 'P_SIGN_POSN': case 'N_SIGN_POSN': // all fall-throughs return loc.LC_MONETARY[item.toLowerCase()] case 'MON_GROUPING': // Same as above, or return something different since this returns an array? return loc.LC_MONETARY[item.toLowerCase()] &#125; loc = $locutus.php.locales[$locutus.php.localeCategories.LC_NUMERIC] switch (item) &#123; case 'RADIXCHAR': case 'DECIMAL_POINT': // Fall-through return loc.LC_NUMERIC[item.toLowerCase()] case 'THOUSEP': case 'THOUSANDS_SEP': // Fall-through return loc.LC_NUMERIC[item.toLowerCase()] case 'GROUPING': // Same as above, or return something different since this returns an array? return loc.LC_NUMERIC[item.toLowerCase()] &#125; loc = $locutus.php.locales[$locutus.php.localeCategories.LC_MESSAGES] switch (item) &#123; case 'YESEXPR': case 'NOEXPR': case 'YESSTR': case 'NOSTR': // all fall-throughs return loc.LC_MESSAGES[item] &#125; loc = $locutus.php.locales[$locutus.php.localeCategories.LC_CTYPE] if (item === 'CODESET') &#123; return loc.LC_CTYPE[item] &#125; return false &#125;&#125;"},{"title":"PHP's number_format in JavaScript","date":"2021-02-28T22:26:45.721Z","updated":"2021-02-28T22:26:45.721Z","comments":true,"path":"php/strings/number_format/index.html","permalink":"https://locutus.io/php/strings/number_format/index.html","excerpt":"","text":"module.exports = function number_format (number, decimals, decPoint, thousandsSep) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/number_format/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: davook // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Michael White (https://getsprink.com) // bugfixed by: Benjamin Lupton // bugfixed by: Allan Jensen (https://www.winternet.no) // bugfixed by: Howard Yeend // bugfixed by: Diogo Resende // bugfixed by: Rival // bugfixed by: Brett Zamir (https://brett-zamir.me) // revised by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // revised by: Luke Smith (https://lucassmith.name) // input by: Kheang Hok Chin (https://www.distantia.ca/) // input by: Jay Klehr // input by: Amir Habibi (https://www.residence-mixte.com/) // input by: Amirouche // example 1: number_format(1234.56) // returns 1: '1,235' // example 2: number_format(1234.56, 2, ',', ' ') // returns 2: '1 234,56' // example 3: number_format(1234.5678, 2, '.', '') // returns 3: '1234.57' // example 4: number_format(67, 2, ',', '.') // returns 4: '67,00' // example 5: number_format(1000) // returns 5: '1,000' // example 6: number_format(67.311, 2) // returns 6: '67.31' // example 7: number_format(1000.55, 1) // returns 7: '1,000.6' // example 8: number_format(67000, 5, ',', '.') // returns 8: '67.000,00000' // example 9: number_format(0.9, 0) // returns 9: '1' // example 10: number_format('1.20', 2) // returns 10: '1.20' // example 11: number_format('1.20', 4) // returns 11: '1.2000' // example 12: number_format('1.2000', 3) // returns 12: '1.200' // example 13: number_format('1 000,50', 2, '.', ' ') // returns 13: '100 050.00' // example 14: number_format(1e-8, 8, '.', '') // returns 14: '0.00000001' number = (number + '').replace(/[^0-9+\\-Ee.]/g, '') const n = !isFinite(+number) ? 0 : +number const prec = !isFinite(+decimals) ? 0 : Math.abs(decimals) const sep = (typeof thousandsSep === 'undefined') ? ',' : thousandsSep const dec = (typeof decPoint === 'undefined') ? '.' : decPoint let s = '' const toFixedFix = function (n, prec) &#123; if (('' + n).indexOf('e') === -1) &#123; return +(Math.round(n + 'e+' + prec) + 'e-' + prec) &#125; else &#123; const arr = ('' + n).split('e') let sig = '' if (+arr[1] + prec &gt; 0) &#123; sig = '+' &#125; return (+(Math.round(+arr[0] + 'e' + sig + (+arr[1] + prec)) + 'e-' + prec)).toFixed(prec) &#125; &#125; // @todo: for IE parseFloat(0.55).toFixed(0) = 0; s = (prec ? toFixedFix(n, prec).toString() : '' + Math.round(n)).split('.') if (s[0].length &gt; 3) &#123; s[0] = s[0].replace(/\\B(?=(?:\\d&#123;3&#125;)+(?!\\d))/g, sep) &#125; if ((s[1] || '').length &lt; prec) &#123; s[1] = s[1] || '' s[1] += new Array(prec - s[1].length + 1).join('0') &#125; return s.join(dec)&#125;"},{"title":"PHP's ord in JavaScript","date":"2021-02-28T22:26:45.721Z","updated":"2021-02-28T22:26:45.721Z","comments":true,"path":"php/strings/ord/index.html","permalink":"https://locutus.io/php/strings/ord/index.html","excerpt":"","text":"module.exports = function ord (string) &#123; // discuss at: https://locutus.io/php/ord/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // input by: incidence // example 1: ord('K') // returns 1: 75 // example 2: ord('\\uD800\\uDC00'); // surrogate pair to create a single Unicode character // returns 2: 65536 const str = string + '' const code = str.charCodeAt(0) if (code &gt;= 0xD800 &amp;&amp; code &lt;= 0xDBFF) &#123; // High surrogate (could change last hex to 0xDB7F to treat // high private surrogates as single characters) const hi = code if (str.length === 1) &#123; // This is just a high surrogate with no following low surrogate, // so we return its value; return code // we could also throw an error as it is not a complete character, // but someone may want to know &#125; const low = str.charCodeAt(1) return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000 &#125; if (code &gt;= 0xDC00 &amp;&amp; code &lt;= 0xDFFF) &#123; // Low surrogate // This is just a low surrogate with no preceding high surrogate, // so we return its value; return code // we could also throw an error as it is not a complete character, // but someone may want to know &#125; return code&#125;"},{"title":"PHP's parse_str in JavaScript","date":"2021-02-28T22:26:45.721Z","updated":"2021-02-28T22:26:45.721Z","comments":true,"path":"php/strings/parse_str/index.html","permalink":"https://locutus.io/php/strings/parse_str/index.html","excerpt":"","text":"module.exports = function parse_str (str, array) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/parse_str/ // original by: Cagri Ekin // improved by: Michael White (https://getsprink.com) // improved by: Jack // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: stag019 // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: MIO_KODUKI (https://mio-koduki.blogspot.com/) // reimplemented by: stag019 // input by: Dreamer // input by: Zaide (https://zaidesthings.com/) // input by: David Pesta (https://davidpesta.com/) // input by: jeicquest // bugfixed by: Rafał Kukawski // note 1: When no argument is specified, will put variables in global scope. // note 1: When a particular argument has been passed, and the // note 1: returned value is different parse_str of PHP. // note 1: For example, a=b=c&amp;d====c // example 1: var $arr = &#123;&#125; // example 1: parse_str('first=foo&amp;second=bar', $arr) // example 1: var $result = $arr // returns 1: &#123; first: 'foo', second: 'bar' &#125; // example 2: var $arr = &#123;&#125; // example 2: parse_str('str_a=Jack+and+Jill+didn%27t+see+the+well.', $arr) // example 2: var $result = $arr // returns 2: &#123; str_a: \"Jack and Jill didn't see the well.\" &#125; // example 3: var $abc = &#123;3:'a'&#125; // example 3: parse_str('a[b][\"c\"]=def&amp;a[q]=t+5', $abc) // example 3: var $result = $abc // returns 3: &#123;\"3\":\"a\",\"a\":&#123;\"b\":&#123;\"c\":\"def\"&#125;,\"q\":\"t 5\"&#125;&#125; // example 4: var $arr = &#123;&#125; // example 4: parse_str('a[][]=value', $arr) // example 4: var $result = $arr // returns 4: &#123;\"a\":&#123;\"0\":&#123;\"0\":\"value\"&#125;&#125;&#125; // example 5: var $arr = &#123;&#125; // example 5: parse_str('a=1&amp;a[]=2', $arr) // example 5: var $result = $arr // returns 5: &#123;\"a\":&#123;\"0\":\"2\"&#125;&#125; const strArr = String(str).replace(/^&amp;/, '').replace(/&amp;$/, '').split('&amp;') const sal = strArr.length let i let j let ct let p let lastObj let obj let chr let tmp let key let value let postLeftBracketPos let keys let keysLen const _fixStr = function (str) &#123; return decodeURIComponent(str.replace(/\\+/g, '%20')) &#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; if (!array) &#123; array = $global &#125; for (i = 0; i &lt; sal; i++) &#123; tmp = strArr[i].split('=') key = _fixStr(tmp[0]) value = (tmp.length &lt; 2) ? '' : _fixStr(tmp[1]) if (key.includes('__proto__') || key.includes('constructor') || key.includes('prototype')) &#123; break &#125; while (key.charAt(0) === ' ') &#123; key = key.slice(1) &#125; if (key.indexOf('\\x00') &gt; -1) &#123; key = key.slice(0, key.indexOf('\\x00')) &#125; if (key &amp;&amp; key.charAt(0) !== '[') &#123; keys = [] postLeftBracketPos = 0 for (j = 0; j &lt; key.length; j++) &#123; if (key.charAt(j) === '[' &amp;&amp; !postLeftBracketPos) &#123; postLeftBracketPos = j + 1 &#125; else if (key.charAt(j) === ']') &#123; if (postLeftBracketPos) &#123; if (!keys.length) &#123; keys.push(key.slice(0, postLeftBracketPos - 1)) &#125; keys.push(key.substr(postLeftBracketPos, j - postLeftBracketPos)) postLeftBracketPos = 0 if (key.charAt(j + 1) !== '[') &#123; break &#125; &#125; &#125; &#125; if (!keys.length) &#123; keys = [key] &#125; for (j = 0; j &lt; keys[0].length; j++) &#123; chr = keys[0].charAt(j) if (chr === ' ' || chr === '.' || chr === '[') &#123; keys[0] = keys[0].substr(0, j) + '_' + keys[0].substr(j + 1) &#125; if (chr === '[') &#123; break &#125; &#125; obj = array for (j = 0, keysLen = keys.length; j &lt; keysLen; j++) &#123; key = keys[j].replace(/^['\"]/, '').replace(/['\"]$/, '') lastObj = obj if ((key === '' || key === ' ') &amp;&amp; j !== 0) &#123; // Insert new dimension ct = -1 for (p in obj) &#123; if (obj.hasOwnProperty(p)) &#123; if (+p &gt; ct &amp;&amp; p.match(/^\\d+$/g)) &#123; ct = +p &#125; &#125; &#125; key = ct + 1 &#125; // if primitive value, replace with object if (Object(obj[key]) !== obj[key]) &#123; obj[key] = &#123;&#125; &#125; obj = obj[key] &#125; lastObj[key] = value &#125; &#125;&#125;"},{"title":"PHP's printf in JavaScript","date":"2021-02-28T22:26:45.721Z","updated":"2021-02-28T22:26:45.721Z","comments":true,"path":"php/strings/printf/index.html","permalink":"https://locutus.io/php/strings/printf/index.html","excerpt":"","text":"module.exports = function printf () &#123; // discuss at: https://locutus.io/php/printf/ // original by: Ash Searle (https://hexmen.com/blog/) // improved by: Michael White (https://getsprink.com) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: printf(\"%01.2f\", 123.1) // returns 1: 6 const sprintf = require('../strings/sprintf') const echo = require('../strings/echo') const ret = sprintf.apply(this, arguments) echo(ret) return ret.length&#125;"},{"title":"PHP's quoted_printable_decode in JavaScript","date":"2021-02-28T22:26:45.725Z","updated":"2021-02-28T22:26:45.725Z","comments":true,"path":"php/strings/quoted_printable_decode/index.html","permalink":"https://locutus.io/php/strings/quoted_printable_decode/index.html","excerpt":"","text":"module.exports = function quoted_printable_decode (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/quoted_printable_decode/ // original by: Ole Vrijenhoek // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Theriault (https://github.com/Theriault) // reimplemented by: Theriault (https://github.com/Theriault) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: quoted_printable_decode('a=3Db=3Dc') // returns 1: 'a=b=c' // example 2: quoted_printable_decode('abc =20\\r\\n123 =20\\r\\n') // returns 2: 'abc \\r\\n123 \\r\\n' // example 3: quoted_printable_decode('012345678901234567890123456789012345678901234567890123456789012345678901234=\\r\\n56789') // returns 3: '01234567890123456789012345678901234567890123456789012345678901234567890123456789' // example 4: quoted_printable_decode(\"Lorem ipsum dolor sit amet=23, consectetur adipisicing elit\") // returns 4: 'Lorem ipsum dolor sit amet#, consectetur adipisicing elit' // Decodes all equal signs followed by two hex digits const RFC2045Decode1 = /=\\r\\n/gm // the RFC states against decoding lower case encodings, but following apparent PHP behavior const RFC2045Decode2IN = /=([0-9A-F]&#123;2&#125;)/gim // RFC2045Decode2IN = /=([0-9A-F]&#123;2&#125;)/gm, const RFC2045Decode2OUT = function (sMatch, sHex) &#123; return String.fromCharCode(parseInt(sHex, 16)) &#125; return str.replace(RFC2045Decode1, '') .replace(RFC2045Decode2IN, RFC2045Decode2OUT)&#125;"},{"title":"PHP's quoted_printable_encode in JavaScript","date":"2021-02-28T22:26:45.725Z","updated":"2021-02-28T22:26:45.725Z","comments":true,"path":"php/strings/quoted_printable_encode/index.html","permalink":"https://locutus.io/php/strings/quoted_printable_encode/index.html","excerpt":"","text":"module.exports = function quoted_printable_encode (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/quoted_printable_encode/ // original by: Theriault (https://github.com/Theriault) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // example 1: quoted_printable_encode('a=b=c') // returns 1: 'a=3Db=3Dc' // example 2: quoted_printable_encode('abc \\r\\n123 \\r\\n') // returns 2: 'abc =20\\r\\n123 =20\\r\\n' // example 3: quoted_printable_encode('0123456789012345678901234567890123456789012345678901234567890123456789012345') // returns 3: '012345678901234567890123456789012345678901234567890123456789012345678901234=\\r\\n5' // test: skip-2 const hexChars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'] const RFC2045Encode1IN = / \\r\\n|\\r\\n|[^!-&lt;&gt;-~ ]/gm const RFC2045Encode1OUT = function (sMatch) &#123; // Encode space before CRLF sequence to prevent spaces from being stripped // Keep hard line breaks intact; CRLF sequences if (sMatch.length &gt; 1) &#123; return sMatch.replace(' ', '=20') &#125; // Encode matching character const chr = sMatch.charCodeAt(0) return '=' + hexChars[((chr &gt;&gt;&gt; 4) &amp; 15)] + hexChars[(chr &amp; 15)] &#125; // Split lines to 75 characters; the reason it's 75 and not 76 is because softline breaks are // preceeded by an equal sign; which would be the 76th character. However, if the last line/string // was exactly 76 characters, then a softline would not be needed. PHP currently softbreaks // anyway; so this function replicates PHP. const RFC2045Encode2IN = /.&#123;1,72&#125;(?!\\r\\n)[^=]&#123;0,3&#125;/g const RFC2045Encode2OUT = function (sMatch) &#123; if (sMatch.substr(sMatch.length - 2) === '\\r\\n') &#123; return sMatch &#125; return sMatch + '=\\r\\n' &#125; str = str .replace(RFC2045Encode1IN, RFC2045Encode1OUT) .replace(RFC2045Encode2IN, RFC2045Encode2OUT) // Strip last softline break return str.substr(0, str.length - 3)&#125;"},{"title":"PHP's quotemeta in JavaScript","date":"2021-02-28T22:26:45.725Z","updated":"2021-02-28T22:26:45.725Z","comments":true,"path":"php/strings/quotemeta/index.html","permalink":"https://locutus.io/php/strings/quotemeta/index.html","excerpt":"","text":"module.exports = function quotemeta (str) &#123; // discuss at: https://locutus.io/php/quotemeta/ // original by: Paulo Freitas // example 1: quotemeta(\". + * ? ^ ( $ )\") // returns 1: '\\\\. \\\\+ \\\\* \\\\? \\\\^ \\\\( \\\\$ \\\\)' return (str + '') .replace(/([.\\\\+*?[^\\]$()])/g, '\\\\$1')&#125;"},{"title":"PHP's rtrim in JavaScript","date":"2021-02-28T22:26:45.729Z","updated":"2021-02-28T22:26:45.729Z","comments":true,"path":"php/strings/rtrim/index.html","permalink":"https://locutus.io/php/strings/rtrim/index.html","excerpt":"","text":"module.exports = function rtrim (str, charlist) &#123; // discuss at: https://locutus.io/php/rtrim/ // original by: Kevin van Zonneveld (https://kvz.io) // input by: Erkekjetter // input by: rem // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: rtrim(' Kevin van Zonneveld ') // returns 1: ' Kevin van Zonneveld' charlist = !charlist ? ' \\\\s\\u00A0' : (charlist + '') .replace(/([[\\]().?/*&#123;&#125;+$^:])/g, '\\\\$1') const re = new RegExp('[' + charlist + ']+$', 'g') return (str + '').replace(re, '')&#125;"},{"title":"PHP's sha1 in JavaScript","date":"2021-02-28T22:26:45.729Z","updated":"2021-02-28T22:26:45.729Z","comments":true,"path":"php/strings/sha1/index.html","permalink":"https://locutus.io/php/strings/sha1/index.html","excerpt":"","text":"module.exports = function sha1 (str) &#123; // discuss at: https://locutus.io/php/sha1/ // original by: Webtoolkit.info (https://www.webtoolkit.info/) // improved by: Michael White (https://getsprink.com) // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // note 1: Keep in mind that in accordance with PHP, the whole string is buffered and then // note 1: hashed. If available, we'd recommend using Node's native crypto modules directly // note 1: in a steaming fashion for faster and more efficient hashing // example 1: sha1('Kevin van Zonneveld') // returns 1: '54916d2e62f65b3afa6e192e6a601cdbe5cb5897' let hash try &#123; const crypto = require('crypto') const sha1sum = crypto.createHash('sha1') sha1sum.update(str) hash = sha1sum.digest('hex') &#125; catch (e) &#123; hash = undefined &#125; if (hash !== undefined) &#123; return hash &#125; const _rotLeft = function (n, s) &#123; const t4 = (n &lt;&lt; s) | (n &gt;&gt;&gt; (32 - s)) return t4 &#125; const _cvtHex = function (val) &#123; let str = '' let i let v for (i = 7; i &gt;= 0; i--) &#123; v = (val &gt;&gt;&gt; (i * 4)) &amp; 0x0f str += v.toString(16) &#125; return str &#125; let blockstart let i, j const W = new Array(80) let H0 = 0x67452301 let H1 = 0xEFCDAB89 let H2 = 0x98BADCFE let H3 = 0x10325476 let H4 = 0xC3D2E1F0 let A, B, C, D, E let temp // utf8_encode str = unescape(encodeURIComponent(str)) const strLen = str.length const wordArray = [] for (i = 0; i &lt; strLen - 3; i += 4) &#123; j = str.charCodeAt(i) &lt;&lt; 24 | str.charCodeAt(i + 1) &lt;&lt; 16 | str.charCodeAt(i + 2) &lt;&lt; 8 | str.charCodeAt(i + 3) wordArray.push(j) &#125; switch (strLen % 4) &#123; case 0: i = 0x080000000 break case 1: i = str.charCodeAt(strLen - 1) &lt;&lt; 24 | 0x0800000 break case 2: i = str.charCodeAt(strLen - 2) &lt;&lt; 24 | str.charCodeAt(strLen - 1) &lt;&lt; 16 | 0x08000 break case 3: i = str.charCodeAt(strLen - 3) &lt;&lt; 24 | str.charCodeAt(strLen - 2) &lt;&lt; 16 | str.charCodeAt(strLen - 1) &lt;&lt; 8 | 0x80 break &#125; wordArray.push(i) while ((wordArray.length % 16) !== 14) &#123; wordArray.push(0) &#125; wordArray.push(strLen &gt;&gt;&gt; 29) wordArray.push((strLen &lt;&lt; 3) &amp; 0x0ffffffff) for (blockstart = 0; blockstart &lt; wordArray.length; blockstart += 16) &#123; for (i = 0; i &lt; 16; i++) &#123; W[i] = wordArray[blockstart + i] &#125; for (i = 16; i &lt;= 79; i++) &#123; W[i] = _rotLeft(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1) &#125; A = H0 B = H1 C = H2 D = H3 E = H4 for (i = 0; i &lt;= 19; i++) &#123; temp = (_rotLeft(A, 5) + ((B &amp; C) | (~B &amp; D)) + E + W[i] + 0x5A827999) &amp; 0x0ffffffff E = D D = C C = _rotLeft(B, 30) B = A A = temp &#125; for (i = 20; i &lt;= 39; i++) &#123; temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) &amp; 0x0ffffffff E = D D = C C = _rotLeft(B, 30) B = A A = temp &#125; for (i = 40; i &lt;= 59; i++) &#123; temp = (_rotLeft(A, 5) + ((B &amp; C) | (B &amp; D) | (C &amp; D)) + E + W[i] + 0x8F1BBCDC) &amp; 0x0ffffffff E = D D = C C = _rotLeft(B, 30) B = A A = temp &#125; for (i = 60; i &lt;= 79; i++) &#123; temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) &amp; 0x0ffffffff E = D D = C C = _rotLeft(B, 30) B = A A = temp &#125; H0 = (H0 + A) &amp; 0x0ffffffff H1 = (H1 + B) &amp; 0x0ffffffff H2 = (H2 + C) &amp; 0x0ffffffff H3 = (H3 + D) &amp; 0x0ffffffff H4 = (H4 + E) &amp; 0x0ffffffff &#125; temp = _cvtHex(H0) + _cvtHex(H1) + _cvtHex(H2) + _cvtHex(H3) + _cvtHex(H4) return temp.toLowerCase()&#125;"},{"title":"PHP's sha1_file in JavaScript","date":"2021-02-28T22:26:45.729Z","updated":"2021-02-28T22:26:45.729Z","comments":true,"path":"php/strings/sha1_file/index.html","permalink":"https://locutus.io/php/strings/sha1_file/index.html","excerpt":"","text":"module.exports = function sha1_file (str_filename) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/sha1_file/ // original by: Kevin van Zonneveld (https://kvz.io) // note 1: Relies on file_get_contents which does not work in the browser, so Node only. // note 2: Keep in mind that in accordance with PHP, the whole file is buffered and then // note 2: hashed. We'd recommend Node's native crypto modules for faster and more // note 2: efficient hashing // example 1: sha1_file('test/never-change.txt') // returns 1: '0ea65a1f4b4d69712affc58240932f3eb8a2af66' const fileGetContents = require('../filesystem/file_get_contents') const sha1 = require('../strings/sha1') const buf = fileGetContents(str_filename) if (buf === false) &#123; return false &#125; return sha1(buf)&#125;"},{"title":"PHP's similar_text in JavaScript","date":"2021-02-28T22:26:45.733Z","updated":"2021-02-28T22:26:45.733Z","comments":true,"path":"php/strings/similar_text/index.html","permalink":"https://locutus.io/php/strings/similar_text/index.html","excerpt":"","text":"module.exports = function similar_text (first, second, percent) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/similar_text/ // original by: Rafał Kukawski (https://blog.kukawski.pl) // bugfixed by: Chris McMacken // bugfixed by: Jarkko Rantavuori original by findings in stackoverflow (https://stackoverflow.com/questions/14136349/how-does-similar-text-work) // improved by: Markus Padourek (taken from https://www.kevinhq.com/2012/06/php-similartext-function-in-javascript_16.html) // example 1: similar_text('Hello World!', 'Hello locutus!') // returns 1: 8 // example 2: similar_text('Hello World!', null) // returns 2: 0 if (first === null || second === null || typeof first === 'undefined' || typeof second === 'undefined') &#123; return 0 &#125; first += '' second += '' let pos1 = 0 let pos2 = 0 let max = 0 const firstLength = first.length const secondLength = second.length let p let q let l let sum for (p = 0; p &lt; firstLength; p++) &#123; for (q = 0; q &lt; secondLength; q++) &#123; for (l = 0; (p + l &lt; firstLength) &amp;&amp; (q + l &lt; secondLength) &amp;&amp; (first.charAt(p + l) === second.charAt(q + l)); l++) &#123; // eslint-disable-line max-len // @todo: ^-- break up this crazy for loop and put the logic in its body &#125; if (l &gt; max) &#123; max = l pos1 = p pos2 = q &#125; &#125; &#125; sum = max if (sum) &#123; if (pos1 &amp;&amp; pos2) &#123; sum += similar_text(first.substr(0, pos1), second.substr(0, pos2)) &#125; if ((pos1 + max &lt; firstLength) &amp;&amp; (pos2 + max &lt; secondLength)) &#123; sum += similar_text( first.substr(pos1 + max, firstLength - pos1 - max), second.substr(pos2 + max, secondLength - pos2 - max)) &#125; &#125; if (!percent) &#123; return sum &#125; return (sum * 200) / (firstLength + secondLength)&#125;"},{"title":"PHP's soundex in JavaScript","date":"2021-02-28T22:26:45.733Z","updated":"2021-02-28T22:26:45.733Z","comments":true,"path":"php/strings/soundex/index.html","permalink":"https://locutus.io/php/strings/soundex/index.html","excerpt":"","text":"module.exports = function soundex (str) &#123; // discuss at: https://locutus.io/php/soundex/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // original by: Arnout Kazemier (https://www.3rd-Eden.com) // improved by: Jack // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // revised by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: soundex('Kevin') // returns 1: 'K150' // example 2: soundex('Ellery') // returns 2: 'E460' // example 3: soundex('Euler') // returns 3: 'E460' str = (str + '').toUpperCase() if (!str) &#123; return '' &#125; const sdx = [0, 0, 0, 0] const m = &#123; B: 1, F: 1, P: 1, V: 1, C: 2, G: 2, J: 2, K: 2, Q: 2, S: 2, X: 2, Z: 2, D: 3, T: 3, L: 4, M: 5, N: 5, R: 6 &#125; let i = 0 let j let s = 0 let c let p while ((c = str.charAt(i++)) &amp;&amp; s &lt; 4) &#123; if ((j = m[c])) &#123; if (j !== p) &#123; sdx[s++] = p = j &#125; &#125; else &#123; s += i === 1 p = 0 &#125; &#125; sdx[0] = str.charAt(0) return sdx.join('')&#125;"},{"title":"PHP's split in JavaScript","date":"2021-02-28T22:26:45.737Z","updated":"2021-02-28T22:26:45.737Z","comments":true,"path":"php/strings/split/index.html","permalink":"https://locutus.io/php/strings/split/index.html","excerpt":"","text":"module.exports = function split (delimiter, string) &#123; // discuss at: https://locutus.io/php/split/ // original by: Kevin van Zonneveld (https://kvz.io) // example 1: split(' ', 'Kevin van Zonneveld') // returns 1: ['Kevin', 'van', 'Zonneveld'] const explode = require('../strings/explode') return explode(delimiter, string)&#125;"},{"title":"PHP's sprintf in JavaScript","date":"2021-02-28T22:26:45.737Z","updated":"2021-02-28T22:26:45.737Z","comments":true,"path":"php/strings/sprintf/index.html","permalink":"https://locutus.io/php/strings/sprintf/index.html","excerpt":"","text":"module.exports = function sprintf () &#123; // discuss at: https://locutus.io/php/sprintf/ // original by: Ash Searle (https://hexmen.com/blog/) // improved by: Michael White (https://getsprink.com) // improved by: Jack // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Dj // improved by: Allidylls // input by: Paulo Freitas // input by: Brett Zamir (https://brett-zamir.me) // improved by: Rafał Kukawski (https://kukawski.pl) // example 1: sprintf(\"%01.2f\", 123.1) // returns 1: '123.10' // example 2: sprintf(\"[%10s]\", 'monkey') // returns 2: '[ monkey]' // example 3: sprintf(\"[%'#10s]\", 'monkey') // returns 3: '[####monkey]' // example 4: sprintf(\"%d\", 123456789012345) // returns 4: '123456789012345' // example 5: sprintf('%-03s', 'E') // returns 5: 'E00' // example 6: sprintf('%+010d', 9) // returns 6: '+000000009' // example 7: sprintf('%+0\\'@10d', 9) // returns 7: '@@@@@@@@+9' // example 8: sprintf('%.f', 3.14) // returns 8: '3.140000' // example 9: sprintf('%% %2$d', 1, 2) // returns 9: '% 2' const regex = /%%|%(?:(\\d+)\\$)?((?:[-+#0 ]|'[\\s\\S])*)(\\d+)?(?:\\.(\\d*))?([\\s\\S])/g const args = arguments let i = 0 const format = args[i++] const _pad = function (str, len, chr, leftJustify) &#123; if (!chr) &#123; chr = ' ' &#125; const padding = (str.length &gt;= len) ? '' : new Array(1 + len - str.length &gt;&gt;&gt; 0).join(chr) return leftJustify ? str + padding : padding + str &#125; const justify = function (value, prefix, leftJustify, minWidth, padChar) &#123; const diff = minWidth - value.length if (diff &gt; 0) &#123; // when padding with zeros // on the left side // keep sign (+ or -) in front if (!leftJustify &amp;&amp; padChar === '0') &#123; value = [ value.slice(0, prefix.length), _pad('', diff, '0', true), value.slice(prefix.length) ].join('') &#125; else &#123; value = _pad(value, minWidth, padChar, leftJustify) &#125; &#125; return value &#125; const _formatBaseX = function (value, base, leftJustify, minWidth, precision, padChar) &#123; // Note: casts negative numbers to positive ones const number = value &gt;&gt;&gt; 0 value = _pad(number.toString(base), precision || 0, '0', false) return justify(value, '', leftJustify, minWidth, padChar) &#125; // _formatString() const _formatString = function (value, leftJustify, minWidth, precision, customPadChar) &#123; if (precision !== null &amp;&amp; precision !== undefined) &#123; value = value.slice(0, precision) &#125; return justify(value, '', leftJustify, minWidth, customPadChar) &#125; // doFormat() const doFormat = function (substring, argIndex, modifiers, minWidth, precision, specifier) &#123; let number, prefix, method, textTransform, value if (substring === '%%') &#123; return '%' &#125; // parse modifiers let padChar = ' ' // pad with spaces by default let leftJustify = false let positiveNumberPrefix = '' let j, l for (j = 0, l = modifiers.length; j &lt; l; j++) &#123; switch (modifiers.charAt(j)) &#123; case ' ': case '0': padChar = modifiers.charAt(j) break case '+': positiveNumberPrefix = '+' break case '-': leftJustify = true break case \"'\": if (j + 1 &lt; l) &#123; padChar = modifiers.charAt(j + 1) j++ &#125; break &#125; &#125; if (!minWidth) &#123; minWidth = 0 &#125; else &#123; minWidth = +minWidth &#125; if (!isFinite(minWidth)) &#123; throw new Error('Width must be finite') &#125; if (!precision) &#123; precision = (specifier === 'd') ? 0 : 'fFeE'.indexOf(specifier) &gt; -1 ? 6 : undefined &#125; else &#123; precision = +precision &#125; if (argIndex &amp;&amp; +argIndex === 0) &#123; throw new Error('Argument number must be greater than zero') &#125; if (argIndex &amp;&amp; +argIndex &gt;= args.length) &#123; throw new Error('Too few arguments') &#125; value = argIndex ? args[+argIndex] : args[i++] switch (specifier) &#123; case '%': return '%' case 's': return _formatString(value + '', leftJustify, minWidth, precision, padChar) case 'c': return _formatString(String.fromCharCode(+value), leftJustify, minWidth, precision, padChar) case 'b': return _formatBaseX(value, 2, leftJustify, minWidth, precision, padChar) case 'o': return _formatBaseX(value, 8, leftJustify, minWidth, precision, padChar) case 'x': return _formatBaseX(value, 16, leftJustify, minWidth, precision, padChar) case 'X': return _formatBaseX(value, 16, leftJustify, minWidth, precision, padChar) .toUpperCase() case 'u': return _formatBaseX(value, 10, leftJustify, minWidth, precision, padChar) case 'i': case 'd': number = +value || 0 // Plain Math.round doesn't just truncate number = Math.round(number - number % 1) prefix = number &lt; 0 ? '-' : positiveNumberPrefix value = prefix + _pad(String(Math.abs(number)), precision, '0', false) if (leftJustify &amp;&amp; padChar === '0') &#123; // can't right-pad 0s on integers padChar = ' ' &#125; return justify(value, prefix, leftJustify, minWidth, padChar) case 'e': case 'E': case 'f': // @todo: Should handle locales (as per setlocale) case 'F': case 'g': case 'G': number = +value prefix = number &lt; 0 ? '-' : positiveNumberPrefix method = ['toExponential', 'toFixed', 'toPrecision']['efg'.indexOf(specifier.toLowerCase())] textTransform = ['toString', 'toUpperCase']['eEfFgG'.indexOf(specifier) % 2] value = prefix + Math.abs(number)[method](precision) return justify(value, prefix, leftJustify, minWidth, padChar)[textTransform]() default: // unknown specifier, consume that char and return empty return '' &#125; &#125; try &#123; return format.replace(regex, doFormat) &#125; catch (err) &#123; return false &#125;&#125;"},{"title":"PHP's str_getcsv in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/str_getcsv/index.html","permalink":"https://locutus.io/php/strings/str_getcsv/index.html","excerpt":"","text":"module.exports = function str_getcsv (input, delimiter, enclosure, escape) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_getcsv/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: str_getcsv('\"abc\",\"def\",\"ghi\"') // returns 1: ['abc', 'def', 'ghi'] // example 2: str_getcsv('\"row2\"\"cell1\",\"row2cell2\",\"row2cell3\"', null, null, '\"') // returns 2: ['row2\"cell1', 'row2cell2', 'row2cell3'] /* // These test cases allowing for missing delimiters are not currently supported str_getcsv('\"row2\"\"cell1\",row2cell2,row2cell3', null, null, '\"'); ['row2\"cell1', 'row2cell2', 'row2cell3'] str_getcsv('row1cell1,\"row1,cell2\",row1cell3', null, null, '\"'); ['row1cell1', 'row1,cell2', 'row1cell3'] str_getcsv('\"row2\"\"cell1\",row2cell2,\"row2\"\"\"\"cell3\"'); ['row2\"cell1', 'row2cell2', 'row2\"\"cell3'] str_getcsv('row1cell1,\"row1,cell2\",\"row1\"\",\"\"cell3\"', null, null, '\"'); ['row1cell1', 'row1,cell2', 'row1\",\"cell3']; Should also test newlines within */ let i let inpLen const output = [] const _backwards = function (str) &#123; // We need to go backwards to simulate negative look-behind (don't split on // an escaped enclosure even if followed by the delimiter and another enclosure mark) return str.split('').reverse().join('') &#125; const _pq = function (str) &#123; // preg_quote() return String(str).replace(/([\\\\.+*?[^\\]$()&#123;&#125;=!&lt;&gt;|:])/g, '\\\\$1') &#125; delimiter = delimiter || ',' enclosure = enclosure || '\"' escape = escape || '\\\\' const pqEnc = _pq(enclosure) const pqEsc = _pq(escape) input = input .replace(new RegExp('^\\\\s*' + pqEnc), '') .replace(new RegExp(pqEnc + '\\\\s*$'), '') // PHP behavior may differ by including whitespace even outside of the enclosure input = _backwards(input) .split(new RegExp(pqEnc + '\\\\s*' + _pq(delimiter) + '\\\\s*' + pqEnc + '(?!' + pqEsc + ')', 'g')) .reverse() for (i = 0, inpLen = input.length; i &lt; inpLen; i++) &#123; output.push(_backwards(input[i]) .replace(new RegExp(pqEsc + pqEnc, 'g'), enclosure)) &#125; return output&#125;"},{"title":"PHP's str_ireplace in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/str_ireplace/index.html","permalink":"https://locutus.io/php/strings/str_ireplace/index.html","excerpt":"","text":"module.exports = function str_ireplace (search, replace, subject, countObj) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_ireplace/ // original by: Glen Arason (https://CanadianDomainRegistry.ca) // note 1: Case-insensitive version of str_replace() // note 1: Compliant with PHP 5.0 str_ireplace() Full details at: // note 1: https://ca3.php.net/manual/en/function.str-ireplace.php // note 2: The countObj parameter (optional) if used must be passed in as a // note 2: object. The count will then be written by reference into it's `value` property // example 1: str_ireplace('M', 'e', 'name') // returns 1: 'naee' // example 2: var $countObj = &#123;&#125; // example 2: str_ireplace('M', 'e', 'name', $countObj) // example 2: var $result = $countObj.value // returns 2: 1 let i = 0 let j = 0 let temp = '' let repl = '' let sl = 0 let fl = 0 let f = '' let r = '' let s = '' let ra = '' let otemp = '' let oi = '' let ofjl = '' let os = subject const osa = Object.prototype.toString.call(os) === '[object Array]' // var sa = '' if (typeof (search) === 'object') &#123; temp = search search = [] for (i = 0; i &lt; temp.length; i += 1) &#123; search[i] = temp[i].toLowerCase() &#125; &#125; else &#123; search = search.toLowerCase() &#125; if (typeof (subject) === 'object') &#123; temp = subject subject = [] for (i = 0; i &lt; temp.length; i += 1) &#123; subject[i] = temp[i].toLowerCase() &#125; &#125; else &#123; subject = subject.toLowerCase() &#125; if (typeof (search) === 'object' &amp;&amp; typeof (replace) === 'string') &#123; temp = replace replace = [] for (i = 0; i &lt; search.length; i += 1) &#123; replace[i] = temp &#125; &#125; temp = '' f = [].concat(search) r = [].concat(replace) ra = Object.prototype.toString.call(r) === '[object Array]' s = subject // sa = Object.prototype.toString.call(s) === '[object Array]' s = [].concat(s) os = [].concat(os) if (countObj) &#123; countObj.value = 0 &#125; for (i = 0, sl = s.length; i &lt; sl; i++) &#123; if (s[i] === '') &#123; continue &#125; for (j = 0, fl = f.length; j &lt; fl; j++) &#123; temp = s[i] + '' repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0] s[i] = (temp).split(f[j]).join(repl) otemp = os[i] + '' oi = temp.indexOf(f[j]) ofjl = f[j].length if (oi &gt;= 0) &#123; os[i] = (otemp).split(otemp.substr(oi, ofjl)).join(repl) &#125; if (countObj) &#123; countObj.value += ((temp.split(f[j])).length - 1) &#125; &#125; &#125; return osa ? os : os[0]&#125;"},{"title":"PHP's str_pad in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/str_pad/index.html","permalink":"https://locutus.io/php/strings/str_pad/index.html","excerpt":"","text":"module.exports = function str_pad (input, padLength, padString, padType) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_pad/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Michael White (https://getsprink.com) // input by: Marco van Oort // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: str_pad('Kevin van Zonneveld', 30, '-=', 'STR_PAD_LEFT') // returns 1: '-=-=-=-=-=-Kevin van Zonneveld' // example 2: str_pad('Kevin van Zonneveld', 30, '-', 'STR_PAD_BOTH') // returns 2: '------Kevin van Zonneveld-----' let half = '' let padToGo const _strPadRepeater = function (s, len) &#123; let collect = '' while (collect.length &lt; len) &#123; collect += s &#125; collect = collect.substr(0, len) return collect &#125; input += '' padString = padString !== undefined ? padString : ' ' if (padType !== 'STR_PAD_LEFT' &amp;&amp; padType !== 'STR_PAD_RIGHT' &amp;&amp; padType !== 'STR_PAD_BOTH') &#123; padType = 'STR_PAD_RIGHT' &#125; if ((padToGo = padLength - input.length) &gt; 0) &#123; if (padType === 'STR_PAD_LEFT') &#123; input = _strPadRepeater(padString, padToGo) + input &#125; else if (padType === 'STR_PAD_RIGHT') &#123; input = input + _strPadRepeater(padString, padToGo) &#125; else if (padType === 'STR_PAD_BOTH') &#123; half = _strPadRepeater(padString, Math.ceil(padToGo / 2)) input = half + input + half input = input.substr(0, padLength) &#125; &#125; return input&#125;"},{"title":"PHP's str_repeat in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/str_repeat/index.html","permalink":"https://locutus.io/php/strings/str_repeat/index.html","excerpt":"","text":"module.exports = function str_repeat (input, multiplier) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_repeat/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Ian Carter (https://euona.com/) // example 1: str_repeat('-=', 10) // returns 1: '-=-=-=-=-=-=-=-=-=-=' let y = '' while (true) &#123; if (multiplier &amp; 1) &#123; y += input &#125; multiplier &gt;&gt;= 1 if (multiplier) &#123; input += input &#125; else &#123; break &#125; &#125; return y&#125;"},{"title":"PHP's str_replace in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/str_replace/index.html","permalink":"https://locutus.io/php/strings/str_replace/index.html","excerpt":"","text":"module.exports = function str_replace (search, replace, subject, countObj) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_replace/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Gabriel Paderni // improved by: Philip Peterson // improved by: Simon Willison (https://simonwillison.net) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // revised by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // bugfixed by: Anton Ongson // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Oleg Eremeev // bugfixed by: Glen Arason (https://CanadianDomainRegistry.ca) // bugfixed by: Glen Arason (https://CanadianDomainRegistry.ca) // input by: Onno Marsman (https://twitter.com/onnomarsman) // input by: Brett Zamir (https://brett-zamir.me) // input by: Oleg Eremeev // note 1: The countObj parameter (optional) if used must be passed in as a // note 1: object. The count will then be written by reference into it's `value` property // example 1: str_replace(' ', '.', 'Kevin van Zonneveld') // returns 1: 'Kevin.van.Zonneveld' // example 2: str_replace(['&#123;name&#125;', 'l'], ['hello', 'm'], '&#123;name&#125;, lars') // returns 2: 'hemmo, mars' // example 3: str_replace(Array('S','F'),'x','ASDFASDF') // returns 3: 'AxDxAxDx' // example 4: var countObj = &#123;&#125; // example 4: str_replace(['A','D'], ['x','y'] , 'ASDFASDF' , countObj) // example 4: var $result = countObj.value // returns 4: 4 let i = 0 let j = 0 let temp = '' let repl = '' let sl = 0 let fl = 0 const f = [].concat(search) let r = [].concat(replace) let s = subject let ra = Object.prototype.toString.call(r) === '[object Array]' const sa = Object.prototype.toString.call(s) === '[object Array]' s = [].concat(s) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; if (typeof (search) === 'object' &amp;&amp; typeof (replace) === 'string') &#123; temp = replace replace = [] for (i = 0; i &lt; search.length; i += 1) &#123; replace[i] = temp &#125; temp = '' r = [].concat(replace) ra = Object.prototype.toString.call(r) === '[object Array]' &#125; if (typeof countObj !== 'undefined') &#123; countObj.value = 0 &#125; for (i = 0, sl = s.length; i &lt; sl; i++) &#123; if (s[i] === '') &#123; continue &#125; for (j = 0, fl = f.length; j &lt; fl; j++) &#123; temp = s[i] + '' repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0] s[i] = (temp).split(f[j]).join(repl) if (typeof countObj !== 'undefined') &#123; countObj.value += ((temp.split(f[j])).length - 1) &#125; &#125; &#125; return sa ? s : s[0]&#125;"},{"title":"PHP's str_rot13 in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/str_rot13/index.html","permalink":"https://locutus.io/php/strings/str_rot13/index.html","excerpt":"","text":"module.exports = function str_rot13 (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_rot13/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Ates Goral (https://magnetiq.com) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: str_rot13('Kevin van Zonneveld') // returns 1: 'Xriva ina Mbaariryq' // example 2: str_rot13('Xriva ina Mbaariryq') // returns 2: 'Kevin van Zonneveld' // example 3: str_rot13(33) // returns 3: '33' return (str + '') .replace(/[a-z]/gi, function (s) &#123; return String.fromCharCode(s.charCodeAt(0) + (s.toLowerCase() &lt; 'n' ? 13 : -13)) &#125;)&#125;"},{"title":"PHP's str_shuffle in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/str_shuffle/index.html","permalink":"https://locutus.io/php/strings/str_shuffle/index.html","excerpt":"","text":"module.exports = function str_shuffle (str) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_shuffle/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: var $shuffled = str_shuffle(\"abcdef\") // example 1: var $result = $shuffled.length // returns 1: 6 if (arguments.length === 0) &#123; throw new Error('Wrong parameter count for str_shuffle()') &#125; if (str === null) &#123; return '' &#125; str += '' let newStr = '' let rand let i = str.length while (i) &#123; rand = Math.floor(Math.random() * i) newStr += str.charAt(rand) str = str.substring(0, rand) + str.substr(rand + 1) i-- &#125; return newStr&#125;"},{"title":"PHP's str_split in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/str_split/index.html","permalink":"https://locutus.io/php/strings/str_split/index.html","excerpt":"","text":"module.exports = function str_split (string, splitLength) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_split/ // original by: Martijn Wieringa // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Theriault (https://github.com/Theriault) // revised by: Rafał Kukawski (https://blog.kukawski.pl) // input by: Bjorn Roesbeke (https://www.bjornroesbeke.be/) // example 1: str_split('Hello Friend', 3) // returns 1: ['Hel', 'lo ', 'Fri', 'end'] if (splitLength === null) &#123; splitLength = 1 &#125; if (string === null || splitLength &lt; 1) &#123; return false &#125; string += '' const chunks = [] let pos = 0 const len = string.length while (pos &lt; len) &#123; chunks.push(string.slice(pos, pos += splitLength)) &#125; return chunks&#125;"},{"title":"PHP's str_word_count in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/str_word_count/index.html","permalink":"https://locutus.io/php/strings/str_word_count/index.html","excerpt":"","text":"module.exports = function str_word_count (str, format, charlist) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/str_word_count/ // original by: Ole Vrijenhoek // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: Bug? // improved by: Brett Zamir (https://brett-zamir.me) // example 1: str_word_count(\"Hello fri3nd, you're\\r\\n looking good today!\", 1) // returns 1: ['Hello', 'fri', 'nd', \"you're\", 'looking', 'good', 'today'] // example 2: str_word_count(\"Hello fri3nd, you're\\r\\n looking good today!\", 2) // returns 2: &#123;0: 'Hello', 6: 'fri', 10: 'nd', 14: \"you're\", 29: 'looking', 46: 'good', 51: 'today'&#125; // example 3: str_word_count(\"Hello fri3nd, you're\\r\\n looking good today!\", 1, '\\u00e0\\u00e1\\u00e3\\u00e73') // returns 3: ['Hello', 'fri3nd', \"you're\", 'looking', 'good', 'today'] // example 4: str_word_count('hey', 2) // returns 4: &#123;0: 'hey'&#125; const ctypeAlpha = require('../ctype/ctype_alpha') const len = str.length const cl = charlist &amp;&amp; charlist.length let chr = '' let tmpStr = '' let i = 0 let c = '' const wArr = [] let wC = 0 const assoc = &#123;&#125; let aC = 0 let reg = '' let match = false const _pregQuote = function (str) &#123; return (str + '').replace(/([\\\\.+*?[^\\]$()&#123;&#125;=!&lt;&gt;|:])/g, '\\\\$1') &#125; const _getWholeChar = function (str, i) &#123; // Use for rare cases of non-BMP characters const code = str.charCodeAt(i) if (code &lt; 0xD800 || code &gt; 0xDFFF) &#123; return str.charAt(i) &#125; if (code &gt;= 0xD800 &amp;&amp; code &lt;= 0xDBFF) &#123; // High surrogate (could change last hex to 0xDB7F to treat high private surrogates as single // characters) if (str.length &lt;= (i + 1)) &#123; throw new Error('High surrogate without following low surrogate') &#125; const next = str.charCodeAt(i + 1) if (next &lt; 0xDC00 || next &gt; 0xDFFF) &#123; throw new Error('High surrogate without following low surrogate') &#125; return str.charAt(i) + str.charAt(i + 1) &#125; // Low surrogate (0xDC00 &lt;= code &amp;&amp; code &lt;= 0xDFFF) if (i === 0) &#123; throw new Error('Low surrogate without preceding high surrogate') &#125; const prev = str.charCodeAt(i - 1) if (prev &lt; 0xD800 || prev &gt; 0xDBFF) &#123; // (could change last hex to 0xDB7F to treat high private surrogates as single characters) throw new Error('Low surrogate without preceding high surrogate') &#125; // We can pass over low surrogates now as the second component in a pair which we have already // processed return false &#125; if (cl) &#123; reg = '^(' + _pregQuote(_getWholeChar(charlist, 0)) for (i = 1; i &lt; cl; i++) &#123; if ((chr = _getWholeChar(charlist, i)) === false) &#123; continue &#125; reg += '|' + _pregQuote(chr) &#125; reg += ')$' reg = new RegExp(reg) &#125; for (i = 0; i &lt; len; i++) &#123; if ((c = _getWholeChar(str, i)) === false) &#123; continue &#125; // No hyphen at beginning or end unless allowed in charlist (or locale) // No apostrophe at beginning unless allowed in charlist (or locale) // @todo: Make this more readable match = ctypeAlpha(c) || (reg &amp;&amp; c.search(reg) !== -1) || ((i !== 0 &amp;&amp; i !== len - 1) &amp;&amp; c === '-') || (i !== 0 &amp;&amp; c === \"'\") if (match) &#123; if (tmpStr === '' &amp;&amp; format === 2) &#123; aC = i &#125; tmpStr = tmpStr + c &#125; if (i === len - 1 || !match &amp;&amp; tmpStr !== '') &#123; if (format !== 2) &#123; wArr[wArr.length] = tmpStr &#125; else &#123; assoc[aC] = tmpStr &#125; tmpStr = '' wC++ &#125; &#125; if (!format) &#123; return wC &#125; else if (format === 1) &#123; return wArr &#125; else if (format === 2) &#123; return assoc &#125; throw new Error('You have supplied an incorrect format')&#125;"},{"title":"PHP's strcasecmp in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/strcasecmp/index.html","permalink":"https://locutus.io/php/strings/strcasecmp/index.html","excerpt":"","text":"module.exports = function strcasecmp (fString1, fString2) &#123; // discuss at: https://locutus.io/php/strcasecmp/ // original by: Martijn Wieringa // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: strcasecmp('Hello', 'hello') // returns 1: 0 const string1 = (fString1 + '').toLowerCase() const string2 = (fString2 + '').toLowerCase() if (string1 &gt; string2) &#123; return 1 &#125; else if (string1 === string2) &#123; return 0 &#125; return -1&#125;"},{"title":"PHP's strchr in JavaScript","date":"2021-02-28T22:26:45.745Z","updated":"2021-02-28T22:26:45.745Z","comments":true,"path":"php/strings/strchr/index.html","permalink":"https://locutus.io/php/strings/strchr/index.html","excerpt":"","text":"module.exports = function strchr (haystack, needle, bool) &#123; // discuss at: https://locutus.io/php/strchr/ // original by: Philip Peterson // example 1: strchr('Kevin van Zonneveld', 'van') // returns 1: 'van Zonneveld' // example 2: strchr('Kevin van Zonneveld', 'van', true) // returns 2: 'Kevin ' const strstr = require('../strings/strstr') return strstr(haystack, needle, bool)&#125;"},{"title":"PHP's strcmp in JavaScript","date":"2021-02-28T22:26:45.749Z","updated":"2021-02-28T22:26:45.749Z","comments":true,"path":"php/strings/strcmp/index.html","permalink":"https://locutus.io/php/strings/strcmp/index.html","excerpt":"","text":"module.exports = function strcmp (str1, str2) &#123; // discuss at: https://locutus.io/php/strcmp/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // input by: Steve Hilder // improved by: Kevin van Zonneveld (https://kvz.io) // revised by: gorthaur // example 1: strcmp( 'waldo', 'owald' ) // returns 1: 1 // example 2: strcmp( 'owald', 'waldo' ) // returns 2: -1 return ((str1 === str2) ? 0 : ((str1 &gt; str2) ? 1 : -1))&#125;"},{"title":"PHP's strcoll in JavaScript","date":"2021-02-28T22:26:45.749Z","updated":"2021-02-28T22:26:45.749Z","comments":true,"path":"php/strings/strcoll/index.html","permalink":"https://locutus.io/php/strings/strcoll/index.html","excerpt":"","text":"module.exports = function strcoll (str1, str2) &#123; // discuss at: https://locutus.io/php/strcoll/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: strcoll('a', 'b') // returns 1: -1 const setlocale = require('../strings/setlocale') const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; setlocale('LC_ALL', 0) // ensure setup of localization variables takes place const cmp = $locutus.php.locales[$locutus.php.localeCategories.LC_COLLATE].LC_COLLATE return cmp(str1, str2)&#125;"},{"title":"PHP's strcspn in JavaScript","date":"2021-02-28T22:26:45.749Z","updated":"2021-02-28T22:26:45.749Z","comments":true,"path":"php/strings/strcspn/index.html","permalink":"https://locutus.io/php/strings/strcspn/index.html","excerpt":"","text":"module.exports = function strcspn (str, mask, start, length) &#123; // discuss at: https://locutus.io/php/strcspn/ // original by: Brett Zamir (https://brett-zamir.me) // revised by: Theriault // example 1: strcspn('abcdefg123', '1234567890') // returns 1: 7 // example 2: strcspn('123abc', '1234567890') // returns 2: 0 // example 3: strcspn('abcdefg123', '1234567890', 1) // returns 3: 6 // example 4: strcspn('abcdefg123', '1234567890', -6, -5) // returns 4: 1 start = start || 0 length = typeof length === 'undefined' ? str.length : (length || 0) if (start &lt; 0) start = str.length + start if (length &lt; 0) length = str.length - start + length if (start &lt; 0 || start &gt;= str.length || length &lt;= 0 || e &gt;= str.length) return 0 var e = Math.min(str.length, start + length) for (var i = start, lgth = 0; i &lt; e; i++) &#123; if (mask.indexOf(str.charAt(i)) !== -1) &#123; break &#125; ++lgth &#125; return lgth&#125;"},{"title":"PHP's strip_tags in JavaScript","date":"2021-02-28T22:26:45.749Z","updated":"2021-02-28T22:26:45.749Z","comments":true,"path":"php/strings/strip_tags/index.html","permalink":"https://locutus.io/php/strings/strip_tags/index.html","excerpt":"","text":"module.exports = function strip_tags (input, allowed) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/strip_tags/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Luke Godfrey // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Pul // input by: Alex // input by: Marc Palau // input by: Brett Zamir (https://brett-zamir.me) // input by: Bobby Drake // input by: Evertjan Garretsen // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Eric Nagel // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Tomasz Wesolowski // bugfixed by: Tymon Sturgeon (https://scryptonite.com) // bugfixed by: Tim de Koning (https://www.kingsquare.nl) // revised by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: strip_tags('&lt;p&gt;Kevin&lt;/p&gt; &lt;br /&gt;&lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;', '&lt;i&gt;&lt;b&gt;') // returns 1: 'Kevin &lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;' // example 2: strip_tags('&lt;p&gt;Kevin &lt;img src=\"someimage.png\" onmouseover=\"someFunction()\"&gt;van &lt;i&gt;Zonneveld&lt;/i&gt;&lt;/p&gt;', '&lt;p&gt;') // returns 2: '&lt;p&gt;Kevin van Zonneveld&lt;/p&gt;' // example 3: strip_tags(\"&lt;a href='https://kvz.io'&gt;Kevin van Zonneveld&lt;/a&gt;\", \"&lt;a&gt;\") // returns 3: \"&lt;a href='https://kvz.io'&gt;Kevin van Zonneveld&lt;/a&gt;\" // example 4: strip_tags('1 &lt; 5 5 &gt; 1') // returns 4: '1 &lt; 5 5 &gt; 1' // example 5: strip_tags('1 &lt;br/&gt; 1') // returns 5: '1 1' // example 6: strip_tags('1 &lt;br/&gt; 1', '&lt;br&gt;') // returns 6: '1 &lt;br/&gt; 1' // example 7: strip_tags('1 &lt;br/&gt; 1', '&lt;br&gt;&lt;br/&gt;') // returns 7: '1 &lt;br/&gt; 1' // example 8: strip_tags('&lt;i&gt;hello&lt;/i&gt; &lt;&lt;foo&gt;script&gt;world&lt;&lt;/foo&gt;/script&gt;') // returns 8: 'hello world' // example 9: strip_tags(4) // returns 9: '4' const _phpCastString = require('../_helpers/_phpCastString') // making sure the allowed arg is a string containing only tags in lowercase (&lt;a&gt;&lt;b&gt;&lt;c&gt;) allowed = (((allowed || '') + '').toLowerCase().match(/&lt;[a-z][a-z0-9]*&gt;/g) || []).join('') const tags = /&lt;\\/?([a-z0-9]*)\\b[^&gt;]*&gt;?/gi const commentsAndPhpTags = /&lt;!--[\\s\\S]*?--&gt;|&lt;\\?(?:php)?[\\s\\S]*?\\?&gt;/gi let after = _phpCastString(input) // removes tha '&lt;' char at the end of the string to replicate PHP's behaviour after = (after.substring(after.length - 1) === '&lt;') ? after.substring(0, after.length - 1) : after // recursively remove tags to ensure that the returned string doesn't contain forbidden tags after previous passes (e.g. '&lt;&lt;bait/&gt;switch/&gt;') while (true) &#123; const before = after after = before.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) &#123; return allowed.indexOf('&lt;' + $1.toLowerCase() + '&gt;') &gt; -1 ? $0 : '' &#125;) // return once no more tags are removed if (before === after) &#123; return after &#125; &#125;&#125;"},{"title":"PHP's stripos in JavaScript","date":"2021-02-28T22:26:45.753Z","updated":"2021-02-28T22:26:45.753Z","comments":true,"path":"php/strings/stripos/index.html","permalink":"https://locutus.io/php/strings/stripos/index.html","excerpt":"","text":"module.exports = function stripos (fHaystack, fNeedle, fOffset) &#123; // discuss at: https://locutus.io/php/stripos/ // original by: Martijn Wieringa // revised by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: stripos('ABC', 'a') // returns 1: 0 const haystack = (fHaystack + '').toLowerCase() const needle = (fNeedle + '').toLowerCase() let index = 0 if ((index = haystack.indexOf(needle, fOffset)) !== -1) &#123; return index &#125; return false&#125;"},{"title":"PHP's stripslashes in JavaScript","date":"2021-02-28T22:26:45.753Z","updated":"2021-02-28T22:26:45.753Z","comments":true,"path":"php/strings/stripslashes/index.html","permalink":"https://locutus.io/php/strings/stripslashes/index.html","excerpt":"","text":"module.exports = function stripslashes (str) &#123; // discuss at: https://locutus.io/php/stripslashes/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Ates Goral (https://magnetiq.com) // improved by: marrtins // improved by: rezna // fixed by: Mick@el // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: Rick Waldron // input by: Brant Messenger (https://www.brantmessenger.com/) // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: stripslashes('Kevin\\'s code') // returns 1: \"Kevin's code\" // example 2: stripslashes('Kevin\\\\\\'s code') // returns 2: \"Kevin\\'s code\" return (str + '') .replace(/\\\\(.?)/g, function (s, n1) &#123; switch (n1) &#123; case '\\\\': return '\\\\' case '0': return '\\u0000' case '': return '' default: return n1 &#125; &#125;)&#125;"},{"title":"PHP's stristr in JavaScript","date":"2021-02-28T22:26:45.753Z","updated":"2021-02-28T22:26:45.753Z","comments":true,"path":"php/strings/stristr/index.html","permalink":"https://locutus.io/php/strings/stristr/index.html","excerpt":"","text":"module.exports = function stristr (haystack, needle, bool) &#123; // discuss at: https://locutus.io/php/stristr/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: stristr('Kevin van Zonneveld', 'Van') // returns 1: 'van Zonneveld' // example 2: stristr('Kevin van Zonneveld', 'VAN', true) // returns 2: 'Kevin ' let pos = 0 haystack += '' pos = haystack.toLowerCase() .indexOf((needle + '') .toLowerCase()) if (pos === -1) &#123; return false &#125; else &#123; if (bool) &#123; return haystack.substr(0, pos) &#125; else &#123; return haystack.slice(pos) &#125; &#125;&#125;"},{"title":"PHP's strlen in JavaScript","date":"2021-02-28T22:26:45.753Z","updated":"2021-02-28T22:26:45.753Z","comments":true,"path":"php/strings/strlen/index.html","permalink":"https://locutus.io/php/strings/strlen/index.html","excerpt":"","text":"module.exports = function strlen (string) &#123; // discuss at: https://locutus.io/php/strlen/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Sakimori // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Kirk Strobeck // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Brett Zamir (https://brett-zamir.me) // note 1: May look like overkill, but in order to be truly faithful to handling all Unicode // note 1: characters and to this function in PHP which does not count the number of bytes // note 1: but counts the number of characters, something like this is really necessary. // example 1: strlen('Kevin van Zonneveld') // returns 1: 19 // example 2: ini_set('unicode.semantics', 'on') // example 2: strlen('A\\ud87e\\udc04Z') // returns 2: 3 const str = string + '' const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('unicode.semantics') : undefined) || 'off' if (iniVal === 'off') &#123; return str.length &#125; let i = 0 let lgth = 0 const getWholeChar = function (str, i) &#123; const code = str.charCodeAt(i) let next = '' let prev = '' if (code &gt;= 0xD800 &amp;&amp; code &lt;= 0xDBFF) &#123; // High surrogate (could change last hex to 0xDB7F to // treat high private surrogates as single characters) if (str.length &lt;= (i + 1)) &#123; throw new Error('High surrogate without following low surrogate') &#125; next = str.charCodeAt(i + 1) if (next &lt; 0xDC00 || next &gt; 0xDFFF) &#123; throw new Error('High surrogate without following low surrogate') &#125; return str.charAt(i) + str.charAt(i + 1) &#125; else if (code &gt;= 0xDC00 &amp;&amp; code &lt;= 0xDFFF) &#123; // Low surrogate if (i === 0) &#123; throw new Error('Low surrogate without preceding high surrogate') &#125; prev = str.charCodeAt(i - 1) if (prev &lt; 0xD800 || prev &gt; 0xDBFF) &#123; // (could change last hex to 0xDB7F to treat high private surrogates // as single characters) throw new Error('Low surrogate without preceding high surrogate') &#125; // We can pass over low surrogates now as the second // component in a pair which we have already processed return false &#125; return str.charAt(i) &#125; for (i = 0, lgth = 0; i &lt; str.length; i++) &#123; if ((getWholeChar(str, i)) === false) &#123; continue &#125; // Adapt this line at the top of any loop, passing in the whole string and // the current iteration and returning a variable to represent the individual character; // purpose is to treat the first part of a surrogate pair as the whole character and then // ignore the second part lgth++ &#125; return lgth&#125;"},{"title":"PHP's strnatcasecmp in JavaScript","date":"2021-02-28T22:26:45.757Z","updated":"2021-02-28T22:26:45.757Z","comments":true,"path":"php/strings/strnatcasecmp/index.html","permalink":"https://locutus.io/php/strings/strnatcasecmp/index.html","excerpt":"","text":"module.exports = function strnatcasecmp (a, b) &#123; // discuss at: https://locutus.io/php/strnatcasecmp/ // original by: Martin Pool // reimplemented by: Pierre-Luc Paour // reimplemented by: Kristof Coomans (SCK-CEN (Belgian Nucleair Research Centre)) // reimplemented by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // input by: Devan Penner-Woelk // improved by: Kevin van Zonneveld (https://kvz.io) // reimplemented by: Rafał Kukawski // example 1: strnatcasecmp(10, 1) // returns 1: 1 // example 2: strnatcasecmp('1', '10') // returns 2: -1 const strnatcmp = require('../strings/strnatcmp') const _phpCastString = require('../_helpers/_phpCastString') if (arguments.length !== 2) &#123; return null &#125; return strnatcmp(_phpCastString(a).toLowerCase(), _phpCastString(b).toLowerCase())&#125;"},{"title":"PHP's strnatcmp in JavaScript","date":"2021-02-28T22:26:45.757Z","updated":"2021-02-28T22:26:45.757Z","comments":true,"path":"php/strings/strnatcmp/index.html","permalink":"https://locutus.io/php/strings/strnatcmp/index.html","excerpt":"","text":"module.exports = function strnatcmp (a, b) &#123; // discuss at: https://locutus.io/php/strnatcmp/ // original by: Martijn Wieringa // improved by: Michael White (https://getsprink.com) // improved by: Jack // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // reimplemented by: Rafał Kukawski // example 1: strnatcmp('abc', 'abc') // returns 1: 0 // example 2: strnatcmp('a', 'b') // returns 2: -1 // example 3: strnatcmp('10', '1') // returns 3: 1 // example 4: strnatcmp('0000abc', '0abc') // returns 4: 0 // example 5: strnatcmp('1239', '12345') // returns 5: -1 // example 6: strnatcmp('t01239', 't012345') // returns 6: 1 // example 7: strnatcmp('0A', '5N') // returns 7: -1 const _phpCastString = require('../_helpers/_phpCastString') const leadingZeros = /^0+(?=\\d)/ const whitespace = /^\\s/ const digit = /^\\d/ if (arguments.length !== 2) &#123; return null &#125; a = _phpCastString(a) b = _phpCastString(b) if (!a.length || !b.length) &#123; return a.length - b.length &#125; let i = 0 let j = 0 a = a.replace(leadingZeros, '') b = b.replace(leadingZeros, '') while (i &lt; a.length &amp;&amp; j &lt; b.length) &#123; // skip consecutive whitespace while (whitespace.test(a.charAt(i))) i++ while (whitespace.test(b.charAt(j))) j++ let ac = a.charAt(i) let bc = b.charAt(j) let aIsDigit = digit.test(ac) let bIsDigit = digit.test(bc) if (aIsDigit &amp;&amp; bIsDigit) &#123; let bias = 0 const fractional = ac === '0' || bc === '0' do &#123; if (!aIsDigit) &#123; return -1 &#125; else if (!bIsDigit) &#123; return 1 &#125; else if (ac &lt; bc) &#123; if (!bias) &#123; bias = -1 &#125; if (fractional) &#123; return -1 &#125; &#125; else if (ac &gt; bc) &#123; if (!bias) &#123; bias = 1 &#125; if (fractional) &#123; return 1 &#125; &#125; ac = a.charAt(++i) bc = b.charAt(++j) aIsDigit = digit.test(ac) bIsDigit = digit.test(bc) &#125; while (aIsDigit || bIsDigit) if (!fractional &amp;&amp; bias) &#123; return bias &#125; continue &#125; if (!ac || !bc) &#123; continue &#125; else if (ac &lt; bc) &#123; return -1 &#125; else if (ac &gt; bc) &#123; return 1 &#125; i++ j++ &#125; const iBeforeStrEnd = i &lt; a.length const jBeforeStrEnd = j &lt; b.length // Check which string ended first // return -1 if a, 1 if b, 0 otherwise return (iBeforeStrEnd &gt; jBeforeStrEnd) - (iBeforeStrEnd &lt; jBeforeStrEnd)&#125;"},{"title":"PHP's strncasecmp in JavaScript","date":"2021-02-28T22:26:45.757Z","updated":"2021-02-28T22:26:45.757Z","comments":true,"path":"php/strings/strncasecmp/index.html","permalink":"https://locutus.io/php/strings/strncasecmp/index.html","excerpt":"","text":"module.exports = function strncasecmp (argStr1, argStr2, len) &#123; // discuss at: https://locutus.io/php/strncasecmp/ // original by: Saulo Vallory // input by: Nate // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // note 1: Returns &lt; 0 if str1 is less than str2 ; &gt; 0 // note 1: if str1 is greater than str2, and 0 if they are equal. // example 1: strncasecmp('Price 12.9', 'Price 12.15', 2) // returns 1: 0 // example 2: strncasecmp('Price 12.09', 'Price 12.15', 10) // returns 2: -1 // example 3: strncasecmp('Price 12.90', 'Price 12.15', 30) // returns 3: 8 // example 4: strncasecmp('Version 12.9', 'Version 12.15', 20) // returns 4: 8 // example 5: strncasecmp('Version 12.15', 'Version 12.9', 20) // returns 5: -8 let diff let i = 0 const str1 = (argStr1 + '').toLowerCase().substr(0, len) const str2 = (argStr2 + '').toLowerCase().substr(0, len) if (str1.length !== str2.length) &#123; if (str1.length &lt; str2.length) &#123; len = str1.length if (str2.substr(0, str1.length) === str1) &#123; // return the difference of chars return str1.length - str2.length &#125; &#125; else &#123; len = str2.length // str1 is longer than str2 if (str1.substr(0, str2.length) === str2) &#123; // return the difference of chars return str1.length - str2.length &#125; &#125; &#125; else &#123; // Avoids trying to get a char that does not exist len = str1.length &#125; for (diff = 0, i = 0; i &lt; len; i++) &#123; diff = str1.charCodeAt(i) - str2.charCodeAt(i) if (diff !== 0) &#123; return diff &#125; &#125; return 0&#125;"},{"title":"PHP's strncmp in JavaScript","date":"2021-02-28T22:26:45.757Z","updated":"2021-02-28T22:26:45.757Z","comments":true,"path":"php/strings/strncmp/index.html","permalink":"https://locutus.io/php/strings/strncmp/index.html","excerpt":"","text":"module.exports = function strncmp (str1, str2, lgth) &#123; // discuss at: https://locutus.io/php/strncmp/ // original by: Waldo Malqui Silva (https://waldo.malqui.info) // input by: Steve Hilder // improved by: Kevin van Zonneveld (https://kvz.io) // revised by: gorthaur // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: strncmp('aaa', 'aab', 2) // returns 1: 0 // example 2: strncmp('aaa', 'aab', 3 ) // returns 2: -1 const s1 = (str1 + '') .substr(0, lgth) const s2 = (str2 + '') .substr(0, lgth) return ((s1 === s2) ? 0 : ((s1 &gt; s2) ? 1 : -1))&#125;"},{"title":"PHP's strpbrk in JavaScript","date":"2021-02-28T22:26:45.761Z","updated":"2021-02-28T22:26:45.761Z","comments":true,"path":"php/strings/strpbrk/index.html","permalink":"https://locutus.io/php/strings/strpbrk/index.html","excerpt":"","text":"module.exports = function strpbrk (haystack, charList) &#123; // discuss at: https://locutus.io/php/strpbrk/ // original by: Alfonso Jimenez (https://www.alfonsojimenez.com) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // revised by: Christoph // improved by: Brett Zamir (https://brett-zamir.me) // example 1: strpbrk('This is a Simple text.', 'is') // returns 1: 'is is a Simple text.' for (let i = 0, len = haystack.length; i &lt; len; ++i) &#123; if (charList.indexOf(haystack.charAt(i)) &gt;= 0) &#123; return haystack.slice(i) &#125; &#125; return false&#125;"},{"title":"PHP's strpos in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strpos/index.html","permalink":"https://locutus.io/php/strings/strpos/index.html","excerpt":"","text":"module.exports = function strpos (haystack, needle, offset) &#123; // discuss at: https://locutus.io/php/strpos/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Daniel Esteban // example 1: strpos('Kevin van Zonneveld', 'e', 5) // returns 1: 14 const i = (haystack + '') .indexOf(needle, (offset || 0)) return i === -1 ? false : i&#125;"},{"title":"PHP's strrchr in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strrchr/index.html","permalink":"https://locutus.io/php/strings/strrchr/index.html","excerpt":"","text":"module.exports = function strrchr (haystack, needle) &#123; // discuss at: https://locutus.io/php/strrchr/ // original by: Brett Zamir (https://brett-zamir.me) // input by: Jason Wong (https://carrot.org/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: strrchr(\"Line 1\\nLine 2\\nLine 3\", 10).substr(1) // returns 1: 'Line 3' let pos = 0 if (typeof needle !== 'string') &#123; needle = String.fromCharCode(parseInt(needle, 10)) &#125; needle = needle.charAt(0) pos = haystack.lastIndexOf(needle) if (pos === -1) &#123; return false &#125; return haystack.substr(pos)&#125;"},{"title":"PHP's strrev in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strrev/index.html","permalink":"https://locutus.io/php/strings/strrev/index.html","excerpt":"","text":"module.exports = function strrev (string) &#123; // discuss at: https://locutus.io/php/strrev/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: strrev('Kevin van Zonneveld') // returns 1: 'dlevennoZ nav niveK' // example 2: strrev('a\\u0301haB') // returns 2: 'Baha\\u0301' // combining // example 3: strrev('A\\uD87E\\uDC04Z') // returns 3: 'Z\\uD87E\\uDC04A' // surrogates // test: 'skip-3' string = string + '' // Performance will be enhanced with the next two lines of code commented // out if you don't care about combining characters // Keep Unicode combining characters together with the character preceding // them and which they are modifying (as in PHP 6) // See https://unicode.org/reports/tr44/#Property_Table (Me+Mn) // We also add the low surrogate range at the beginning here so it will be // maintained with its preceding high surrogate const chars = [ '\\uDC00-\\uDFFF', '\\u0300-\\u036F', '\\u0483-\\u0489', '\\u0591-\\u05BD', '\\u05BF', '\\u05C1', '\\u05C2', '\\u05C4', '\\u05C5', '\\u05C7', '\\u0610-\\u061A', '\\u064B-\\u065E', '\\u0670', '\\u06D6-\\u06DC', '\\u06DE-\\u06E4', '\\u06E7\\u06E8', '\\u06EA-\\u06ED', '\\u0711', '\\u0730-\\u074A', '\\u07A6-\\u07B0', '\\u07EB-\\u07F3', '\\u0901-\\u0903', '\\u093C', '\\u093E-\\u094D', '\\u0951-\\u0954', '\\u0962', '\\u0963', '\\u0981-\\u0983', '\\u09BC', '\\u09BE-\\u09C4', '\\u09C7', '\\u09C8', '\\u09CB-\\u09CD', '\\u09D7', '\\u09E2', '\\u09E3', '\\u0A01-\\u0A03', '\\u0A3C', '\\u0A3E-\\u0A42', '\\u0A47', '\\u0A48', '\\u0A4B-\\u0A4D', '\\u0A51', '\\u0A70', '\\u0A71', '\\u0A75', '\\u0A81-\\u0A83', '\\u0ABC', '\\u0ABE-\\u0AC5', '\\u0AC7-\\u0AC9', '\\u0ACB-\\u0ACD', '\\u0AE2', '\\u0AE3', '\\u0B01-\\u0B03', '\\u0B3C', '\\u0B3E-\\u0B44', '\\u0B47', '\\u0B48', '\\u0B4B-\\u0B4D', '\\u0B56', '\\u0B57', '\\u0B62', '\\u0B63', '\\u0B82', '\\u0BBE-\\u0BC2', '\\u0BC6-\\u0BC8', '\\u0BCA-\\u0BCD', '\\u0BD7', '\\u0C01-\\u0C03', '\\u0C3E-\\u0C44', '\\u0C46-\\u0C48', '\\u0C4A-\\u0C4D', '\\u0C55', '\\u0C56', '\\u0C62', '\\u0C63', '\\u0C82', '\\u0C83', '\\u0CBC', '\\u0CBE-\\u0CC4', '\\u0CC6-\\u0CC8', '\\u0CCA-\\u0CCD', '\\u0CD5', '\\u0CD6', '\\u0CE2', '\\u0CE3', '\\u0D02', '\\u0D03', '\\u0D3E-\\u0D44', '\\u0D46-\\u0D48', '\\u0D4A-\\u0D4D', '\\u0D57', '\\u0D62', '\\u0D63', '\\u0D82', '\\u0D83', '\\u0DCA', '\\u0DCF-\\u0DD4', '\\u0DD6', '\\u0DD8-\\u0DDF', '\\u0DF2', '\\u0DF3', '\\u0E31', '\\u0E34-\\u0E3A', '\\u0E47-\\u0E4E', '\\u0EB1', '\\u0EB4-\\u0EB9', '\\u0EBB', '\\u0EBC', '\\u0EC8-\\u0ECD', '\\u0F18', '\\u0F19', '\\u0F35', '\\u0F37', '\\u0F39', '\\u0F3E', '\\u0F3F', '\\u0F71-\\u0F84', '\\u0F86', '\\u0F87', '\\u0F90-\\u0F97', '\\u0F99-\\u0FBC', '\\u0FC6', '\\u102B-\\u103E', '\\u1056-\\u1059', '\\u105E-\\u1060', '\\u1062-\\u1064', '\\u1067-\\u106D', '\\u1071-\\u1074', '\\u1082-\\u108D', '\\u108F', '\\u135F', '\\u1712-\\u1714', '\\u1732-\\u1734', '\\u1752', '\\u1753', '\\u1772', '\\u1773', '\\u17B6-\\u17D3', '\\u17DD', '\\u180B-\\u180D', '\\u18A9', '\\u1920-\\u192B', '\\u1930-\\u193B', '\\u19B0-\\u19C0', '\\u19C8', '\\u19C9', '\\u1A17-\\u1A1B', '\\u1B00-\\u1B04', '\\u1B34-\\u1B44', '\\u1B6B-\\u1B73', '\\u1B80-\\u1B82', '\\u1BA1-\\u1BAA', '\\u1C24-\\u1C37', '\\u1DC0-\\u1DE6', '\\u1DFE', '\\u1DFF', '\\u20D0-\\u20F0', '\\u2DE0-\\u2DFF', '\\u302A-\\u302F', '\\u3099', '\\u309A', '\\uA66F-\\uA672', '\\uA67C', '\\uA67D', '\\uA802', '\\uA806', '\\uA80B', '\\uA823-\\uA827', '\\uA880', '\\uA881', '\\uA8B4-\\uA8C4', '\\uA926-\\uA92D', '\\uA947-\\uA953', '\\uAA29-\\uAA36', '\\uAA43', '\\uAA4C', '\\uAA4D', '\\uFB1E', '\\uFE00-\\uFE0F', '\\uFE20-\\uFE26' ] const graphemeExtend = new RegExp('(.)([' + chars.join('') + ']+)', 'g') // Temporarily reverse string = string.replace(graphemeExtend, '$2$1') return string.split('').reverse().join('')&#125;"},{"title":"PHP's strripos in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strripos/index.html","permalink":"https://locutus.io/php/strings/strripos/index.html","excerpt":"","text":"module.exports = function strripos (haystack, needle, offset) &#123; // discuss at: https://locutus.io/php/strripos/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: saulius // example 1: strripos('Kevin van Zonneveld', 'E') // returns 1: 16 haystack = (haystack + '') .toLowerCase() needle = (needle + '') .toLowerCase() let i = -1 if (offset) &#123; i = (haystack + '') .slice(offset) .lastIndexOf(needle) // strrpos' offset indicates starting point of range till end, // while lastIndexOf's optional 2nd argument indicates ending point of range from the beginning if (i !== -1) &#123; i += offset &#125; &#125; else &#123; i = (haystack + '') .lastIndexOf(needle) &#125; return i &gt;= 0 ? i : false&#125;"},{"title":"PHP's strrpos in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strrpos/index.html","permalink":"https://locutus.io/php/strings/strrpos/index.html","excerpt":"","text":"module.exports = function strrpos (haystack, needle, offset) &#123; // discuss at: https://locutus.io/php/strrpos/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Brett Zamir (https://brett-zamir.me) // input by: saulius // example 1: strrpos('Kevin van Zonneveld', 'e') // returns 1: 16 // example 2: strrpos('somepage.com', '.', false) // returns 2: 8 // example 3: strrpos('baa', 'a', 3) // returns 3: false // example 4: strrpos('baa', 'a', 2) // returns 4: 2 let i = -1 if (offset) &#123; i = (haystack + '') .slice(offset) .lastIndexOf(needle) // strrpos' offset indicates starting point of range till end, // while lastIndexOf's optional 2nd argument indicates ending point of range from the beginning if (i !== -1) &#123; i += offset &#125; &#125; else &#123; i = (haystack + '') .lastIndexOf(needle) &#125; return i &gt;= 0 ? i : false&#125;"},{"title":"PHP's strspn in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strspn/index.html","permalink":"https://locutus.io/php/strings/strspn/index.html","excerpt":"","text":"module.exports = function strspn (str1, str2, start, lgth) &#123; // discuss at: https://locutus.io/php/strspn/ // original by: Valentina De Rosa // improved by: Brett Zamir (https://brett-zamir.me) // example 1: strspn('42 is the answer, what is the question ...', '1234567890') // returns 1: 2 // example 2: strspn('foo', 'o', 1, 2) // returns 2: 2 let found let stri let strj let j = 0 let i = 0 start = start ? (start &lt; 0 ? (str1.length + start) : start) : 0 lgth = lgth ? ((lgth &lt; 0) ? (str1.length + lgth - start) : lgth) : str1.length - start str1 = str1.substr(start, lgth) for (i = 0; i &lt; str1.length; i++) &#123; found = 0 stri = str1.substring(i, i + 1) for (j = 0; j &lt;= str2.length; j++) &#123; strj = str2.substring(j, j + 1) if (stri === strj) &#123; found = 1 break &#125; &#125; if (found !== 1) &#123; return i &#125; &#125; return i&#125;"},{"title":"PHP's strstr in JavaScript","date":"2021-02-28T22:26:45.769Z","updated":"2021-02-28T22:26:45.769Z","comments":true,"path":"php/strings/strstr/index.html","permalink":"https://locutus.io/php/strings/strstr/index.html","excerpt":"","text":"module.exports = function strstr (haystack, needle, bool) &#123; // discuss at: https://locutus.io/php/strstr/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Kevin van Zonneveld (https://kvz.io) // example 1: strstr('Kevin van Zonneveld', 'van') // returns 1: 'van Zonneveld' // example 2: strstr('Kevin van Zonneveld', 'van', true) // returns 2: 'Kevin ' // example 3: strstr('name@example.com', '@') // returns 3: '@example.com' // example 4: strstr('name@example.com', '@', true) // returns 4: 'name' let pos = 0 haystack += '' pos = haystack.indexOf(needle) if (pos === -1) &#123; return false &#125; else &#123; if (bool) &#123; return haystack.substr(0, pos) &#125; else &#123; return haystack.slice(pos) &#125; &#125;&#125;"},{"title":"PHP's strtok in JavaScript","date":"2021-02-28T22:26:45.773Z","updated":"2021-02-28T22:26:45.773Z","comments":true,"path":"php/strings/strtok/index.html","permalink":"https://locutus.io/php/strings/strtok/index.html","excerpt":"","text":"module.exports = function strtok (str, tokens) &#123; // discuss at: https://locutus.io/php/strtok/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Use tab and newline as tokenizing characters as well // example 1: var $string = \"\\t\\t\\t\\nThis is\\tan example\\nstring\\n\" // example 1: var $tok = strtok($string, \" \\n\\t\") // example 1: var $b = '' // example 1: while ($tok !== false) &#123;$b += \"Word=\"+$tok+\"\\n\"; $tok = strtok(\" \\n\\t\");&#125; // example 1: var $result = $b // returns 1: \"Word=This\\nWord=is\\nWord=an\\nWord=example\\nWord=string\\n\" const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; if (tokens === undefined) &#123; tokens = str str = $locutus.php.strtokleftOver &#125; if (str.length === 0) &#123; return false &#125; if (tokens.indexOf(str.charAt(0)) !== -1) &#123; return strtok(str.substr(1), tokens) &#125; for (var i = 0; i &lt; str.length; i++) &#123; if (tokens.indexOf(str.charAt(i)) !== -1) &#123; break &#125; &#125; $locutus.php.strtokleftOver = str.substr(i + 1) return str.substring(0, i)&#125;"},{"title":"PHP's strtolower in JavaScript","date":"2021-02-28T22:26:45.773Z","updated":"2021-02-28T22:26:45.773Z","comments":true,"path":"php/strings/strtolower/index.html","permalink":"https://locutus.io/php/strings/strtolower/index.html","excerpt":"","text":"module.exports = function strtolower (str) &#123; // discuss at: https://locutus.io/php/strtolower/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: strtolower('Kevin van Zonneveld') // returns 1: 'kevin van zonneveld' return (str + '') .toLowerCase()&#125;"},{"title":"PHP's strtoupper in JavaScript","date":"2021-02-28T22:26:45.773Z","updated":"2021-02-28T22:26:45.773Z","comments":true,"path":"php/strings/strtoupper/index.html","permalink":"https://locutus.io/php/strings/strtoupper/index.html","excerpt":"","text":"module.exports = function strtoupper (str) &#123; // discuss at: https://locutus.io/php/strtoupper/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: strtoupper('Kevin van Zonneveld') // returns 1: 'KEVIN VAN ZONNEVELD' return (str + '') .toUpperCase()&#125;"},{"title":"PHP's strtr in JavaScript","date":"2021-02-28T22:26:45.773Z","updated":"2021-02-28T22:26:45.773Z","comments":true,"path":"php/strings/strtr/index.html","permalink":"https://locutus.io/php/strings/strtr/index.html","excerpt":"","text":"module.exports = function strtr (str, trFrom, trTo) &#123; // discuss at: https://locutus.io/php/strtr/ // original by: Brett Zamir (https://brett-zamir.me) // input by: uestla // input by: Alan C // input by: Taras Bogach // input by: jpfle // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: var $trans = &#123;'hello' : 'hi', 'hi' : 'hello'&#125; // example 1: strtr('hi all, I said hello', $trans) // returns 1: 'hello all, I said hi' // example 2: strtr('äaabaåccasdeöoo', 'äåö','aao') // returns 2: 'aaabaaccasdeooo' // example 3: strtr('ääääääää', 'ä', 'a') // returns 3: 'aaaaaaaa' // example 4: strtr('http', 'pthxyz','xyzpth') // returns 4: 'zyyx' // example 5: strtr('zyyx', 'pthxyz','xyzpth') // returns 5: 'http' // example 6: strtr('aa', &#123;'a':1,'aa':2&#125;) // returns 6: '2' const krsort = require('../array/krsort') const iniSet = require('../info/ini_set') let fr = '' let i = 0 let j = 0 let lenStr = 0 let lenFrom = 0 let sortByReference = false let fromTypeStr = '' let toTypeStr = '' let istr = '' const tmpFrom = [] const tmpTo = [] let ret = '' let match = false // Received replace_pairs? // Convert to normal trFrom-&gt;trTo chars if (typeof trFrom === 'object') &#123; // Not thread-safe; temporarily set to true // @todo: Don't rely on ini here, use internal krsort instead sortByReference = iniSet('locutus.sortByReference', false) trFrom = krsort(trFrom) iniSet('locutus.sortByReference', sortByReference) for (fr in trFrom) &#123; if (trFrom.hasOwnProperty(fr)) &#123; tmpFrom.push(fr) tmpTo.push(trFrom[fr]) &#125; &#125; trFrom = tmpFrom trTo = tmpTo &#125; // Walk through subject and replace chars when needed lenStr = str.length lenFrom = trFrom.length fromTypeStr = typeof trFrom === 'string' toTypeStr = typeof trTo === 'string' for (i = 0; i &lt; lenStr; i++) &#123; match = false if (fromTypeStr) &#123; istr = str.charAt(i) for (j = 0; j &lt; lenFrom; j++) &#123; if (istr === trFrom.charAt(j)) &#123; match = true break &#125; &#125; &#125; else &#123; for (j = 0; j &lt; lenFrom; j++) &#123; if (str.substr(i, trFrom[j].length) === trFrom[j]) &#123; match = true // Fast forward i = (i + trFrom[j].length) - 1 break &#125; &#125; &#125; if (match) &#123; ret += toTypeStr ? trTo.charAt(j) : trTo[j] &#125; else &#123; ret += str.charAt(i) &#125; &#125; return ret&#125;"},{"title":"PHP's substr in JavaScript","date":"2021-02-28T22:26:45.777Z","updated":"2021-02-28T22:26:45.777Z","comments":true,"path":"php/strings/substr/index.html","permalink":"https://locutus.io/php/strings/substr/index.html","excerpt":"","text":"module.exports = function substr (input, start, len) &#123; // discuss at: https://locutus.io/php/substr/ // original by: Martijn Wieringa // bugfixed by: T.Wild // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // revised by: Theriault (https://github.com/Theriault) // revised by: Rafał Kukawski // note 1: Handles rare Unicode characters if 'unicode.semantics' ini (PHP6) is set to 'on' // example 1: substr('abcdef', 0, -1) // returns 1: 'abcde' // example 2: substr(2, 0, -6) // returns 2: false // example 3: ini_set('unicode.semantics', 'on') // example 3: substr('a\\uD801\\uDC00', 0, -1) // returns 3: 'a' // example 4: ini_set('unicode.semantics', 'on') // example 4: substr('a\\uD801\\uDC00', 0, 2) // returns 4: 'a\\uD801\\uDC00' // example 5: ini_set('unicode.semantics', 'on') // example 5: substr('a\\uD801\\uDC00', -1, 1) // returns 5: '\\uD801\\uDC00' // example 6: ini_set('unicode.semantics', 'on') // example 6: substr('a\\uD801\\uDC00z\\uD801\\uDC00', -3, 2) // returns 6: '\\uD801\\uDC00z' // example 7: ini_set('unicode.semantics', 'on') // example 7: substr('a\\uD801\\uDC00z\\uD801\\uDC00', -3, -1) // returns 7: '\\uD801\\uDC00z' // test: skip-3 skip-4 skip-5 skip-6 skip-7 const _php_cast_string = require('../_helpers/_phpCastString') // eslint-disable-line camelcase input = _php_cast_string(input) const ini_get = require('../info/ini_get') // eslint-disable-line camelcase const multibyte = ini_get('unicode.semantics') === 'on' if (multibyte) &#123; input = input.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\s\\S]/g) || [] &#125; const inputLength = input.length let end = inputLength if (start &lt; 0) &#123; start += end &#125; if (typeof len !== 'undefined') &#123; if (len &lt; 0) &#123; end = len + end &#125; else &#123; end = len + start &#125; &#125; if (start &gt; inputLength || start &lt; 0 || start &gt; end) &#123; return false &#125; if (multibyte) &#123; return input.slice(start, end).join('') &#125; return input.slice(start, end)&#125;"},{"title":"PHP's substr_compare in JavaScript","date":"2021-02-28T22:26:45.777Z","updated":"2021-02-28T22:26:45.777Z","comments":true,"path":"php/strings/substr_compare/index.html","permalink":"https://locutus.io/php/strings/substr_compare/index.html","excerpt":"","text":"module.exports = function substr_compare (mainStr, str, offset, length, caseInsensitivity) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/substr_compare/ // original by: Brett Zamir (https://brett-zamir.me) // original by: strcasecmp, strcmp // example 1: substr_compare(\"abcde\", \"bc\", 1, 2) // returns 1: 0 if (!offset &amp;&amp; offset !== 0) &#123; throw new Error('Missing offset for substr_compare()') &#125; if (offset &lt; 0) &#123; offset = mainStr.length + offset &#125; if (length &amp;&amp; length &gt; (mainStr.length - offset)) &#123; return false &#125; length = length || mainStr.length - offset mainStr = mainStr.substr(offset, length) // Should only compare up to the desired length str = str.substr(0, length) if (caseInsensitivity) &#123; // Works as strcasecmp mainStr = (mainStr + '').toLowerCase() str = (str + '').toLowerCase() if (mainStr === str) &#123; return 0 &#125; return (mainStr &gt; str) ? 1 : -1 &#125; // Works as strcmp return ((mainStr === str) ? 0 : ((mainStr &gt; str) ? 1 : -1))&#125;"},{"title":"PHP's substr_count in JavaScript","date":"2021-02-28T22:26:45.777Z","updated":"2021-02-28T22:26:45.777Z","comments":true,"path":"php/strings/substr_count/index.html","permalink":"https://locutus.io/php/strings/substr_count/index.html","excerpt":"","text":"module.exports = function substr_count (haystack, needle, offset, length) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/substr_count/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Thomas // example 1: substr_count('Kevin van Zonneveld', 'e') // returns 1: 3 // example 2: substr_count('Kevin van Zonneveld', 'K', 1) // returns 2: 0 // example 3: substr_count('Kevin van Zonneveld', 'Z', 0, 10) // returns 3: false let cnt = 0 haystack += '' needle += '' if (isNaN(offset)) &#123; offset = 0 &#125; if (isNaN(length)) &#123; length = 0 &#125; if (needle.length === 0) &#123; return false &#125; offset-- while ((offset = haystack.indexOf(needle, offset + 1)) !== -1) &#123; if (length &gt; 0 &amp;&amp; (offset + needle.length) &gt; length) &#123; return false &#125; cnt++ &#125; return cnt&#125;"},{"title":"PHP's substr_replace in JavaScript","date":"2021-02-28T22:26:45.777Z","updated":"2021-02-28T22:26:45.777Z","comments":true,"path":"php/strings/substr_replace/index.html","permalink":"https://locutus.io/php/strings/substr_replace/index.html","excerpt":"","text":"module.exports = function substr_replace (str, replace, start, length) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/substr_replace/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: substr_replace('ABCDEFGH:/MNRPQR/', 'bob', 0) // returns 1: 'bob' // example 2: var $var = 'ABCDEFGH:/MNRPQR/' // example 2: substr_replace($var, 'bob', 0, $var.length) // returns 2: 'bob' // example 3: substr_replace('ABCDEFGH:/MNRPQR/', 'bob', 0, 0) // returns 3: 'bobABCDEFGH:/MNRPQR/' // example 4: substr_replace('ABCDEFGH:/MNRPQR/', 'bob', 10, -1) // returns 4: 'ABCDEFGH:/bob/' // example 5: substr_replace('ABCDEFGH:/MNRPQR/', 'bob', -7, -1) // returns 5: 'ABCDEFGH:/bob/' // example 6: substr_replace('ABCDEFGH:/MNRPQR/', '', 10, -1) // returns 6: 'ABCDEFGH://' if (start &lt; 0) &#123; // start position in str start = start + str.length &#125; length = length !== undefined ? length : str.length if (length &lt; 0) &#123; length = length + str.length - start &#125; return [ str.slice(0, start), replace.substr(0, length), replace.slice(length), str.slice(start + length) ].join('')&#125;"},{"title":"PHP's trim in JavaScript","date":"2021-02-28T22:26:45.781Z","updated":"2021-02-28T22:26:45.781Z","comments":true,"path":"php/strings/trim/index.html","permalink":"https://locutus.io/php/strings/trim/index.html","excerpt":"","text":"module.exports = function trim (str, charlist) &#123; // discuss at: https://locutus.io/php/trim/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: mdsjack (https://www.mdsjack.bo.it) // improved by: Alexander Ermolaev (https://snippets.dzone.com/user/AlexanderErmolaev) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Steven Levithan (https://blog.stevenlevithan.com) // improved by: Jack // input by: Erkekjetter // input by: DxGx // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // example 1: trim(' Kevin van Zonneveld ') // returns 1: 'Kevin van Zonneveld' // example 2: trim('Hello World', 'Hdle') // returns 2: 'o Wor' // example 3: trim(16, 1) // returns 3: '6' let whitespace = [ ' ', '\\n', '\\r', '\\t', '\\f', '\\x0b', '\\xa0', '\\u2000', '\\u2001', '\\u2002', '\\u2003', '\\u2004', '\\u2005', '\\u2006', '\\u2007', '\\u2008', '\\u2009', '\\u200a', '\\u200b', '\\u2028', '\\u2029', '\\u3000' ].join('') let l = 0 let i = 0 str += '' if (charlist) &#123; whitespace = (charlist + '').replace(/([[\\]().?/*&#123;&#125;+$^:])/g, '$1') &#125; l = str.length for (i = 0; i &lt; l; i++) &#123; if (whitespace.indexOf(str.charAt(i)) === -1) &#123; str = str.substring(i) break &#125; &#125; l = str.length for (i = l - 1; i &gt;= 0; i--) &#123; if (whitespace.indexOf(str.charAt(i)) === -1) &#123; str = str.substring(0, i + 1) break &#125; &#125; return whitespace.indexOf(str.charAt(0)) === -1 ? str : ''&#125;"},{"title":"PHP's ucfirst in JavaScript","date":"2021-02-28T22:26:45.781Z","updated":"2021-02-28T22:26:45.781Z","comments":true,"path":"php/strings/ucfirst/index.html","permalink":"https://locutus.io/php/strings/ucfirst/index.html","excerpt":"","text":"module.exports = function ucfirst (str) &#123; // discuss at: https://locutus.io/php/ucfirst/ // original by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // example 1: ucfirst('kevin van zonneveld') // returns 1: 'Kevin van zonneveld' str += '' const f = str.charAt(0) .toUpperCase() return f + str.substr(1)&#125;"},{"title":"PHP's ucwords in JavaScript","date":"2021-02-28T22:26:45.781Z","updated":"2021-02-28T22:26:45.781Z","comments":true,"path":"php/strings/ucwords/index.html","permalink":"https://locutus.io/php/strings/ucwords/index.html","excerpt":"","text":"module.exports = function ucwords (str) &#123; // discuss at: https://locutus.io/php/ucwords/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Robin // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Cetvertacov Alexandr (https://github.com/cetver) // input by: James (https://www.james-bell.co.uk/) // example 1: ucwords('kevin van zonneveld') // returns 1: 'Kevin Van Zonneveld' // example 2: ucwords('HELLO WORLD') // returns 2: 'HELLO WORLD' // example 3: ucwords('у мэри был маленький ягненок и она его очень любила') // returns 3: 'У Мэри Был Маленький Ягненок И Она Его Очень Любила' // example 4: ucwords('τάχιστη αλώπηξ βαφής ψημένη γη, δρασκελίζει υπέρ νωθρού κυνός') // returns 4: 'Τάχιστη Αλώπηξ Βαφής Ψημένη Γη, Δρασκελίζει Υπέρ Νωθρού Κυνός' return (str + '') .replace(/^(.)|\\s+(.)/g, function ($1) &#123; return $1.toUpperCase() &#125;)&#125;"},{"title":"PHP's vprintf in JavaScript","date":"2021-02-28T22:26:45.781Z","updated":"2021-02-28T22:26:45.781Z","comments":true,"path":"php/strings/vprintf/index.html","permalink":"https://locutus.io/php/strings/vprintf/index.html","excerpt":"","text":"module.exports = function vprintf (format, args) &#123; // discuss at: https://locutus.io/php/vprintf/ // original by: Ash Searle (https://hexmen.com/blog/) // improved by: Michael White (https://getsprink.com) // reimplemented by: Brett Zamir (https://brett-zamir.me) // example 1: vprintf(\"%01.2f\", 123.1) // returns 1: 6 const sprintf = require('../strings/sprintf') const echo = require('../strings/echo') const ret = sprintf.apply(this, [format].concat(args)) echo(ret) return ret.length&#125;"},{"title":"PHP's vsprintf in JavaScript","date":"2021-02-28T22:26:45.785Z","updated":"2021-02-28T22:26:45.785Z","comments":true,"path":"php/strings/vsprintf/index.html","permalink":"https://locutus.io/php/strings/vsprintf/index.html","excerpt":"","text":"module.exports = function vsprintf (format, args) &#123; // discuss at: https://locutus.io/php/vsprintf/ // original by: ejsanders // example 1: vsprintf('%04d-%02d-%02d', [1988, 8, 1]) // returns 1: '1988-08-01' const sprintf = require('../strings/sprintf') return sprintf.apply(this, [format].concat(args))&#125;"},{"title":"PHP's wordwrap in JavaScript","date":"2021-02-28T22:26:45.785Z","updated":"2021-02-28T22:26:45.785Z","comments":true,"path":"php/strings/wordwrap/index.html","permalink":"https://locutus.io/php/strings/wordwrap/index.html","excerpt":"","text":"module.exports = function wordwrap (str, intWidth, strBreak, cut) &#123; // discuss at: https://locutus.io/php/wordwrap/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Nick Callen // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Sakimori // revised by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // bugfixed by: Michael Grier // bugfixed by: Feras ALHAEK // improved by: Rafał Kukawski (https://kukawski.net) // example 1: wordwrap('Kevin van Zonneveld', 6, '|', true) // returns 1: 'Kevin|van|Zonnev|eld' // example 2: wordwrap('The quick brown fox jumped over the lazy dog.', 20, '&lt;br /&gt;\\n') // returns 2: 'The quick brown fox&lt;br /&gt;\\njumped over the lazy&lt;br /&gt;\\ndog.' // example 3: wordwrap('Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.') // returns 3: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\\ntempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\\nveniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\\ncommodo consequat.' intWidth = arguments.length &gt;= 2 ? +intWidth : 75 strBreak = arguments.length &gt;= 3 ? '' + strBreak : '\\n' cut = arguments.length &gt;= 4 ? !!cut : false let i, j, line str += '' if (intWidth &lt; 1) &#123; return str &#125; const reLineBreaks = /\\r\\n|\\n|\\r/ const reBeginningUntilFirstWhitespace = /^\\S*/ const reLastCharsWithOptionalTrailingWhitespace = /\\S*(\\s)?$/ const lines = str.split(reLineBreaks) const l = lines.length let match // for each line of text for (i = 0; i &lt; l; lines[i++] += line) &#123; line = lines[i] lines[i] = '' while (line.length &gt; intWidth) &#123; // get slice of length one char above limit const slice = line.slice(0, intWidth + 1) // remove leading whitespace from rest of line to parse let ltrim = 0 // remove trailing whitespace from new line content let rtrim = 0 match = slice.match(reLastCharsWithOptionalTrailingWhitespace) // if the slice ends with whitespace if (match[1]) &#123; // then perfect moment to cut the line j = intWidth ltrim = 1 &#125; else &#123; // otherwise cut at previous whitespace j = slice.length - match[0].length if (j) &#123; rtrim = 1 &#125; // but if there is no previous whitespace // and cut is forced // cut just at the defined limit if (!j &amp;&amp; cut &amp;&amp; intWidth) &#123; j = intWidth &#125; // if cut wasn't forced // cut at next possible whitespace after the limit if (!j) &#123; const charsUntilNextWhitespace = (line.slice(intWidth).match(reBeginningUntilFirstWhitespace) || [''])[0] j = slice.length + charsUntilNextWhitespace.length &#125; &#125; lines[i] += line.slice(0, j - rtrim) line = line.slice(j + ltrim) lines[i] += line.length ? strBreak : '' &#125; &#125; return lines.join('\\n')&#125;"},{"title":"PHP's base64_decode in JavaScript","date":"2021-02-28T22:26:45.785Z","updated":"2021-02-28T22:26:45.785Z","comments":true,"path":"php/url/base64_decode/index.html","permalink":"https://locutus.io/php/url/base64_decode/index.html","excerpt":"","text":"module.exports = function base64_decode (encodedData) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/base64_decode/ // original by: Tyler Akins (https://rumkin.com) // improved by: Thunder.m // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Aman Gupta // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Pellentesque Malesuada // bugfixed by: Kevin van Zonneveld (https://kvz.io) // improved by: Indigo744 // example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==') // returns 1: 'Kevin van Zonneveld' // example 2: base64_decode('YQ==') // returns 2: 'a' // example 3: base64_decode('4pyTIMOgIGxhIG1vZGU=') // returns 3: '✓ à la mode' // decodeUTF8string() // Internal function to decode properly UTF8 string // Adapted from Solution #1 at https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding const decodeUTF8string = function (str) &#123; // Going backwards: from bytestream, to percent-encoding, to original string. return decodeURIComponent(str.split('').map(function (c) &#123; return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2) &#125;).join('')) &#125; if (typeof window !== 'undefined') &#123; if (typeof window.atob !== 'undefined') &#123; return decodeUTF8string(window.atob(encodedData)) &#125; &#125; else &#123; return new Buffer(encodedData, 'base64').toString('utf-8') &#125; const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=' let o1 let o2 let o3 let h1 let h2 let h3 let h4 let bits let i = 0 let ac = 0 let dec = '' const tmpArr = [] if (!encodedData) &#123; return encodedData &#125; encodedData += '' do &#123; // unpack four hexets into three octets using index points in b64 h1 = b64.indexOf(encodedData.charAt(i++)) h2 = b64.indexOf(encodedData.charAt(i++)) h3 = b64.indexOf(encodedData.charAt(i++)) h4 = b64.indexOf(encodedData.charAt(i++)) bits = h1 &lt;&lt; 18 | h2 &lt;&lt; 12 | h3 &lt;&lt; 6 | h4 o1 = bits &gt;&gt; 16 &amp; 0xff o2 = bits &gt;&gt; 8 &amp; 0xff o3 = bits &amp; 0xff if (h3 === 64) &#123; tmpArr[ac++] = String.fromCharCode(o1) &#125; else if (h4 === 64) &#123; tmpArr[ac++] = String.fromCharCode(o1, o2) &#125; else &#123; tmpArr[ac++] = String.fromCharCode(o1, o2, o3) &#125; &#125; while (i &lt; encodedData.length) dec = tmpArr.join('') return decodeUTF8string(dec.replace(/\\0+$/, ''))&#125;"},{"title":"PHP's base64_encode in JavaScript","date":"2021-02-28T22:26:45.785Z","updated":"2021-02-28T22:26:45.785Z","comments":true,"path":"php/url/base64_encode/index.html","permalink":"https://locutus.io/php/url/base64_encode/index.html","excerpt":"","text":"module.exports = function base64_encode (stringToEncode) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/base64_encode/ // original by: Tyler Akins (https://rumkin.com) // improved by: Bayron Guevara // improved by: Thunder.m // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // bugfixed by: Pellentesque Malesuada // improved by: Indigo744 // example 1: base64_encode('Kevin van Zonneveld') // returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA==' // example 2: base64_encode('a') // returns 2: 'YQ==' // example 3: base64_encode('✓ à la mode') // returns 3: '4pyTIMOgIGxhIG1vZGU=' // encodeUTF8string() // Internal function to encode properly UTF8 string // Adapted from Solution #1 at https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding const encodeUTF8string = function (str) &#123; // first we use encodeURIComponent to get percent-encoded UTF-8, // then we convert the percent encodings into raw bytes which // can be fed into the base64 encoding algorithm. return encodeURIComponent(str).replace(/%([0-9A-F]&#123;2&#125;)/g, function toSolidBytes (match, p1) &#123; return String.fromCharCode('0x' + p1) &#125;) &#125; if (typeof window !== 'undefined') &#123; if (typeof window.btoa !== 'undefined') &#123; return window.btoa(encodeUTF8string(stringToEncode)) &#125; &#125; else &#123; return new Buffer(stringToEncode).toString('base64') &#125; const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=' let o1 let o2 let o3 let h1 let h2 let h3 let h4 let bits let i = 0 let ac = 0 let enc = '' const tmpArr = [] if (!stringToEncode) &#123; return stringToEncode &#125; stringToEncode = encodeUTF8string(stringToEncode) do &#123; // pack three octets into four hexets o1 = stringToEncode.charCodeAt(i++) o2 = stringToEncode.charCodeAt(i++) o3 = stringToEncode.charCodeAt(i++) bits = o1 &lt;&lt; 16 | o2 &lt;&lt; 8 | o3 h1 = bits &gt;&gt; 18 &amp; 0x3f h2 = bits &gt;&gt; 12 &amp; 0x3f h3 = bits &gt;&gt; 6 &amp; 0x3f h4 = bits &amp; 0x3f // use hexets to index into b64, and append result to encoded string tmpArr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4) &#125; while (i &lt; stringToEncode.length) enc = tmpArr.join('') const r = stringToEncode.length % 3 return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3)&#125;"},{"title":"PHP's http_build_query in JavaScript","date":"2021-02-28T22:26:45.789Z","updated":"2021-02-28T22:26:45.789Z","comments":true,"path":"php/url/http_build_query/index.html","permalink":"https://locutus.io/php/url/http_build_query/index.html","excerpt":"","text":"module.exports = function http_build_query (formdata, numericPrefix, argSeparator, encType) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/http_build_query/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Legaev Andrey // improved by: Michael White (https://getsprink.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // revised by: stag019 // input by: Dreamer // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: MIO_KODUKI (https://mio-koduki.blogspot.com/) // improved by: Will Rowe // note 1: If the value is null, key and value are skipped in the // note 1: http_build_query of PHP while in locutus they are not. // example 1: http_build_query(&#123;foo: 'bar', php: 'hypertext processor', baz: 'boom', cow: 'milk'&#125;, '', '&amp;amp;') // returns 1: 'foo=bar&amp;amp;php=hypertext+processor&amp;amp;baz=boom&amp;amp;cow=milk' // example 2: http_build_query(&#123;'php': 'hypertext processor', 0: 'foo', 1: 'bar', 2: 'baz', 3: 'boom', 'cow': 'milk'&#125;, 'myvar_') // returns 2: 'myvar_0=foo&amp;myvar_1=bar&amp;myvar_2=baz&amp;myvar_3=boom&amp;php=hypertext+processor&amp;cow=milk' // example 3: http_build_query(&#123;foo: 'bar', php: 'hypertext processor', baz: 'boom', cow: 'milk'&#125;, '', '&amp;amp;', 'PHP_QUERY_RFC3986') // returns 3: 'foo=bar&amp;amp;php=hypertext%20processor&amp;amp;baz=boom&amp;amp;cow=milk' let encodeFunc switch (encType) &#123; case 'PHP_QUERY_RFC3986': encodeFunc = require('../url/rawurlencode') break case 'PHP_QUERY_RFC1738': default: encodeFunc = require('../url/urlencode') break &#125; let value let key const tmp = [] var _httpBuildQueryHelper = function (key, val, argSeparator) &#123; let k const tmp = [] if (val === true) &#123; val = '1' &#125; else if (val === false) &#123; val = '0' &#125; if (val !== null) &#123; if (typeof val === 'object') &#123; for (k in val) &#123; if (val[k] !== null) &#123; tmp.push(_httpBuildQueryHelper(key + '[' + k + ']', val[k], argSeparator)) &#125; &#125; return tmp.join(argSeparator) &#125; else if (typeof val !== 'function') &#123; return encodeFunc(key) + '=' + encodeFunc(val) &#125; else &#123; throw new Error('There was an error processing for http_build_query().') &#125; &#125; else &#123; return '' &#125; &#125; if (!argSeparator) &#123; argSeparator = '&amp;' &#125; for (key in formdata) &#123; value = formdata[key] if (numericPrefix &amp;&amp; !isNaN(key)) &#123; key = String(numericPrefix) + key &#125; const query = _httpBuildQueryHelper(key, value, argSeparator) if (query !== '') &#123; tmp.push(query) &#125; &#125; return tmp.join(argSeparator)&#125;"},{"title":"PHP's url extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/url/index.html","permalink":"https://locutus.io/php/url/index.html","excerpt":"","text":""},{"title":"PHP's parse_url in JavaScript","date":"2021-02-28T22:26:45.789Z","updated":"2021-02-28T22:26:45.789Z","comments":true,"path":"php/url/parse_url/index.html","permalink":"https://locutus.io/php/url/parse_url/index.html","excerpt":"","text":"module.exports = function parse_url (str, component) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/parse_url/ // original by: Steven Levithan (https://blog.stevenlevithan.com) // reimplemented by: Brett Zamir (https://brett-zamir.me) // input by: Lorenzo Pisani // input by: Tony // improved by: Brett Zamir (https://brett-zamir.me) // note 1: original by https://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js // note 1: blog post at https://blog.stevenlevithan.com/archives/parseuri // note 1: demo at https://stevenlevithan.com/demo/parseuri/js/assets/parseuri.js // note 1: Does not replace invalid characters with '_' as in PHP, // note 1: nor does it return false with // note 1: a seriously malformed URL. // note 1: Besides function name, is essentially the same as parseUri as // note 1: well as our allowing // note 1: an extra slash after the scheme/protocol (to allow file:/// as in PHP) // example 1: parse_url('https://user:pass@host/path?a=v#a') // returns 1: &#123;scheme: 'https', host: 'host', user: 'user', pass: 'pass', path: '/path', query: 'a=v', fragment: 'a'&#125; // example 2: parse_url('https://en.wikipedia.org/wiki/%22@%22_%28album%29') // returns 2: &#123;scheme: 'https', host: 'en.wikipedia.org', path: '/wiki/%22@%22_%28album%29'&#125; // example 3: parse_url('https://host.domain.tld/a@b.c/folder') // returns 3: &#123;scheme: 'https', host: 'host.domain.tld', path: '/a@b.c/folder'&#125; // example 4: parse_url('https://gooduser:secretpassword@www.example.com/a@b.c/folder?foo=bar') // returns 4: &#123; scheme: 'https', host: 'www.example.com', path: '/a@b.c/folder', query: 'foo=bar', user: 'gooduser', pass: 'secretpassword' &#125; let query const mode = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.mode') : undefined) || 'php' const key = [ 'source', 'scheme', 'authority', 'userInfo', 'user', 'pass', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'fragment' ] // For loose we added one optional slash to post-scheme to catch file:/// (should restrict this) let parser = &#123; php: new RegExp([ '(?:([^:\\\\/?#]+):)?', '(?:\\\\/\\\\/()(?:(?:()(?:([^:@\\\\/]*):?([^:@\\\\/]*))?@)?([^:\\\\/?#]*)(?::(\\\\d*))?))?', '()', '(?:(()(?:(?:[^?#\\\\/]*\\\\/)*)()(?:[^?#]*))(?:\\\\?([^#]*))?(?:#(.*))?)' ].join('')), strict: new RegExp([ '(?:([^:\\\\/?#]+):)?', '(?:\\\\/\\\\/((?:(([^:@\\\\/]*):?([^:@\\\\/]*))?@)?([^:\\\\/?#]*)(?::(\\\\d*))?))?', '((((?:[^?#\\\\/]*\\\\/)*)([^?#]*))(?:\\\\?([^#]*))?(?:#(.*))?)' ].join('')), loose: new RegExp([ '(?:(?![^:@]+:[^:@\\\\/]*@)([^:\\\\/?#.]+):)?', '(?:\\\\/\\\\/\\\\/?)?', '((?:(([^:@\\\\/]*):?([^:@\\\\/]*))?@)?([^:\\\\/?#]*)(?::(\\\\d*))?)', '(((\\\\/(?:[^?#](?![^?#\\\\/]*\\\\.[^?#\\\\/.]+(?:[?#]|$)))*\\\\/?)?([^?#\\\\/]*))', '(?:\\\\?([^#]*))?(?:#(.*))?)' ].join('')) &#125; const m = parser[mode].exec(str) const uri = &#123;&#125; let i = 14 while (i--) &#123; if (m[i]) &#123; uri[key[i]] = m[i] &#125; &#125; if (component) &#123; return uri[component.replace('PHP_URL_', '').toLowerCase()] &#125; if (mode !== 'php') &#123; const name = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.queryKey') : undefined) || 'queryKey' parser = /(?:^|&amp;)([^&amp;=]*)=?([^&amp;]*)/g uri[name] = &#123;&#125; query = uri[key[12]] || '' query.replace(parser, function ($0, $1, $2) &#123; if ($1) &#123; uri[name][$1] = $2 &#125; &#125;) &#125; delete uri.source return uri&#125;"},{"title":"PHP's rawurldecode in JavaScript","date":"2021-02-28T22:26:45.789Z","updated":"2021-02-28T22:26:45.789Z","comments":true,"path":"php/url/rawurldecode/index.html","permalink":"https://locutus.io/php/url/rawurldecode/index.html","excerpt":"","text":"module.exports = function rawurldecode (str) &#123; // discuss at: https://locutus.io/php/rawurldecode/ // original by: Brett Zamir (https://brett-zamir.me) // input by: travc // input by: Brett Zamir (https://brett-zamir.me) // input by: Ratheous // input by: lovio // bugfixed by: Kevin van Zonneveld (https://kvz.io) // reimplemented by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: Please be aware that this function expects to decode // note 1: from UTF-8 encoded strings, as found on // note 1: pages served as UTF-8 // example 1: rawurldecode('Kevin+van+Zonneveld%21') // returns 1: 'Kevin+van+Zonneveld!' // example 2: rawurldecode('https%3A%2F%2Fkvz.io%2F') // returns 2: 'https://kvz.io/' // example 3: rawurldecode('https%3A%2F%2Fwww.google.nl%2Fsearch%3Fq%3DLocutus%26ie%3D') // returns 3: 'https://www.google.nl/search?q=Locutus&amp;ie=' return decodeURIComponent((str + '') .replace(/%(?![\\da-f]&#123;2&#125;)/gi, function () &#123; // PHP tolerates poorly formed escape sequences return '%25' &#125;))&#125;"},{"title":"PHP's rawurlencode in JavaScript","date":"2021-02-28T22:26:45.789Z","updated":"2021-02-28T22:26:45.789Z","comments":true,"path":"php/url/rawurlencode/index.html","permalink":"https://locutus.io/php/url/rawurlencode/index.html","excerpt":"","text":"module.exports = function rawurlencode (str) &#123; // discuss at: https://locutus.io/php/rawurlencode/ // original by: Brett Zamir (https://brett-zamir.me) // input by: travc // input by: Brett Zamir (https://brett-zamir.me) // input by: Michael Grier // input by: Ratheous // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Joris // reimplemented by: Brett Zamir (https://brett-zamir.me) // reimplemented by: Brett Zamir (https://brett-zamir.me) // note 1: This reflects PHP 5.3/6.0+ behavior // note 1: Please be aware that this function expects \\ // note 1: to encode into UTF-8 encoded strings, as found on // note 1: pages served as UTF-8 // example 1: rawurlencode('Kevin van Zonneveld!') // returns 1: 'Kevin%20van%20Zonneveld%21' // example 2: rawurlencode('https://kvz.io/') // returns 2: 'https%3A%2F%2Fkvz.io%2F' // example 3: rawurlencode('https://www.google.nl/search?q=Locutus&amp;ie=utf-8') // returns 3: 'https%3A%2F%2Fwww.google.nl%2Fsearch%3Fq%3DLocutus%26ie%3Dutf-8' str = (str + '') // Tilde should be allowed unescaped in future versions of PHP (as reflected below), // but if you want to reflect current // PHP behavior, you would need to add \".replace(/~/g, '%7E');\" to the following. return encodeURIComponent(str) .replace(/!/g, '%21') .replace(/'/g, '%27') .replace(/\\(/g, '%28') .replace(/\\)/g, '%29') .replace(/\\*/g, '%2A')&#125;"},{"title":"PHP's urldecode in JavaScript","date":"2021-02-28T22:26:45.793Z","updated":"2021-02-28T22:26:45.793Z","comments":true,"path":"php/url/urldecode/index.html","permalink":"https://locutus.io/php/url/urldecode/index.html","excerpt":"","text":"module.exports = function urldecode (str) &#123; // discuss at: https://locutus.io/php/urldecode/ // original by: Philip Peterson // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Lars Fischer // improved by: Orlando // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // input by: AJ // input by: travc // input by: Brett Zamir (https://brett-zamir.me) // input by: Ratheous // input by: e-mike // input by: lovio // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Rob // reimplemented by: Brett Zamir (https://brett-zamir.me) // note 1: info on what encoding functions to use from: // note 1: https://xkr.us/articles/javascript/encode-compare/ // note 1: Please be aware that this function expects to decode // note 1: from UTF-8 encoded strings, as found on // note 1: pages served as UTF-8 // example 1: urldecode('Kevin+van+Zonneveld%21') // returns 1: 'Kevin van Zonneveld!' // example 2: urldecode('https%3A%2F%2Fkvz.io%2F') // returns 2: 'https://kvz.io/' // example 3: urldecode('https%3A%2F%2Fwww.google.nl%2Fsearch%3Fq%3DLocutus%26ie%3Dutf-8%26oe%3Dutf-8%26aq%3Dt%26rls%3Dcom.ubuntu%3Aen-US%3Aunofficial%26client%3Dfirefox-a') // returns 3: 'https://www.google.nl/search?q=Locutus&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=com.ubuntu:en-US:unofficial&amp;client=firefox-a' // example 4: urldecode('%E5%A5%BD%3_4') // returns 4: '\\u597d%3_4' return decodeURIComponent((str + '') .replace(/%(?![\\da-f]&#123;2&#125;)/gi, function () &#123; // PHP tolerates poorly formed escape sequences return '%25' &#125;) .replace(/\\+/g, '%20'))&#125;"},{"title":"PHP's urlencode in JavaScript","date":"2021-02-28T22:26:45.793Z","updated":"2021-02-28T22:26:45.793Z","comments":true,"path":"php/url/urlencode/index.html","permalink":"https://locutus.io/php/url/urlencode/index.html","excerpt":"","text":"module.exports = function urlencode (str) &#123; // discuss at: https://locutus.io/php/urlencode/ // original by: Philip Peterson // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Lars Fischer // improved by: Waldo Malqui Silva (https://fayr.us/waldo/) // input by: AJ // input by: travc // input by: Brett Zamir (https://brett-zamir.me) // input by: Ratheous // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Joris // reimplemented by: Brett Zamir (https://brett-zamir.me) // reimplemented by: Brett Zamir (https://brett-zamir.me) // note 1: This reflects PHP 5.3/6.0+ behavior // note 1: Please be aware that this function // note 1: expects to encode into UTF-8 encoded strings, as found on // note 1: pages served as UTF-8 // example 1: urlencode('Kevin van Zonneveld!') // returns 1: 'Kevin+van+Zonneveld%21' // example 2: urlencode('https://kvz.io/') // returns 2: 'https%3A%2F%2Fkvz.io%2F' // example 3: urlencode('https://www.google.nl/search?q=Locutus&amp;ie=utf-8') // returns 3: 'https%3A%2F%2Fwww.google.nl%2Fsearch%3Fq%3DLocutus%26ie%3Dutf-8' str = (str + '') return encodeURIComponent(str) .replace(/!/g, '%21') .replace(/'/g, '%27') .replace(/\\(/g, '%28') .replace(/\\)/g, '%29') .replace(/\\*/g, '%2A') .replace(/~/g, '%7E') .replace(/%20/g, '+')&#125;"},{"title":"PHP's boolval in JavaScript","date":"2021-02-28T22:26:45.793Z","updated":"2021-02-28T22:26:45.793Z","comments":true,"path":"php/var/boolval/index.html","permalink":"https://locutus.io/php/var/boolval/index.html","excerpt":"","text":"module.exports = function boolval (mixedVar) &#123; // original by: Will Rowe // example 1: boolval(true) // returns 1: true // example 2: boolval(false) // returns 2: false // example 3: boolval(0) // returns 3: false // example 4: boolval(0.0) // returns 4: false // example 5: boolval('') // returns 5: false // example 6: boolval('0') // returns 6: false // example 7: boolval([]) // returns 7: false // example 8: boolval('') // returns 8: false // example 9: boolval(null) // returns 9: false // example 10: boolval(undefined) // returns 10: false // example 11: boolval('true') // returns 11: true if (mixedVar === false) &#123; return false &#125; if (mixedVar === 0 || mixedVar === 0.0) &#123; return false &#125; if (mixedVar === '' || mixedVar === '0') &#123; return false &#125; if (Array.isArray(mixedVar) &amp;&amp; mixedVar.length === 0) &#123; return false &#125; if (mixedVar === null || mixedVar === undefined) &#123; return false &#125; return true&#125;"},{"title":"PHP's doubleval in JavaScript","date":"2021-02-28T22:26:45.793Z","updated":"2021-02-28T22:26:45.793Z","comments":true,"path":"php/var/doubleval/index.html","permalink":"https://locutus.io/php/var/doubleval/index.html","excerpt":"","text":"module.exports = function doubleval (mixedVar) &#123; // discuss at: https://locutus.io/php/doubleval/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: doubleval(186) // returns 1: 186.00 const floatval = require('../var/floatval') return floatval(mixedVar)&#125;"},{"title":"PHP's empty in JavaScript","date":"2021-02-28T22:26:45.793Z","updated":"2021-02-28T22:26:45.793Z","comments":true,"path":"php/var/empty/index.html","permalink":"https://locutus.io/php/var/empty/index.html","excerpt":"","text":"module.exports = function empty (mixedVar) &#123; // discuss at: https://locutus.io/php/empty/ // original by: Philippe Baumann // input by: Onno Marsman (https://twitter.com/onnomarsman) // input by: LH // input by: Stoyan Kyosev (https://www.svest.org/) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Francesco // improved by: Marc Jansen // improved by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: empty(null) // returns 1: true // example 2: empty(undefined) // returns 2: true // example 3: empty([]) // returns 3: true // example 4: empty(&#123;&#125;) // returns 4: true // example 5: empty(&#123;'aFunc' : function () &#123; alert('humpty'); &#125; &#125;) // returns 5: false let undef let key let i let len const emptyValues = [undef, null, false, 0, '', '0'] for (i = 0, len = emptyValues.length; i &lt; len; i++) &#123; if (mixedVar === emptyValues[i]) &#123; return true &#125; &#125; if (typeof mixedVar === 'object') &#123; for (key in mixedVar) &#123; if (mixedVar.hasOwnProperty(key)) &#123; return false &#125; &#125; return true &#125; return false&#125;"},{"title":"PHP's floatval in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/floatval/index.html","permalink":"https://locutus.io/php/var/floatval/index.html","excerpt":"","text":"module.exports = function floatval (mixedVar) &#123; // discuss at: https://locutus.io/php/floatval/ // original by: Michael White (https://getsprink.com) // note 1: The native parseFloat() method of JavaScript returns NaN // note 1: when it encounters a string before an int or float value. // example 1: floatval('150.03_page-section') // returns 1: 150.03 // example 2: floatval('page: 3') // example 2: floatval('-50 + 8') // returns 2: 0 // returns 2: -50 return (parseFloat(mixedVar) || 0)&#125;"},{"title":"PHP's gettype in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/gettype/index.html","permalink":"https://locutus.io/php/var/gettype/index.html","excerpt":"","text":"module.exports = function gettype (mixedVar) &#123; // discuss at: https://locutus.io/php/gettype/ // original by: Paulo Freitas // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Douglas Crockford (https://javascript.crockford.com) // improved by: Brett Zamir (https://brett-zamir.me) // input by: KELAN // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: gettype(1) // returns 1: 'integer' // example 2: gettype(undefined) // returns 2: 'undefined' // example 3: gettype(&#123;0: 'Kevin van Zonneveld'&#125;) // returns 3: 'object' // example 4: gettype('foo') // returns 4: 'string' // example 5: gettype(&#123;0: function () &#123;return false;&#125;&#125;) // returns 5: 'object' // example 6: gettype(&#123;0: 'test', length: 1, splice: function () &#123;&#125;&#125;) // returns 6: 'object' // example 7: gettype(['test']) // returns 7: 'array' const isFloat = require('../var/is_float') let s = typeof mixedVar let name const _getFuncName = function (fn) &#123; const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn) if (!name) &#123; return '(Anonymous)' &#125; return name[1] &#125; if (s === 'object') &#123; if (mixedVar !== null) &#123; // From: https://javascript.crockford.com/remedial.html // @todo: Break up this lengthy if statement if (typeof mixedVar.length === 'number' &amp;&amp; !(mixedVar.propertyIsEnumerable('length')) &amp;&amp; typeof mixedVar.splice === 'function') &#123; s = 'array' &#125; else if (mixedVar.constructor &amp;&amp; _getFuncName(mixedVar.constructor)) &#123; name = _getFuncName(mixedVar.constructor) if (name === 'Date') &#123; // not in PHP s = 'date' &#125; else if (name === 'RegExp') &#123; // not in PHP s = 'regexp' &#125; else if (name === 'LOCUTUS_Resource') &#123; // Check against our own resource constructor s = 'resource' &#125; &#125; &#125; else &#123; s = 'null' &#125; &#125; else if (s === 'number') &#123; s = isFloat(mixedVar) ? 'double' : 'integer' &#125; return s&#125;"},{"title":"PHP's var extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/var/index.html","permalink":"https://locutus.io/php/var/index.html","excerpt":"","text":""},{"title":"PHP's intval in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/intval/index.html","permalink":"https://locutus.io/php/var/intval/index.html","excerpt":"","text":"module.exports = function intval (mixedVar, base) &#123; // discuss at: https://locutus.io/php/intval/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: stensi // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Rafał Kukawski (https://blog.kukawski.pl) // input by: Matteo // example 1: intval('Kevin van Zonneveld') // returns 1: 0 // example 2: intval(4.2) // returns 2: 4 // example 3: intval(42, 8) // returns 3: 42 // example 4: intval('09') // returns 4: 9 // example 5: intval('1e', 16) // returns 5: 30 // example 6: intval(0x200000001) // returns 6: 8589934593 // example 7: intval('0xff', 0) // returns 7: 255 // example 8: intval('010', 0) // returns 8: 8 let tmp, match const type = typeof mixedVar if (type === 'boolean') &#123; return +mixedVar &#125; else if (type === 'string') &#123; if (base === 0) &#123; match = mixedVar.match(/^\\s*0(x?)/i) base = match ? (match[1] ? 16 : 8) : 10 &#125; tmp = parseInt(mixedVar, base || 10) return (isNaN(tmp) || !isFinite(tmp)) ? 0 : tmp &#125; else if (type === 'number' &amp;&amp; isFinite(mixedVar)) &#123; return mixedVar &lt; 0 ? Math.ceil(mixedVar) : Math.floor(mixedVar) &#125; else &#123; return 0 &#125;&#125;"},{"title":"PHP's is_array in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/is_array/index.html","permalink":"https://locutus.io/php/var/is_array/index.html","excerpt":"","text":"module.exports = function is_array (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_array/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Legaev Andrey // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Nathan Sepulveda // improved by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Cord // bugfixed by: Manish // bugfixed by: Brett Zamir (https://brett-zamir.me) // note 1: In Locutus, javascript objects are like php associative arrays, // note 1: thus JavaScript objects will also // note 1: return true in this function (except for objects which inherit properties, // note 1: being thus used as objects), // note 1: unless you do ini_set('locutus.objectsAsArrays', 0), // note 1: in which case only genuine JavaScript arrays // note 1: will return true // example 1: is_array(['Kevin', 'van', 'Zonneveld']) // returns 1: true // example 2: is_array('Kevin van Zonneveld') // returns 2: false // example 3: is_array(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;) // returns 3: true // example 4: ini_set('locutus.objectsAsArrays', 0) // example 4: is_array(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;) // returns 4: false // example 5: is_array(function tmp_a ()&#123; this.name = 'Kevin' &#125;) // returns 5: false const _getFuncName = function (fn) &#123; const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn) if (!name) &#123; return '(Anonymous)' &#125; return name[1] &#125; const _isArray = function (mixedVar) &#123; // return Object.prototype.toString.call(mixedVar) === '[object Array]'; // The above works, but let's do the even more stringent approach: // (since Object.prototype.toString could be overridden) // Null, Not an object, no length property so couldn't be an Array (or String) if (!mixedVar || typeof mixedVar !== 'object' || typeof mixedVar.length !== 'number') &#123; return false &#125; const len = mixedVar.length mixedVar[mixedVar.length] = 'bogus' // The only way I can think of to get around this (or where there would be trouble) // would be to have an object defined // with a custom \"length\" getter which changed behavior on each call // (or a setter to mess up the following below) or a custom // setter for numeric properties, but even that would need to listen for // specific indexes; but there should be no false negatives // and such a false positive would need to rely on later JavaScript // innovations like __defineSetter__ if (len !== mixedVar.length) &#123; // We know it's an array since length auto-changed with the addition of a // numeric property at its length end, so safely get rid of our bogus element mixedVar.length -= 1 return true &#125; // Get rid of the property we added onto a non-array object; only possible // side-effect is if the user adds back the property later, it will iterate // this property in the older order placement in IE (an order which should not // be depended on anyways) delete mixedVar[mixedVar.length] return false &#125; if (!mixedVar || typeof mixedVar !== 'object') &#123; return false &#125; const isArray = _isArray(mixedVar) if (isArray) &#123; return true &#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.objectsAsArrays') : undefined) || 'on' if (iniVal === 'on') &#123; const asString = Object.prototype.toString.call(mixedVar) const asFunc = _getFuncName(mixedVar.constructor) if (asString === '[object Object]' &amp;&amp; asFunc === 'Object') &#123; // Most likely a literal and intended as assoc. array return true &#125; &#125; return false&#125;"},{"title":"PHP's is_binary in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/is_binary/index.html","permalink":"https://locutus.io/php/var/is_binary/index.html","excerpt":"","text":"module.exports = function is_binary (vr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_binary/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: is_binary('This could be binary as far as JavaScript knows...') // returns 1: true return typeof vr === 'string' // If it is a string of any kind, it could be binary&#125;"},{"title":"PHP's is_bool in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/is_bool/index.html","permalink":"https://locutus.io/php/var/is_bool/index.html","excerpt":"","text":"module.exports = function is_bool (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_bool/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: CoursesWeb (https://www.coursesweb.net/) // example 1: is_bool(false) // returns 1: true // example 2: is_bool(0) // returns 2: false return (mixedVar === true || mixedVar === false) // Faster (in FF) than type checking&#125;"},{"title":"PHP's is_buffer in JavaScript","date":"2021-02-28T22:26:45.797Z","updated":"2021-02-28T22:26:45.797Z","comments":true,"path":"php/var/is_buffer/index.html","permalink":"https://locutus.io/php/var/is_buffer/index.html","excerpt":"","text":"module.exports = function is_buffer (vr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_buffer/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: is_buffer('This could be binary or a regular string...') // returns 1: true return typeof vr === 'string'&#125;"},{"title":"PHP's is_callable in JavaScript","date":"2021-02-28T22:26:45.801Z","updated":"2021-02-28T22:26:45.801Z","comments":true,"path":"php/var/is_callable/index.html","permalink":"https://locutus.io/php/var/is_callable/index.html","excerpt":"","text":"module.exports = function is_callable (mixedVar, syntaxOnly, callableName) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_callable/ // original by: Brett Zamir (https://brett-zamir.me) // input by: François // improved by: Brett Zamir (https://brett-zamir.me) // improved by: KnightYoshi // improved by: Waldo Malqui Silva (https://fayr.us/waldo/) // note 1: The variable callableName cannot work as a string variable passed by // note 1: reference as in PHP (since JavaScript does not support passing // note 1: strings by reference), but instead will take the name of // note 1: a global variable and set that instead. // note 1: When used on an object, depends on a constructor property // note 1: being kept on the object prototype // note 2: Depending on the `callableName` that is passed, this function can use eval. // note 2: The eval input is however checked to only allow valid function names, // note 2: So it should not be unsafer than uses without eval (seeing as you can) // note 2: already pass any function to be executed here. // example 1: is_callable('is_callable') // returns 1: true // example 2: is_callable('bogusFunction', true) // returns 2: true // gives true because does not do strict checking // example 3: function SomeClass () &#123;&#125; // example 3: SomeClass.prototype.someMethod = function ()&#123;&#125; // example 3: var testObj = new SomeClass() // example 3: is_callable([testObj, 'someMethod'], true, 'myVar') // example 3: var $result = myVar // returns 3: 'SomeClass::someMethod' // example 4: is_callable(function () &#123;&#125;) // returns 4: true // example 5: is_callable(class MyClass &#123;&#125;) // returns 5: false const $global = (typeof window !== 'undefined' ? window : global) const validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/ let name = '' let obj = &#123;&#125; let method = '' let validFunctionName = false const getFuncName = function (fn) &#123; const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn) if (!name) &#123; return '(Anonymous)' &#125; return name[1] &#125; // eslint-disable-next-line no-useless-escape if (/(^class|\\(this\\,)/.test(mixedVar.toString())) &#123; return false &#125; if (typeof mixedVar === 'string') &#123; obj = $global method = mixedVar name = mixedVar validFunctionName = !!name.match(validJSFunctionNamePattern) &#125; else if (typeof mixedVar === 'function') &#123; return true &#125; else if (Object.prototype.toString.call(mixedVar) === '[object Array]' &amp;&amp; mixedVar.length === 2 &amp;&amp; typeof mixedVar[0] === 'object' &amp;&amp; typeof mixedVar[1] === 'string') &#123; obj = mixedVar[0] method = mixedVar[1] name = (obj.constructor &amp;&amp; getFuncName(obj.constructor)) + '::' + method &#125; if (syntaxOnly || typeof obj[method] === 'function') &#123; if (callableName) &#123; $global[callableName] = name &#125; return true &#125; // validFunctionName avoids exploits if (validFunctionName &amp;&amp; typeof eval(method) === 'function') &#123; // eslint-disable-line no-eval if (callableName) &#123; $global[callableName] = name &#125; return true &#125; return false&#125;"},{"title":"PHP's is_double in JavaScript","date":"2021-02-28T22:26:45.801Z","updated":"2021-02-28T22:26:45.801Z","comments":true,"path":"php/var/is_double/index.html","permalink":"https://locutus.io/php/var/is_double/index.html","excerpt":"","text":"module.exports = function is_double (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_double/ // original by: Paulo Freitas // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_double(186.31) // returns 1: true const _isFloat = require('../var/is_float') return _isFloat(mixedVar)&#125;"},{"title":"PHP's is_float in JavaScript","date":"2021-02-28T22:26:45.801Z","updated":"2021-02-28T22:26:45.801Z","comments":true,"path":"php/var/is_float/index.html","permalink":"https://locutus.io/php/var/is_float/index.html","excerpt":"","text":"module.exports = function is_float (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_float/ // original by: Paulo Freitas // bugfixed by: Brett Zamir (https://brett-zamir.me) // improved by: WebDevHobo (https://webdevhobo.blogspot.com/) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_float(186.31) // returns 1: true return +mixedVar === mixedVar &amp;&amp; (!isFinite(mixedVar) || !!(mixedVar % 1))&#125;"},{"title":"PHP's is_int in JavaScript","date":"2021-02-28T22:26:45.801Z","updated":"2021-02-28T22:26:45.801Z","comments":true,"path":"php/var/is_int/index.html","permalink":"https://locutus.io/php/var/is_int/index.html","excerpt":"","text":"module.exports = function is_int (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_int/ // original by: Alex // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: WebDevHobo (https://webdevhobo.blogspot.com/) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // revised by: Matt Bradley // bugfixed by: Kevin van Zonneveld (https://kvz.io) // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_int(23) // returns 1: true // example 2: is_int('23') // returns 2: false // example 3: is_int(23.5) // returns 3: false // example 4: is_int(true) // returns 4: false return mixedVar === +mixedVar &amp;&amp; isFinite(mixedVar) &amp;&amp; !(mixedVar % 1)&#125;"},{"title":"PHP's is_integer in JavaScript","date":"2021-02-28T22:26:45.805Z","updated":"2021-02-28T22:26:45.805Z","comments":true,"path":"php/var/is_integer/index.html","permalink":"https://locutus.io/php/var/is_integer/index.html","excerpt":"","text":"module.exports = function is_integer (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_integer/ // original by: Paulo Freitas // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_integer(186.31) // returns 1: false // example 2: is_integer(12) // returns 2: true const _isInt = require('../var/is_int') return _isInt(mixedVar)&#125;"},{"title":"PHP's is_long in JavaScript","date":"2021-02-28T22:26:45.805Z","updated":"2021-02-28T22:26:45.805Z","comments":true,"path":"php/var/is_long/index.html","permalink":"https://locutus.io/php/var/is_long/index.html","excerpt":"","text":"module.exports = function is_long (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_long/ // original by: Paulo Freitas // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_long(186.31) // returns 1: true const _isFloat = require('../var/is_float') return _isFloat(mixedVar)&#125;"},{"title":"PHP's is_null in JavaScript","date":"2021-02-28T22:26:45.805Z","updated":"2021-02-28T22:26:45.805Z","comments":true,"path":"php/var/is_null/index.html","permalink":"https://locutus.io/php/var/is_null/index.html","excerpt":"","text":"module.exports = function is_null (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_null/ // original by: Kevin van Zonneveld (https://kvz.io) // example 1: is_null('23') // returns 1: false // example 2: is_null(null) // returns 2: true return (mixedVar === null)&#125;"},{"title":"PHP's is_numeric in JavaScript","date":"2021-02-28T22:26:45.805Z","updated":"2021-02-28T22:26:45.805Z","comments":true,"path":"php/var/is_numeric/index.html","permalink":"https://locutus.io/php/var/is_numeric/index.html","excerpt":"","text":"module.exports = function is_numeric (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_numeric/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: David // improved by: taith // bugfixed by: Tim de Koning // bugfixed by: WebDevHobo (https://webdevhobo.blogspot.com/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Denis Chenu (https://shnoulle.net) // example 1: is_numeric(186.31) // returns 1: true // example 2: is_numeric('Kevin van Zonneveld') // returns 2: false // example 3: is_numeric(' +186.31e2') // returns 3: true // example 4: is_numeric('') // returns 4: false // example 5: is_numeric([]) // returns 5: false // example 6: is_numeric('1 ') // returns 6: false const whitespace = [ ' ', '\\n', '\\r', '\\t', '\\f', '\\x0b', '\\xa0', '\\u2000', '\\u2001', '\\u2002', '\\u2003', '\\u2004', '\\u2005', '\\u2006', '\\u2007', '\\u2008', '\\u2009', '\\u200a', '\\u200b', '\\u2028', '\\u2029', '\\u3000' ].join('') // @todo: Break this up using many single conditions with early returns return (typeof mixedVar === 'number' || (typeof mixedVar === 'string' &amp;&amp; whitespace.indexOf(mixedVar.slice(-1)) === -1)) &amp;&amp; mixedVar !== '' &amp;&amp; !isNaN(mixedVar)&#125;"},{"title":"PHP's is_object in JavaScript","date":"2021-02-28T22:26:45.809Z","updated":"2021-02-28T22:26:45.809Z","comments":true,"path":"php/var/is_object/index.html","permalink":"https://locutus.io/php/var/is_object/index.html","excerpt":"","text":"module.exports = function is_object (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_object/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: Legaev Andrey // improved by: Michael White (https://getsprink.com) // example 1: is_object('23') // returns 1: false // example 2: is_object(&#123;foo: 'bar'&#125;) // returns 2: true // example 3: is_object(null) // returns 3: false if (Object.prototype.toString.call(mixedVar) === '[object Array]') &#123; return false &#125; return mixedVar !== null &amp;&amp; typeof mixedVar === 'object'&#125;"},{"title":"PHP's is_real in JavaScript","date":"2021-02-28T22:26:45.809Z","updated":"2021-02-28T22:26:45.809Z","comments":true,"path":"php/var/is_real/index.html","permalink":"https://locutus.io/php/var/is_real/index.html","excerpt":"","text":"module.exports = function is_real (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_real/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: 1.0 is simplified to 1 before it can be accessed by the function, this makes // note 1: it different from the PHP implementation. We can't fix this unfortunately. // example 1: is_real(186.31) // returns 1: true const _isFloat = require('../var/is_float') return _isFloat(mixedVar)&#125;"},{"title":"PHP's is_scalar in JavaScript","date":"2021-02-28T22:26:45.809Z","updated":"2021-02-28T22:26:45.809Z","comments":true,"path":"php/var/is_scalar/index.html","permalink":"https://locutus.io/php/var/is_scalar/index.html","excerpt":"","text":"module.exports = function is_scalar (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_scalar/ // original by: Paulo Freitas // example 1: is_scalar(186.31) // returns 1: true // example 2: is_scalar(&#123;0: 'Kevin van Zonneveld'&#125;) // returns 2: false return (/boolean|number|string/).test(typeof mixedVar)&#125;"},{"title":"PHP's is_string in JavaScript","date":"2021-02-28T22:26:45.809Z","updated":"2021-02-28T22:26:45.809Z","comments":true,"path":"php/var/is_string/index.html","permalink":"https://locutus.io/php/var/is_string/index.html","excerpt":"","text":"module.exports = function is_string (mixedVar) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_string/ // original by: Kevin van Zonneveld (https://kvz.io) // example 1: is_string('23') // returns 1: true // example 2: is_string(23.5) // returns 2: false return (typeof mixedVar === 'string')&#125;"},{"title":"PHP's is_unicode in JavaScript","date":"2021-02-28T22:26:45.817Z","updated":"2021-02-28T22:26:45.817Z","comments":true,"path":"php/var/is_unicode/index.html","permalink":"https://locutus.io/php/var/is_unicode/index.html","excerpt":"","text":"module.exports = function is_unicode (vr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/is_unicode/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Almost all strings in JavaScript should be Unicode // example 1: is_unicode('We the peoples of the United Nations...!') // returns 1: true if (typeof vr !== 'string') &#123; return false &#125; // If surrogates occur outside of high-low pairs, then this is not Unicode let arr = [] const highSurrogate = '[\\uD800-\\uDBFF]' const lowSurrogate = '[\\uDC00-\\uDFFF]' const highSurrogateBeforeAny = new RegExp(highSurrogate + '([\\\\s\\\\S])', 'g') const lowSurrogateAfterAny = new RegExp('([\\\\s\\\\S])' + lowSurrogate, 'g') const singleLowSurrogate = new RegExp('^' + lowSurrogate + '$') const singleHighSurrogate = new RegExp('^' + highSurrogate + '$') while ((arr = highSurrogateBeforeAny.exec(vr)) !== null) &#123; if (!arr[1] || !arr[1].match(singleLowSurrogate)) &#123; // If high not followed by low surrogate return false &#125; &#125; while ((arr = lowSurrogateAfterAny.exec(vr)) !== null) &#123; if (!arr[1] || !arr[1].match(singleHighSurrogate)) &#123; // If low not preceded by high surrogate return false &#125; &#125; return true&#125;"},{"title":"PHP's isset in JavaScript","date":"2021-02-28T22:26:45.817Z","updated":"2021-02-28T22:26:45.817Z","comments":true,"path":"php/var/isset/index.html","permalink":"https://locutus.io/php/var/isset/index.html","excerpt":"","text":"module.exports = function isset () &#123; // discuss at: https://locutus.io/php/isset/ // original by: Kevin van Zonneveld (https://kvz.io) // improved by: FremyCompany // improved by: Onno Marsman (https://twitter.com/onnomarsman) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // example 1: isset( undefined, true) // returns 1: false // example 2: isset( 'Kevin van Zonneveld' ) // returns 2: true const a = arguments const l = a.length let i = 0 let undef if (l === 0) &#123; throw new Error('Empty isset') &#125; while (i !== l) &#123; if (a[i] === undef || a[i] === null) &#123; return false &#125; i++ &#125; return true&#125;"},{"title":"PHP's print_r in JavaScript","date":"2021-02-28T22:26:45.817Z","updated":"2021-02-28T22:26:45.817Z","comments":true,"path":"php/var/print_r/index.html","permalink":"https://locutus.io/php/var/print_r/index.html","excerpt":"","text":"module.exports = function print_r (array, returnVal) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/print_r/ // original by: Michael White (https://getsprink.com) // improved by: Ben Bryan // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // example 1: print_r(1, true) // returns 1: '1' const echo = require('../strings/echo') let output = '' const padChar = ' ' const padVal = 4 const _repeatChar = function (len, padChar) &#123; let str = '' for (let i = 0; i &lt; len; i++) &#123; str += padChar &#125; return str &#125; var _formatArray = function (obj, curDepth, padVal, padChar) &#123; if (curDepth &gt; 0) &#123; curDepth++ &#125; const basePad = _repeatChar(padVal * curDepth, padChar) const thickPad = _repeatChar(padVal * (curDepth + 1), padChar) let str = '' if (typeof obj === 'object' &amp;&amp; obj !== null &amp;&amp; obj.constructor) &#123; str += 'Array\\n' + basePad + '(\\n' for (const key in obj) &#123; if (Object.prototype.toString.call(obj[key]) === '[object Array]') &#123; str += thickPad str += '[' str += key str += '] =&gt; ' str += _formatArray(obj[key], curDepth + 1, padVal, padChar) &#125; else &#123; str += thickPad str += '[' str += key str += '] =&gt; ' str += obj[key] str += '\\n' &#125; &#125; str += basePad + ')\\n' &#125; else if (obj === null || obj === undefined) &#123; str = '' &#125; else &#123; // for our \"resource\" class str = obj.toString() &#125; return str &#125; output = _formatArray(array, 0, padVal, padChar) if (returnVal !== true) &#123; echo(output) return true &#125; return output&#125;"},{"title":"PHP's natcasesort in JavaScript","date":"2021-02-28T22:26:45.509Z","updated":"2021-02-28T22:26:45.509Z","comments":true,"path":"php/array/natcasesort/index.html","permalink":"https://locutus.io/php/array/natcasesort/index.html","excerpt":"","text":"module.exports = function natcasesort (inputArr) &#123; // discuss at: https://locutus.io/php/natcasesort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: We cannot use numbers as keys and have them be reordered since they // note 1: adhere to numerical order in some implementations // example 1: var $array1 = &#123;a:'IMG0.png', b:'img12.png', c:'img10.png', d:'img2.png', e:'img1.png', f:'IMG3.png'&#125; // example 1: natcasesort($array1) // example 1: var $result = $array1 // returns 1: &#123;a: 'IMG0.png', e: 'img1.png', d: 'img2.png', f: 'IMG3.png', c: 'img10.png', b: 'img12.png'&#125; const strnatcasecmp = require('../strings/strnatcasecmp') const valArr = [] let k let i let sortByReference = false let populateArr = &#123;&#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Get key and value arrays for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; valArr.push([k, inputArr[k]]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function (a, b) &#123; return strnatcasecmp(a[1], b[1]) &#125;) // Repopulate the old array for (i = 0; i &lt; valArr.length; i++) &#123; populateArr[valArr[i][0]] = valArr[i][1] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's ksort in JavaScript","date":"2021-02-28T22:26:45.509Z","updated":"2021-02-28T22:26:45.509Z","comments":true,"path":"php/array/ksort/index.html","permalink":"https://locutus.io/php/array/ksort/index.html","excerpt":"","text":"module.exports = function ksort (inputArr, sortFlags) &#123; // discuss at: https://locutus.io/php/ksort/ // original by: GeekFG (https://geekfg.blogspot.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // note 1: Since JS objects' keys are always strings, and (the // note 1: default) SORT_REGULAR flag distinguishes by key type, // note 1: if the content is a numeric string, we treat the // note 1: \"original type\" as numeric. // example 1: var $data = &#123;d: 'lemon', a: 'orange', b: 'banana', c: 'apple'&#125; // example 1: ksort($data) // example 1: var $result = $data // returns 1: &#123;a: 'orange', b: 'banana', c: 'apple', d: 'lemon'&#125; // example 2: ini_set('locutus.sortByReference', true) // example 2: var $data = &#123;2: 'van', 3: 'Zonneveld', 1: 'Kevin'&#125; // example 2: ksort($data) // example 2: var $result = $data // returns 2: &#123;1: 'Kevin', 2: 'van', 3: 'Zonneveld'&#125; const i18nlgd = require('../i18n/i18n_loc_get_default') const strnatcmp = require('../strings/strnatcmp') const tmpArr = &#123;&#125; const keys = [] let sorter let i let k let sortByReference = false let populateArr = &#123;&#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; $locutus.php.locales = $locutus.php.locales || &#123;&#125; switch (sortFlags) &#123; case 'SORT_STRING': // compare items as strings sorter = function (a, b) &#123; return strnatcmp(b, a) &#125; break case 'SORT_LOCALE_STRING': // compare items as strings, based on the current locale // (set with i18n_loc_set_default() as of PHP6) var loc = i18nlgd() sorter = $locutus.locales[loc].sorting break case 'SORT_NUMERIC': // compare items numerically sorter = function (a, b) &#123; return ((a + 0) - (b + 0)) &#125; break default: // case 'SORT_REGULAR': // compare items normally (don't change types) sorter = function (a, b) &#123; const aFloat = parseFloat(a) const bFloat = parseFloat(b) const aNumeric = aFloat + '' === a const bNumeric = bFloat + '' === b if (aNumeric &amp;&amp; bNumeric) &#123; return aFloat &gt; bFloat ? 1 : aFloat &lt; bFloat ? -1 : 0 &#125; else if (aNumeric &amp;&amp; !bNumeric) &#123; return 1 &#125; else if (!aNumeric &amp;&amp; bNumeric) &#123; return -1 &#125; return a &gt; b ? 1 : a &lt; b ? -1 : 0 &#125; break &#125; // Make a list of key names for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; keys.push(k) &#125; &#125; keys.sort(sorter) const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Rebuild array with sorted key names for (i = 0; i &lt; keys.length; i++) &#123; k = keys[i] tmpArr[k] = inputArr[k] if (sortByReference) &#123; delete inputArr[k] &#125; &#125; for (i in tmpArr) &#123; if (tmpArr.hasOwnProperty(i)) &#123; populateArr[i] = tmpArr[i] &#125; &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's natsort in JavaScript","date":"2021-02-28T22:26:45.509Z","updated":"2021-02-28T22:26:45.509Z","comments":true,"path":"php/array/natsort/index.html","permalink":"https://locutus.io/php/array/natsort/index.html","excerpt":"","text":"module.exports = function natsort (inputArr) &#123; // discuss at: https://locutus.io/php/natsort/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // note 1: This function deviates from PHP in returning a copy of the array instead // note 1: of acting by reference and returning true; this was necessary because // note 1: IE does not allow deleting and re-adding of properties without caching // note 1: of property position; you can set the ini of \"locutus.sortByReference\" to true to // note 1: get the PHP behavior, but use this only if you are in an environment // note 1: such as Firefox extensions where for-in iteration order is fixed and true // note 1: property deletion is supported. Note that we intend to implement the PHP // note 1: behavior by default if IE ever does allow it; only gives shallow copy since // note 1: is by reference in PHP anyways // example 1: var $array1 = &#123;a:\"img12.png\", b:\"img10.png\", c:\"img2.png\", d:\"img1.png\"&#125; // example 1: natsort($array1) // example 1: var $result = $array1 // returns 1: &#123;d: 'img1.png', c: 'img2.png', b: 'img10.png', a: 'img12.png'&#125; const strnatcmp = require('../strings/strnatcmp') const valArr = [] let k let i let sortByReference = false let populateArr = &#123;&#125; const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on' sortByReference = iniVal === 'on' populateArr = sortByReference ? inputArr : populateArr // Get key and value arrays for (k in inputArr) &#123; if (inputArr.hasOwnProperty(k)) &#123; valArr.push([k, inputArr[k]]) if (sortByReference) &#123; delete inputArr[k] &#125; &#125; &#125; valArr.sort(function (a, b) &#123; return strnatcmp(a[1], b[1]) &#125;) // Repopulate the old array for (i = 0; i &lt; valArr.length; i++) &#123; populateArr[valArr[i][0]] = valArr[i][1] &#125; return sortByReference || populateArr&#125;"},{"title":"PHP's serialize in JavaScript","date":"2021-02-28T22:26:45.817Z","updated":"2021-02-28T22:26:45.817Z","comments":true,"path":"php/var/serialize/index.html","permalink":"https://locutus.io/php/var/serialize/index.html","excerpt":"","text":"module.exports = function serialize (mixedValue) &#123; // discuss at: https://locutus.io/php/serialize/ // original by: Arpad Ray (mailto:arpad@php.net) // improved by: Dino // improved by: Le Torbi (https://www.letorbi.de/) // improved by: Kevin van Zonneveld (https://kvz.io/) // bugfixed by: Andrej Pavlovic // bugfixed by: Garagoth // bugfixed by: Russell Walker (https://www.nbill.co.uk/) // bugfixed by: Jamie Beck (https://www.terabit.ca/) // bugfixed by: Kevin van Zonneveld (https://kvz.io/) // bugfixed by: Ben (https://benblume.co.uk/) // bugfixed by: Codestar (https://codestarlive.com/) // bugfixed by: idjem (https://github.com/idjem) // input by: DtTvB (https://dt.in.th/2008-09-16.string-length-in-bytes.html) // input by: Martin (https://www.erlenwiese.de/) // note 1: We feel the main purpose of this function should be to ease // note 1: the transport of data between php &amp; js // note 1: Aiming for PHP-compatibility, we have to translate objects to arrays // example 1: serialize(['Kevin', 'van', 'Zonneveld']) // returns 1: 'a:3:&#123;i:0;s:5:\"Kevin\";i:1;s:3:\"van\";i:2;s:9:\"Zonneveld\";&#125;' // example 2: serialize(&#123;firstName: 'Kevin', midName: 'van'&#125;) // returns 2: 'a:2:&#123;s:9:\"firstName\";s:5:\"Kevin\";s:7:\"midName\";s:3:\"van\";&#125;' // example 3: serialize( &#123;'ü': 'ü', '四': '四', '𠜎': '𠜎'&#125;) // returns 3: 'a:3:&#123;s:2:\"ü\";s:2:\"ü\";s:3:\"四\";s:3:\"四\";s:4:\"𠜎\";s:4:\"𠜎\";&#125;' let val, key, okey let ktype = '' let vals = '' let count = 0 const _utf8Size = function (str) &#123; return ~-encodeURI(str).split(/%..|./).length &#125; const _getType = function (inp) &#123; let match let key let cons let types let type = typeof inp if (type === 'object' &amp;&amp; !inp) &#123; return 'null' &#125; if (type === 'object') &#123; if (!inp.constructor) &#123; return 'object' &#125; cons = inp.constructor.toString() match = cons.match(/(\\w+)\\(/) if (match) &#123; cons = match[1].toLowerCase() &#125; types = ['boolean', 'number', 'string', 'array'] for (key in types) &#123; if (cons === types[key]) &#123; type = types[key] break &#125; &#125; &#125; return type &#125; const type = _getType(mixedValue) switch (type) &#123; case 'function': val = '' break case 'boolean': val = 'b:' + (mixedValue ? '1' : '0') break case 'number': val = (Math.round(mixedValue) === mixedValue ? 'i' : 'd') + ':' + mixedValue break case 'string': val = 's:' + _utf8Size(mixedValue) + ':\"' + mixedValue + '\"' break case 'array': case 'object': val = 'a' /* if (type === 'object') &#123; var objname = mixedValue.constructor.toString().match(/(\\w+)\\(\\)/); if (objname === undefined) &#123; return; &#125; objname[1] = serialize(objname[1]); val = 'O' + objname[1].substring(1, objname[1].length - 1); &#125; */ for (key in mixedValue) &#123; if (mixedValue.hasOwnProperty(key)) &#123; ktype = _getType(mixedValue[key]) if (ktype === 'function') &#123; continue &#125; okey = (key.match(/^[0-9]+$/) ? parseInt(key, 10) : key) vals += serialize(okey) + serialize(mixedValue[key]) count++ &#125; &#125; val += ':' + count + ':&#123;' + vals + '&#125;' break case 'undefined': default: // Fall-through // if the JS object has a property which contains a null value, // the string cannot be unserialized by PHP val = 'N' break &#125; if (type !== 'object' &amp;&amp; type !== 'array') &#123; val += ';' &#125; return val&#125;"},{"title":"PHP's strval in JavaScript","date":"2021-02-28T22:26:45.829Z","updated":"2021-02-28T22:26:45.829Z","comments":true,"path":"php/var/strval/index.html","permalink":"https://locutus.io/php/var/strval/index.html","excerpt":"","text":"module.exports = function strval (str) &#123; // discuss at: https://locutus.io/php/strval/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // example 1: strval(&#123;red: 1, green: 2, blue: 3, white: 4&#125;) // returns 1: 'Object' const gettype = require('../var/gettype') let type = '' if (str === null) &#123; return '' &#125; type = gettype(str) // Comment out the entire switch if you want JS-like // behavior instead of PHP behavior switch (type) &#123; case 'boolean': if (str === true) &#123; return '1' &#125; return '' case 'array': return 'Array' case 'object': return 'Object' &#125; return str&#125;"},{"title":"PHP's var_dump in JavaScript","date":"2021-02-28T22:26:45.829Z","updated":"2021-02-28T22:26:45.829Z","comments":true,"path":"php/var/var_dump/index.html","permalink":"https://locutus.io/php/var/var_dump/index.html","excerpt":"","text":"module.exports = function var_dump () &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/var_dump/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Zahlii // improved by: Brett Zamir (https://brett-zamir.me) // note 1: For returning a string, use var_export() with the second argument set to true // test: skip-all // example 1: var_dump(1) // returns 1: 'int(1)' const echo = require('../strings/echo') let output = '' const padChar = ' ' const padVal = 4 let lgth = 0 let i = 0 const _getFuncName = function (fn) &#123; const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/) .exec(fn) if (!name) &#123; return '(Anonymous)' &#125; return name[1] &#125; const _repeatChar = function (len, padChar) &#123; let str = '' for (let i = 0; i &lt; len; i++) &#123; str += padChar &#125; return str &#125; const _getInnerVal = function (val, thickPad) &#123; let ret = '' if (val === null) &#123; ret = 'NULL' &#125; else if (typeof val === 'boolean') &#123; ret = 'bool(' + val + ')' &#125; else if (typeof val === 'string') &#123; ret = 'string(' + val.length + ') \"' + val + '\"' &#125; else if (typeof val === 'number') &#123; if (parseFloat(val) === parseInt(val, 10)) &#123; ret = 'int(' + val + ')' &#125; else &#123; ret = 'float(' + val + ')' &#125; &#125; else if (typeof val === 'undefined') &#123; // The remaining are not PHP behavior because these values // only exist in this exact form in JavaScript ret = 'undefined' &#125; else if (typeof val === 'function') &#123; const funcLines = val.toString() .split('\\n') ret = '' for (let i = 0, fll = funcLines.length; i &lt; fll; i++) &#123; ret += (i !== 0 ? '\\n' + thickPad : '') + funcLines[i] &#125; &#125; else if (val instanceof Date) &#123; ret = 'Date(' + val + ')' &#125; else if (val instanceof RegExp) &#123; ret = 'RegExp(' + val + ')' &#125; else if (val.nodeName) &#123; // Different than PHP's DOMElement switch (val.nodeType) &#123; case 1: if (typeof val.namespaceURI === 'undefined' || val.namespaceURI === 'https://www.w3.org/1999/xhtml') &#123; // Undefined namespace could be plain XML, but namespaceURI not widely supported ret = 'HTMLElement(\"' + val.nodeName + '\")' &#125; else &#123; ret = 'XML Element(\"' + val.nodeName + '\")' &#125; break case 2: ret = 'ATTRIBUTE_NODE(' + val.nodeName + ')' break case 3: ret = 'TEXT_NODE(' + val.nodeValue + ')' break case 4: ret = 'CDATA_SECTION_NODE(' + val.nodeValue + ')' break case 5: ret = 'ENTITY_REFERENCE_NODE' break case 6: ret = 'ENTITY_NODE' break case 7: ret = 'PROCESSING_INSTRUCTION_NODE(' + val.nodeName + ':' + val.nodeValue + ')' break case 8: ret = 'COMMENT_NODE(' + val.nodeValue + ')' break case 9: ret = 'DOCUMENT_NODE' break case 10: ret = 'DOCUMENT_TYPE_NODE' break case 11: ret = 'DOCUMENT_FRAGMENT_NODE' break case 12: ret = 'NOTATION_NODE' break &#125; &#125; return ret &#125; var _formatArray = function (obj, curDepth, padVal, padChar) &#123; if (curDepth &gt; 0) &#123; curDepth++ &#125; const basePad = _repeatChar(padVal * (curDepth - 1), padChar) const thickPad = _repeatChar(padVal * (curDepth + 1), padChar) let str = '' let val = '' if (typeof obj === 'object' &amp;&amp; obj !== null) &#123; if (obj.constructor &amp;&amp; _getFuncName(obj.constructor) === 'LOCUTUS_Resource') &#123; return obj.var_dump() &#125; lgth = 0 for (const someProp in obj) &#123; if (obj.hasOwnProperty(someProp)) &#123; lgth++ &#125; &#125; str += 'array(' + lgth + ') &#123;\\n' for (const key in obj) &#123; const objVal = obj[key] if (typeof objVal === 'object' &amp;&amp; objVal !== null &amp;&amp; !(objVal instanceof Date) &amp;&amp; !(objVal instanceof RegExp) &amp;&amp; !objVal.nodeName) &#123; str += thickPad str += '[' str += key str += '] =&gt;\\n' str += thickPad str += _formatArray(objVal, curDepth + 1, padVal, padChar) &#125; else &#123; val = _getInnerVal(objVal, thickPad) str += thickPad str += '[' str += key str += '] =&gt;\\n' str += thickPad str += val str += '\\n' &#125; &#125; str += basePad + '&#125;\\n' &#125; else &#123; str = _getInnerVal(obj, thickPad) &#125; return str &#125; output = _formatArray(arguments[0], 0, padVal, padChar) for (i = 1; i &lt; arguments.length; i++) &#123; output += '\\n' + _formatArray(arguments[i], 0, padVal, padChar) &#125; echo(output) // Not how PHP does it, but helps us test: return output&#125;"},{"title":"PHP's var_export in JavaScript","date":"2021-02-28T22:26:45.829Z","updated":"2021-02-28T22:26:45.829Z","comments":true,"path":"php/var/var_export/index.html","permalink":"https://locutus.io/php/var/var_export/index.html","excerpt":"","text":"module.exports = function var_export (mixedExpression, boolReturn) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/var_export/ // original by: Philip Peterson // improved by: johnrembo // improved by: Brett Zamir (https://brett-zamir.me) // input by: Brian Tafoya (https://www.premasolutions.com/) // input by: Hans Henrik (https://hanshenrik.tk/) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: simivar (https://github.com/simivar) // bugfixed by: simivar (https://github.com/simivar) // bugfixed by: simivar (https://github.com/simivar) // example 1: var_export(null) // returns 1: null // example 2: var_export(&#123;0: 'Kevin', 1: 'van', 2: 'Zonneveld'&#125;, true) // returns 2: \"array (\\n 0 =&gt; 'Kevin',\\n 1 =&gt; 'van',\\n 2 =&gt; 'Zonneveld',\\n)\" // example 3: var data = 'Kevin' // example 3: var_export(data, true) // returns 3: \"'Kevin'\" // example 4: var_export(&#123;0: 'Kevin', 1: 'van', 'lastName': 'Zonneveld'&#125;, true) // returns 4: \"array (\\n 0 =&gt; 'Kevin',\\n 1 =&gt; 'van',\\n 'lastName' =&gt; 'Zonneveld',\\n)\" // example 5: var_export([], true) // returns 5: \"array (\\n)\" // example 6: var_export(&#123; test: [ 'a', 'b' ] &#125;, true) // returns 6: \"array (\\n 'test' =&gt;\\n array (\\n 0 =&gt; 'a',\\n 1 =&gt; 'b',\\n ),\\n)\" const echo = require('../strings/echo') let retstr = '' let iret = '' let value let cnt = 0 const x = [] let i = 0 let funcParts = [] // We use the last argument (not part of PHP) to pass in // our indentation level const idtLevel = arguments[2] || 2 let innerIndent = '' let outerIndent = '' const getFuncName = function (fn) &#123; const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn) if (!name) &#123; return '(Anonymous)' &#125; return name[1] &#125; const _isNormalInteger = function (string) &#123; const number = Math.floor(Number(string)) return number !== Infinity &amp;&amp; String(number) === string &amp;&amp; number &gt;= 0 &#125; const _makeIndent = function (idtLevel) &#123; return (new Array(idtLevel + 1)) .join(' ') &#125; const __getType = function (inp) &#123; let i = 0 let match let types let cons let type = typeof inp if (type === 'object' &amp;&amp; (inp &amp;&amp; inp.constructor) &amp;&amp; getFuncName(inp.constructor) === 'LOCUTUS_Resource') &#123; return 'resource' &#125; if (type === 'function') &#123; return 'function' &#125; if (type === 'object' &amp;&amp; !inp) &#123; // Should this be just null? return 'null' &#125; if (type === 'object') &#123; if (!inp.constructor) &#123; return 'object' &#125; cons = inp.constructor.toString() match = cons.match(/(\\w+)\\(/) if (match) &#123; cons = match[1].toLowerCase() &#125; types = ['boolean', 'number', 'string', 'array'] for (i = 0; i &lt; types.length; i++) &#123; if (cons === types[i]) &#123; type = types[i] break &#125; &#125; &#125; return type &#125; const type = __getType(mixedExpression) if (type === null) &#123; retstr = 'NULL' &#125; else if (type === 'array' || type === 'object') &#123; outerIndent = _makeIndent(idtLevel - 2) innerIndent = _makeIndent(idtLevel) for (i in mixedExpression) &#123; value = ' ' const subtype = __getType(mixedExpression[i]) if (subtype === 'array' || subtype === 'object') &#123; value = '\\n' &#125; value += var_export(mixedExpression[i], 1, idtLevel + 2) i = _isNormalInteger(i) ? i : `'$&#123;i&#125;'` x[cnt++] = innerIndent + i + ' =&gt;' + value &#125; if (x.length &gt; 0) &#123; iret = x.join(',\\n') + ',\\n' &#125; retstr = outerIndent + 'array (\\n' + iret + outerIndent + ')' &#125; else if (type === 'function') &#123; funcParts = mixedExpression.toString().match(/function .*?\\((.*?)\\) \\&#123;([\\s\\S]*)\\&#125;/) // For lambda functions, var_export() outputs such as the following: // '\\000lambda_1'. Since it will probably not be a common use to // expect this (unhelpful) form, we'll use another PHP-exportable // construct, create_function() (though dollar signs must be on the // variables in JavaScript); if using instead in JavaScript and you // are using the namespaced version, note that create_function() will // not be available as a global retstr = \"create_function ('\" + funcParts[1] + \"', '\" + funcParts[2].replace(new RegExp(\"'\", 'g'), \"\\\\'\") + \"')\" &#125; else if (type === 'resource') &#123; // Resources treated as null for var_export retstr = 'NULL' &#125; else &#123; retstr = typeof mixedExpression !== 'string' ? mixedExpression : \"'\" + mixedExpression.replace(/([\"'])/g, '\\\\$1').replace(/\\0/g, '\\\\0') + \"'\" &#125; if (!boolReturn) &#123; echo(retstr) return null &#125; return retstr&#125;"},{"title":"PHP's xdiff extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/xdiff/index.html","permalink":"https://locutus.io/php/xdiff/index.html","excerpt":"","text":""},{"title":"PHP's xdiff_string_patch in JavaScript","date":"2021-02-28T22:26:45.833Z","updated":"2021-02-28T22:26:45.833Z","comments":true,"path":"php/xdiff/xdiff_string_patch/index.html","permalink":"https://locutus.io/php/xdiff/xdiff_string_patch/index.html","excerpt":"","text":"module.exports = function xdiff_string_patch (originalStr, patch, flags, errorObj) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/xdiff_string_patch/ // original by: Brett Zamir (https://brett-zamir.me) // improved by: Steven Levithan (stevenlevithan.com) // note 1: The XDIFF_PATCH_IGNORESPACE flag and the error argument are not // note 1: currently supported. // note 2: This has not been tested exhaustively yet. // note 3: The errorObj parameter (optional) if used must be passed in as a // note 3: object. The errors will then be written by reference into it's `value` property // example 1: xdiff_string_patch('', '@@ -0,0 +1,1 @@\\n+Hello world!') // returns 1: 'Hello world!' // First two functions were adapted from Steven Levithan, also under an MIT license // Adapted from XRegExp 1.5.0 // (c) 2007-2010 Steven Levithan // MIT License // &lt;https://xregexp.com&gt; const _getNativeFlags = function (regex) &#123; // Proposed for ES4; included in AS3 return [ (regex.global ? 'g' : ''), (regex.ignoreCase ? 'i' : ''), (regex.multiline ? 'm' : ''), (regex.extended ? 'x' : ''), (regex.sticky ? 'y' : '') ].join('') &#125; const _cbSplit = function (string, sep) &#123; // If separator `s` is not a regex, use the native `split` if (!(sep instanceof RegExp)) &#123; // Had problems to get it to work here using prototype test return String.prototype.split.apply(string, arguments) &#125; const str = String(string) const output = [] let lastLastIndex = 0 let match let lastLength const limit = Infinity const x = sep._xregexp // This is required if not `s.global`, and it avoids needing to set `s.lastIndex` to zero // and restore it to its original value when we're done using the regex // Brett paring down const s = new RegExp(sep.source, _getNativeFlags(sep) + 'g') if (x) &#123; s._xregexp = &#123; source: x.source, captureNames: x.captureNames ? x.captureNames.slice(0) : null &#125; &#125; while ((match = s.exec(str))) &#123; // Run the altered `exec` (required for `lastIndex` fix, etc.) if (s.lastIndex &gt; lastLastIndex) &#123; output.push(str.slice(lastLastIndex, match.index)) if (match.length &gt; 1 &amp;&amp; match.index &lt; str.length) &#123; Array.prototype.push.apply(output, match.slice(1)) &#125; lastLength = match[0].length lastLastIndex = s.lastIndex if (output.length &gt;= limit) &#123; break &#125; &#125; if (s.lastIndex === match.index) &#123; s.lastIndex++ &#125; &#125; if (lastLastIndex === str.length) &#123; if (!s.test('') || lastLength) &#123; output.push('') &#125; &#125; else &#123; output.push(str.slice(lastLastIndex)) &#125; return output.length &gt; limit ? output.slice(0, limit) : output &#125; let i = 0 let ll = 0 let ranges = [] let lastLinePos = 0 let firstChar = '' const rangeExp = /^@@\\s+-(\\d+),(\\d+)\\s+\\+(\\d+),(\\d+)\\s+@@$/ const lineBreaks = /\\r?\\n/ const lines = _cbSplit(patch.replace(/(\\r?\\n)+$/, ''), lineBreaks) const origLines = _cbSplit(originalStr, lineBreaks) const newStrArr = [] let linePos = 0 const errors = '' let optTemp = 0 // Both string &amp; integer (constant) input is allowed const OPTS = &#123; // Unsure of actual PHP values, so better to rely on string XDIFF_PATCH_NORMAL: 1, XDIFF_PATCH_REVERSE: 2, XDIFF_PATCH_IGNORESPACE: 4 &#125; // Input defaulting &amp; sanitation if (typeof originalStr !== 'string' || !patch) &#123; return false &#125; if (!flags) &#123; flags = 'XDIFF_PATCH_NORMAL' &#125; if (typeof flags !== 'number') &#123; // Allow for a single string or an array of string flags flags = [].concat(flags) for (i = 0; i &lt; flags.length; i++) &#123; // Resolve string input to bitwise e.g. 'XDIFF_PATCH_NORMAL' becomes 1 if (OPTS[flags[i]]) &#123; optTemp = optTemp | OPTS[flags[i]] &#125; &#125; flags = optTemp &#125; if (flags &amp; OPTS.XDIFF_PATCH_NORMAL) &#123; for (i = 0, ll = lines.length; i &lt; ll; i++) &#123; ranges = lines[i].match(rangeExp) if (ranges) &#123; lastLinePos = linePos linePos = ranges[1] - 1 while (lastLinePos &lt; linePos) &#123; newStrArr[newStrArr.length] = origLines[lastLinePos++] &#125; while (lines[++i] &amp;&amp; (rangeExp.exec(lines[i])) === null) &#123; firstChar = lines[i].charAt(0) switch (firstChar) &#123; case '-': // Skip including that line ++linePos break case '+': newStrArr[newStrArr.length] = lines[i].slice(1) break case ' ': newStrArr[newStrArr.length] = origLines[linePos++] break default: // Reconcile with returning errrors arg? throw new Error('Unrecognized initial character in unidiff line') &#125; &#125; if (lines[i]) &#123; i-- &#125; &#125; &#125; while (linePos &gt; 0 &amp;&amp; linePos &lt; origLines.length) &#123; newStrArr[newStrArr.length] = origLines[linePos++] &#125; &#125; else if (flags &amp; OPTS.XDIFF_PATCH_REVERSE) &#123; // Only differs from above by a few lines for (i = 0, ll = lines.length; i &lt; ll; i++) &#123; ranges = lines[i].match(rangeExp) if (ranges) &#123; lastLinePos = linePos linePos = ranges[3] - 1 while (lastLinePos &lt; linePos) &#123; newStrArr[newStrArr.length] = origLines[lastLinePos++] &#125; while (lines[++i] &amp;&amp; (rangeExp.exec(lines[i])) === null) &#123; firstChar = lines[i].charAt(0) switch (firstChar) &#123; case '-': newStrArr[newStrArr.length] = lines[i].slice(1) break case '+': // Skip including that line ++linePos break case ' ': newStrArr[newStrArr.length] = origLines[linePos++] break default: // Reconcile with returning errrors arg? throw new Error('Unrecognized initial character in unidiff line') &#125; &#125; if (lines[i]) &#123; i-- &#125; &#125; &#125; while (linePos &gt; 0 &amp;&amp; linePos &lt; origLines.length) &#123; newStrArr[newStrArr.length] = origLines[linePos++] &#125; &#125; if (errorObj) &#123; errorObj.value = errors &#125; return newStrArr.join('\\n')&#125;"},{"title":"PHP's xml extension  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/xml/index.html","permalink":"https://locutus.io/php/xml/index.html","excerpt":"","text":""},{"title":"PHP's utf8_decode in JavaScript","date":"2021-02-28T22:26:45.833Z","updated":"2021-02-28T22:26:45.833Z","comments":true,"path":"php/xml/utf8_decode/index.html","permalink":"https://locutus.io/php/xml/utf8_decode/index.html","excerpt":"","text":"module.exports = function utf8_decode (strData) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/utf8_decode/ // original by: Webtoolkit.info (https://www.webtoolkit.info/) // input by: Aman Gupta // input by: Brett Zamir (https://brett-zamir.me) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Norman \"zEh\" Fuchs // bugfixed by: hitwork // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: kirilloid // bugfixed by: w35l3y (https://www.wesley.eti.br) // example 1: utf8_decode('Kevin van Zonneveld') // returns 1: 'Kevin van Zonneveld' const tmpArr = [] let i = 0 let c1 = 0 let seqlen = 0 strData += '' while (i &lt; strData.length) &#123; c1 = strData.charCodeAt(i) &amp; 0xFF seqlen = 0 // https://en.wikipedia.org/wiki/UTF-8#Codepage_layout if (c1 &lt;= 0xBF) &#123; c1 = (c1 &amp; 0x7F) seqlen = 1 &#125; else if (c1 &lt;= 0xDF) &#123; c1 = (c1 &amp; 0x1F) seqlen = 2 &#125; else if (c1 &lt;= 0xEF) &#123; c1 = (c1 &amp; 0x0F) seqlen = 3 &#125; else &#123; c1 = (c1 &amp; 0x07) seqlen = 4 &#125; for (let ai = 1; ai &lt; seqlen; ++ai) &#123; c1 = ((c1 &lt;&lt; 0x06) | (strData.charCodeAt(ai + i) &amp; 0x3F)) &#125; if (seqlen === 4) &#123; c1 -= 0x10000 tmpArr.push(String.fromCharCode(0xD800 | ((c1 &gt;&gt; 10) &amp; 0x3FF))) tmpArr.push(String.fromCharCode(0xDC00 | (c1 &amp; 0x3FF))) &#125; else &#123; tmpArr.push(String.fromCharCode(c1)) &#125; i += seqlen &#125; return tmpArr.join('')&#125;"},{"title":"PHP's utf8_encode in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"php/xml/utf8_encode/index.html","permalink":"https://locutus.io/php/xml/utf8_encode/index.html","excerpt":"","text":"module.exports = function utf8_encode (argString) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/utf8_encode/ // original by: Webtoolkit.info (https://www.webtoolkit.info/) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: sowberry // improved by: Jack // improved by: Yves Sucaet // improved by: kirilloid // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // bugfixed by: Ulrich // bugfixed by: Rafał Kukawski (https://blog.kukawski.pl) // bugfixed by: kirilloid // example 1: utf8_encode('Kevin van Zonneveld') // returns 1: 'Kevin van Zonneveld' if (argString === null || typeof argString === 'undefined') &#123; return '' &#125; // .replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\"); const string = (argString + '') let utftext = '' let start let end let stringl = 0 start = end = 0 stringl = string.length for (let n = 0; n &lt; stringl; n++) &#123; let c1 = string.charCodeAt(n) let enc = null if (c1 &lt; 128) &#123; end++ &#125; else if (c1 &gt; 127 &amp;&amp; c1 &lt; 2048) &#123; enc = String.fromCharCode( (c1 &gt;&gt; 6) | 192, (c1 &amp; 63) | 128 ) &#125; else if ((c1 &amp; 0xF800) !== 0xD800) &#123; enc = String.fromCharCode( (c1 &gt;&gt; 12) | 224, ((c1 &gt;&gt; 6) &amp; 63) | 128, (c1 &amp; 63) | 128 ) &#125; else &#123; // surrogate pairs if ((c1 &amp; 0xFC00) !== 0xD800) &#123; throw new RangeError('Unmatched trail surrogate at ' + n) &#125; const c2 = string.charCodeAt(++n) if ((c2 &amp; 0xFC00) !== 0xDC00) &#123; throw new RangeError('Unmatched lead surrogate at ' + (n - 1)) &#125; c1 = ((c1 &amp; 0x3FF) &lt;&lt; 10) + (c2 &amp; 0x3FF) + 0x10000 enc = String.fromCharCode( (c1 &gt;&gt; 18) | 240, ((c1 &gt;&gt; 12) &amp; 63) | 128, ((c1 &gt;&gt; 6) &amp; 63) | 128, (c1 &amp; 63) | 128 ) &#125; if (enc !== null) &#123; if (end &gt; start) &#123; utftext += string.slice(start, end) &#125; utftext += enc start = end = n + 1 &#125; &#125; if (end &gt; start) &#123; utftext += string.slice(start, stringl) &#125; return utftext&#125;"},{"title":"Python's string.ascii_letters in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/string/ascii_letters/index.html","permalink":"https://locutus.io/python/string/ascii_letters/index.html","excerpt":"","text":"module.exports = function ascii_letters () &#123; // eslint-disable-line camelcase // original by: Yury Shapkarin (https://shapkarin.me) // example 1: ascii_letters() // returns 1: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ' const length = 26 let i = 65 return [...Array(length + 6 + length)] .reduce(function (accumulator) &#123; return accumulator + String.fromCharCode(i++) &#125;, '') .match(/[a-zA-Z]+/g) .reverse() .join('')&#125;"},{"title":"Python's string.ascii_lowercase in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/string/ascii_lowercase/index.html","permalink":"https://locutus.io/python/string/ascii_lowercase/index.html","excerpt":"","text":"module.exports = function ascii_lowercase () &#123; // eslint-disable-line camelcase // original by: Yury Shapkarin (https://shapkarin.me) // example 1: ascii_lowercase() // returns 1: 'abcdefghijklmnopqrstuvwxyz' const length = 26 let i = 65 + length + 6 return [...Array(length)] .reduce(function (accumulator) &#123; return accumulator + String.fromCharCode(i++) &#125;, '')&#125;"},{"title":"Python's string.ascii_uppercase in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/string/ascii_uppercase/index.html","permalink":"https://locutus.io/python/string/ascii_uppercase/index.html","excerpt":"","text":"module.exports = function ascii_uppercase () &#123; // eslint-disable-line camelcase // original by: Yury Shapkarin (https://shapkarin.me) // example 1: ascii_uppercase() // returns 1: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' const length = 26 let i = 65 return [...Array(length)] .reduce(function (accumulator) &#123; return accumulator + String.fromCharCode(i++) &#125;, '')&#125;"},{"title":"Python's string.capwords in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/string/capwords/index.html","permalink":"https://locutus.io/python/string/capwords/index.html","excerpt":"","text":"module.exports = function capwords (str) &#123; // discuss at: https://locutus.io/python/capwords/ // original by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // improved by: Waldo Malqui Silva (https://waldo.malqui.info) // improved by: Robin // improved by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman) // input by: James (https://www.james-bell.co.uk/) // example 1: capwords('kevin van zonneveld') // returns 1: 'Kevin Van Zonneveld' // example 2: capwords('HELLO WORLD') // returns 2: 'HELLO WORLD' const pattern = /^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g return (str + '').replace(pattern, function ($1) &#123; return $1.toUpperCase() &#125;)&#125;"},{"title":"Python's string module  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"python/string/index.html","permalink":"https://locutus.io/python/string/index.html","excerpt":"","text":""},{"title":"Ruby's Math.acos in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"ruby/Math/acos/index.html","permalink":"https://locutus.io/ruby/Math/acos/index.html","excerpt":"","text":"module.exports = function acos (arg) &#123; // discuss at: https://locutus.io/ruby/Math/acos/ // original by: Onno Marsman (https://twitter.com/onnomarsman) // note 1: Sorry about the crippled test. // note 1: Needed because precision differs accross platforms. // example 1: (acos(0.3) + '').substr(0, 17) // returns 1: '1.266103672779499' return Math.acos(arg)&#125;"},{"title":"Ruby's Math module  in JavaScript","date":"2021-02-28T22:26:45.837Z","updated":"2021-02-28T22:26:45.837Z","comments":true,"path":"ruby/Math/index.html","permalink":"https://locutus.io/ruby/Math/index.html","excerpt":"","text":""},{"title":"PHP's array_multisort in JavaScript","date":"2021-02-28T22:26:45.457Z","updated":"2021-02-28T22:26:45.457Z","comments":true,"path":"php/array/array_multisort/index.html","permalink":"https://locutus.io/php/array/array_multisort/index.html","excerpt":"","text":"module.exports = function array_multisort (arr) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/array_multisort/ // original by: Theriault (https://github.com/Theriault) // improved by: Oleg Andreyev (https://github.com/oleg-andreyev) // example 1: array_multisort([1, 2, 1, 2, 1, 2], [1, 2, 3, 4, 5, 6]) // returns 1: true // example 2: var $characters = &#123;A: 'Edward', B: 'Locke', C: 'Sabin', D: 'Terra', E: 'Edward'&#125; // example 2: var $jobs = &#123;A: 'Warrior', B: 'Thief', C: 'Monk', D: 'Mage', E: 'Knight'&#125; // example 2: array_multisort($characters, 'SORT_DESC', 'SORT_STRING', $jobs, 'SORT_ASC', 'SORT_STRING') // returns 2: true // example 3: var $lastnames = [ 'Carter','Adams','Monroe','Tyler','Madison','Kennedy','Adams'] // example 3: var $firstnames = ['James', 'John' ,'James', 'John', 'James', 'John', 'John'] // example 3: var $president = [ 39, 6, 5, 10, 4, 35, 2 ] // example 3: array_multisort($firstnames, 'SORT_DESC', 'SORT_STRING', $lastnames, 'SORT_ASC', 'SORT_STRING', $president, 'SORT_NUMERIC') // returns 3: true // note 1: flags: Translation table for sort arguments. // note 1: Each argument turns on certain bits in the flag byte through addition. // note 1: bits: HGFE DCBA // note 1: args: Holds pointer to arguments for reassignment let g let i let j let k let l let sal let vkey let elIndex let lastSorts let tmpArray let zlast const sortFlag = [0] const thingsToSort = [] let nLastSort = [] let lastSort = [] // possibly redundant const args = arguments const flags = &#123; SORT_REGULAR: 16, SORT_NUMERIC: 17, SORT_STRING: 18, SORT_ASC: 32, SORT_DESC: 40 &#125; const sortDuplicator = function (a, b) &#123; return nLastSort.shift() &#125; const sortFunctions = [ [ function (a, b) &#123; lastSort.push(a &gt; b ? 1 : (a &lt; b ? -1 : 0)) return a &gt; b ? 1 : (a &lt; b ? -1 : 0) &#125;, function (a, b) &#123; lastSort.push(b &gt; a ? 1 : (b &lt; a ? -1 : 0)) return b &gt; a ? 1 : (b &lt; a ? -1 : 0) &#125; ], [ function (a, b) &#123; lastSort.push(a - b) return a - b &#125;, function (a, b) &#123; lastSort.push(b - a) return b - a &#125; ], [ function (a, b) &#123; lastSort.push((a + '') &gt; (b + '') ? 1 : ((a + '') &lt; (b + '') ? -1 : 0)) return (a + '') &gt; (b + '') ? 1 : ((a + '') &lt; (b + '') ? -1 : 0) &#125;, function (a, b) &#123; lastSort.push((b + '') &gt; (a + '') ? 1 : ((b + '') &lt; (a + '') ? -1 : 0)) return (b + '') &gt; (a + '') ? 1 : ((b + '') &lt; (a + '') ? -1 : 0) &#125; ] ] const sortArrs = [ [] ] const sortKeys = [ [] ] // Store first argument into sortArrs and sortKeys if an Object. // First Argument should be either a Javascript Array or an Object, // otherwise function would return FALSE like in PHP if (Object.prototype.toString.call(arr) === '[object Array]') &#123; sortArrs[0] = arr &#125; else if (arr &amp;&amp; typeof arr === 'object') &#123; for (i in arr) &#123; if (arr.hasOwnProperty(i)) &#123; sortKeys[0].push(i) sortArrs[0].push(arr[i]) &#125; &#125; &#125; else &#123; return false &#125; // arrMainLength: Holds the length of the first array. // All other arrays must be of equal length, otherwise function would return FALSE like in PHP // sortComponents: Holds 2 indexes per every section of the array // that can be sorted. As this is the start, the whole array can be sorted. const arrMainLength = sortArrs[0].length let sortComponents = [0, arrMainLength] // Loop through all other arguments, checking lengths and sort flags // of arrays and adding them to the above variables. const argl = arguments.length for (j = 1; j &lt; argl; j++) &#123; if (Object.prototype.toString.call(arguments[j]) === '[object Array]') &#123; sortArrs[j] = arguments[j] sortFlag[j] = 0 if (arguments[j].length !== arrMainLength) &#123; return false &#125; &#125; else if (arguments[j] &amp;&amp; typeof arguments[j] === 'object') &#123; sortKeys[j] = [] sortArrs[j] = [] sortFlag[j] = 0 for (i in arguments[j]) &#123; if (arguments[j].hasOwnProperty(i)) &#123; sortKeys[j].push(i) sortArrs[j].push(arguments[j][i]) &#125; &#125; if (sortArrs[j].length !== arrMainLength) &#123; return false &#125; &#125; else if (typeof arguments[j] === 'string') &#123; const lFlag = sortFlag.pop() // Keep extra parentheses around latter flags check // to avoid minimization leading to CDATA closer if (typeof flags[arguments[j]] === 'undefined' || ((((flags[arguments[j]]) &gt;&gt;&gt; 4) &amp; (lFlag &gt;&gt;&gt; 4)) &gt; 0)) &#123; return false &#125; sortFlag.push(lFlag + flags[arguments[j]]) &#125; else &#123; return false &#125; &#125; for (i = 0; i !== arrMainLength; i++) &#123; thingsToSort.push(true) &#125; // Sort all the arrays.... for (i in sortArrs) &#123; if (sortArrs.hasOwnProperty(i)) &#123; lastSorts = [] tmpArray = [] elIndex = 0 nLastSort = [] lastSort = [] // If there are no sortComponents, then no more sorting is neeeded. // Copy the array back to the argument. if (sortComponents.length === 0) &#123; if (Object.prototype.toString.call(arguments[i]) === '[object Array]') &#123; args[i] = sortArrs[i] &#125; else &#123; for (k in arguments[i]) &#123; if (arguments[i].hasOwnProperty(k)) &#123; delete arguments[i][k] &#125; &#125; sal = sortArrs[i].length for (j = 0, vkey = 0; j &lt; sal; j++) &#123; vkey = sortKeys[i][j] args[i][vkey] = sortArrs[i][j] &#125; &#125; sortArrs.splice(i, 1) sortKeys.splice(i, 1) continue &#125; // Sort function for sorting. Either sorts asc or desc, regular/string or numeric. let sFunction = sortFunctions[(sortFlag[i] &amp; 3)][((sortFlag[i] &amp; 8) &gt; 0) ? 1 : 0] // Sort current array. for (l = 0; l !== sortComponents.length; l += 2) &#123; tmpArray = sortArrs[i].slice(sortComponents[l], sortComponents[l + 1] + 1) tmpArray.sort(sFunction) // Is there a better way to copy an array in Javascript? lastSorts[l] = [].concat(lastSort) elIndex = sortComponents[l] for (g in tmpArray) &#123; if (tmpArray.hasOwnProperty(g)) &#123; sortArrs[i][elIndex] = tmpArray[g] elIndex++ &#125; &#125; &#125; // Duplicate the sorting of the current array on future arrays. sFunction = sortDuplicator for (j in sortArrs) &#123; if (sortArrs.hasOwnProperty(j)) &#123; if (sortArrs[j] === sortArrs[i]) &#123; continue &#125; for (l = 0; l !== sortComponents.length; l += 2) &#123; tmpArray = sortArrs[j].slice(sortComponents[l], sortComponents[l + 1] + 1) // alert(l + ':' + nLastSort); nLastSort = [].concat(lastSorts[l]) tmpArray.sort(sFunction) elIndex = sortComponents[l] for (g in tmpArray) &#123; if (tmpArray.hasOwnProperty(g)) &#123; sortArrs[j][elIndex] = tmpArray[g] elIndex++ &#125; &#125; &#125; &#125; &#125; // Duplicate the sorting of the current array on array keys for (j in sortKeys) &#123; if (sortKeys.hasOwnProperty(j)) &#123; for (l = 0; l !== sortComponents.length; l += 2) &#123; tmpArray = sortKeys[j].slice(sortComponents[l], sortComponents[l + 1] + 1) nLastSort = [].concat(lastSorts[l]) tmpArray.sort(sFunction) elIndex = sortComponents[l] for (g in tmpArray) &#123; if (tmpArray.hasOwnProperty(g)) &#123; sortKeys[j][elIndex] = tmpArray[g] elIndex++ &#125; &#125; &#125; &#125; &#125; // Generate the next sortComponents zlast = null sortComponents = [] for (j in sortArrs[i]) &#123; if (sortArrs[i].hasOwnProperty(j)) &#123; if (!thingsToSort[j]) &#123; if ((sortComponents.length &amp; 1)) &#123; sortComponents.push(j - 1) &#125; zlast = null continue &#125; if (!(sortComponents.length &amp; 1)) &#123; if (zlast !== null) &#123; if (sortArrs[i][j] === zlast) &#123; sortComponents.push(j - 1) &#125; else &#123; thingsToSort[j] = false &#125; &#125; zlast = sortArrs[i][j] &#125; else &#123; if (sortArrs[i][j] !== zlast) &#123; sortComponents.push(j - 1) zlast = sortArrs[i][j] &#125; &#125; &#125; &#125; if (sortComponents.length &amp; 1) &#123; sortComponents.push(j) &#125; if (Object.prototype.toString.call(arguments[i]) === '[object Array]') &#123; args[i] = sortArrs[i] &#125; else &#123; for (j in arguments[i]) &#123; if (arguments[i].hasOwnProperty(j)) &#123; delete arguments[i][j] &#125; &#125; sal = sortArrs[i].length for (j = 0, vkey = 0; j &lt; sal; j++) &#123; vkey = sortKeys[i][j] args[i][vkey] = sortArrs[i][j] &#125; &#125; sortArrs.splice(i, 1) sortKeys.splice(i, 1) &#125; &#125; return true&#125;"},{"title":"PHP's date in JavaScript","date":"2021-02-28T22:26:45.557Z","updated":"2021-02-28T22:26:45.557Z","comments":true,"path":"php/datetime/date/index.html","permalink":"https://locutus.io/php/datetime/date/index.html","excerpt":"","text":"module.exports = function date (format, timestamp) &#123; // discuss at: https://locutus.io/php/date/ // original by: Carlos R. L. Rodrigues (https://www.jsfromhell.com) // original by: gettimeofday // parts by: Peter-Paul Koch (https://www.quirksmode.org/js/beat.html) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: MeEtc (https://yass.meetcweb.com) // improved by: Brad Touesnard // improved by: Tim Wiel // improved by: Bryan Elliott // improved by: David Randall // improved by: Theriault (https://github.com/Theriault) // improved by: Theriault (https://github.com/Theriault) // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Theriault (https://github.com/Theriault) // improved by: Thomas Beaucourt (https://www.webapp.fr) // improved by: JT // improved by: Theriault (https://github.com/Theriault) // improved by: Rafał Kukawski (https://blog.kukawski.pl) // improved by: Theriault (https://github.com/Theriault) // input by: Brett Zamir (https://brett-zamir.me) // input by: majak // input by: Alex // input by: Martin // input by: Alex Wilson // input by: Haravikk // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: majak // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: omid (https://locutus.io/php/380:380#comment_137122) // bugfixed by: Chris (https://www.devotis.nl/) // note 1: Uses global: locutus to store the default timezone // note 1: Although the function potentially allows timezone info // note 1: (see notes), it currently does not set // note 1: per a timezone specified by date_default_timezone_set(). Implementers might use // note 1: $locutus.currentTimezoneOffset and // note 1: $locutus.currentTimezoneDST set by that function // note 1: in order to adjust the dates in this function // note 1: (or our other date functions!) accordingly // example 1: date('H:m:s \\\\m \\\\i\\\\s \\\\m\\\\o\\\\n\\\\t\\\\h', 1062402400) // returns 1: '07:09:40 m is month' // example 2: date('F j, Y, g:i a', 1062462400) // returns 2: 'September 2, 2003, 12:26 am' // example 3: date('Y W o', 1062462400) // returns 3: '2003 36 2003' // example 4: var $x = date('Y m d', (new Date()).getTime() / 1000) // example 4: $x = $x + '' // example 4: var $result = $x.length // 2009 01 09 // returns 4: 10 // example 5: date('W', 1104534000) // returns 5: '52' // example 6: date('B t', 1104534000) // returns 6: '999 31' // example 7: date('W U', 1293750000.82); // 2010-12-31 // returns 7: '52 1293750000' // example 8: date('W', 1293836400); // 2011-01-01 // returns 8: '52' // example 9: date('W Y-m-d', 1293974054); // 2011-01-02 // returns 9: '52 2011-01-02' // test: skip-1 skip-2 skip-5 let jsdate, f // Keep this here (works, but for code commented-out below for file size reasons) // var tal= []; const txtWords = [ 'Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ] // trailing backslash -&gt; (dropped) // a backslash followed by any character (including backslash) -&gt; the character // empty string -&gt; empty string const formatChr = /\\\\?(.?)/gi const formatChrCb = function (t, s) &#123; return f[t] ? f[t]() : s &#125; const _pad = function (n, c) &#123; n = String(n) while (n.length &lt; c) &#123; n = '0' + n &#125; return n &#125; f = &#123; // Day d: function () &#123; // Day of month w/leading 0; 01..31 return _pad(f.j(), 2) &#125;, D: function () &#123; // Shorthand day name; Mon...Sun return f.l() .slice(0, 3) &#125;, j: function () &#123; // Day of month; 1..31 return jsdate.getDate() &#125;, l: function () &#123; // Full day name; Monday...Sunday return txtWords[f.w()] + 'day' &#125;, N: function () &#123; // ISO-8601 day of week; 1[Mon]..7[Sun] return f.w() || 7 &#125;, S: function () &#123; // Ordinal suffix for day of month; st, nd, rd, th const j = f.j() let i = j % 10 if (i &lt;= 3 &amp;&amp; parseInt((j % 100) / 10, 10) === 1) &#123; i = 0 &#125; return ['st', 'nd', 'rd'][i - 1] || 'th' &#125;, w: function () &#123; // Day of week; 0[Sun]..6[Sat] return jsdate.getDay() &#125;, z: function () &#123; // Day of year; 0..365 const a = new Date(f.Y(), f.n() - 1, f.j()) const b = new Date(f.Y(), 0, 1) return Math.round((a - b) / 864e5) &#125;, // Week W: function () &#123; // ISO-8601 week number const a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3) const b = new Date(a.getFullYear(), 0, 4) return _pad(1 + Math.round((a - b) / 864e5 / 7), 2) &#125;, // Month F: function () &#123; // Full month name; January...December return txtWords[6 + f.n()] &#125;, m: function () &#123; // Month w/leading 0; 01...12 return _pad(f.n(), 2) &#125;, M: function () &#123; // Shorthand month name; Jan...Dec return f.F() .slice(0, 3) &#125;, n: function () &#123; // Month; 1...12 return jsdate.getMonth() + 1 &#125;, t: function () &#123; // Days in month; 28...31 return (new Date(f.Y(), f.n(), 0)) .getDate() &#125;, // Year L: function () &#123; // Is leap year?; 0 or 1 const j = f.Y() return j % 4 === 0 &amp; j % 100 !== 0 | j % 400 === 0 &#125;, o: function () &#123; // ISO-8601 year const n = f.n() const W = f.W() const Y = f.Y() return Y + (n === 12 &amp;&amp; W &lt; 9 ? 1 : n === 1 &amp;&amp; W &gt; 9 ? -1 : 0) &#125;, Y: function () &#123; // Full year; e.g. 1980...2010 return jsdate.getFullYear() &#125;, y: function () &#123; // Last two digits of year; 00...99 return f.Y() .toString() .slice(-2) &#125;, // Time a: function () &#123; // am or pm return jsdate.getHours() &gt; 11 ? 'pm' : 'am' &#125;, A: function () &#123; // AM or PM return f.a() .toUpperCase() &#125;, B: function () &#123; // Swatch Internet time; 000..999 const H = jsdate.getUTCHours() * 36e2 // Hours const i = jsdate.getUTCMinutes() * 60 // Minutes // Seconds const s = jsdate.getUTCSeconds() return _pad(Math.floor((H + i + s + 36e2) / 86.4) % 1e3, 3) &#125;, g: function () &#123; // 12-Hours; 1..12 return f.G() % 12 || 12 &#125;, G: function () &#123; // 24-Hours; 0..23 return jsdate.getHours() &#125;, h: function () &#123; // 12-Hours w/leading 0; 01..12 return _pad(f.g(), 2) &#125;, H: function () &#123; // 24-Hours w/leading 0; 00..23 return _pad(f.G(), 2) &#125;, i: function () &#123; // Minutes w/leading 0; 00..59 return _pad(jsdate.getMinutes(), 2) &#125;, s: function () &#123; // Seconds w/leading 0; 00..59 return _pad(jsdate.getSeconds(), 2) &#125;, u: function () &#123; // Microseconds; 000000-999000 return _pad(jsdate.getMilliseconds() * 1000, 6) &#125;, // Timezone e: function () &#123; // Timezone identifier; e.g. Atlantic/Azores, ... // The following works, but requires inclusion of the very large // timezone_abbreviations_list() function. /* return that.date_default_timezone_get(); */ const msg = 'Not supported (see source code of date() for timezone on how to add support)' throw new Error(msg) &#125;, I: function () &#123; // DST observed?; 0 or 1 // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC. // If they are not equal, then DST is observed. const a = new Date(f.Y(), 0) // Jan 1 const c = Date.UTC(f.Y(), 0) // Jan 1 UTC const b = new Date(f.Y(), 6) // Jul 1 // Jul 1 UTC const d = Date.UTC(f.Y(), 6) return ((a - c) !== (b - d)) ? 1 : 0 &#125;, O: function () &#123; // Difference to GMT in hour format; e.g. +0200 const tzo = jsdate.getTimezoneOffset() const a = Math.abs(tzo) return (tzo &gt; 0 ? '-' : '+') + _pad(Math.floor(a / 60) * 100 + a % 60, 4) &#125;, P: function () &#123; // Difference to GMT w/colon; e.g. +02:00 const O = f.O() return (O.substr(0, 3) + ':' + O.substr(3, 2)) &#125;, T: function () &#123; // The following works, but requires inclusion of the very // large timezone_abbreviations_list() function. /* var abbr, i, os, _default; if (!tal.length) &#123; tal = that.timezone_abbreviations_list(); &#125; if ($locutus &amp;&amp; $locutus.default_timezone) &#123; _default = $locutus.default_timezone; for (abbr in tal) &#123; for (i = 0; i &lt; tal[abbr].length; i++) &#123; if (tal[abbr][i].timezone_id === _default) &#123; return abbr.toUpperCase(); &#125; &#125; &#125; &#125; for (abbr in tal) &#123; for (i = 0; i &lt; tal[abbr].length; i++) &#123; os = -jsdate.getTimezoneOffset() * 60; if (tal[abbr][i].offset === os) &#123; return abbr.toUpperCase(); &#125; &#125; &#125; */ return 'UTC' &#125;, Z: function () &#123; // Timezone offset in seconds (-43200...50400) return -jsdate.getTimezoneOffset() * 60 &#125;, // Full Date/Time c: function () &#123; // ISO-8601 date. return 'Y-m-d\\\\TH:i:sP'.replace(formatChr, formatChrCb) &#125;, r: function () &#123; // RFC 2822 return 'D, d M Y H:i:s O'.replace(formatChr, formatChrCb) &#125;, U: function () &#123; // Seconds since UNIX epoch return jsdate / 1000 | 0 &#125; &#125; const _date = function (format, timestamp) &#123; jsdate = (timestamp === undefined ? new Date() // Not provided : (timestamp instanceof Date) ? new Date(timestamp) // JS Date() : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int) ) return format.replace(formatChr, formatChrCb) &#125; return _date(format, timestamp)&#125;"},{"title":"PHP's strptime in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/datetime/strptime/index.html","permalink":"https://locutus.io/php/datetime/strptime/index.html","excerpt":"","text":"module.exports = function strptime (dateStr, format) &#123; // discuss at: https://locutus.io/php/strptime/ // original by: Brett Zamir (https://brett-zamir.me) // original by: strftime // example 1: strptime('20091112222135', '%Y%m%d%H%M%S') // Return value will depend on date and locale // returns 1: &#123;tm_sec: 35, tm_min: 21, tm_hour: 22, tm_mday: 12, tm_mon: 10, tm_year: 109, tm_wday: 4, tm_yday: 315, unparsed: ''&#125; // example 2: strptime('2009extra', '%Y') // returns 2: &#123;tm_sec:0, tm_min:0, tm_hour:0, tm_mday:0, tm_mon:0, tm_year:109, tm_wday:3, tm_yday: -1, unparsed: 'extra'&#125; const setlocale = require('../strings/setlocale') const arrayMap = require('../array/array_map') const retObj = &#123; tm_sec: 0, tm_min: 0, tm_hour: 0, tm_mday: 0, tm_mon: 0, tm_year: 0, tm_wday: 0, tm_yday: 0, unparsed: '' &#125; let i = 0 let j = 0 let amPmOffset = 0 let prevHour = false const _reset = function (dateObj, realMday) &#123; // realMday is to allow for a value of 0 in return results (but without // messing up the Date() object) let jan1 const o = retObj const d = dateObj o.tm_sec = d.getUTCSeconds() o.tm_min = d.getUTCMinutes() o.tm_hour = d.getUTCHours() o.tm_mday = realMday === 0 ? realMday : d.getUTCDate() o.tm_mon = d.getUTCMonth() o.tm_year = d.getUTCFullYear() - 1900 o.tm_wday = realMday === 0 ? (d.getUTCDay() &gt; 0 ? d.getUTCDay() - 1 : 6) : d.getUTCDay() jan1 = new Date(Date.UTC(d.getUTCFullYear(), 0, 1)) o.tm_yday = Math.ceil((d - jan1) / (1000 * 60 * 60 * 24)) &#125; const _date = function () &#123; const o = retObj // We set date to at least 1 to ensure year or month doesn't go backwards return _reset(new Date(Date.UTC( o.tm_year + 1900, o.tm_mon, o.tm_mday || 1, o.tm_hour, o.tm_min, o.tm_sec )), o.tm_mday) &#125; const _NWS = /\\S/ const _WS = /\\s/ const _aggregates = &#123; c: 'locale', D: '%m/%d/%y', F: '%y-%m-%d', r: 'locale', R: '%H:%M', T: '%H:%M:%S', x: 'locale', X: 'locale' &#125; /* Fix: Locale alternatives are supported though not documented in PHP; see https://linux.die.net/man/3/strptime Ec EC Ex EX Ey EY Od or Oe OH OI Om OM OS OU Ow OW Oy */ const _pregQuote = function (str) &#123; return (str + '').replace(/([\\\\.+*?[^\\]$()&#123;&#125;=!&lt;&gt;|:])/g, '\\\\$1') &#125; // ensure setup of localization variables takes place setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus const locale = $locutus.php.localeCategories.LC_TIME const lcTime = $locutus.php.locales[locale].LC_TIME // First replace aggregates (run in a loop because an agg may be made up of other aggs) while (format.match(/%[cDFhnrRtTxX]/)) &#123; format = format.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) &#123; const f = _aggregates[m1] return (f === 'locale' ? lcTime[m1] : f) &#125;) &#125; const _addNext = function (j, regex, cb) &#123; if (typeof regex === 'string') &#123; regex = new RegExp('^' + regex, 'i') &#125; const check = dateStr.slice(j) const match = regex.exec(check) // Even if the callback returns null after assigning to the // return object, the object won't be saved anyways const testNull = match ? cb.apply(null, match) : null if (testNull === null) &#123; throw new Error('No match in string') &#125; return j + match[0].length &#125; const _addLocalized = function (j, formatChar, category) &#123; // Could make each parenthesized instead and pass index to callback: return _addNext(j, arrayMap(_pregQuote, lcTime[formatChar]).join('|'), function (m) &#123; const match = lcTime[formatChar].search(new RegExp('^' + _pregQuote(m) + '$', 'i')) if (match) &#123; retObj[category] = match[0] &#125; &#125;) &#125; // BEGIN PROCESSING CHARACTERS for (i = 0, j = 0; i &lt; format.length; i++) &#123; if (format.charAt(i) === '%') &#123; const literalPos = ['%', 'n', 't'].indexOf(format.charAt(i + 1)) if (literalPos !== -1) &#123; if (['%', '\\n', '\\t'].indexOf(dateStr.charAt(j)) === literalPos) &#123; // a matched literal ++i // skip beyond ++j continue &#125; // Format indicated a percent literal, but not actually present return false &#125; var formatChar = format.charAt(i + 1) try &#123; switch (formatChar) &#123; case 'a': case 'A': // Sunday-Saturday // Changes nothing else j = _addLocalized(j, formatChar, 'tm_wday') break case 'h': case 'b': // Jan-Dec j = _addLocalized(j, 'b', 'tm_mon') // Also changes wday, yday _date() break case 'B': // January-December j = _addLocalized(j, formatChar, 'tm_mon') // Also changes wday, yday _date() break case 'C': // 0+; century (19 for 20th) // PHP docs say two-digit, but accepts one-digit (two-digit max): j = _addNext(j, /^\\d?\\d/, function (d) &#123; const year = (parseInt(d, 10) - 19) * 100 retObj.tm_year = year _date() if (!retObj.tm_yday) &#123; retObj.tm_yday = -1 &#125; // Also changes wday; and sets yday to -1 (always?) &#125;) break case 'd': case 'e': // 1-31 day j = _addNext(j, formatChar === 'd' ? /^(0[1-9]|[1-2]\\d|3[0-1])/ : /^([1-2]\\d|3[0-1]|[1-9])/, function (d) &#123; const dayMonth = parseInt(d, 10) retObj.tm_mday = dayMonth // Also changes w_day, y_day _date() &#125;) break case 'g': // No apparent effect; 2-digit year (see 'V') break case 'G': // No apparent effect; 4-digit year (see 'V')' break case 'H': // 00-23 hours j = _addNext(j, /^([0-1]\\d|2[0-3])/, function (d) &#123; const hour = parseInt(d, 10) retObj.tm_hour = hour // Changes nothing else &#125;) break case 'l': case 'I': // 01-12 hours j = _addNext(j, formatChar === 'l' ? /^([1-9]|1[0-2])/ : /^(0[1-9]|1[0-2])/, function (d) &#123; const hour = parseInt(d, 10) - 1 + amPmOffset retObj.tm_hour = hour // Used for coordinating with am-pm prevHour = true // Changes nothing else, but affected by prior 'p/P' &#125;) break case 'j': // 001-366 day of year j = _addNext(j, /^(00[1-9]|0[1-9]\\d|[1-2]\\d\\d|3[0-6][0-6])/, function (d) &#123; const dayYear = parseInt(d, 10) - 1 retObj.tm_yday = dayYear // Changes nothing else // (oddly, since if original by a given year, could calculate other fields) &#125;) break case 'm': // 01-12 month j = _addNext(j, /^(0[1-9]|1[0-2])/, function (d) &#123; const month = parseInt(d, 10) - 1 retObj.tm_mon = month // Also sets wday and yday _date() &#125;) break case 'M': // 00-59 minutes j = _addNext(j, /^[0-5]\\d/, function (d) &#123; const minute = parseInt(d, 10) retObj.tm_min = minute // Changes nothing else &#125;) break case 'P': // Seems not to work; AM-PM // Could make fall-through instead since supposed to be a synonym despite PHP docs return false case 'p': // am-pm j = _addNext(j, /^(am|pm)/i, function (d) &#123; // No effect on 'H' since already 24 hours but // works before or after setting of l/I hour amPmOffset = (/a/) .test(d) ? 0 : 12 if (prevHour) &#123; retObj.tm_hour += amPmOffset &#125; &#125;) break case 's': // Unix timestamp (in seconds) j = _addNext(j, /^\\d+/, function (d) &#123; const timestamp = parseInt(d, 10) const date = new Date(Date.UTC(timestamp * 1000)) _reset(date) // Affects all fields, but can't be negative (and initial + not allowed) &#125;) break case 'S': // 00-59 seconds j = _addNext(j, /^[0-5]\\d/, // strptime also accepts 60-61 for some reason function (d) &#123; const second = parseInt(d, 10) retObj.tm_sec = second // Changes nothing else &#125;) break case 'u': case 'w': // 0 (Sunday)-6(Saturday) j = _addNext(j, /^\\d/, function (d) &#123; retObj.tm_wday = d - (formatChar === 'u') // Changes nothing else apparently &#125;) break case 'U': case 'V': case 'W': // Apparently ignored (week of year, from 1st Monday) break case 'y': // 69 (or higher) for 1969+, 68 (or lower) for 2068- // PHP docs say two-digit, but accepts one-digit (two-digit max): j = _addNext(j, /^\\d?\\d/, function (d) &#123; d = parseInt(d, 10) const year = d &gt;= 69 ? d : d + 100 retObj.tm_year = year _date() if (!retObj.tm_yday) &#123; retObj.tm_yday = -1 &#125; // Also changes wday; and sets yday to -1 (always?) &#125;) break case 'Y': // 2010 (4-digit year) // PHP docs say four-digit, but accepts one-digit (four-digit max): j = _addNext(j, /^\\d&#123;1,4&#125;/, function (d) &#123; const year = (parseInt(d, 10)) - 1900 retObj.tm_year = year _date() if (!retObj.tm_yday) &#123; retObj.tm_yday = -1 &#125; // Also changes wday; and sets yday to -1 (always?) &#125;) break case 'z': // Timezone; on my system, strftime gives -0800, // but strptime seems not to alter hour setting break case 'Z': // Timezone; on my system, strftime gives PST, but strptime treats text as unparsed break default: throw new Error('Unrecognized formatting character in strptime()') &#125; &#125; catch (e) &#123; if (e === 'No match in string') &#123; // Allow us to exit // There was supposed to be a matching format but there wasn't return false &#125; // Calculate skipping beyond initial percent too &#125; ++i &#125; else if (format.charAt(i) !== dateStr.charAt(j)) &#123; // If extra whitespace at beginning or end of either, or between formats, no problem // (just a problem when between % and format specifier) // If the string has white-space, it is ok to ignore if (dateStr.charAt(j).search(_WS) !== -1) &#123; j++ // Let the next iteration try again with the same format character i-- &#125; else if (format.charAt(i).search(_NWS) !== -1) &#123; // Any extra formatting characters besides white-space causes // problems (do check after WS though, as may just be WS in string before next character) return false &#125; // Extra WS in format // Adjust strings when encounter non-matching whitespace, so they align in future checks above // Will check on next iteration (against same (non-WS) string character) &#125; else &#123; j++ &#125; &#125; // POST-PROCESSING // Will also get extra whitespace; empty string if none retObj.unparsed = dateStr.slice(j) return retObj&#125;"},{"title":"PHP's pack in JavaScript","date":"2021-02-28T22:26:45.657Z","updated":"2021-02-28T22:26:45.657Z","comments":true,"path":"php/misc/pack/index.html","permalink":"https://locutus.io/php/misc/pack/index.html","excerpt":"","text":"module.exports = function pack (format) &#123; // discuss at: https://locutus.io/php/pack/ // original by: Tim de Koning (https://www.kingsquare.nl) // parts by: Jonas Raoni Soares Silva (https://www.jsfromhell.com) // bugfixed by: Tim de Koning (https://www.kingsquare.nl) // note 1: Float encoding by: Jonas Raoni Soares Silva // note 1: Home: https://www.kingsquare.nl/blog/12-12-2009/13507444 // note 1: Feedback: phpjs-pack@kingsquare.nl // note 1: \"machine dependent byte order and size\" aren't // note 1: applicable for JavaScript; pack works as on a 32bit, // note 1: little endian machine. // example 1: pack('nvc*', 0x1234, 0x5678, 65, 66) // returns 1: '\\u00124xVAB' // example 2: pack('H4', '2345') // returns 2: '#E' // example 3: pack('H*', 'D5') // returns 3: 'Õ' // example 4: pack('d', -100.876) // returns 4: \"\\u0000\\u0000\\u0000\\u0000\\u00008YÀ\" // test: skip-1 let formatPointer = 0 let argumentPointer = 1 let result = '' let argument = '' let i = 0 let r = [] let instruction, quantifier, word, precisionBits, exponentBits, extraNullCount // vars used by float encoding let bias let minExp let maxExp let minUnnormExp let status let exp let len let bin let signal let n let intPart let floatPart let lastBit let rounded let j let k let tmpResult while (formatPointer &lt; format.length) &#123; instruction = format.charAt(formatPointer) quantifier = '' formatPointer++ while ((formatPointer &lt; format.length) &amp;&amp; (format.charAt(formatPointer) .match(/[\\d*]/) !== null)) &#123; quantifier += format.charAt(formatPointer) formatPointer++ &#125; if (quantifier === '') &#123; quantifier = '1' &#125; // Now pack variables: 'quantifier' times 'instruction' switch (instruction) &#123; case 'a': case 'A': // NUL-padded string // SPACE-padded string if (typeof arguments[argumentPointer] === 'undefined') &#123; throw new Error('Warning: pack() Type ' + instruction + ': not enough arguments') &#125; else &#123; argument = String(arguments[argumentPointer]) &#125; if (quantifier === '*') &#123; quantifier = argument.length &#125; for (i = 0; i &lt; quantifier; i++) &#123; if (typeof argument[i] === 'undefined') &#123; if (instruction === 'a') &#123; result += String.fromCharCode(0) &#125; else &#123; result += ' ' &#125; &#125; else &#123; result += argument[i] &#125; &#125; argumentPointer++ break case 'h': case 'H': // Hex string, low nibble first // Hex string, high nibble first if (typeof arguments[argumentPointer] === 'undefined') &#123; throw new Error('Warning: pack() Type ' + instruction + ': not enough arguments') &#125; else &#123; argument = arguments[argumentPointer] &#125; if (quantifier === '*') &#123; quantifier = argument.length &#125; if (quantifier &gt; argument.length) &#123; const msg = 'Warning: pack() Type ' + instruction + ': not enough characters in string' throw new Error(msg) &#125; for (i = 0; i &lt; quantifier; i += 2) &#123; // Always get per 2 bytes... word = argument[i] if (((i + 1) &gt;= quantifier) || typeof argument[i + 1] === 'undefined') &#123; word += '0' &#125; else &#123; word += argument[i + 1] &#125; // The fastest way to reverse? if (instruction === 'h') &#123; word = word[1] + word[0] &#125; result += String.fromCharCode(parseInt(word, 16)) &#125; argumentPointer++ break case 'c': case 'C': // signed char // unsigned char // c and C is the same in pack if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(arguments[argumentPointer]) argumentPointer++ &#125; break case 's': case 'S': case 'v': // signed short (always 16 bit, machine byte order) // unsigned short (always 16 bit, machine byte order) // s and S is the same in pack if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(arguments[argumentPointer] &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 8 &amp; 0xFF) argumentPointer++ &#125; break case 'n': // unsigned short (always 16 bit, big endian byte order) if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 8 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &amp; 0xFF) argumentPointer++ &#125; break case 'i': case 'I': case 'l': case 'L': case 'V': // signed integer (machine dependent size and byte order) // unsigned integer (machine dependent size and byte order) // signed long (always 32 bit, machine byte order) // unsigned long (always 32 bit, machine byte order) // unsigned long (always 32 bit, little endian byte order) if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(arguments[argumentPointer] &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 8 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 16 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 24 &amp; 0xFF) argumentPointer++ &#125; break case 'N': // unsigned long (always 32 bit, big endian byte order) if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 24 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 16 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &gt;&gt; 8 &amp; 0xFF) result += String.fromCharCode(arguments[argumentPointer] &amp; 0xFF) argumentPointer++ &#125; break case 'f': case 'd': // float (machine dependent size and representation) // double (machine dependent size and representation) // version based on IEEE754 precisionBits = 23 exponentBits = 8 if (instruction === 'd') &#123; precisionBits = 52 exponentBits = 11 &#125; if (quantifier === '*') &#123; quantifier = arguments.length - argumentPointer &#125; if (quantifier &gt; (arguments.length - argumentPointer)) &#123; throw new Error('Warning: pack() Type ' + instruction + ': too few arguments') &#125; for (i = 0; i &lt; quantifier; i++) &#123; argument = arguments[argumentPointer] bias = Math.pow(2, exponentBits - 1) - 1 minExp = -bias + 1 maxExp = bias minUnnormExp = minExp - precisionBits status = isNaN(n = parseFloat(argument)) || n === -Infinity || n === +Infinity ? n : 0 exp = 0 len = 2 * bias + 1 + precisionBits + 3 bin = new Array(len) signal = (n = status !== 0 ? 0 : n) &lt; 0 n = Math.abs(n) intPart = Math.floor(n) floatPart = n - intPart for (k = len; k;) &#123; bin[--k] = 0 &#125; for (k = bias + 2; intPart &amp;&amp; k;) &#123; bin[--k] = intPart % 2 intPart = Math.floor(intPart / 2) &#125; for (k = bias + 1; floatPart &gt; 0 &amp;&amp; k; --floatPart) &#123; (bin[++k] = ((floatPart *= 2) &gt;= 1) - 0) &#125; for (k = -1; ++k &lt; len &amp;&amp; !bin[k];) &#123;&#125; // @todo: Make this more readable: const key = (lastBit = precisionBits - 1 + (k = (exp = bias + 1 - k) &gt;= minExp &amp;&amp; exp &lt;= maxExp ? k + 1 : bias + 1 - (exp = minExp - 1))) + 1 if (bin[key]) &#123; if (!(rounded = bin[lastBit])) &#123; for (j = lastBit + 2; !rounded &amp;&amp; j &lt; len; rounded = bin[j++]) &#123;&#125; &#125; for (j = lastBit + 1; rounded &amp;&amp; --j &gt;= 0; (bin[j] = !bin[j] - 0) &amp;&amp; (rounded = 0)) &#123;&#125; &#125; for (k = k - 2 &lt; 0 ? -1 : k - 3; ++k &lt; len &amp;&amp; !bin[k];) &#123;&#125; if ((exp = bias + 1 - k) &gt;= minExp &amp;&amp; exp &lt;= maxExp) &#123; ++k &#125; else &#123; if (exp &lt; minExp) &#123; if (exp !== bias + 1 - len &amp;&amp; exp &lt; minUnnormExp) &#123; // \"encodeFloat::float underflow\" &#125; k = bias + 1 - (exp = minExp - 1) &#125; &#125; if (intPart || status !== 0) &#123; exp = maxExp + 1 k = bias + 2 if (status === -Infinity) &#123; signal = 1 &#125; else if (isNaN(status)) &#123; bin[k] = 1 &#125; &#125; n = Math.abs(exp + bias) tmpResult = '' for (j = exponentBits + 1; --j;) &#123; tmpResult = (n % 2) + tmpResult n = n &gt;&gt;= 1 &#125; n = 0 j = 0 k = (tmpResult = (signal ? '1' : '0') + tmpResult + (bin .slice(k, k + precisionBits) .join('')) ).length r = [] for (; k;) &#123; n += (1 &lt;&lt; j) * tmpResult.charAt(--k) if (j === 7) &#123; r[r.length] = String.fromCharCode(n) n = 0 &#125; j = (j + 1) % 8 &#125; r[r.length] = n ? String.fromCharCode(n) : '' result += r.join('') argumentPointer++ &#125; break case 'x': // NUL byte if (quantifier === '*') &#123; throw new Error('Warning: pack(): Type x: \\'*\\' ignored') &#125; for (i = 0; i &lt; quantifier; i++) &#123; result += String.fromCharCode(0) &#125; break case 'X': // Back up one byte if (quantifier === '*') &#123; throw new Error('Warning: pack(): Type X: \\'*\\' ignored') &#125; for (i = 0; i &lt; quantifier; i++) &#123; if (result.length === 0) &#123; throw new Error('Warning: pack(): Type X:' + ' outside of string') &#125; else &#123; result = result.substring(0, result.length - 1) &#125; &#125; break case '@': // NUL-fill to absolute position if (quantifier === '*') &#123; throw new Error('Warning: pack(): Type X: \\'*\\' ignored') &#125; if (quantifier &gt; result.length) &#123; extraNullCount = quantifier - result.length for (i = 0; i &lt; extraNullCount; i++) &#123; result += String.fromCharCode(0) &#125; &#125; if (quantifier &lt; result.length) &#123; result = result.substring(0, quantifier) &#125; break default: throw new Error('Warning: pack() Type ' + instruction + ': unknown format code') &#125; &#125; if (argumentPointer &lt; arguments.length) &#123; const msg2 = 'Warning: pack(): ' + (arguments.length - argumentPointer) + ' arguments unused' throw new Error(msg2) &#125; return result&#125;"},{"title":"PHP's md5 in JavaScript","date":"2021-02-28T22:26:45.709Z","updated":"2021-02-28T22:26:45.709Z","comments":true,"path":"php/strings/md5/index.html","permalink":"https://locutus.io/php/strings/md5/index.html","excerpt":"","text":"module.exports = function md5 (str) &#123; // discuss at: https://locutus.io/php/md5/ // original by: Webtoolkit.info (https://www.webtoolkit.info/) // improved by: Michael White (https://getsprink.com) // improved by: Jack // improved by: Kevin van Zonneveld (https://kvz.io) // input by: Brett Zamir (https://brett-zamir.me) // bugfixed by: Kevin van Zonneveld (https://kvz.io) // note 1: Keep in mind that in accordance with PHP, the whole string is buffered and then // note 1: hashed. If available, we'd recommend using Node's native crypto modules directly // note 1: in a steaming fashion for faster and more efficient hashing // example 1: md5('Kevin van Zonneveld') // returns 1: '6e658d4bfcb59cc13f96c14450ac40b9' let hash try &#123; const crypto = require('crypto') const md5sum = crypto.createHash('md5') md5sum.update(str) hash = md5sum.digest('hex') &#125; catch (e) &#123; hash = undefined &#125; if (hash !== undefined) &#123; return hash &#125; const utf8Encode = require('../xml/utf8_encode') let xl const _rotateLeft = function (lValue, iShiftBits) &#123; return (lValue &lt;&lt; iShiftBits) | (lValue &gt;&gt;&gt; (32 - iShiftBits)) &#125; const _addUnsigned = function (lX, lY) &#123; let lX4, lY4, lX8, lY8, lResult lX8 = (lX &amp; 0x80000000) lY8 = (lY &amp; 0x80000000) lX4 = (lX &amp; 0x40000000) lY4 = (lY &amp; 0x40000000) lResult = (lX &amp; 0x3FFFFFFF) + (lY &amp; 0x3FFFFFFF) if (lX4 &amp; lY4) &#123; return (lResult ^ 0x80000000 ^ lX8 ^ lY8) &#125; if (lX4 | lY4) &#123; if (lResult &amp; 0x40000000) &#123; return (lResult ^ 0xC0000000 ^ lX8 ^ lY8) &#125; else &#123; return (lResult ^ 0x40000000 ^ lX8 ^ lY8) &#125; &#125; else &#123; return (lResult ^ lX8 ^ lY8) &#125; &#125; const _F = function (x, y, z) &#123; return (x &amp; y) | ((~x) &amp; z) &#125; const _G = function (x, y, z) &#123; return (x &amp; z) | (y &amp; (~z)) &#125; const _H = function (x, y, z) &#123; return (x ^ y ^ z) &#125; const _I = function (x, y, z) &#123; return (y ^ (x | (~z))) &#125; const _FF = function (a, b, c, d, x, s, ac) &#123; a = _addUnsigned(a, _addUnsigned(_addUnsigned(_F(b, c, d), x), ac)) return _addUnsigned(_rotateLeft(a, s), b) &#125; const _GG = function (a, b, c, d, x, s, ac) &#123; a = _addUnsigned(a, _addUnsigned(_addUnsigned(_G(b, c, d), x), ac)) return _addUnsigned(_rotateLeft(a, s), b) &#125; const _HH = function (a, b, c, d, x, s, ac) &#123; a = _addUnsigned(a, _addUnsigned(_addUnsigned(_H(b, c, d), x), ac)) return _addUnsigned(_rotateLeft(a, s), b) &#125; const _II = function (a, b, c, d, x, s, ac) &#123; a = _addUnsigned(a, _addUnsigned(_addUnsigned(_I(b, c, d), x), ac)) return _addUnsigned(_rotateLeft(a, s), b) &#125; const _convertToWordArray = function (str) &#123; let lWordCount const lMessageLength = str.length const lNumberOfWordsTemp1 = lMessageLength + 8 const lNumberOfWordsTemp2 = (lNumberOfWordsTemp1 - (lNumberOfWordsTemp1 % 64)) / 64 const lNumberOfWords = (lNumberOfWordsTemp2 + 1) * 16 const lWordArray = new Array(lNumberOfWords - 1) let lBytePosition = 0 let lByteCount = 0 while (lByteCount &lt; lMessageLength) &#123; lWordCount = (lByteCount - (lByteCount % 4)) / 4 lBytePosition = (lByteCount % 4) * 8 lWordArray[lWordCount] = (lWordArray[lWordCount] | (str.charCodeAt(lByteCount) &lt;&lt; lBytePosition)) lByteCount++ &#125; lWordCount = (lByteCount - (lByteCount % 4)) / 4 lBytePosition = (lByteCount % 4) * 8 lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 &lt;&lt; lBytePosition) lWordArray[lNumberOfWords - 2] = lMessageLength &lt;&lt; 3 lWordArray[lNumberOfWords - 1] = lMessageLength &gt;&gt;&gt; 29 return lWordArray &#125; const _wordToHex = function (lValue) &#123; let wordToHexValue = '' let wordToHexValueTemp = '' let lByte let lCount for (lCount = 0; lCount &lt;= 3; lCount++) &#123; lByte = (lValue &gt;&gt;&gt; (lCount * 8)) &amp; 255 wordToHexValueTemp = '0' + lByte.toString(16) wordToHexValue = wordToHexValue + wordToHexValueTemp.substr(wordToHexValueTemp.length - 2, 2) &#125; return wordToHexValue &#125; let x = [] let k let AA let BB let CC let DD let a let b let c let d const S11 = 7 const S12 = 12 const S13 = 17 const S14 = 22 const S21 = 5 const S22 = 9 const S23 = 14 const S24 = 20 const S31 = 4 const S32 = 11 const S33 = 16 const S34 = 23 const S41 = 6 const S42 = 10 const S43 = 15 const S44 = 21 str = utf8Encode(str) x = _convertToWordArray(str) a = 0x67452301 b = 0xEFCDAB89 c = 0x98BADCFE d = 0x10325476 xl = x.length for (k = 0; k &lt; xl; k += 16) &#123; AA = a BB = b CC = c DD = d a = _FF(a, b, c, d, x[k + 0], S11, 0xD76AA478) d = _FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756) c = _FF(c, d, a, b, x[k + 2], S13, 0x242070DB) b = _FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE) a = _FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF) d = _FF(d, a, b, c, x[k + 5], S12, 0x4787C62A) c = _FF(c, d, a, b, x[k + 6], S13, 0xA8304613) b = _FF(b, c, d, a, x[k + 7], S14, 0xFD469501) a = _FF(a, b, c, d, x[k + 8], S11, 0x698098D8) d = _FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF) c = _FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1) b = _FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE) a = _FF(a, b, c, d, x[k + 12], S11, 0x6B901122) d = _FF(d, a, b, c, x[k + 13], S12, 0xFD987193) c = _FF(c, d, a, b, x[k + 14], S13, 0xA679438E) b = _FF(b, c, d, a, x[k + 15], S14, 0x49B40821) a = _GG(a, b, c, d, x[k + 1], S21, 0xF61E2562) d = _GG(d, a, b, c, x[k + 6], S22, 0xC040B340) c = _GG(c, d, a, b, x[k + 11], S23, 0x265E5A51) b = _GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA) a = _GG(a, b, c, d, x[k + 5], S21, 0xD62F105D) d = _GG(d, a, b, c, x[k + 10], S22, 0x2441453) c = _GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681) b = _GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8) a = _GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6) d = _GG(d, a, b, c, x[k + 14], S22, 0xC33707D6) c = _GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87) b = _GG(b, c, d, a, x[k + 8], S24, 0x455A14ED) a = _GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905) d = _GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8) c = _GG(c, d, a, b, x[k + 7], S23, 0x676F02D9) b = _GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A) a = _HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942) d = _HH(d, a, b, c, x[k + 8], S32, 0x8771F681) c = _HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122) b = _HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C) a = _HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44) d = _HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9) c = _HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60) b = _HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70) a = _HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6) d = _HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA) c = _HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085) b = _HH(b, c, d, a, x[k + 6], S34, 0x4881D05) a = _HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039) d = _HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5) c = _HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8) b = _HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665) a = _II(a, b, c, d, x[k + 0], S41, 0xF4292244) d = _II(d, a, b, c, x[k + 7], S42, 0x432AFF97) c = _II(c, d, a, b, x[k + 14], S43, 0xAB9423A7) b = _II(b, c, d, a, x[k + 5], S44, 0xFC93A039) a = _II(a, b, c, d, x[k + 12], S41, 0x655B59C3) d = _II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92) c = _II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D) b = _II(b, c, d, a, x[k + 1], S44, 0x85845DD1) a = _II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F) d = _II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0) c = _II(c, d, a, b, x[k + 6], S43, 0xA3014314) b = _II(b, c, d, a, x[k + 13], S44, 0x4E0811A1) a = _II(a, b, c, d, x[k + 4], S41, 0xF7537E82) d = _II(d, a, b, c, x[k + 11], S42, 0xBD3AF235) c = _II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB) b = _II(b, c, d, a, x[k + 9], S44, 0xEB86D391) a = _addUnsigned(a, AA) b = _addUnsigned(b, BB) c = _addUnsigned(c, CC) d = _addUnsigned(d, DD) &#125; const temp = _wordToHex(a) + _wordToHex(b) + _wordToHex(c) + _wordToHex(d) return temp.toLowerCase()&#125;"},{"title":"PHP's money_format in JavaScript","date":"2021-02-28T22:26:45.713Z","updated":"2021-02-28T22:26:45.713Z","comments":true,"path":"php/strings/money_format/index.html","permalink":"https://locutus.io/php/strings/money_format/index.html","excerpt":"","text":"module.exports = function money_format (format, number) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/money_format/ // original by: Brett Zamir (https://brett-zamir.me) // input by: daniel airton wermann (https://wermann.com.br) // bugfixed by: Brett Zamir (https://brett-zamir.me) // note 1: This depends on setlocale having the appropriate // note 1: locale (these examples use 'en_US') // example 1: money_format('%i', 1234.56) // returns 1: ' USD 1,234.56' // example 2: money_format('%14#8.2n', 1234.5678) // returns 2: ' $ 1,234.57' // example 3: money_format('%14#8.2n', -1234.5678) // returns 3: '-$ 1,234.57' // example 4: money_format('%(14#8.2n', 1234.5678) // returns 4: ' $ 1,234.57 ' // example 5: money_format('%(14#8.2n', -1234.5678) // returns 5: '($ 1,234.57)' // example 6: money_format('%=014#8.2n', 1234.5678) // returns 6: ' $000001,234.57' // example 7: money_format('%=014#8.2n', -1234.5678) // returns 7: '-$000001,234.57' // example 8: money_format('%=*14#8.2n', 1234.5678) // returns 8: ' $*****1,234.57' // example 9: money_format('%=*14#8.2n', -1234.5678) // returns 9: '-$*****1,234.57' // example 10: money_format('%=*^14#8.2n', 1234.5678) // returns 10: ' $****1234.57' // example 11: money_format('%=*^14#8.2n', -1234.5678) // returns 11: ' -$****1234.57' // example 12: money_format('%=*!14#8.2n', 1234.5678) // returns 12: ' *****1,234.57' // example 13: money_format('%=*!14#8.2n', -1234.5678) // returns 13: '-*****1,234.57' // example 14: money_format('%i', 3590) // returns 14: ' USD 3,590.00' const setlocale = require('../strings/setlocale') // Per PHP behavior, there seems to be no extra padding // for sign when there is a positive number, though my // understanding of the description is that there should be padding; // need to revisit examples // Helpful info at https://ftp.gnu.org/pub/pub/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_7.html // and https://publib.boulder.ibm.com/infocenter/zos/v1r10/index.jsp?topic=/com.ibm.zos.r10.bpxbd00/strfmp.htm if (typeof number !== 'number') &#123; return null &#125; // 1: flags, 3: width, 5: left, 7: right, 8: conversion const regex = /%((=.|[+^(!-])*?)(\\d*?)(#(\\d+))?(\\.(\\d+))?([in%])/g // Ensure the locale data we need is set up setlocale('LC_ALL', 0) const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; const monetary = $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY].LC_MONETARY const doReplace = function (n0, flags, n2, width, n4, left, n6, right, conversion) &#123; let value = '' let repl = '' if (conversion === '%') &#123; // Percent does not seem to be allowed with intervening content return '%' &#125; const fill = flags &amp;&amp; (/=./).test(flags) ? flags.match(/=(.)/)[1] : ' ' // flag: =f (numeric fill) // flag: ! (suppress currency symbol) const showCurrSymbol = !flags || flags.indexOf('!') === -1 // field width: w (minimum field width) width = parseInt(width, 10) || 0 const neg = number &lt; 0 // Convert to string number = number + '' // We don't want negative symbol represented here yet number = neg ? number.slice(1) : number const decpos = number.indexOf('.') // Get integer portion let integer = decpos !== -1 ? number.slice(0, decpos) : number // Get decimal portion let fraction = decpos !== -1 ? number.slice(decpos + 1) : '' const _strSplice = function (integerStr, idx, thouSep) &#123; const integerArr = integerStr.split('') integerArr.splice(idx, 0, thouSep) return integerArr.join('') &#125; const intLen = integer.length left = parseInt(left, 10) const filler = intLen &lt; left if (filler) &#123; var fillnum = left - intLen integer = new Array(fillnum + 1).join(fill) + integer &#125; if (flags.indexOf('^') === -1) &#123; // flag: ^ (disable grouping characters (of locale)) // use grouping characters // ',' let thouSep = monetary.mon_thousands_sep // [3] (every 3 digits in U.S.A. locale) const monGrouping = monetary.mon_grouping if (monGrouping[0] &lt; integer.length) &#123; for (var i = 0, idx = integer.length; i &lt; monGrouping.length; i++) &#123; // e.g., 3 idx -= monGrouping[i] if (idx &lt;= 0) &#123; break &#125; if (filler &amp;&amp; idx &lt; fillnum) &#123; thouSep = fill &#125; integer = _strSplice(integer, idx, thouSep) &#125; &#125; if (monGrouping[i - 1] &gt; 0) &#123; // Repeating last grouping (may only be one) until highest portion of integer reached while (idx &gt; monGrouping[i - 1]) &#123; idx -= monGrouping[i - 1] if (filler &amp;&amp; idx &lt; fillnum) &#123; thouSep = fill &#125; integer = _strSplice(integer, idx, thouSep) &#125; &#125; &#125; // left, right if (right === '0') &#123; // No decimal or fractional digits value = integer &#125; else &#123; // '.' let decPt = monetary.mon_decimal_point if (right === '' || right === undefined) &#123; right = conversion === 'i' ? monetary.int_frac_digits : monetary.frac_digits &#125; right = parseInt(right, 10) if (right === 0) &#123; // Only remove fractional portion if explicitly set to zero digits fraction = '' decPt = '' &#125; else if (right &lt; fraction.length) &#123; fraction = Math.round(parseFloat( fraction.slice(0, right) + '.' + fraction.substr(right, 1) )) if (right &gt; fraction.length) &#123; fraction = new Array(right - fraction.length + 1).join('0') + fraction // prepend with 0's &#125; &#125; else if (right &gt; fraction.length) &#123; fraction += new Array(right - fraction.length + 1).join('0') // pad with 0's &#125; value = integer + decPt + fraction &#125; let symbol = '' if (showCurrSymbol) &#123; // 'i' vs. 'n' ('USD' vs. '$') symbol = conversion === 'i' ? monetary.int_curr_symbol : monetary.currency_symbol &#125; const signPosn = neg ? monetary.n_sign_posn : monetary.p_sign_posn // 0: no space between curr. symbol and value // 1: space sep. them unless symb. and sign are adjacent then space sep. them from value // 2: space sep. sign and value unless symb. and sign are adjacent then space separates const sepBySpace = neg ? monetary.n_sep_by_space : monetary.p_sep_by_space // p_cs_precedes, n_cs_precedes // positive currency symbol follows value = 0; precedes value = 1 const csPrecedes = neg ? monetary.n_cs_precedes : monetary.p_cs_precedes // Assemble symbol/value/sign and possible space as appropriate if (flags.indexOf('(') !== -1) &#123; // flag: parenth. for negative // @todo: unclear on whether and how sepBySpace, signPosn, or csPrecedes have // an impact here (as they do below), but assuming for now behaves as signPosn 0 as // far as localized sepBySpace and signPosn behavior repl = (csPrecedes ? symbol + (sepBySpace === 1 ? ' ' : '') : '') + value + (!csPrecedes ? ( sepBySpace === 1 ? ' ' : '') + symbol : '') if (neg) &#123; repl = '(' + repl + ')' &#125; else &#123; repl = ' ' + repl + ' ' &#125; &#125; else &#123; // '+' is default // '' const posSign = monetary.positive_sign // '-' const negSign = monetary.negative_sign const sign = neg ? (negSign) : (posSign) const otherSign = neg ? (posSign) : (negSign) let signPadding = '' if (signPosn) &#123; // has a sign signPadding = new Array(otherSign.length - sign.length + 1).join(' ') &#125; let valueAndCS = '' switch (signPosn) &#123; // 0: parentheses surround value and curr. symbol; // 1: sign precedes them; // 2: sign follows them; // 3: sign immed. precedes curr. symbol; (but may be space between) // 4: sign immed. succeeds curr. symbol; (but may be space between) case 0: valueAndCS = csPrecedes ? symbol + (sepBySpace === 1 ? ' ' : '') + value : value + (sepBySpace === 1 ? ' ' : '') + symbol repl = '(' + valueAndCS + ')' break case 1: valueAndCS = csPrecedes ? symbol + (sepBySpace === 1 ? ' ' : '') + value : value + (sepBySpace === 1 ? ' ' : '') + symbol repl = signPadding + sign + (sepBySpace === 2 ? ' ' : '') + valueAndCS break case 2: valueAndCS = csPrecedes ? symbol + (sepBySpace === 1 ? ' ' : '') + value : value + (sepBySpace === 1 ? ' ' : '') + symbol repl = valueAndCS + (sepBySpace === 2 ? ' ' : '') + sign + signPadding break case 3: repl = csPrecedes ? signPadding + sign + (sepBySpace === 2 ? ' ' : '') + symbol + (sepBySpace === 1 ? ' ' : '') + value : value + (sepBySpace === 1 ? ' ' : '') + sign + signPadding + (sepBySpace === 2 ? ' ' : '') + symbol break case 4: repl = csPrecedes ? symbol + (sepBySpace === 2 ? ' ' : '') + signPadding + sign + (sepBySpace === 1 ? ' ' : '') + value : value + (sepBySpace === 1 ? ' ' : '') + symbol + (sepBySpace === 2 ? ' ' : '') + sign + signPadding break &#125; &#125; let padding = width - repl.length if (padding &gt; 0) &#123; padding = new Array(padding + 1).join(' ') // @todo: How does p_sep_by_space affect the count if there is a space? // Included in count presumably? if (flags.indexOf('-') !== -1) &#123; // left-justified (pad to right) repl += padding &#125; else &#123; // right-justified (pad to left) repl = padding + repl &#125; &#125; return repl &#125; return format.replace(regex, doReplace)&#125;"},{"title":"PHP's setlocale in JavaScript","date":"2021-02-28T22:26:45.729Z","updated":"2021-02-28T22:26:45.729Z","comments":true,"path":"php/strings/setlocale/index.html","permalink":"https://locutus.io/php/strings/setlocale/index.html","excerpt":"","text":"module.exports = function setlocale (category, locale) &#123; // discuss at: https://locutus.io/php/setlocale/ // original by: Brett Zamir (https://brett-zamir.me) // original by: Blues (https://hacks.bluesmoon.info/strftime/strftime.js) // original by: YUI Library (https://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html) // note 1: Is extensible, but currently only implements locales en, // note 1: en_US, en_GB, en_AU, fr, and fr_CA for LC_TIME only; C for LC_CTYPE; // note 1: C and en for LC_MONETARY/LC_NUMERIC; en for LC_COLLATE // note 1: Uses global: locutus to store locale info // note 1: Consider using https://demo.icu-project.org/icu-bin/locexp as basis for localization (as in i18n_loc_set_default()) // note 2: This function tries to establish the locale via the `window` global. // note 2: This feature will not work in Node and hence is Browser-only // example 1: setlocale('LC_ALL', 'en_US') // returns 1: 'en_US' const getenv = require('../info/getenv') let categ = '' const cats = [] let i = 0 const _copy = function _copy (orig) &#123; if (orig instanceof RegExp) &#123; return new RegExp(orig) &#125; else if (orig instanceof Date) &#123; return new Date(orig) &#125; const newObj = &#123;&#125; for (const i in orig) &#123; if (typeof orig[i] === 'object') &#123; newObj[i] = _copy(orig[i]) &#125; else &#123; newObj[i] = orig[i] &#125; &#125; return newObj &#125; // Function usable by a ngettext implementation (apparently not an accessible part of setlocale(), // but locale-specific) See https://www.gnu.org/software/gettext/manual/gettext.html#Plural-forms // though amended with others from https://developer.mozilla.org/En/Localization_and_Plurals (new // categories noted with \"MDC\" below, though not sure of whether there is a convention for the // relative order of these newer groups as far as ngettext) The function name indicates the number // of plural forms (nplural) Need to look into https://cldr.unicode.org/ (maybe future JavaScript); // Dojo has some functions (under new BSD), including JSON conversions of LDML XML from CLDR: // https://bugs.dojotoolkit.org/browser/dojo/trunk/cldr and docs at // https://api.dojotoolkit.org/jsdoc/HEAD/dojo.cldr // var _nplurals1 = function (n) &#123; // // e.g., Japanese // return 0 // &#125; const _nplurals2a = function (n) &#123; // e.g., English return n !== 1 ? 1 : 0 &#125; const _nplurals2b = function (n) &#123; // e.g., French return n &gt; 1 ? 1 : 0 &#125; const $global = (typeof window !== 'undefined' ? window : global) $global.$locutus = $global.$locutus || &#123;&#125; const $locutus = $global.$locutus $locutus.php = $locutus.php || &#123;&#125; // Reconcile Windows vs. *nix locale names? // Allow different priority orders of languages, esp. if implement gettext as in // LANGUAGE env. var.? (e.g., show German if French is not available) if (!$locutus.php.locales || !$locutus.php.locales.fr_CA || !$locutus.php.locales.fr_CA.LC_TIME || !$locutus.php.locales.fr_CA.LC_TIME.x) &#123; // Can add to the locales $locutus.php.locales = &#123;&#125; $locutus.php.locales.en = &#123; LC_COLLATE: function (str1, str2) &#123; // @todo: This one taken from strcmp, but need for other locales; we don't use localeCompare // since its locale is not settable return (str1 === str2) ? 0 : ((str1 &gt; str2) ? 1 : -1) &#125;, LC_CTYPE: &#123; // Need to change any of these for English as opposed to C? an: /^[A-Za-z\\d]+$/g, al: /^[A-Za-z]+$/g, ct: /^[\\u0000-\\u001F\\u007F]+$/g, dg: /^[\\d]+$/g, gr: /^[\\u0021-\\u007E]+$/g, lw: /^[a-z]+$/g, pr: /^[\\u0020-\\u007E]+$/g, pu: /^[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E]+$/g, sp: /^[\\f\\n\\r\\t\\v ]+$/g, up: /^[A-Z]+$/g, xd: /^[A-Fa-f\\d]+$/g, CODESET: 'UTF-8', // Used by sql_regcase lower: 'abcdefghijklmnopqrstuvwxyz', upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' &#125;, LC_TIME: &#123; // Comments include nl_langinfo() constant equivalents and any // changes from Blues' implementation a: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'], // ABDAY_ A: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'], // DAY_ b: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], // ABMON_ B: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ], // MON_ c: '%a %d %b %Y %r %Z', // D_T_FMT // changed %T to %r per results p: ['AM', 'PM'], // AM_STR/PM_STR P: ['am', 'pm'], // Not available in nl_langinfo() r: '%I:%M:%S %p', // T_FMT_AMPM (Fixed for all locales) x: '%m/%d/%Y', // D_FMT // switched order of %m and %d; changed %y to %Y (C uses %y) X: '%r', // T_FMT // changed from %T to %r (%T is default for C, not English US) // Following are from nl_langinfo() or https://www.cptec.inpe.br/sx4/sx4man2/g1ab02e/strftime.4.html alt_digits: '', // e.g., ordinal ERA: '', ERA_YEAR: '', ERA_D_T_FMT: '', ERA_D_FMT: '', ERA_T_FMT: '' &#125;, // Assuming distinction between numeric and monetary is thus: // See below for C locale LC_MONETARY: &#123; // based on Windows \"english\" (English_United States.1252) locale int_curr_symbol: 'USD', currency_symbol: '$', mon_decimal_point: '.', mon_thousands_sep: ',', mon_grouping: [3], // use mon_thousands_sep; \"\" for no grouping; additional array members // indicate successive group lengths after first group // (e.g., if to be 1,23,456, could be [3, 2]) positive_sign: '', negative_sign: '-', int_frac_digits: 2, // Fractional digits only for money defaults? frac_digits: 2, p_cs_precedes: 1, // positive currency symbol follows value = 0; precedes value = 1 p_sep_by_space: 0, // 0: no space between curr. symbol and value; 1: space sep. them unless symb. // and sign are adjacent then space sep. them from value; 2: space sep. sign // and value unless symb. and sign are adjacent then space separates n_cs_precedes: 1, // see p_cs_precedes n_sep_by_space: 0, // see p_sep_by_space p_sign_posn: 3, // 0: parentheses surround quantity and curr. symbol; 1: sign precedes them; // 2: sign follows them; 3: sign immed. precedes curr. symbol; 4: sign immed. // succeeds curr. symbol n_sign_posn: 0 // see p_sign_posn &#125;, LC_NUMERIC: &#123; // based on Windows \"english\" (English_United States.1252) locale decimal_point: '.', thousands_sep: ',', grouping: [3] // see mon_grouping, but for non-monetary values (use thousands_sep) &#125;, LC_MESSAGES: &#123; YESEXPR: '^[yY].*', NOEXPR: '^[nN].*', YESSTR: '', NOSTR: '' &#125;, nplurals: _nplurals2a &#125; $locutus.php.locales.en_US = _copy($locutus.php.locales.en) $locutus.php.locales.en_US.LC_TIME.c = '%a %d %b %Y %r %Z' $locutus.php.locales.en_US.LC_TIME.x = '%D' $locutus.php.locales.en_US.LC_TIME.X = '%r' // The following are based on *nix settings $locutus.php.locales.en_US.LC_MONETARY.int_curr_symbol = 'USD ' $locutus.php.locales.en_US.LC_MONETARY.p_sign_posn = 1 $locutus.php.locales.en_US.LC_MONETARY.n_sign_posn = 1 $locutus.php.locales.en_US.LC_MONETARY.mon_grouping = [3, 3] $locutus.php.locales.en_US.LC_NUMERIC.thousands_sep = '' $locutus.php.locales.en_US.LC_NUMERIC.grouping = [] $locutus.php.locales.en_GB = _copy($locutus.php.locales.en) $locutus.php.locales.en_GB.LC_TIME.r = '%l:%M:%S %P %Z' $locutus.php.locales.en_AU = _copy($locutus.php.locales.en_GB) // Assume C locale is like English (?) (We need C locale for LC_CTYPE) $locutus.php.locales.C = _copy($locutus.php.locales.en) $locutus.php.locales.C.LC_CTYPE.CODESET = 'ANSI_X3.4-1968' $locutus.php.locales.C.LC_MONETARY = &#123; int_curr_symbol: '', currency_symbol: '', mon_decimal_point: '', mon_thousands_sep: '', mon_grouping: [], p_cs_precedes: 127, p_sep_by_space: 127, n_cs_precedes: 127, n_sep_by_space: 127, p_sign_posn: 127, n_sign_posn: 127, positive_sign: '', negative_sign: '', int_frac_digits: 127, frac_digits: 127 &#125; $locutus.php.locales.C.LC_NUMERIC = &#123; decimal_point: '.', thousands_sep: '', grouping: [] &#125; // D_T_FMT $locutus.php.locales.C.LC_TIME.c = '%a %b %e %H:%M:%S %Y' // D_FMT $locutus.php.locales.C.LC_TIME.x = '%m/%d/%y' // T_FMT $locutus.php.locales.C.LC_TIME.X = '%H:%M:%S' $locutus.php.locales.C.LC_MESSAGES.YESEXPR = '^[yY]' $locutus.php.locales.C.LC_MESSAGES.NOEXPR = '^[nN]' $locutus.php.locales.fr = _copy($locutus.php.locales.en) $locutus.php.locales.fr.nplurals = _nplurals2b $locutus.php.locales.fr.LC_TIME.a = ['dim', 'lun', 'mar', 'mer', 'jeu', 'ven', 'sam'] $locutus.php.locales.fr.LC_TIME.A = ['dimanche', 'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'] $locutus.php.locales.fr.LC_TIME.b = ['jan', 'f\\u00E9v', 'mar', 'avr', 'mai', 'jun', 'jui', 'ao\\u00FB', 'sep', 'oct', 'nov', 'd\\u00E9c' ] $locutus.php.locales.fr.LC_TIME.B = ['janvier', 'f\\u00E9vrier', 'mars', 'avril', 'mai', 'juin', 'juillet', 'ao\\u00FBt', 'septembre', 'octobre', 'novembre', 'd\\u00E9cembre' ] $locutus.php.locales.fr.LC_TIME.c = '%a %d %b %Y %T %Z' $locutus.php.locales.fr.LC_TIME.p = ['', ''] $locutus.php.locales.fr.LC_TIME.P = ['', ''] $locutus.php.locales.fr.LC_TIME.x = '%d.%m.%Y' $locutus.php.locales.fr.LC_TIME.X = '%T' $locutus.php.locales.fr_CA = _copy($locutus.php.locales.fr) $locutus.php.locales.fr_CA.LC_TIME.x = '%Y-%m-%d' &#125; if (!$locutus.php.locale) &#123; $locutus.php.locale = 'en_US' // Try to establish the locale via the `window` global if (typeof window !== 'undefined' &amp;&amp; window.document) &#123; const d = window.document const NS_XHTML = 'https://www.w3.org/1999/xhtml' const NS_XML = 'https://www.w3.org/XML/1998/namespace' if (d.getElementsByTagNameNS &amp;&amp; d.getElementsByTagNameNS(NS_XHTML, 'html')[0]) &#123; if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS &amp;&amp; d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS(NS_XML, 'lang')) &#123; $locutus.php.locale = d.getElementsByTagName(NS_XHTML, 'html')[0] .getAttributeNS(NS_XML, 'lang') &#125; else if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang) &#123; // XHTML 1.0 only $locutus.php.locale = d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang &#125; &#125; else if (d.getElementsByTagName('html')[0] &amp;&amp; d.getElementsByTagName('html')[0].lang) &#123; $locutus.php.locale = d.getElementsByTagName('html')[0].lang &#125; &#125; &#125; // PHP-style $locutus.php.locale = $locutus.php.locale.replace('-', '_') // @todo: locale if declared locale hasn't been defined if (!($locutus.php.locale in $locutus.php.locales)) &#123; if ($locutus.php.locale.replace(/_[a-zA-Z]+$/, '') in $locutus.php.locales) &#123; $locutus.php.locale = $locutus.php.locale.replace(/_[a-zA-Z]+$/, '') &#125; &#125; if (!$locutus.php.localeCategories) &#123; $locutus.php.localeCategories = &#123; LC_COLLATE: $locutus.php.locale, // for string comparison, see strcoll() LC_CTYPE: $locutus.php.locale, // for character classification and conversion, for example strtoupper() LC_MONETARY: $locutus.php.locale, // for localeconv() LC_NUMERIC: $locutus.php.locale, // for decimal separator (See also localeconv()) LC_TIME: $locutus.php.locale, // for date and time formatting with strftime() // for system responses (available if PHP was compiled with libintl): LC_MESSAGES: $locutus.php.locale &#125; &#125; if (locale === null || locale === '') &#123; locale = getenv(category) || getenv('LANG') &#125; else if (Object.prototype.toString.call(locale) === '[object Array]') &#123; for (i = 0; i &lt; locale.length; i++) &#123; if (!(locale[i] in $locutus.php.locales)) &#123; if (i === locale.length - 1) &#123; // none found return false &#125; continue &#125; locale = locale[i] break &#125; &#125; // Just get the locale if (locale === '0' || locale === 0) &#123; if (category === 'LC_ALL') &#123; for (categ in $locutus.php.localeCategories) &#123; // Add \".UTF-8\" or allow \".@latint\", etc. to the end? cats.push(categ + '=' + $locutus.php.localeCategories[categ]) &#125; return cats.join(';') &#125; return $locutus.php.localeCategories[category] &#125; if (!(locale in $locutus.php.locales)) &#123; // Locale not found return false &#125; // Set and get locale if (category === 'LC_ALL') &#123; for (categ in $locutus.php.localeCategories) &#123; $locutus.php.localeCategories[categ] = locale &#125; &#125; else &#123; $locutus.php.localeCategories[category] = locale &#125; return locale&#125;"},{"title":"PHP's sscanf in JavaScript","date":"2021-02-28T22:26:45.741Z","updated":"2021-02-28T22:26:45.741Z","comments":true,"path":"php/strings/sscanf/index.html","permalink":"https://locutus.io/php/strings/sscanf/index.html","excerpt":"","text":"module.exports = function sscanf (str, format) &#123; // discuss at: https://locutus.io/php/sscanf/ // original by: Brett Zamir (https://brett-zamir.me) // example 1: sscanf('SN/2350001', 'SN/%d') // returns 1: [2350001] // example 2: var myVar = &#123;&#125; // example 2: sscanf('SN/2350001', 'SN/%d', myVar) // example 2: var $result = myVar.value // returns 2: 2350001 // example 3: sscanf(\"10--20\", \"%2$d--%1$d\") // Must escape '$' in PHP, but not JS // returns 3: [20, 10] const retArr = [] const _NWS = /\\S/ const args = arguments let digit const _setExtraConversionSpecs = function (offset) &#123; // Since a mismatched character sets us off track from future // legitimate finds, we just scan // to the end for any other conversion specifications (besides a percent literal), // setting them to null // sscanf seems to disallow all conversion specification components (of sprintf) // except for type specifiers // Do not allow % in last char. class // var matches = format.match(/%[+-]?([ 0]|'.)?-?\\d*(\\.\\d+)?[bcdeufFosxX]/g); // Do not allow % in last char. class: const matches = format.slice(offset).match(/%[cdeEufgosxX]/g) // b, F,G give errors in PHP, but 'g', though also disallowed, doesn't if (matches) &#123; let lgth = matches.length while (lgth--) &#123; retArr.push(null) &#125; &#125; return _finish() &#125; var _finish = function () &#123; if (args.length === 2) &#123; return retArr &#125; for (var i = 0; i &lt; retArr.length; ++i) &#123; args[i + 2].value = retArr[i] &#125; return i &#125; const _addNext = function (j, regex, cb) &#123; if (assign) &#123; const remaining = str.slice(j) const check = width ? remaining.substr(0, width) : remaining const match = regex.exec(check) // @todo: Make this more readable const key = digit !== undefined ? digit : retArr.length const testNull = retArr[key] = match ? (cb ? cb.apply(null, match) : match[0]) : null if (testNull === null) &#123; throw new Error('No match in string') &#125; return j + match[0].length &#125; return j &#125; if (arguments.length &lt; 2) &#123; throw new Error('Not enough arguments passed to sscanf') &#125; // PROCESS for (let i = 0, j = 0; i &lt; format.length; i++) &#123; var width = 0 var assign = true if (format.charAt(i) === '%') &#123; if (format.charAt(i + 1) === '%') &#123; if (str.charAt(j) === '%') &#123; // a matched percent literal // skip beyond duplicated percent ++i ++j continue &#125; // Format indicated a percent literal, but not actually present return _setExtraConversionSpecs(i + 2) &#125; // CHARACTER FOLLOWING PERCENT IS NOT A PERCENT // We need 'g' set to get lastIndex const prePattern = new RegExp('^(?:(\\\\d+)\\\\$)?(\\\\*)?(\\\\d*)([hlL]?)', 'g') const preConvs = prePattern.exec(format.slice(i + 1)) const tmpDigit = digit if (tmpDigit &amp;&amp; preConvs[1] === undefined) &#123; let msg = 'All groups in sscanf() must be expressed as numeric if ' msg += 'any have already been used' throw new Error(msg) &#125; digit = preConvs[1] ? parseInt(preConvs[1], 10) - 1 : undefined assign = !preConvs[2] width = parseInt(preConvs[3], 10) const sizeCode = preConvs[4] i += prePattern.lastIndex // @todo: Does PHP do anything with these? Seems not to matter if (sizeCode) &#123; // This would need to be processed later switch (sizeCode) &#123; case 'h': case 'l': case 'L': // Treats subsequent as short int (for d,i,n) or unsigned short int (for o,u,x) // Treats subsequent as long int (for d,i,n), or unsigned long int (for o,u,x); // or as double (for e,f,g) instead of float or wchar_t instead of char // Treats subsequent as long double (for e,f,g) break default: throw new Error('Unexpected size specifier in sscanf()!') &#125; &#125; // PROCESS CHARACTER try &#123; // For detailed explanations, see https://web.archive.org/web/20031128125047/https://www.uwm.edu/cgi-bin/IMT/wwwman?topic=scanf%283%29&amp;msection= // Also https://www.mathworks.com/access/helpdesk/help/techdoc/ref/sscanf.html // p, S, C arguments in C function not available // DOCUMENTED UNDER SSCANF switch (format.charAt(i + 1)) &#123; case 'F': // Not supported in PHP sscanf; the argument is treated as a float, and // presented as a floating-point number (non-locale aware) // sscanf doesn't support locales, so no need for two (see %f) break case 'g': // Not supported in PHP sscanf; shorter of %e and %f // Irrelevant to input conversion break case 'G': // Not supported in PHP sscanf; shorter of %E and %f // Irrelevant to input conversion break case 'b': // Not supported in PHP sscanf; the argument is treated as an integer, // and presented as a binary number // Not supported - couldn't distinguish from other integers break case 'i': // Integer with base detection (Equivalent of 'd', but base 0 instead of 10) var pattern = /([+-])?(?:(?:0x([\\da-fA-F]+))|(?:0([0-7]+))|(\\d+))/ j = _addNext(j, pattern, function (num, sign, hex, oct, dec) &#123; return hex ? parseInt(num, 16) : oct ? parseInt(num, 8) : parseInt(num, 10) &#125;) break case 'n': // Number of characters processed so far retArr[digit !== undefined ? digit : retArr.length - 1] = j break // DOCUMENTED UNDER SPRINTF case 'c': // Get character; suppresses skipping over whitespace! // (but shouldn't be whitespace in format anyways, so no difference here) // Non-greedy match j = _addNext(j, new RegExp('.&#123;1,' + (width || 1) + '&#125;')) break case 'D': case 'd': // sscanf documented decimal number; equivalent of 'd'; // Optionally signed decimal integer j = _addNext(j, /([+-])?(?:0*)(\\d+)/, function (num, sign, dec) &#123; // Ignores initial zeroes, unlike %i and parseInt() const decInt = parseInt((sign || '') + dec, 10) if (decInt &lt; 0) &#123; // PHP also won't allow less than -2147483648 // integer overflow with negative return decInt &lt; -2147483648 ? -2147483648 : decInt &#125; else &#123; // PHP also won't allow greater than -2147483647 return decInt &lt; 2147483647 ? decInt : 2147483647 &#125; &#125;) break case 'f': case 'E': case 'e': // Although sscanf doesn't support locales, // this is used instead of '%F'; seems to be same as %e // These don't discriminate here as both allow exponential float of either case j = _addNext(j, /([+-])?(?:0*)(\\d*\\.?\\d*(?:[eE]?\\d+)?)/, function (num, sign, dec) &#123; if (dec === '.') &#123; return null &#125; // Ignores initial zeroes, unlike %i and parseFloat() return parseFloat((sign || '') + dec) &#125;) break case 'u': // unsigned decimal integer // We won't deal with integer overflows due to signs j = _addNext(j, /([+-])?(?:0*)(\\d+)/, function (num, sign, dec) &#123; // Ignores initial zeroes, unlike %i and parseInt() const decInt = parseInt(dec, 10) if (sign === '-') &#123; // PHP also won't allow greater than 4294967295 // integer overflow with negative return 4294967296 - decInt &#125; else &#123; return decInt &lt; 4294967295 ? decInt : 4294967295 &#125; &#125;) break case 'o': // Octal integer // @todo: add overflows as above? j = _addNext(j, /([+-])?(?:0([0-7]+))/, function (num, sign, oct) &#123; return parseInt(num, 8) &#125;) break case 's': // Greedy match j = _addNext(j, /\\S+/) break case 'X': case 'x': // Same as 'x'? // @todo: add overflows as above? // Initial 0x not necessary here j = _addNext(j, /([+-])?(?:(?:0x)?([\\da-fA-F]+))/, function (num, sign, hex) &#123; return parseInt(num, 16) &#125;) break case '': // If no character left in expression throw new Error('Missing character after percent mark in sscanf() format argument') default: throw new Error('Unrecognized character after percent mark in sscanf() format argument') &#125; &#125; catch (e) &#123; if (e === 'No match in string') &#123; // Allow us to exit return _setExtraConversionSpecs(i + 2) &#125; // Calculate skipping beyond initial percent too &#125; ++i &#125; else if (format.charAt(i) !== str.charAt(j)) &#123; // @todo: Double-check i whitespace ignored in string and/or formats _NWS.lastIndex = 0 if ((_NWS) .test(str.charAt(j)) || str.charAt(j) === '') &#123; // Whitespace doesn't need to be an exact match) return _setExtraConversionSpecs(i + 1) &#125; else &#123; // Adjust strings when encounter non-matching whitespace, // so they align in future checks above // Ok to replace with j++;? str = str.slice(0, j) + str.slice(j + 1) i-- &#125; &#125; else &#123; j++ &#125; &#125; // POST-PROCESSING return _finish()&#125;"},{"title":"PHP's unserialize in JavaScript","date":"2021-02-28T22:26:45.833Z","updated":"2021-02-28T22:26:45.833Z","comments":true,"path":"php/var/unserialize/index.html","permalink":"https://locutus.io/php/var/unserialize/index.html","excerpt":"","text":"function initCache () &#123; const store = [] // cache only first element, second is length to jump ahead for the parser const cache = function cache (value) &#123; store.push(value[0]) return value &#125; cache.get = (index) =&gt; &#123; if (index &gt;= store.length) &#123; throw RangeError(`Can't resolve reference $&#123;index + 1&#125;`) &#125; return store[index] &#125; return cache&#125;function expectType (str, cache) &#123; const types = /^(?:N(?=;)|[bidsSaOCrR](?=:)|[^:]+(?=:))/g const type = (types.exec(str) || [])[0] if (!type) &#123; throw SyntaxError('Invalid input: ' + str) &#125; switch (type) &#123; case 'N': return cache([null, 2]) case 'b': return cache(expectBool(str)) case 'i': return cache(expectInt(str)) case 'd': return cache(expectFloat(str)) case 's': return cache(expectString(str)) case 'S': return cache(expectEscapedString(str)) case 'a': return expectArray(str, cache) case 'O': return expectObject(str, cache) case 'C': return expectClass(str, cache) case 'r': case 'R': return expectReference(str, cache) default: throw SyntaxError(`Invalid or unsupported data type: $&#123;type&#125;`) &#125;&#125;function expectBool (str) &#123; const reBool = /^b:([01]);/ const [match, boolMatch] = reBool.exec(str) || [] if (!boolMatch) &#123; throw SyntaxError('Invalid bool value, expected 0 or 1') &#125; return [boolMatch === '1', match.length]&#125;function expectInt (str) &#123; const reInt = /^i:([+-]?\\d+);/ const [match, intMatch] = reInt.exec(str) || [] if (!intMatch) &#123; throw SyntaxError('Expected an integer value') &#125; return [parseInt(intMatch, 10), match.length]&#125;function expectFloat (str) &#123; const reFloat = /^d:(NAN|-?INF|(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+)(?:[eE][+-]\\d+)?);/ const [match, floatMatch] = reFloat.exec(str) || [] if (!floatMatch) &#123; throw SyntaxError('Expected a float value') &#125; let floatValue switch (floatMatch) &#123; case 'NAN': floatValue = Number.NaN break case '-INF': floatValue = Number.NEGATIVE_INFINITY break case 'INF': floatValue = Number.POSITIVE_INFINITY break default: floatValue = parseFloat(floatMatch) break &#125; return [floatValue, match.length]&#125;function readBytes (str, len, escapedString = false) &#123; let bytes = 0 let out = '' let c = 0 const strLen = str.length let wasHighSurrogate = false let escapedChars = 0 while (bytes &lt; len &amp;&amp; c &lt; strLen) &#123; let chr = str.charAt(c) const code = chr.charCodeAt(0) const isHighSurrogate = code &gt;= 0xd800 &amp;&amp; code &lt;= 0xdbff const isLowSurrogate = code &gt;= 0xdc00 &amp;&amp; code &lt;= 0xdfff if (escapedString &amp;&amp; chr === '\\\\') &#123; chr = String.fromCharCode(parseInt(str.substr(c + 1, 2), 16)) escapedChars++ // each escaped sequence is 3 characters. Go 2 chars ahead. // third character will be jumped over a few lines later c += 2 &#125; c++ bytes += isHighSurrogate || (isLowSurrogate &amp;&amp; wasHighSurrogate) // if high surrogate, count 2 bytes, as expectation is to be followed by low surrogate // if low surrogate preceded by high surrogate, add 2 bytes ? 2 : code &gt; 0x7ff // otherwise low surrogate falls into this part ? 3 : code &gt; 0x7f ? 2 : 1 // if high surrogate is not followed by low surrogate, add 1 more byte bytes += wasHighSurrogate &amp;&amp; !isLowSurrogate ? 1 : 0 out += chr wasHighSurrogate = isHighSurrogate &#125; return [out, bytes, escapedChars]&#125;function expectString (str) &#123; // PHP strings consist of one-byte characters. // JS uses 2 bytes with possible surrogate pairs. // Serialized length of 2 is still 1 JS string character const reStrLength = /^s:(\\d+):\"/g // also match the opening \" char const [match, byteLenMatch] = reStrLength.exec(str) || [] if (!match) &#123; throw SyntaxError('Expected a string value') &#125; const len = parseInt(byteLenMatch, 10) str = str.substr(match.length) const [strMatch, bytes] = readBytes(str, len) if (bytes !== len) &#123; throw SyntaxError(`Expected string of $&#123;len&#125; bytes, but got $&#123;bytes&#125;`) &#125; str = str.substr(strMatch.length) // strict parsing, match closing \"; chars if (!str.startsWith('\";')) &#123; throw SyntaxError('Expected \";') &#125; return [strMatch, match.length + strMatch.length + 2] // skip last \";&#125;function expectEscapedString (str) &#123; const reStrLength = /^S:(\\d+):\"/g // also match the opening \" char const [match, strLenMatch] = reStrLength.exec(str) || [] if (!match) &#123; throw SyntaxError('Expected an escaped string value') &#125; const len = parseInt(strLenMatch, 10) str = str.substr(match.length) const [strMatch, bytes, escapedChars] = readBytes(str, len, true) if (bytes !== len) &#123; throw SyntaxError(`Expected escaped string of $&#123;len&#125; bytes, but got $&#123;bytes&#125;`) &#125; str = str.substr(strMatch.length + escapedChars * 2) // strict parsing, match closing \"; chars if (!str.startsWith('\";')) &#123; throw SyntaxError('Expected \";') &#125; return [strMatch, match.length + strMatch.length + 2] // skip last \";&#125;function expectKeyOrIndex (str) &#123; try &#123; return expectString(str) &#125; catch (err) &#123;&#125; try &#123; return expectEscapedString(str) &#125; catch (err) &#123;&#125; try &#123; return expectInt(str) &#125; catch (err) &#123; throw SyntaxError('Expected key or index') &#125;&#125;function expectObject (str, cache) &#123; // O:&lt;class name length&gt;:\"class name\":&lt;prop count&gt;:&#123;&lt;props and values&gt;&#125; // O:8:\"stdClass\":2:&#123;s:3:\"foo\";s:3:\"bar\";s:3:\"bar\";s:3:\"baz\";&#125; const reObjectLiteral = /^O:(\\d+):\"([^\"]+)\":(\\d+):\\&#123;/ const [objectLiteralBeginMatch, /* classNameLengthMatch */, className, propCountMatch] = reObjectLiteral.exec(str) || [] if (!objectLiteralBeginMatch) &#123; throw SyntaxError('Invalid input') &#125; if (className !== 'stdClass') &#123; throw SyntaxError(`Unsupported object type: $&#123;className&#125;`) &#125; let totalOffset = objectLiteralBeginMatch.length const propCount = parseInt(propCountMatch, 10) const obj = &#123;&#125; cache([obj]) str = str.substr(totalOffset) for (let i = 0; i &lt; propCount; i++) &#123; const prop = expectKeyOrIndex(str) str = str.substr(prop[1]) totalOffset += prop[1] const value = expectType(str, cache) str = str.substr(value[1]) totalOffset += value[1] obj[prop[0]] = value[0] &#125; // strict parsing, expect &#125; after object literal if (str.charAt(0) !== '&#125;') &#123; throw SyntaxError('Expected &#125;') &#125; return [obj, totalOffset + 1] // skip final &#125;&#125;function expectClass (str, cache) &#123; // can't be well supported, because requires calling eval (or similar) // in order to call serialized constructor name // which is unsafe // or assume that constructor is defined in global scope // but this is too much limiting throw Error('Not yet implemented')&#125;function expectReference (str, cache) &#123; const reRef = /^[rR]:([1-9]\\d*);/ const [match, refIndex] = reRef.exec(str) || [] if (!match) &#123; throw SyntaxError('Expected reference value') &#125; return [cache.get(parseInt(refIndex, 10) - 1), match.length]&#125;function expectArray (str, cache) &#123; const reArrayLength = /^a:(\\d+):&#123;/ const [arrayLiteralBeginMatch, arrayLengthMatch] = reArrayLength.exec(str) || [] if (!arrayLengthMatch) &#123; throw SyntaxError('Expected array length annotation') &#125; str = str.substr(arrayLiteralBeginMatch.length) const array = expectArrayItems(str, parseInt(arrayLengthMatch, 10), cache) // strict parsing, expect closing &#125; brace after array literal if (str.charAt(array[1]) !== '&#125;') &#123; throw SyntaxError('Expected &#125;') &#125; return [array[0], arrayLiteralBeginMatch.length + array[1] + 1] // jump over &#125;&#125;function expectArrayItems (str, expectedItems = 0, cache) &#123; let key let hasStringKeys = false let item let totalOffset = 0 let items = [] cache([items]) for (let i = 0; i &lt; expectedItems; i++) &#123; key = expectKeyOrIndex(str) // this is for backward compatibility with previous implementation if (!hasStringKeys) &#123; hasStringKeys = (typeof key[0] === 'string') &#125; str = str.substr(key[1]) totalOffset += key[1] // references are resolved immediately, so if duplicate key overwrites previous array index // the old value is anyway resolved // fixme: but next time the same reference should point to the new value item = expectType(str, cache) str = str.substr(item[1]) totalOffset += item[1] items[key[0]] = item[0] &#125; // this is for backward compatibility with previous implementation if (hasStringKeys) &#123; items = Object.assign(&#123;&#125;, items) &#125; return [items, totalOffset]&#125;module.exports = function unserialize (str) &#123; // discuss at: https://locutus.io/php/unserialize/ // original by: Arpad Ray (mailto:arpad@php.net) // improved by: Pedro Tainha (https://www.pedrotainha.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Chris // improved by: James // improved by: Le Torbi // improved by: Eli Skeggs // bugfixed by: dptr1988 // bugfixed by: Kevin van Zonneveld (https://kvz.io) // bugfixed by: Brett Zamir (https://brett-zamir.me) // bugfixed by: philippsimon (https://github.com/philippsimon/) // revised by: d3x // input by: Brett Zamir (https://brett-zamir.me) // input by: Martin (https://www.erlenwiese.de/) // input by: kilops // input by: Jaroslaw Czarniak // input by: lovasoa (https://github.com/lovasoa/) // improved by: Rafał Kukawski // reimplemented by: Rafał Kukawski // note 1: We feel the main purpose of this function should be // note 1: to ease the transport of data between php &amp; js // note 1: Aiming for PHP-compatibility, we have to translate objects to arrays // example 1: unserialize('a:3:&#123;i:0;s:5:\"Kevin\";i:1;s:3:\"van\";i:2;s:9:\"Zonneveld\";&#125;') // returns 1: ['Kevin', 'van', 'Zonneveld'] // example 2: unserialize('a:2:&#123;s:9:\"firstName\";s:5:\"Kevin\";s:7:\"midName\";s:3:\"van\";&#125;') // returns 2: &#123;firstName: 'Kevin', midName: 'van'&#125; // example 3: unserialize('a:3:&#123;s:2:\"ü\";s:2:\"ü\";s:3:\"四\";s:3:\"四\";s:4:\"𠜎\";s:4:\"𠜎\";&#125;') // returns 3: &#123;'ü': 'ü', '四': '四', '𠜎': '𠜎'&#125; // example 4: unserialize(undefined) // returns 4: false // example 5: unserialize('O:8:\"stdClass\":1:&#123;s:3:\"foo\";b:1;&#125;') // returns 5: &#123; foo: true &#125; // example 6: unserialize('a:2:&#123;i:0;N;i:1;s:0:\"\";&#125;') // returns 6: [null, \"\"] // example 7: unserialize('S:7:\"\\\\65\\\\73\\\\63\\\\61\\\\70\\\\65\\\\64\";') // returns 7: 'escaped' try &#123; if (typeof str !== 'string') &#123; return false &#125; return expectType(str, initCache())[0] &#125; catch (err) &#123; console.error(err) return false &#125;&#125;"},{"title":"PHP's xdiff_string_diff in JavaScript","date":"2021-02-28T22:26:45.833Z","updated":"2021-02-28T22:26:45.833Z","comments":true,"path":"php/xdiff/xdiff_string_diff/index.html","permalink":"https://locutus.io/php/xdiff/xdiff_string_diff/index.html","excerpt":"","text":"module.exports = function xdiff_string_diff (oldData, newData, contextLines, minimal) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/xdiff_string_diff // original by: Brett Zamir (https://brett-zamir.me) // based on: Imgen Tata (https://www.myipdf.com/) // bugfixed by: Imgen Tata (https://www.myipdf.com/) // improved by: Brett Zamir (https://brett-zamir.me) // note 1: The minimal argument is not currently supported // example 1: xdiff_string_diff('', 'Hello world!') // returns 1: '@@ -0,0 +1,1 @@\\n+Hello world!' // (This code was done by Imgen Tata; I have only reformatted for use in Locutus) // See https://en.wikipedia.org/wiki/Diff#Unified_format let i = 0 let j = 0 let k = 0 let oriHunkStart let newHunkStart let oriHunkEnd let newHunkEnd let oriHunkLineNo let newHunkLineNo let oriHunkSize let newHunkSize const MAX_CONTEXT_LINES = Number.POSITIVE_INFINITY // Potential configuration const MIN_CONTEXT_LINES = 0 const DEFAULT_CONTEXT_LINES = 3 const HEADER_PREFIX = '@@ ' // const HEADER_SUFFIX = ' @@' const ORIGINAL_INDICATOR = '-' const NEW_INDICATOR = '+' const RANGE_SEPARATOR = ',' const CONTEXT_INDICATOR = ' ' const DELETION_INDICATOR = '-' const ADDITION_INDICATOR = '+' let oriLines let newLines const NEW_LINE = '\\n' const _trim = function (text) &#123; if (typeof text !== 'string') &#123; throw new Error('String parameter required') &#125; return text.replace(/(^\\s*)|(\\s*$)/g, '') &#125; const _verifyType = function (type) &#123; const args = arguments const argsLen = arguments.length const basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined'] let basicType let i let j const typeOfType = typeof type if (typeOfType !== 'string' &amp;&amp; typeOfType !== 'function') &#123; throw new Error('Bad type parameter') &#125; if (argsLen &lt; 2) &#123; throw new Error('Too few arguments') &#125; if (typeOfType === 'string') &#123; type = _trim(type) if (type === '') &#123; throw new Error('Bad type parameter') &#125; for (j = 0; j &lt; basicTypes.length; j++) &#123; basicType = basicTypes[j] if (basicType === type) &#123; for (i = 1; i &lt; argsLen; i++) &#123; if (typeof args[i] !== type) &#123; throw new Error('Bad type') &#125; &#125; return &#125; &#125; throw new Error('Bad type parameter') &#125; // Not basic type. we need to use instanceof operator for (i = 1; i &lt; argsLen; i++) &#123; if (!(args[i] instanceof type)) &#123; throw new Error('Bad type') &#125; &#125; &#125; const _hasValue = function (array, value) &#123; let i _verifyType(Array, array) for (i = 0; i &lt; array.length; i++) &#123; if (array[i] === value) &#123; return true &#125; &#125; return false &#125; const _areTypeOf = function (type) &#123; const args = arguments const argsLen = arguments.length const basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined'] let basicType let i let j const typeOfType = typeof type if (typeOfType !== 'string' &amp;&amp; typeOfType !== 'function') &#123; throw new Error('Bad type parameter') &#125; if (argsLen &lt; 2) &#123; throw new Error('Too few arguments') &#125; if (typeOfType === 'string') &#123; type = _trim(type) if (type === '') &#123; return false &#125; for (j = 0; j &lt; basicTypes.length; j++) &#123; basicType = basicTypes[j] if (basicType === type) &#123; for (i = 1; i &lt; argsLen; i++) &#123; if (typeof args[i] !== type) &#123; return false &#125; &#125; return true &#125; &#125; throw new Error('Bad type parameter') &#125; // Not basic type. we need to use instanceof operator for (i = 1; i &lt; argsLen; i++) &#123; if (!(args[i] instanceof type)) &#123; return false &#125; &#125; return true &#125; const _getInitializedArray = function (arraySize, initValue) &#123; const array = [] let i _verifyType('number', arraySize) for (i = 0; i &lt; arraySize; i++) &#123; array.push(initValue) &#125; return array &#125; const _splitIntoLines = function (text) &#123; _verifyType('string', text) if (text === '') &#123; return [] &#125; return text.split('\\n') &#125; const _isEmptyArray = function (obj) &#123; return _areTypeOf(Array, obj) &amp;&amp; obj.length === 0 &#125; /** * Finds longest common sequence between two sequences * @see &#123;@link https://wordaligned.org/articles/longest-common-subsequence&#125; */ const _findLongestCommonSequence = function (seq1, seq2, seq1IsInLcs, seq2IsInLcs) &#123; if (!_areTypeOf(Array, seq1, seq2)) &#123; throw new Error('Array parameters are required') &#125; // Deal with edge case if (_isEmptyArray(seq1) || _isEmptyArray(seq2)) &#123; return [] &#125; // Function to calculate lcs lengths const lcsLens = function (xs, ys) &#123; let i let j let prev const curr = _getInitializedArray(ys.length + 1, 0) for (i = 0; i &lt; xs.length; i++) &#123; prev = curr.slice(0) for (j = 0; j &lt; ys.length; j++) &#123; if (xs[i] === ys[j]) &#123; curr[j + 1] = prev[j] + 1 &#125; else &#123; curr[j + 1] = Math.max(curr[j], prev[j + 1]) &#125; &#125; &#125; return curr &#125; // Function to find lcs and fill in the array to indicate the optimal longest common sequence var _findLcs = function (xs, xidx, xIsIn, ys) &#123; let i let xb let xe let llB let llE let pivot let max let yb let ye const nx = xs.length const ny = ys.length if (nx === 0) &#123; return [] &#125; if (nx === 1) &#123; if (_hasValue(ys, xs[0])) &#123; xIsIn[xidx] = true return [xs[0]] &#125; return [] &#125; i = Math.floor(nx / 2) xb = xs.slice(0, i) xe = xs.slice(i) llB = lcsLens(xb, ys) llE = lcsLens(xe.slice(0) .reverse(), ys.slice(0) .reverse()) pivot = 0 max = 0 for (j = 0; j &lt;= ny; j++) &#123; if (llB[j] + llE[ny - j] &gt; max) &#123; pivot = j max = llB[j] + llE[ny - j] &#125; &#125; yb = ys.slice(0, pivot) ye = ys.slice(pivot) return _findLcs(xb, xidx, xIsIn, yb).concat(_findLcs(xe, xidx + i, xIsIn, ye)) &#125; // Fill in seq1IsInLcs to find the optimal longest common subsequence of first sequence _findLcs(seq1, 0, seq1IsInLcs, seq2) // Fill in seq2IsInLcs to find the optimal longest common subsequence // of second sequence and return the result return _findLcs(seq2, 0, seq2IsInLcs, seq1) &#125; // First, check the parameters if (_areTypeOf('string', oldData, newData) === false) &#123; return false &#125; if (oldData === newData) &#123; return '' &#125; if (typeof contextLines !== 'number' || contextLines &gt; MAX_CONTEXT_LINES || contextLines &lt; MIN_CONTEXT_LINES) &#123; contextLines = DEFAULT_CONTEXT_LINES &#125; oriLines = _splitIntoLines(oldData) newLines = _splitIntoLines(newData) const oriLen = oriLines.length const newLen = newLines.length const oriIsInLcs = _getInitializedArray(oriLen, false) const newIsInLcs = _getInitializedArray(newLen, false) const lcsLen = _findLongestCommonSequence(oriLines, newLines, oriIsInLcs, newIsInLcs).length let unidiff = '' if (lcsLen === 0) &#123; // No common sequence unidiff = [ HEADER_PREFIX, ORIGINAL_INDICATOR, (oriLen &gt; 0 ? '1' : '0'), RANGE_SEPARATOR, oriLen, ' ', NEW_INDICATOR, (newLen &gt; 0 ? '1' : '0'), RANGE_SEPARATOR, newLen, HEADER_SUFFIX ].join('') for (i = 0; i &lt; oriLen; i++) &#123; unidiff += NEW_LINE + DELETION_INDICATOR + oriLines[i] &#125; for (j = 0; j &lt; newLen; j++) &#123; unidiff += NEW_LINE + ADDITION_INDICATOR + newLines[j] &#125; return unidiff &#125; let leadingContext = [] let trailingContext = [] let actualLeadingContext = [] let actualTrailingContext = [] // Regularize leading context by the contextLines parameter const regularizeLeadingContext = function (context) &#123; if (context.length === 0 || contextLines === 0) &#123; return [] &#125; const contextStartPos = Math.max(context.length - contextLines, 0) return context.slice(contextStartPos) &#125; // Regularize trailing context by the contextLines parameter const regularizeTrailingContext = function (context) &#123; if (context.length === 0 || contextLines === 0) &#123; return [] &#125; return context.slice(0, Math.min(contextLines, context.length)) &#125; // Skip common lines in the beginning while (i &lt; oriLen &amp;&amp; oriIsInLcs[i] === true &amp;&amp; newIsInLcs[i] === true) &#123; leadingContext.push(oriLines[i]) i++ &#125; j = i // The index in the longest common sequence k = i oriHunkStart = i newHunkStart = j oriHunkEnd = i newHunkEnd = j while (i &lt; oriLen || j &lt; newLen) &#123; while (i &lt; oriLen &amp;&amp; oriIsInLcs[i] === false) &#123; i++ &#125; oriHunkEnd = i while (j &lt; newLen &amp;&amp; newIsInLcs[j] === false) &#123; j++ &#125; newHunkEnd = j // Find the trailing context trailingContext = [] while (i &lt; oriLen &amp;&amp; oriIsInLcs[i] === true &amp;&amp; j &lt; newLen &amp;&amp; newIsInLcs[j] === true) &#123; trailingContext.push(oriLines[i]) k++ i++ j++ &#125; if (k &gt;= lcsLen || // No more in longest common lines trailingContext.length &gt;= 2 * contextLines) &#123; // Context break found if (trailingContext.length &lt; 2 * contextLines) &#123; // It must be last block of common lines but not a context break trailingContext = [] // Force break out i = oriLen j = newLen // Update hunk ends to force output to the end oriHunkEnd = oriLen newHunkEnd = newLen &#125; // Output the diff hunk // Trim the leading and trailing context block actualLeadingContext = regularizeLeadingContext(leadingContext) actualTrailingContext = regularizeTrailingContext(trailingContext) oriHunkStart -= actualLeadingContext.length newHunkStart -= actualLeadingContext.length oriHunkEnd += actualTrailingContext.length newHunkEnd += actualTrailingContext.length oriHunkLineNo = oriHunkStart + 1 newHunkLineNo = newHunkStart + 1 oriHunkSize = oriHunkEnd - oriHunkStart newHunkSize = newHunkEnd - newHunkStart // Build header unidiff += [ HEADER_PREFIX, ORIGINAL_INDICATOR, oriHunkLineNo, RANGE_SEPARATOR, oriHunkSize, ' ', NEW_INDICATOR, newHunkLineNo, RANGE_SEPARATOR, newHunkSize, HEADER_SUFFIX, NEW_LINE ].join('') // Build the diff hunk content while (oriHunkStart &lt; oriHunkEnd || newHunkStart &lt; newHunkEnd) &#123; if (oriHunkStart &lt; oriHunkEnd &amp;&amp; oriIsInLcs[oriHunkStart] === true &amp;&amp; newIsInLcs[newHunkStart] === true) &#123; // The context line unidiff += CONTEXT_INDICATOR + oriLines[oriHunkStart] + NEW_LINE oriHunkStart++ newHunkStart++ &#125; else if (oriHunkStart &lt; oriHunkEnd &amp;&amp; oriIsInLcs[oriHunkStart] === false) &#123; // The deletion line unidiff += DELETION_INDICATOR + oriLines[oriHunkStart] + NEW_LINE oriHunkStart++ &#125; else if (newHunkStart &lt; newHunkEnd &amp;&amp; newIsInLcs[newHunkStart] === false) &#123; // The additional line unidiff += ADDITION_INDICATOR + newLines[newHunkStart] + NEW_LINE newHunkStart++ &#125; &#125; // Update hunk position and leading context oriHunkStart = i newHunkStart = j leadingContext = trailingContext &#125; &#125; // Trim the trailing new line if it exists if (unidiff.length &gt; 0 &amp;&amp; unidiff.charAt(unidiff.length) === NEW_LINE) &#123; unidiff = unidiff.slice(0, -1) &#125; return unidiff&#125;"},{"title":"PHP's convert_cyr_string in JavaScript","date":"2021-02-28T22:26:45.685Z","updated":"2021-02-28T22:26:45.685Z","comments":true,"path":"php/strings/convert_cyr_string/index.html","permalink":"https://locutus.io/php/strings/convert_cyr_string/index.html","excerpt":"","text":"module.exports = function convert_cyr_string (str, from, to) &#123; // eslint-disable-line camelcase // discuss at: https://locutus.io/php/convert_cyr_string/ // original by: Brett Zamir (https://brett-zamir.me) // note 1: Assumes and converts to Unicode strings with character // note 1: code equivalents of the same numbers as in the from or // note 1: target character set; Note that neither the input or output // note 1: should be treated as actual Unicode, since the PHP function // note 1: this is original by does not either // note 1: One could easily represent (or convert the results) of a // note 1: string form as arrays of code points instead but since JavaScript // note 1: currently has no clear binary data type, we chose to use strings // note 1: as in PHP // example 1: convert_cyr_string(String.fromCharCode(214), 'k', 'w').charCodeAt(0) === 230; // Char. 214 of KOI8-R gives equivalent number value 230 in win1251 // returns 1: true const _cyrWin1251 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 154, 174, 190, 46, 159, 189, 46, 46, 179, 191, 180, 157, 46, 46, 156, 183, 46, 46, 182, 166, 173, 46, 46, 158, 163, 152, 164, 155, 46, 46, 46, 167, 225, 226, 247, 231, 228, 229, 246, 250, 233, 234, 235, 236, 237, 238, 239, 240, 242, 243, 244, 245, 230, 232, 227, 254, 251, 253, 255, 249, 248, 252, 224, 241, 193, 194, 215, 199, 196, 197, 214, 218, 201, 202, 203, 204, 205, 206, 207, 208, 210, 211, 212, 213, 198, 200, 195, 222, 219, 221, 223, 217, 216, 220, 192, 209, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 184, 186, 32, 179, 191, 32, 32, 32, 32, 32, 180, 162, 32, 32, 32, 32, 168, 170, 32, 178, 175, 32, 32, 32, 32, 32, 165, 161, 169, 254, 224, 225, 246, 228, 229, 244, 227, 245, 232, 233, 234, 235, 236, 237, 238, 239, 255, 240, 241, 242, 243, 230, 226, 252, 251, 231, 248, 253, 249, 247, 250, 222, 192, 193, 214, 196, 197, 212, 195, 213, 200, 201, 202, 203, 204, 205, 206, 207, 223, 208, 209, 210, 211, 198, 194, 220, 219, 199, 216, 221, 217, 215, 218 ] const _cyrCp866 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 225, 226, 247, 231, 228, 229, 246, 250, 233, 234, 235, 236, 237, 238, 239, 240, 242, 243, 244, 245, 230, 232, 227, 254, 251, 253, 255, 249, 248, 252, 224, 241, 193, 194, 215, 199, 196, 197, 214, 218, 201, 202, 203, 204, 205, 206, 207, 208, 35, 35, 35, 124, 124, 124, 124, 43, 43, 124, 124, 43, 43, 43, 43, 43, 43, 45, 45, 124, 45, 43, 124, 124, 43, 43, 45, 45, 124, 45, 43, 45, 45, 45, 45, 43, 43, 43, 43, 43, 43, 43, 43, 35, 35, 124, 124, 35, 210, 211, 212, 213, 198, 200, 195, 222, 219, 221, 223, 217, 216, 220, 192, 209, 179, 163, 180, 164, 183, 167, 190, 174, 32, 149, 158, 32, 152, 159, 148, 154, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 205, 186, 213, 241, 243, 201, 32, 245, 187, 212, 211, 200, 190, 32, 247, 198, 199, 204, 181, 240, 242, 185, 32, 244, 203, 207, 208, 202, 216, 32, 246, 32, 238, 160, 161, 230, 164, 165, 228, 163, 229, 168, 169, 170, 171, 172, 173, 174, 175, 239, 224, 225, 226, 227, 166, 162, 236, 235, 167, 232, 237, 233, 231, 234, 158, 128, 129, 150, 132, 133, 148, 131, 149, 136, 137, 138, 139, 140, 141, 142, 143, 159, 144, 145, 146, 147, 134, 130, 156, 155, 135, 152, 157, 153, 151, 154 ] const _cyrIso88595 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 179, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 225, 226, 247, 231, 228, 229, 246, 250, 233, 234, 235, 236, 237, 238, 239, 240, 242, 243, 244, 245, 230, 232, 227, 254, 251, 253, 255, 249, 248, 252, 224, 241, 193, 194, 215, 199, 196, 197, 214, 218, 201, 202, 203, 204, 205, 206, 207, 208, 210, 211, 212, 213, 198, 200, 195, 222, 219, 221, 223, 217, 216, 220, 192, 209, 32, 163, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 241, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 161, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 238, 208, 209, 230, 212, 213, 228, 211, 229, 216, 217, 218, 219, 220, 221, 222, 223, 239, 224, 225, 226, 227, 214, 210, 236, 235, 215, 232, 237, 233, 231, 234, 206, 176, 177, 198, 180, 181, 196, 179, 197, 184, 185, 186, 187, 188, 189, 190, 191, 207, 192, 193, 194, 195, 182, 178, 204, 203, 183, 200, 205, 201, 199, 202 ] const _cyrMac = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 225, 226, 247, 231, 228, 229, 246, 250, 233, 234, 235, 236, 237, 238, 239, 240, 242, 243, 244, 245, 230, 232, 227, 254, 251, 253, 255, 249, 248, 252, 224, 241, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 179, 163, 209, 193, 194, 215, 199, 196, 197, 214, 218, 201, 202, 203, 204, 205, 206, 207, 208, 210, 211, 212, 213, 198, 200, 195, 222, 219, 221, 223, 217, 216, 220, 192, 255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 160, 161, 162, 222, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 221, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 254, 224, 225, 246, 228, 229, 244, 227, 245, 232, 233, 234, 235, 236, 237, 238, 239, 223, 240, 241, 242, 243, 230, 226, 252, 251, 231, 248, 253, 249, 247, 250, 158, 128, 129, 150, 132, 133, 148, 131, 149, 136, 137, 138, 139, 140, 141, 142, 143, 159, 144, 145, 146, 147, 134, 130, 156, 155, 135, 152, 157, 153, 151, 154 ] let fromTable = null let toTable = null let tmp let i = 0 let retStr = '' switch (from.toUpperCase()) &#123; case 'W': fromTable = _cyrWin1251 break case 'A': case 'D': fromTable = _cyrCp866 break case 'I': fromTable = _cyrIso88595 break case 'M': fromTable = _cyrMac break case 'K': break default: // Can we throw a warning instead? That would be more in line with PHP throw new Error('Unknown source charset: ' + fromTable) &#125; switch (to.toUpperCase()) &#123; case 'W': toTable = _cyrWin1251 break case 'A': case 'D': toTable = _cyrCp866 break case 'I': toTable = _cyrIso88595 break case 'M': toTable = _cyrMac break case 'K': break default: // Can we throw a warning instead? That would be more in line with PHP throw new Error('Unknown destination charset: ' + toTable) &#125; if (!str) &#123; return str &#125; for (i = 0; i &lt; str.length; i++) &#123; tmp = (fromTable === null) ? str.charAt(i) : String.fromCharCode(fromTable[str.charAt(i).charCodeAt(0)]) retStr += (toTable === null) ? tmp : String.fromCharCode(toTable[tmp.charCodeAt(0) + 256]) &#125; return retStr&#125;"},{"title":"PHP's strtotime in JavaScript","date":"2021-02-28T22:26:45.589Z","updated":"2021-02-28T22:26:45.589Z","comments":true,"path":"php/datetime/strtotime/index.html","permalink":"https://locutus.io/php/datetime/strtotime/index.html","excerpt":"","text":"const reSpace = '[ \\\\t]+'const reSpaceOpt = '[ \\\\t]*'const reMeridian = '(?:([ap])\\\\.?m\\\\.?([\\\\t ]|$))'const reHour24 = '(2[0-4]|[01]?[0-9])'const reHour24lz = '([01][0-9]|2[0-4])'const reHour12 = '(0?[1-9]|1[0-2])'const reMinute = '([0-5]?[0-9])'const reMinutelz = '([0-5][0-9])'const reSecond = '(60|[0-5]?[0-9])'const reSecondlz = '(60|[0-5][0-9])'const reFrac = '(?:\\\\.([0-9]+))'const reDayfull = 'sunday|monday|tuesday|wednesday|thursday|friday|saturday'const reDayabbr = 'sun|mon|tue|wed|thu|fri|sat'const reDaytext = reDayfull + '|' + reDayabbr + '|weekdays?'const reReltextnumber = 'first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth'const reReltexttext = 'next|last|previous|this'const reReltextunit = '(?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|' + reDaytextconst reYear = '([0-9]&#123;1,4&#125;)'const reYear2 = '([0-9]&#123;2&#125;)'const reYear4 = '([0-9]&#123;4&#125;)'const reYear4withSign = '([+-]?[0-9]&#123;4&#125;)'const reMonth = '(1[0-2]|0?[0-9])'const reMonthlz = '(0[0-9]|1[0-2])'const reDay = '(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)'const reDaylz = '(0[0-9]|[1-2][0-9]|3[01])'const reMonthFull = 'january|february|march|april|may|june|july|august|september|october|november|december'const reMonthAbbr = 'jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec'const reMonthroman = 'i[vx]|vi&#123;0,3&#125;|xi&#123;0,2&#125;|i&#123;1,3&#125;'const reMonthText = '(' + reMonthFull + '|' + reMonthAbbr + '|' + reMonthroman + ')'const reTzCorrection = '((?:GMT)?([+-])' + reHour24 + ':?' + reMinute + '?)'const reTzAbbr = '\\\\(?([a-zA-Z]&#123;1,6&#125;)\\\\)?'const reDayOfYear = '(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])'const reWeekOfYear = '(0[1-9]|[1-4][0-9]|5[0-3])'const reDateNoYear = reMonthText + '[ .\\\\t-]*' + reDay + '[,.stndrh\\\\t ]*'function processMeridian (hour, meridian) &#123; meridian = meridian &amp;&amp; meridian.toLowerCase() switch (meridian) &#123; case 'a': hour += hour === 12 ? -12 : 0 break case 'p': hour += hour !== 12 ? 12 : 0 break &#125; return hour&#125;function processYear (yearStr) &#123; let year = +yearStr if (yearStr.length &lt; 4 &amp;&amp; year &lt; 100) &#123; year += year &lt; 70 ? 2000 : 1900 &#125; return year&#125;function lookupMonth (monthStr) &#123; return &#123; jan: 0, january: 0, i: 0, feb: 1, february: 1, ii: 1, mar: 2, march: 2, iii: 2, apr: 3, april: 3, iv: 3, may: 4, v: 4, jun: 5, june: 5, vi: 5, jul: 6, july: 6, vii: 6, aug: 7, august: 7, viii: 7, sep: 8, sept: 8, september: 8, ix: 8, oct: 9, october: 9, x: 9, nov: 10, november: 10, xi: 10, dec: 11, december: 11, xii: 11 &#125;[monthStr.toLowerCase()]&#125;function lookupWeekday (dayStr, desiredSundayNumber = 0) &#123; const dayNumbers = &#123; mon: 1, monday: 1, tue: 2, tuesday: 2, wed: 3, wednesday: 3, thu: 4, thursday: 4, fri: 5, friday: 5, sat: 6, saturday: 6, sun: 0, sunday: 0 &#125; return dayNumbers[dayStr.toLowerCase()] || desiredSundayNumber&#125;function lookupRelative (relText) &#123; const relativeNumbers = &#123; last: -1, previous: -1, this: 0, first: 1, next: 1, second: 2, third: 3, fourth: 4, fifth: 5, sixth: 6, seventh: 7, eight: 8, eighth: 8, ninth: 9, tenth: 10, eleventh: 11, twelfth: 12 &#125; const relativeBehavior = &#123; this: 1 &#125; const relTextLower = relText.toLowerCase() return &#123; amount: relativeNumbers[relTextLower], behavior: relativeBehavior[relTextLower] || 0 &#125;&#125;function processTzCorrection (tzOffset, oldValue) &#123; const reTzCorrectionLoose = /(?:GMT)?([+-])(\\d+)(:?)(\\d&#123;0,2&#125;)/i tzOffset = tzOffset &amp;&amp; tzOffset.match(reTzCorrectionLoose) if (!tzOffset) &#123; return oldValue &#125; const sign = tzOffset[1] === '-' ? -1 : 1 let hours = +tzOffset[2] let minutes = +tzOffset[4] if (!tzOffset[4] &amp;&amp; !tzOffset[3]) &#123; minutes = Math.floor(hours % 100) hours = Math.floor(hours / 100) &#125; // timezone offset in seconds return sign * (hours * 60 + minutes) * 60&#125;// tz abbrevation : tz offset in secondsconst tzAbbrOffsets = &#123; acdt: 37800, acst: 34200, addt: -7200, adt: -10800, aedt: 39600, aest: 36000, ahdt: -32400, ahst: -36000, akdt: -28800, akst: -32400, amt: -13840, apt: -10800, ast: -14400, awdt: 32400, awst: 28800, awt: -10800, bdst: 7200, bdt: -36000, bmt: -14309, bst: 3600, cast: 34200, cat: 7200, cddt: -14400, cdt: -18000, cemt: 10800, cest: 7200, cet: 3600, cmt: -15408, cpt: -18000, cst: -21600, cwt: -18000, chst: 36000, dmt: -1521, eat: 10800, eddt: -10800, edt: -14400, eest: 10800, eet: 7200, emt: -26248, ept: -14400, est: -18000, ewt: -14400, ffmt: -14660, fmt: -4056, gdt: 39600, gmt: 0, gst: 36000, hdt: -34200, hkst: 32400, hkt: 28800, hmt: -19776, hpt: -34200, hst: -36000, hwt: -34200, iddt: 14400, idt: 10800, imt: 25025, ist: 7200, jdt: 36000, jmt: 8440, jst: 32400, kdt: 36000, kmt: 5736, kst: 30600, lst: 9394, mddt: -18000, mdst: 16279, mdt: -21600, mest: 7200, met: 3600, mmt: 9017, mpt: -21600, msd: 14400, msk: 10800, mst: -25200, mwt: -21600, nddt: -5400, ndt: -9052, npt: -9000, nst: -12600, nwt: -9000, nzdt: 46800, nzmt: 41400, nzst: 43200, pddt: -21600, pdt: -25200, pkst: 21600, pkt: 18000, plmt: 25590, pmt: -13236, ppmt: -17340, ppt: -25200, pst: -28800, pwt: -25200, qmt: -18840, rmt: 5794, sast: 7200, sdmt: -16800, sjmt: -20173, smt: -13884, sst: -39600, tbmt: 10751, tmt: 12344, uct: 0, utc: 0, wast: 7200, wat: 3600, wemt: 7200, west: 3600, wet: 0, wib: 25200, wita: 28800, wit: 32400, wmt: 5040, yddt: -25200, ydt: -28800, ypt: -28800, yst: -32400, ywt: -28800, a: 3600, b: 7200, c: 10800, d: 14400, e: 18000, f: 21600, g: 25200, h: 28800, i: 32400, k: 36000, l: 39600, m: 43200, n: -3600, o: -7200, p: -10800, q: -14400, r: -18000, s: -21600, t: -25200, u: -28800, v: -32400, w: -36000, x: -39600, y: -43200, z: 0&#125;const formats = &#123; yesterday: &#123; regex: /^yesterday/i, name: 'yesterday', callback () &#123; this.rd -= 1 return this.resetTime() &#125; &#125;, now: &#123; regex: /^now/i, name: 'now' // do nothing &#125;, noon: &#123; regex: /^noon/i, name: 'noon', callback () &#123; return this.resetTime() &amp;&amp; this.time(12, 0, 0, 0) &#125; &#125;, midnightOrToday: &#123; regex: /^(midnight|today)/i, name: 'midnight | today', callback () &#123; return this.resetTime() &#125; &#125;, tomorrow: &#123; regex: /^tomorrow/i, name: 'tomorrow', callback () &#123; this.rd += 1 return this.resetTime() &#125; &#125;, timestamp: &#123; regex: /^@(-?\\d+)/i, name: 'timestamp', callback (match, timestamp) &#123; this.rs += +timestamp this.y = 1970 this.m = 0 this.d = 1 this.dates = 0 return this.resetTime() &amp;&amp; this.zone(0) &#125; &#125;, firstOrLastDay: &#123; regex: /^(first|last) day of/i, name: 'firstdayof | lastdayof', callback (match, day) &#123; if (day.toLowerCase() === 'first') &#123; this.firstOrLastDayOfMonth = 1 &#125; else &#123; this.firstOrLastDayOfMonth = -1 &#125; &#125; &#125;, backOrFrontOf: &#123; regex: RegExp('^(back|front) of ' + reHour24 + reSpaceOpt + reMeridian + '?', 'i'), name: 'backof | frontof', callback (match, side, hours, meridian) &#123; const back = side.toLowerCase() === 'back' let hour = +hours let minute = 15 if (!back) &#123; hour -= 1 minute = 45 &#125; hour = processMeridian(hour, meridian) return this.resetTime() &amp;&amp; this.time(hour, minute, 0, 0) &#125; &#125;, weekdayOf: &#123; regex: RegExp('^(' + reReltextnumber + '|' + reReltexttext + ')' + reSpace + '(' + reDayfull + '|' + reDayabbr + ')' + reSpace + 'of', 'i'), name: 'weekdayof' // todo &#125;, mssqltime: &#123; regex: RegExp('^' + reHour12 + ':' + reMinutelz + ':' + reSecondlz + '[:.]([0-9]+)' + reMeridian, 'i'), name: 'mssqltime', callback (match, hour, minute, second, frac, meridian) &#123; return this.time(processMeridian(+hour, meridian), +minute, +second, +frac.substr(0, 3)) &#125; &#125;, timeLong12: &#123; regex: RegExp('^' + reHour12 + '[:.]' + reMinute + '[:.]' + reSecondlz + reSpaceOpt + reMeridian, 'i'), name: 'timelong12', callback (match, hour, minute, second, meridian) &#123; return this.time(processMeridian(+hour, meridian), +minute, +second, 0) &#125; &#125;, timeShort12: &#123; regex: RegExp('^' + reHour12 + '[:.]' + reMinutelz + reSpaceOpt + reMeridian, 'i'), name: 'timeshort12', callback (match, hour, minute, meridian) &#123; return this.time(processMeridian(+hour, meridian), +minute, 0, 0) &#125; &#125;, timeTiny12: &#123; regex: RegExp('^' + reHour12 + reSpaceOpt + reMeridian, 'i'), name: 'timetiny12', callback (match, hour, meridian) &#123; return this.time(processMeridian(+hour, meridian), 0, 0, 0) &#125; &#125;, soap: &#123; regex: RegExp('^' + reYear4 + '-' + reMonthlz + '-' + reDaylz + 'T' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz + reFrac + reTzCorrection + '?', 'i'), name: 'soap', callback (match, year, month, day, hour, minute, second, frac, tzCorrection) &#123; return this.ymd(+year, month - 1, +day) &amp;&amp; this.time(+hour, +minute, +second, +frac.substr(0, 3)) &amp;&amp; this.zone(processTzCorrection(tzCorrection)) &#125; &#125;, wddx: &#123; regex: RegExp('^' + reYear4 + '-' + reMonth + '-' + reDay + 'T' + reHour24 + ':' + reMinute + ':' + reSecond), name: 'wddx', callback (match, year, month, day, hour, minute, second) &#123; return this.ymd(+year, month - 1, +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &#125; &#125;, exif: &#123; regex: RegExp('^' + reYear4 + ':' + reMonthlz + ':' + reDaylz + ' ' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz, 'i'), name: 'exif', callback (match, year, month, day, hour, minute, second) &#123; return this.ymd(+year, month - 1, +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &#125; &#125;, xmlRpc: &#123; regex: RegExp('^' + reYear4 + reMonthlz + reDaylz + 'T' + reHour24 + ':' + reMinutelz + ':' + reSecondlz), name: 'xmlrpc', callback (match, year, month, day, hour, minute, second) &#123; return this.ymd(+year, month - 1, +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &#125; &#125;, xmlRpcNoColon: &#123; regex: RegExp('^' + reYear4 + reMonthlz + reDaylz + '[Tt]' + reHour24 + reMinutelz + reSecondlz), name: 'xmlrpcnocolon', callback (match, year, month, day, hour, minute, second) &#123; return this.ymd(+year, month - 1, +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &#125; &#125;, clf: &#123; regex: RegExp('^' + reDay + '/(' + reMonthAbbr + ')/' + reYear4 + ':' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz + reSpace + reTzCorrection, 'i'), name: 'clf', callback (match, day, month, year, hour, minute, second, tzCorrection) &#123; return this.ymd(+year, lookupMonth(month), +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &amp;&amp; this.zone(processTzCorrection(tzCorrection)) &#125; &#125;, iso8601long: &#123; regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond + reFrac, 'i'), name: 'iso8601long', callback (match, hour, minute, second, frac) &#123; return this.time(+hour, +minute, +second, +frac.substr(0, 3)) &#125; &#125;, dateTextual: &#123; regex: RegExp('^' + reMonthText + '[ .\\\\t-]*' + reDay + '[,.stndrh\\\\t ]+' + reYear, 'i'), name: 'datetextual', callback (match, month, day, year) &#123; return this.ymd(processYear(year), lookupMonth(month), +day) &#125; &#125;, pointedDate4: &#123; regex: RegExp('^' + reDay + '[.\\\\t-]' + reMonth + '[.-]' + reYear4), name: 'pointeddate4', callback (match, day, month, year) &#123; return this.ymd(+year, month - 1, +day) &#125; &#125;, pointedDate2: &#123; regex: RegExp('^' + reDay + '[.\\\\t]' + reMonth + '\\\\.' + reYear2), name: 'pointeddate2', callback (match, day, month, year) &#123; return this.ymd(processYear(year), month - 1, +day) &#125; &#125;, timeLong24: &#123; regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond), name: 'timelong24', callback (match, hour, minute, second) &#123; return this.time(+hour, +minute, +second, 0) &#125; &#125;, dateNoColon: &#123; regex: RegExp('^' + reYear4 + reMonthlz + reDaylz), name: 'datenocolon', callback (match, year, month, day) &#123; return this.ymd(+year, month - 1, +day) &#125; &#125;, pgydotd: &#123; regex: RegExp('^' + reYear4 + '\\\\.?' + reDayOfYear), name: 'pgydotd', callback (match, year, day) &#123; return this.ymd(+year, 0, +day) &#125; &#125;, timeShort24: &#123; regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute, 'i'), name: 'timeshort24', callback (match, hour, minute) &#123; return this.time(+hour, +minute, 0, 0) &#125; &#125;, iso8601noColon: &#123; regex: RegExp('^t?' + reHour24lz + reMinutelz + reSecondlz, 'i'), name: 'iso8601nocolon', callback (match, hour, minute, second) &#123; return this.time(+hour, +minute, +second, 0) &#125; &#125;, iso8601dateSlash: &#123; // eventhough the trailing slash is optional in PHP // here it's mandatory and inputs without the slash // are handled by dateslash regex: RegExp('^' + reYear4 + '/' + reMonthlz + '/' + reDaylz + '/'), name: 'iso8601dateslash', callback (match, year, month, day) &#123; return this.ymd(+year, month - 1, +day) &#125; &#125;, dateSlash: &#123; regex: RegExp('^' + reYear4 + '/' + reMonth + '/' + reDay), name: 'dateslash', callback (match, year, month, day) &#123; return this.ymd(+year, month - 1, +day) &#125; &#125;, american: &#123; regex: RegExp('^' + reMonth + '/' + reDay + '/' + reYear), name: 'american', callback (match, month, day, year) &#123; return this.ymd(processYear(year), month - 1, +day) &#125; &#125;, americanShort: &#123; regex: RegExp('^' + reMonth + '/' + reDay), name: 'americanshort', callback (match, month, day) &#123; return this.ymd(this.y, month - 1, +day) &#125; &#125;, gnuDateShortOrIso8601date2: &#123; // iso8601date2 is complete subset of gnudateshort regex: RegExp('^' + reYear + '-' + reMonth + '-' + reDay), name: 'gnudateshort | iso8601date2', callback (match, year, month, day) &#123; return this.ymd(processYear(year), month - 1, +day) &#125; &#125;, iso8601date4: &#123; regex: RegExp('^' + reYear4withSign + '-' + reMonthlz + '-' + reDaylz), name: 'iso8601date4', callback (match, year, month, day) &#123; return this.ymd(+year, month - 1, +day) &#125; &#125;, gnuNoColon: &#123; regex: RegExp('^t?' + reHour24lz + reMinutelz, 'i'), name: 'gnunocolon', callback (match, hour, minute) &#123; // this rule is a special case // if time was already set once by any preceding rule, it sets the captured value as year switch (this.times) &#123; case 0: return this.time(+hour, +minute, 0, this.f) case 1: this.y = hour * 100 + +minute this.times++ return true default: return false &#125; &#125; &#125;, gnuDateShorter: &#123; regex: RegExp('^' + reYear4 + '-' + reMonth), name: 'gnudateshorter', callback (match, year, month) &#123; return this.ymd(+year, month - 1, 1) &#125; &#125;, pgTextReverse: &#123; // note: allowed years are from 32-9999 // years below 32 should be treated as days in datefull regex: RegExp('^' + '(\\\\d&#123;3,4&#125;|[4-9]\\\\d|3[2-9])-(' + reMonthAbbr + ')-' + reDaylz, 'i'), name: 'pgtextreverse', callback (match, year, month, day) &#123; return this.ymd(processYear(year), lookupMonth(month), +day) &#125; &#125;, dateFull: &#123; regex: RegExp('^' + reDay + '[ \\\\t.-]*' + reMonthText + '[ \\\\t.-]*' + reYear, 'i'), name: 'datefull', callback (match, day, month, year) &#123; return this.ymd(processYear(year), lookupMonth(month), +day) &#125; &#125;, dateNoDay: &#123; regex: RegExp('^' + reMonthText + '[ .\\\\t-]*' + reYear4, 'i'), name: 'datenoday', callback (match, month, year) &#123; return this.ymd(+year, lookupMonth(month), 1) &#125; &#125;, dateNoDayRev: &#123; regex: RegExp('^' + reYear4 + '[ .\\\\t-]*' + reMonthText, 'i'), name: 'datenodayrev', callback (match, year, month) &#123; return this.ymd(+year, lookupMonth(month), 1) &#125; &#125;, pgTextShort: &#123; regex: RegExp('^(' + reMonthAbbr + ')-' + reDaylz + '-' + reYear, 'i'), name: 'pgtextshort', callback (match, month, day, year) &#123; return this.ymd(processYear(year), lookupMonth(month), +day) &#125; &#125;, dateNoYear: &#123; regex: RegExp('^' + reDateNoYear, 'i'), name: 'datenoyear', callback (match, month, day) &#123; return this.ymd(this.y, lookupMonth(month), +day) &#125; &#125;, dateNoYearRev: &#123; regex: RegExp('^' + reDay + '[ .\\\\t-]*' + reMonthText, 'i'), name: 'datenoyearrev', callback (match, day, month) &#123; return this.ymd(this.y, lookupMonth(month), +day) &#125; &#125;, isoWeekDay: &#123; regex: RegExp('^' + reYear4 + '-?W' + reWeekOfYear + '(?:-?([0-7]))?'), name: 'isoweekday | isoweek', callback (match, year, week, day) &#123; day = day ? +day : 1 if (!this.ymd(+year, 0, 1)) &#123; return false &#125; // get day of week for Jan 1st let dayOfWeek = new Date(this.y, this.m, this.d).getDay() // and use the day to figure out the offset for day 1 of week 1 dayOfWeek = 0 - (dayOfWeek &gt; 4 ? dayOfWeek - 7 : dayOfWeek) this.rd += dayOfWeek + ((week - 1) * 7) + day &#125; &#125;, relativeText: &#123; regex: RegExp('^(' + reReltextnumber + '|' + reReltexttext + ')' + reSpace + '(' + reReltextunit + ')', 'i'), name: 'relativetext', callback (match, relValue, relUnit) &#123; // todo: implement handling of 'this time-unit' // eslint-disable-next-line no-unused-vars const &#123; amount, behavior &#125; = lookupRelative(relValue) switch (relUnit.toLowerCase()) &#123; case 'sec': case 'secs': case 'second': case 'seconds': this.rs += amount break case 'min': case 'mins': case 'minute': case 'minutes': this.ri += amount break case 'hour': case 'hours': this.rh += amount break case 'day': case 'days': this.rd += amount break case 'fortnight': case 'fortnights': case 'forthnight': case 'forthnights': this.rd += amount * 14 break case 'week': case 'weeks': this.rd += amount * 7 break case 'month': case 'months': this.rm += amount break case 'year': case 'years': this.ry += amount break case 'mon': case 'monday': case 'tue': case 'tuesday': case 'wed': case 'wednesday': case 'thu': case 'thursday': case 'fri': case 'friday': case 'sat': case 'saturday': case 'sun': case 'sunday': this.resetTime() this.weekday = lookupWeekday(relUnit, 7) this.weekdayBehavior = 1 this.rd += (amount &gt; 0 ? amount - 1 : amount) * 7 break case 'weekday': case 'weekdays': // todo break &#125; &#125; &#125;, relative: &#123; regex: RegExp('^([+-]*)[ \\\\t]*(\\\\d+)' + reSpaceOpt + '(' + reReltextunit + '|week)', 'i'), name: 'relative', callback (match, signs, relValue, relUnit) &#123; const minuses = signs.replace(/[^-]/g, '').length const amount = +relValue * Math.pow(-1, minuses) switch (relUnit.toLowerCase()) &#123; case 'sec': case 'secs': case 'second': case 'seconds': this.rs += amount break case 'min': case 'mins': case 'minute': case 'minutes': this.ri += amount break case 'hour': case 'hours': this.rh += amount break case 'day': case 'days': this.rd += amount break case 'fortnight': case 'fortnights': case 'forthnight': case 'forthnights': this.rd += amount * 14 break case 'week': case 'weeks': this.rd += amount * 7 break case 'month': case 'months': this.rm += amount break case 'year': case 'years': this.ry += amount break case 'mon': case 'monday': case 'tue': case 'tuesday': case 'wed': case 'wednesday': case 'thu': case 'thursday': case 'fri': case 'friday': case 'sat': case 'saturday': case 'sun': case 'sunday': this.resetTime() this.weekday = lookupWeekday(relUnit, 7) this.weekdayBehavior = 1 this.rd += (amount &gt; 0 ? amount - 1 : amount) * 7 break case 'weekday': case 'weekdays': // todo break &#125; &#125; &#125;, dayText: &#123; regex: RegExp('^(' + reDaytext + ')', 'i'), name: 'daytext', callback (match, dayText) &#123; this.resetTime() this.weekday = lookupWeekday(dayText, 0) if (this.weekdayBehavior !== 2) &#123; this.weekdayBehavior = 1 &#125; &#125; &#125;, relativeTextWeek: &#123; regex: RegExp('^(' + reReltexttext + ')' + reSpace + 'week', 'i'), name: 'relativetextweek', callback (match, relText) &#123; this.weekdayBehavior = 2 switch (relText.toLowerCase()) &#123; case 'this': this.rd += 0 break case 'next': this.rd += 7 break case 'last': case 'previous': this.rd -= 7 break &#125; if (isNaN(this.weekday)) &#123; this.weekday = 1 &#125; &#125; &#125;, monthFullOrMonthAbbr: &#123; regex: RegExp('^(' + reMonthFull + '|' + reMonthAbbr + ')', 'i'), name: 'monthfull | monthabbr', callback (match, month) &#123; return this.ymd(this.y, lookupMonth(month), this.d) &#125; &#125;, tzCorrection: &#123; regex: RegExp('^' + reTzCorrection, 'i'), name: 'tzcorrection', callback (tzCorrection) &#123; return this.zone(processTzCorrection(tzCorrection)) &#125; &#125;, tzAbbr: &#123; regex: RegExp('^' + reTzAbbr), name: 'tzabbr', callback (match, abbr) &#123; const offset = tzAbbrOffsets[abbr.toLowerCase()] if (isNaN(offset)) &#123; return false &#125; return this.zone(offset) &#125; &#125;, ago: &#123; regex: /^ago/i, name: 'ago', callback () &#123; this.ry = -this.ry this.rm = -this.rm this.rd = -this.rd this.rh = -this.rh this.ri = -this.ri this.rs = -this.rs this.rf = -this.rf &#125; &#125;, year4: &#123; regex: RegExp('^' + reYear4), name: 'year4', callback (match, year) &#123; this.y = +year return true &#125; &#125;, whitespace: &#123; regex: /^[ .,\\t]+/, name: 'whitespace' // do nothing &#125;, dateShortWithTimeLong: &#123; regex: RegExp('^' + reDateNoYear + 't?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond, 'i'), name: 'dateshortwithtimelong', callback (match, month, day, hour, minute, second) &#123; return this.ymd(this.y, lookupMonth(month), +day) &amp;&amp; this.time(+hour, +minute, +second, 0) &#125; &#125;, dateShortWithTimeLong12: &#123; regex: RegExp('^' + reDateNoYear + reHour12 + '[:.]' + reMinute + '[:.]' + reSecondlz + reSpaceOpt + reMeridian, 'i'), name: 'dateshortwithtimelong12', callback (match, month, day, hour, minute, second, meridian) &#123; return this.ymd(this.y, lookupMonth(month), +day) &amp;&amp; this.time(processMeridian(+hour, meridian), +minute, +second, 0) &#125; &#125;, dateShortWithTimeShort: &#123; regex: RegExp('^' + reDateNoYear + 't?' + reHour24 + '[:.]' + reMinute, 'i'), name: 'dateshortwithtimeshort', callback (match, month, day, hour, minute) &#123; return this.ymd(this.y, lookupMonth(month), +day) &amp;&amp; this.time(+hour, +minute, 0, 0) &#125; &#125;, dateShortWithTimeShort12: &#123; regex: RegExp('^' + reDateNoYear + reHour12 + '[:.]' + reMinutelz + reSpaceOpt + reMeridian, 'i'), name: 'dateshortwithtimeshort12', callback (match, month, day, hour, minute, meridian) &#123; return this.ymd(this.y, lookupMonth(month), +day) &amp;&amp; this.time(processMeridian(+hour, meridian), +minute, 0, 0) &#125; &#125;&#125;const resultProto = &#123; // date y: NaN, m: NaN, d: NaN, // time h: NaN, i: NaN, s: NaN, f: NaN, // relative shifts ry: 0, rm: 0, rd: 0, rh: 0, ri: 0, rs: 0, rf: 0, // weekday related shifts weekday: NaN, weekdayBehavior: 0, // first or last day of month // 0 none, 1 first, -1 last firstOrLastDayOfMonth: 0, // timezone correction in minutes z: NaN, // counters dates: 0, times: 0, zones: 0, // helper functions ymd (y, m, d) &#123; if (this.dates &gt; 0) &#123; return false &#125; this.dates++ this.y = y this.m = m this.d = d return true &#125;, time (h, i, s, f) &#123; if (this.times &gt; 0) &#123; return false &#125; this.times++ this.h = h this.i = i this.s = s this.f = f return true &#125;, resetTime () &#123; this.h = 0 this.i = 0 this.s = 0 this.f = 0 this.times = 0 return true &#125;, zone (minutes) &#123; if (this.zones &lt;= 1) &#123; this.zones++ this.z = minutes return true &#125; return false &#125;, toDate (relativeTo) &#123; if (this.dates &amp;&amp; !this.times) &#123; this.h = this.i = this.s = this.f = 0 &#125; // fill holes if (isNaN(this.y)) &#123; this.y = relativeTo.getFullYear() &#125; if (isNaN(this.m)) &#123; this.m = relativeTo.getMonth() &#125; if (isNaN(this.d)) &#123; this.d = relativeTo.getDate() &#125; if (isNaN(this.h)) &#123; this.h = relativeTo.getHours() &#125; if (isNaN(this.i)) &#123; this.i = relativeTo.getMinutes() &#125; if (isNaN(this.s)) &#123; this.s = relativeTo.getSeconds() &#125; if (isNaN(this.f)) &#123; this.f = relativeTo.getMilliseconds() &#125; // adjust special early switch (this.firstOrLastDayOfMonth) &#123; case 1: this.d = 1 break case -1: this.d = 0 this.m += 1 break &#125; if (!isNaN(this.weekday)) &#123; const date = new Date(relativeTo.getTime()) date.setFullYear(this.y, this.m, this.d) date.setHours(this.h, this.i, this.s, this.f) const dow = date.getDay() if (this.weekdayBehavior === 2) &#123; // To make \"this week\" work, where the current day of week is a \"sunday\" if (dow === 0 &amp;&amp; this.weekday !== 0) &#123; this.weekday = -6 &#125; // To make \"sunday this week\" work, where the current day of week is not a \"sunday\" if (this.weekday === 0 &amp;&amp; dow !== 0) &#123; this.weekday = 7 &#125; this.d -= dow this.d += this.weekday &#125; else &#123; let diff = this.weekday - dow // some PHP magic if ((this.rd &lt; 0 &amp;&amp; diff &lt; 0) || (this.rd &gt;= 0 &amp;&amp; diff &lt;= -this.weekdayBehavior)) &#123; diff += 7 &#125; if (this.weekday &gt;= 0) &#123; this.d += diff &#125; else &#123; this.d -= (7 - (Math.abs(this.weekday) - dow)) &#125; this.weekday = NaN &#125; &#125; // adjust relative this.y += this.ry this.m += this.rm this.d += this.rd this.h += this.rh this.i += this.ri this.s += this.rs this.f += this.rf this.ry = this.rm = this.rd = 0 this.rh = this.ri = this.rs = this.rf = 0 const result = new Date(relativeTo.getTime()) // since Date constructor treats years &lt;= 99 as 1900+ // it can't be used, thus this weird way result.setFullYear(this.y, this.m, this.d) result.setHours(this.h, this.i, this.s, this.f) // note: this is done twice in PHP // early when processing special relatives // and late // todo: check if the logic can be reduced // to just one time action switch (this.firstOrLastDayOfMonth) &#123; case 1: result.setDate(1) break case -1: result.setMonth(result.getMonth() + 1, 0) break &#125; // adjust timezone if (!isNaN(this.z) &amp;&amp; result.getTimezoneOffset() !== this.z) &#123; result.setUTCFullYear( result.getFullYear(), result.getMonth(), result.getDate()) result.setUTCHours( result.getHours(), result.getMinutes(), result.getSeconds() - this.z, result.getMilliseconds()) &#125; return result &#125;&#125;module.exports = function strtotime (str, now) &#123; // discuss at: https://locutus.io/php/strtotime/ // original by: Caio Ariede (https://caioariede.com) // improved by: Kevin van Zonneveld (https://kvz.io) // improved by: Caio Ariede (https://caioariede.com) // improved by: A. Matías Quezada (https://amatiasq.com) // improved by: preuter // improved by: Brett Zamir (https://brett-zamir.me) // improved by: Mirko Faber // input by: David // bugfixed by: Wagner B. Soares // bugfixed by: Artur Tchernychev // bugfixed by: Stephan Bösch-Plepelits (https://github.com/plepe) // reimplemented by: Rafał Kukawski // note 1: Examples all have a fixed timestamp to prevent // note 1: tests to fail because of variable time(zones) // example 1: strtotime('+1 day', 1129633200) // returns 1: 1129719600 // example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200) // returns 2: 1130425202 // example 3: strtotime('last month', 1129633200) // returns 3: 1127041200 // example 4: strtotime('2009-05-04 08:30:00+00') // returns 4: 1241425800 // example 5: strtotime('2009-05-04 08:30:00+02:00') // returns 5: 1241418600 // example 6: strtotime('2009-05-04 08:30:00 YWT') // returns 6: 1241454600 if (now == null) &#123; now = Math.floor(Date.now() / 1000) &#125; // the rule order is important // if multiple rules match, the longest match wins // if multiple rules match the same string, the first match wins const rules = [ formats.yesterday, formats.now, formats.noon, formats.midnightOrToday, formats.tomorrow, formats.timestamp, formats.firstOrLastDay, formats.backOrFrontOf, // formats.weekdayOf, // not yet implemented formats.timeTiny12, formats.timeShort12, formats.timeLong12, formats.mssqltime, formats.timeShort24, formats.timeLong24, formats.iso8601long, formats.gnuNoColon, formats.iso8601noColon, formats.americanShort, formats.american, formats.iso8601date4, formats.iso8601dateSlash, formats.dateSlash, formats.gnuDateShortOrIso8601date2, formats.gnuDateShorter, formats.dateFull, formats.pointedDate4, formats.pointedDate2, formats.dateNoDay, formats.dateNoDayRev, formats.dateTextual, formats.dateNoYear, formats.dateNoYearRev, formats.dateNoColon, formats.xmlRpc, formats.xmlRpcNoColon, formats.soap, formats.wddx, formats.exif, formats.pgydotd, formats.isoWeekDay, formats.pgTextShort, formats.pgTextReverse, formats.clf, formats.year4, formats.ago, formats.dayText, formats.relativeTextWeek, formats.relativeText, formats.monthFullOrMonthAbbr, formats.tzCorrection, formats.tzAbbr, formats.dateShortWithTimeShort12, formats.dateShortWithTimeLong12, formats.dateShortWithTimeShort, formats.dateShortWithTimeLong, formats.relative, formats.whitespace ] const result = Object.create(resultProto) while (str.length) &#123; let longestMatch = null let finalRule = null for (let i = 0, l = rules.length; i &lt; l; i++) &#123; const format = rules[i] const match = str.match(format.regex) if (match) &#123; if (!longestMatch || match[0].length &gt; longestMatch[0].length) &#123; longestMatch = match finalRule = format &#125; &#125; &#125; if (!finalRule || (finalRule.callback &amp;&amp; finalRule.callback.apply(result, longestMatch) === false)) &#123; return false &#125; str = str.substr(longestMatch[0].length) finalRule = null longestMatch = null &#125; return Math.floor(result.toDate(new Date(now * 1000)) / 1000)&#125;"}],"posts":[{"title":"php.js is Dead - Long Live Locutus","slug":"announcing-locutus","date":"2016-05-02T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2016/05/announcing-locutus/","link":"","permalink":"https://locutus.io/2016/05/announcing-locutus/","excerpt":"","text":"As was briefly mentioned in Breaking Backwards Compatibility, I am launching a big iteration of php.js today. It includes so many breaking changes that it is safe to say that, after 9 years, php.js is dead. And, like a phoenix, Locutus has risen from its ashes. Locutus will largely have the same mission: Offer a community platform to collaborate on JavaScript counterparts to functions from other languages, for fun and educational purposes. Locutus will, however, also be different on a few key points. Locutus will focus on: Expanding to other languages, such as C, Go, Python and Ruby Hack-free porting, meaning we will only port individual functions from the standard libraries, while avoiding language features, environment, data-types and configuration The educational aspect and the intellectual challenge Using npm as the distribution platform of choice, so you can do var strings = require(&#39;golang/strings&#39;) and, in case the browser is your target platform, bundle this via Browserify, rollup.js or webpack. Trying to deliver functions that are interoperable between browsers and Node.js, but also allowing to target just one platform when that saves us from writing overly wieldy code. These cases will be documented with a note. An example of this would be opening a file from disk. We would then state it is Node.js-only. While it is still very much a work in progress, I have already deprecated and updated many functions that did not adhere to this renewed focus. If you spot a function I overlooked, please let me know on GitHub. I feel these changes were needed to regain the motivation required for leading this project. For a long time, I have struggled with php.js in its old form. I rarely did maintenance runs anymore and when I did, it was guilt-driven rather than out of curiosity or excitement - the things that led me to start this project. There are several reasons why I had lost my intrinsic motivation: The things that could reasonably be ported, had already been ported. The things that probably should not have been ported, had been ported too - and were now mostly good for provoking purists and inducing maintenance load. Not very rewarding. Misuse of the project. I shed approximately 451 tears when some people started using the project so they would not have to learn JavaScript and could continue PHP-ing in the browser, using 2.1MB, 451-function, ready-to-rock spaceship bundles in the browser. I made efforts to stop newcomers from doing that. I shed approximately 2.1 tears from the angry notes they then sent me. I started a new company and protocol, which took much time by itself, but also meant I spent my time writing exclusively in other programming languages. You won’t find any bitterness about that here, but it did mean I had less time and use for PHP oriented projects 9 years ago, the tech world was a different place. Node.js did not exist, everyone was on IE6, and JavaScript’s main use was opening popups. Going from age 23 to 32, I have changed my stance on pretty much everything. One of these things that I have now abandoned is the idea that our project could perhaps one day be used as an interactive debugging tool, or run entire scripts from other languages in Node. I pursued that goal for some time with the thirst of a youngster, and while we had some success doing so, it drove me to write and accept hacks that, in retrospect, have probably secured me a special place in hell. Projects like GopherJS or Emscripten offer far better means to that end. Our approach isn’t suitable for it. Knowing that I was beginning to fall short as a project lead, I tried to recruit fresh blood to replace me. However, even though there is still an active community of contributors, I couldn’t find any volunteers for taking the lead. For a while, I considered declaring [UNMAINTAINED], but I felt - and still feel - too great a deal of duty and responsibility towards past and present contributors. So instead, I started thinking about what it would take for me to get my mojo back. Having analyzed what had crippled it over the past 9 years, I decided to make the changes that would allow it to flow back again. If you are interested in the nuts and bolts, these are a few things I have been secretly working on in order to clean up our codebase and breathe new life into this project. I have: Added (generated) Mocha tests for every function, instead of our own test framework Added a $global that works in both Browsers and Node.js (we should try to avoid this when we can though) Added a CONTRIBUTORS guide as well as New Issue and Pull Request templates, so we can be more efficient using GitHub Added native JSON, base64, sha1 and md5 support where available Added npm versioning and releases Added support for ES6, any function can be written in this JavaScript version and it will be transpiled to ES5 before we publish to npm to ensure compatability. Asked Troy Dodd if we could use his stunning Locutus artwork to be our avatar (and he said yes!) Assimilated a dozen of example functions that showcase how we could port four new languages to JavaScript Changed all functions to make them adhere to the JavaScript Standard Style and have a max line length of 100. Travis CI will fail when new additions do not adhere Deprecated/documented all functions using eval, new Function and other bad practices Fixed around 50 failed tests that were previously marked as skipped (still a few to go) Made it so that all functions can be required individually via npm Made it so that dependencies between functions are now handled via CommonJS require Moved the website from Jekyll to Hexo, so that we lose a Ruby dependency and everything needed to work on the website can be npm installed Refactored the utility class Removed _workbench and _experimental folders. They are available for reference in 1.3.2, but making them harder to find for newcomers should help avoid complaints and confusion. If you want to experiment, we can use local files or branches when it’s time to collaborate. I understand this all can feel like a radical shift, since functions have different locations and there is talk of deprecating functions. Perhaps you wrote these functions with your own blood, sweat and tears. To make matters worse, I will also be deprecating many GitHub Issues and Pull Requests that have become invalid due to this new major push. I hope you can agree that this project found itself in a dead-end street and that I had to undo some of our work to back out and get us on the road again. I am doing this not to hurt past contributors, but to honor them. I have spent many nights and weekends modernizing this project, so that our work could be given new life. I would also like to voice a word of appreciation to you as a contributor, for the hard work that went into crafting this project. Rewriting a language in another language is no small task, and people tend to forget that in order to port an alien language to JavaScript, we had to write a lot of JavaScript. In failing to restrain myself and having tried to port the entire language, I may have ventured into the darker engineering arts. And in the end, it did not even let me fully realize my goal in return. I accept defeat here. However, I am also proud that we have built a welcoming and friendly community together where over the course of 9 years, hundreds of developers from all over the world have helped each other to improve their code, to learn JavaScript, and help others learn it. I, for one, have become much more familiar with JavaScript’s delicacies because of it, and I like to think the same goes for many of you as well. Therefore, I accept both defeat and victory. As a contributor to this project, I hope Locutus brings the changes that can spark your interest again, just as it has for me. I hope you will join me on this new adventure to a magical land of standard libraries full of functions that are just screaming to be ported. I am looking at you, rainy Sunday afternoon.. This time we will be a little bit older, a little bit wiser, and hopefully have the resolve to steer clear of the darker areas. Nevertheless, we will have just as much fun in challenging ourselves and each other, as well as by learning other languages. I promise! : ) For those that can forgive me for my past mistakes and for deprecating some of our previous work in this new major release: you can try Locutus right now if you want: $ npm init$ npm install locutus$ vim index.js var echo = require('locutus/php/strings/echo')var capwords = require('locutus/python/string/capwords')var strings = require('locutus/golang/strings')var rubyMath = require('locutus/ruby/Math')var c = require('locutus/c')echo(capwords('locutus'))echo(strings.Contains('Locutus', 'us'))echo(rubyMath.acos(0.3))echo(c.math.abs(-5)) $ node index.jsLocutustrue1.2661036727794995 If you want to help Locutus, our newly added languages don’t have much meat on the bones yet and it would be fantastic to see if you can think of ways to assimilate a function that Locutus currently does not harbor. Also, there are plenty project-wide ideas in our Backlog that we would love help with, so I guess there is just one thing left to say.. To the GitHubs! Kevin","categories":[],"tags":[{"name":"future","slug":"future","permalink":"https://locutus.io/tags/future/"},{"name":"js","slug":"js","permalink":"https://locutus.io/tags/js/"},{"name":"golang","slug":"golang","permalink":"https://locutus.io/tags/golang/"},{"name":"python","slug":"python","permalink":"https://locutus.io/tags/python/"},{"name":"ruby","slug":"ruby","permalink":"https://locutus.io/tags/ruby/"},{"name":"php","slug":"php","permalink":"https://locutus.io/tags/php/"},{"name":"c","slug":"c","permalink":"https://locutus.io/tags/c/"}]},{"title":"Breaking Backwards Compatibility","slug":"breaking-bc","date":"2016-04-20T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2016/04/breaking-bc/","link":"","permalink":"https://locutus.io/2016/04/breaking-bc/","excerpt":"","text":"Hi all, I’m planning to push out a big release soon that will change a lot of things about this project. Among things, it will: Offer a platform to learn other languages besides PHP Be focussed on npm as the main distribution platform, so you can var sprintf = require(&#39;string/sprintf&#39;) (and use Browserify, Rollup, or Webpack on that if the browser is your target) Deprecate functions that were desperately trying to mimic PHP, yet never really succeeding The old version will remain available as v1.3.2. I certainly hope you are not using this project like so: https://raw.githubusercontent.com/kvz/phpjs/master/functions/strings/sprintf.js as that is asking for BC breakage as well as impolite towards GitHub, but if you are, you should change your links to https://raw.githubusercontent.com/locutusjs/locutus/v1.3.2/functions/strings/sprintf.js until you can figure out how to vendor in that function and host it yourself. If you are using the project via npm, the old version will be available under the 1.3.2 package version. If you are using it via Git, use git checkout v1.3.2. The new version will be available as v2.0.2, as well as master by the time I launch. I’m not sure yet when that will be, but I thought it might save some headaches to already give the heads up about this. Stay tuned for more, Kevin","categories":[],"tags":[{"name":"future","slug":"future","permalink":"https://locutus.io/tags/future/"}]},{"title":"Switching to Jekyll","slug":"jekyll","date":"2016-04-02T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2016/04/jekyll/","link":"","permalink":"https://locutus.io/2016/04/jekyll/","excerpt":"","text":"Hi all, Four years ago we switched from a PHP generated site to one built in Octopress, so it would be easier for people to contribute, and we would not have to worry about keeping servers online. Things have changed since then. The Octopress version we used is no longer supported, and the new 3.0 is leans heavily on Jekyll. With the backing of GitHub for GitHub Pages, Jekyll itself has improved tremendously. Combined, I felt we reached the tipping point where it made more sense to port things to Jekyll so we can profit from their speed of development, ecosystem, and the fact that many developers are already familiar with it. Long story short, I just completed the migration, and if you want to work on the website, here’s what you’d do. Jekyll runs on Ruby, so make sure you have that installed, preferably with a working version of bundler. The rest of the site-building dependencies are node-based, so make sure you have a working npm as well. To install the dependencies: npm installnpm run website:install To start a local version of the website and open a browser that will auto-refresh on changes, type: npm run website:start Now hack on the files in the ./website folder, until you’re happy with the local results. Commit the changes to Git or send in a PR if you don’t have write access to the repository. This means the sources are saved, but someone with write access still needs to deploy. To do that, type: npm run website:deploy That’s it : ) P.S. We have a few custom build steps such as rendering the functions, that make it hard for us to only use the GitHub Pages provided Jekyll, this means for the time being we’ll be relying on our own scripts and Jekyll version. That said, it’s still possible to orchestrate auto-deploys whenever there’s a change to master, by using Travis CI and encrypted environment keys. If I have time, I’d like to set this up too. This way people could propose changes, and merging them would be enough to see them go live. Best wishes, Kevin","categories":[],"tags":[{"name":"website","slug":"website","permalink":"https://locutus.io/tags/website/"},{"name":"octopress","slug":"octopress","permalink":"https://locutus.io/tags/octopress/"},{"name":"future","slug":"future","permalink":"https://locutus.io/tags/future/"},{"name":"jekyll","slug":"jekyll","permalink":"https://locutus.io/tags/jekyll/"}]},{"title":"Standard Coding Style","slug":"standard-coding-style","date":"2016-04-01T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2016/04/standard-coding-style/","link":"","permalink":"https://locutus.io/2016/04/standard-coding-style/","excerpt":"","text":"Three years ago we switched from our own home-brown coding style convention to Felix’ Node.js Style Guide, for reasons outlined in the introductory post: Coding Style. The reasoning behind adopting such a widely supported coding style, has not changed. Locutus should be focused on its added value, and less so arguing about, and inventing custom conventions around coding style. What has changed a great deal though, is the JavaScript landscape. A large part of the community is gathering behind Feross Aboukhadijeh’s JavaScript Standard Style and ESLint. Standard offers sensible defaults (no semicolons might take some getting used to but it’s really ok and after two weeks you won’t look back). ESLint offers powerful ways to enforce the standard. ESLint for instance, offers a --fix command-line argument flag, that converts non-conforming codebases to whichever coding style convention was selected. The auto-fixing does not cover all rules yet, but it’s getting better every month. As we upgrade these modules and fix our codebase, more and more legacy will conform. Additionally, I’ve added non-fatal linting to our Travis CI builds, so you can see which functions don’t comply, and make them. Locutus does few naughty tricks to bend the laws of physics and overcome a few obstacles in porting programming languages. For this reason, Locutus a few exceptions listed in .eslintrc. As a goal for the future, it would be interesting to see if we could lose these exceptions. Best wishes, Kevin","categories":[],"tags":[{"name":"coding style","slug":"coding-style","permalink":"https://locutus.io/tags/coding-style/"},{"name":"convention","slug":"convention","permalink":"https://locutus.io/tags/convention/"}]},{"title":"Coding Style","slug":"coding-style","date":"2013-05-04T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2013/05/coding-style/","link":"","permalink":"https://locutus.io/2013/05/coding-style/","excerpt":"","text":"Given the focus of Locutus I think we should re-invent as few wheels as possible and make use of sensible tools and standards that are other people have already invested a great deal of time in to get right. In this light, I’ve decided to adopt Felix’ Node.js Style Guide for coding standards, instead of running our own. It saves us time maintaining and it becomes easier for people to contribute because they don’t have to memorize where Locutus diverges. For the big parts our codebase is already compatible with it, so we won’t get any weird space + tab indentations as a result, as we start adding code that follows the guide. Going forward, contributions should comply with these conventions before being merged in. Best wishes, Kevin","categories":[],"tags":[{"name":"coding style","slug":"coding-style","permalink":"https://locutus.io/tags/coding-style/"},{"name":"convention","slug":"convention","permalink":"https://locutus.io/tags/convention/"}]},{"title":"A Word on the Focus of php.js","slug":"a-word-on-the-focus-of-php-dot-js","date":"2013-05-03T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2013/05/a-word-on-the-focus-of-php-dot-js/","link":"","permalink":"https://locutus.io/2013/05/a-word-on-the-focus-of-php-dot-js/","excerpt":"","text":"Hi everybody, The new site has no server-side code. Instead we generate HTML using Octopress and push to GitHub Pages, all from one repository. This saves hosting costs/overhead and makes it really easy for people to submit pull requests and for contributors to make changes that I don’t always have time for. It makes the project less dependent on me and more a community effort. To move forward, sometimes you have to cut features. In this case I had to lose our compiler, a webtool that relied on server-side code to generate minified packages from php.js functions. Understandibly this has raised questions. It is still possible to bundle 4 useful functions: # - Note that this combined 4 php.js functions into a file called: myLocutus# and minified version: myphp.min.js in the current directory.# - Note that this throws all functions into the# global scope. It would be better to put them in a dedicated locutus object.curl -sk https://raw.github.com/locutusjs/locutus/31bf3129f08672f8c1d6d0dcad2368ebc4ac57f2/functions/\\&#123;datetime/date\\,datetime/strtotime\\,strings/md5\\,strings/vsprintf\\&#125;.js |tee ./myLocutus &amp;&amp; \\curl -vo ./myphp.min.js \\ -X POST \\ -H 'Expect: ' \\ --data-urlencode compilation_level=\"SIMPLE_OPTIMIZATIONS\" \\ --data-urlencode output_format=\"text\" \\ --data-urlencode output_info=\"compiled_code\" \\ --data-urlencode js_code@myLocutus \\ https://closure-compiler.appspot.com/compile but some people think php.js should bundle all of it’s functions into one big file: Not providing an all-in-one, downloadable, minified, ready-to-use .js file is going to kill php.js. You’ve abandoned windows users, and really any non-CLI junkie. While I am capable of compiling this myself, what a headache. You’ve introduced a barrier-to-entry that didn’t exist before, and by not existing, allowed for the following you now have. I highly suggest that you have this available for download, either here or on github, such that you can keep (and maintain) the momentum you worked so hard for. I’d like to comment on that here. While I appreciate the sentiment, wether the project is being killed by these changes depends on how you look at php.js. To me, php.js is a resource: For PHP developers that want see how it’s done in JavaScript That enables fun experiments With a few higher level functions that are incredibly useful, and missing in JavaScript This is what I feel php.js should focus on. Making functions. Making them better. If - on the other hand - you think of php.js as a 2.1MB, 451-function, ready-to-rock spaceship that you can plug into your website so you can keep typing PHP client-side, not caring about learning JavaScript or how that extra weight might impact the user experience ..then yes, these changes are going to kill php.js. I have limited time to spend on open source, and I want to spend it on things I enjoy and can believe in. Not on working to support use-cases that keep new developers from learning, or make the web slower. I’m sorry if this upsets folks but it really is my free time. Luckily though for people with different views, I released php.js under MIT so it’s cool for anybody to fork this project and run with it. If anything, knowing that the php.js repository will focus on the raw ./functions makes this easier. Best wishes, Kevin","categories":[],"tags":[{"name":"focus","slug":"focus","permalink":"https://locutus.io/tags/focus/"}]},{"title":"New Site","slug":"new-site","date":"2012-09-26T00:00:00.000Z","updated":"2021-02-28T22:25:02.274Z","comments":true,"path":"2012/09/new-site/","link":"","permalink":"https://locutus.io/2012/09/new-site/","excerpt":"","text":"Hi everybody, Welcome to our new site. The old one had a lot of dead weight that nobody used and was basically unmaintained. This one is generated by Octopress as plain html, and then stored on Github pages. The source to do that is inside the Locutus directory in the _octopress dir, and freely available. For instance, you can now very easily: edit the about page change this blog post checkout the navigation improve the way function pages are built Next, any Locutus contributor who has Octopress set up (this mostly involves having the right ruby &amp; gem versions) can then run make site MSG=&quot;describe what you did&quot; in the project’s root dir to deploy the changes. This should make it easy for Locutus contributors (or any Github user really, using pull requests) to update the site, making it less dependent on few core members, and more a community effort. This is also the way I want to do regular Locutus development. Less via comments, more via the power of Github. To people wondering where the compiler has gone to, I’m discontinuing that feature. It was more often broken then working, and I think this site should focus on being a simple resource and discussion platform, and not much else. Now that everything is open sourced more I think there’s room for anyone to build a better alternative. While I’m not actively involved with Locutus anymore, I hope taking this step will make the project ready for the future. Best wishes, Kevin","categories":[],"tags":[{"name":"website","slug":"website","permalink":"https://locutus.io/tags/website/"},{"name":"octopress","slug":"octopress","permalink":"https://locutus.io/tags/octopress/"},{"name":"future","slug":"future","permalink":"https://locutus.io/tags/future/"}]}]}