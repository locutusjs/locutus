<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>PHP&#39;s strtotime in JavaScript | Locutus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Here&#39;s what our current JavaScript equivalent to PHP&#39;s strtotime looks like.">
<meta property="og:type" content="website">
<meta property="og:title" content="PHP&#39;s strtotime in JavaScript">
<meta property="og:url" content="https://locutus.io/php/datetime/strtotime/index.html">
<meta property="og:site_name" content="Locutus">
<meta property="og:description" content="Here&#39;s what our current JavaScript equivalent to PHP&#39;s strtotime looks like.">
<meta property="og:locale">
<meta property="article:published_time" content="2026-01-08T09:40:32.255Z">
<meta property="article:modified_time" content="2026-01-08T09:40:32.255Z">
<meta property="article:author" content="Kevin van Zonneveld">
<meta name="twitter:card" content="summary">
    

    

    

    
<link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/vendor/open-sans/styles.css">

    
<link rel="stylesheet" href="/vendor/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/locutus.css">


    
<script src="/vendor/jquery/2.1.3/jquery.min.js"></script>

    <script src="//kvz.github.io/on-the-githubs/js/jquery.on-the-githubs.min.js"></script>

    
    
        
<link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">

    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63083-7', 'auto');
ga('send', 'pageview');

</script>
    
    
    

<meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Locutus" type="application/atom+xml">
</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Locutus</span>
            </a>
            <nav id="main-nav">
                
                  <a class="main-nav-link" href="/c">C</a>
                
                  <a class="main-nav-link" href="/golang">Go</a>
                
                  <a class="main-nav-link" href="/python">Python</a>
                
                  <a class="main-nav-link" href="/ruby">Ruby</a>
                
                  <a class="main-nav-link" href="/php">PHP</a>
                
                <span class="main-nav-link">|</span>
                
                  <a class="main-nav-link" href="/archives">Blog</a>
                
                  <a class="main-nav-link" href="/authors">Authors</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
        x: 'en',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    console.log(INSIGHT_CONFIG)
})(window);
</script>

<script src="/js/insight.js"></script>



</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                  <td><a class="main-nav-link" href="/c">C</a></td>
                
                  <td><a class="main-nav-link" href="/golang">Go</a></td>
                
                  <td><a class="main-nav-link" href="/python">Python</a></td>
                
                  <td><a class="main-nav-link" href="/ruby">Ruby</a></td>
                
                  <td><a class="main-nav-link" href="/php">PHP</a></td>
                
                <td><span class="main-nav-link">|</span></td>
                
                    <td><a class="main-nav-link" href="/archives">Blog</a></td>
                
                    <td><a class="main-nav-link" href="/authors">Authors</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            <section id="main">

  


<article class="article article-type-function" >
  <div class="article-inner">
    <header class="article-header">
      <h1 class="article-title">PHP&#39;s strtotime in JavaScript</h1>
      
    </header>

    <div class="article-entry">
      <h2>How to use</h2>
      <p>
        You you can install via <code>yarn add locutus</code> and
        require this function via <code>const strtotime = require('locutus/php/datetime/strtotime')</code>.
      </p>
      <p>
        It is important to use a bundler that supports tree-shaking
        so that you only ship the functions that you actually use to your browser,
        instead of all of Locutus, which is massive. Examples are:
        <a href="https://parceljs.org/" target="_blank" rel="external">Parcel</a>,
        <a href="https://webpack.github.io/" target="_blank" rel="external">webpack</a>, or
        <a href="https://rollupjs.org/" target="_blank" rel="external">rollup.js</a>.

        For server-side use this is typically less of a concern.
      </p>

      
        <h2>Examples</h2>
        <p>
          Please note that these examples are distilled from test cases that automatically verify
          our functions still work correctly. This could explain some quirky ones.
        </p>

        <table>
          <tr><th>#</th><th>code</th><th>expected result</th></tr>
        
          <tr><td>1</td><td><code>strtotime(&#39;+1 day&#39;, 1129633200)</code></td><td><code>1129719600</code></td></tr>
        
          <tr><td>2</td><td><code>strtotime(&#39;+1 week 2 days 4 hours 2 seconds&#39;, 1129633200)</code></td><td><code>1130425202</code></td></tr>
        
          <tr><td>3</td><td><code>strtotime(&#39;last month&#39;, 1129633200)</code></td><td><code>1127041200</code></td></tr>
        
          <tr><td>4</td><td><code>strtotime(&#39;2009-05-04 08:30:00+00&#39;)</code></td><td><code>1241425800</code></td></tr>
        
          <tr><td>5</td><td><code>strtotime(&#39;2009-05-04 08:30:00+02:00&#39;)</code></td><td><code>1241418600</code></td></tr>
        
          <tr><td>6</td><td><code>strtotime(&#39;2009-05-04 08:30:00 YWT&#39;)</code></td><td><code>1241454600</code></td></tr>
        
          <tr><td>7</td><td><code>strtotime(&#39;10-JUL-17&#39;)</code></td><td><code>1499644800</code></td></tr>
        
        </table>
      

      

      

      

      
        <h2>Notes</h2>
        <ul>
        
          <li><p>Examples all have a fixed timestamp to prevent
tests to fail because of variable time(zones)</p>
</li>
        
        </ul>
      

      

      <p>
        Here's what our current JavaScript equivalent to <a target="_blank" rel="noopener" href="https://php.net/manual/en/function.strtotime.php">PHP's strtotime</a> looks like.
      </p>

      <!-- Code -->
      <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reSpace = <span class="string">&#x27;[ \\t]+&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reSpaceOpt = <span class="string">&#x27;[ \\t]*&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMeridian = <span class="string">&#x27;(?:([ap])\\.?m\\.?([\\t ]|$))&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reHour24 = <span class="string">&#x27;(2[0-4]|[01]?[0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reHour24lz = <span class="string">&#x27;([01][0-9]|2[0-4])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reHour12 = <span class="string">&#x27;(0?[1-9]|1[0-2])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMinute = <span class="string">&#x27;([0-5]?[0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMinutelz = <span class="string">&#x27;([0-5][0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reSecond = <span class="string">&#x27;(60|[0-5]?[0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reSecondlz = <span class="string">&#x27;(60|[0-5][0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reFrac = <span class="string">&#x27;(?:\\.([0-9]+))&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reDayfull = <span class="string">&#x27;sunday|monday|tuesday|wednesday|thursday|friday|saturday&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reDayabbr = <span class="string">&#x27;sun|mon|tue|wed|thu|fri|sat&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reDaytext = reDayfull + <span class="string">&#x27;|&#x27;</span> + reDayabbr + <span class="string">&#x27;|weekdays?&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reReltextnumber = <span class="string">&#x27;first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reReltexttext = <span class="string">&#x27;next|last|previous|this&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reReltextunit = <span class="string">&#x27;(?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|&#x27;</span> + reDaytext</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reYear = <span class="string">&#x27;([0-9]&#123;1,4&#125;)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reYear2 = <span class="string">&#x27;([0-9]&#123;2&#125;)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reYear4 = <span class="string">&#x27;([0-9]&#123;4&#125;)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reYear4withSign = <span class="string">&#x27;([+-]?[0-9]&#123;4&#125;)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMonth = <span class="string">&#x27;(1[0-2]|0?[0-9])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMonthlz = <span class="string">&#x27;(0[0-9]|1[0-2])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reDay = <span class="string">&#x27;(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reDaylz = <span class="string">&#x27;(0[0-9]|[1-2][0-9]|3[01])&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reMonthFull = <span class="string">&#x27;january|february|march|april|may|june|july|august|september|october|november|december&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMonthAbbr = <span class="string">&#x27;jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMonthroman = <span class="string">&#x27;i[vx]|vi&#123;0,3&#125;|xi&#123;0,2&#125;|i&#123;1,3&#125;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reMonthText = <span class="string">&#x27;(&#x27;</span> + reMonthFull + <span class="string">&#x27;|&#x27;</span> + reMonthAbbr + <span class="string">&#x27;|&#x27;</span> + reMonthroman + <span class="string">&#x27;)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reTzCorrection = <span class="string">&#x27;((?:GMT)?([+-])&#x27;</span> + reHour24 + <span class="string">&#x27;:?&#x27;</span> + reMinute + <span class="string">&#x27;?)&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reTzAbbr = <span class="string">&#x27;\\(?([a-zA-Z]&#123;1,6&#125;)\\)?&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reDayOfYear = <span class="string">&#x27;(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reWeekOfYear = <span class="string">&#x27;(0[1-9]|[1-4][0-9]|5[0-3])&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reDateNoYear = reMonthText + <span class="string">&#x27;[ .\\t-]*&#x27;</span> + reDay + <span class="string">&#x27;[,.stndrh\\t ]*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processMeridian</span>(<span class="params">hour, meridian</span>) &#123;</span><br><span class="line">  meridian = meridian &amp;&amp; meridian.<span class="title function_">toLowerCase</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (meridian) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">      hour += hour === <span class="number">12</span> ? -<span class="number">12</span> : <span class="number">0</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;p&#x27;</span>:</span><br><span class="line">      hour += hour !== <span class="number">12</span> ? <span class="number">12</span> : <span class="number">0</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> hour</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processYear</span>(<span class="params">yearStr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> year = +yearStr</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (yearStr.<span class="property">length</span> &lt; <span class="number">4</span> &amp;&amp; year &lt; <span class="number">100</span>) &#123;</span><br><span class="line">    year += year &lt; <span class="number">70</span> ? <span class="number">2000</span> : <span class="number">1900</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> year</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lookupMonth</span>(<span class="params">monthStr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">jan</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">january</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">i</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">feb</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">february</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">ii</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">mar</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">march</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">iii</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">apr</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">april</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">iv</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">may</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">v</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">jun</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">june</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">vi</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">jul</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">july</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">vii</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">aug</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">august</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">viii</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">sep</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">sept</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">september</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">ix</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">oct</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">october</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">x</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">nov</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">november</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">xi</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">dec</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">december</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">xii</span>: <span class="number">11</span>,</span><br><span class="line">  &#125;[monthStr.<span class="title function_">toLowerCase</span>()]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lookupWeekday</span>(<span class="params">dayStr, desiredSundayNumber = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dayNumbers = &#123;</span><br><span class="line">    <span class="attr">mon</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">monday</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">tue</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">tuesday</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">wed</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">wednesday</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">thu</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">thursday</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">fri</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">friday</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">sat</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">saturday</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">sun</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">sunday</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dayNumbers[dayStr.<span class="title function_">toLowerCase</span>()] || desiredSundayNumber</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lookupRelative</span>(<span class="params">relText</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> relativeNumbers = &#123;</span><br><span class="line">    <span class="attr">last</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="attr">previous</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="attr">this</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">first</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">next</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">second</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">third</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">fourth</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">fifth</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">sixth</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">seventh</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">eight</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">eighth</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">ninth</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">tenth</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">eleventh</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">twelfth</span>: <span class="number">12</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> relativeBehavior = &#123;</span><br><span class="line">    <span class="attr">this</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> relTextLower = relText.<span class="title function_">toLowerCase</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">amount</span>: relativeNumbers[relTextLower],</span><br><span class="line">    <span class="attr">behavior</span>: relativeBehavior[relTextLower] || <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processTzCorrection</span>(<span class="params">tzOffset, oldValue</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reTzCorrectionLoose = <span class="regexp">/(?:GMT)?([+-])(\d+)(:?)(\d&#123;0,2&#125;)/i</span></span><br><span class="line">  tzOffset = tzOffset &amp;&amp; tzOffset.<span class="title function_">match</span>(reTzCorrectionLoose)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!tzOffset) &#123;</span><br><span class="line">    <span class="keyword">return</span> oldValue</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> sign = tzOffset[<span class="number">1</span>] === <span class="string">&#x27;-&#x27;</span> ? -<span class="number">1</span> : <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> hours = +tzOffset[<span class="number">2</span>]</span><br><span class="line">  <span class="keyword">let</span> minutes = +tzOffset[<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!tzOffset[<span class="number">4</span>] &amp;&amp; !tzOffset[<span class="number">3</span>]) &#123;</span><br><span class="line">    minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours % <span class="number">100</span>)</span><br><span class="line">    hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours / <span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// timezone offset in seconds</span></span><br><span class="line">  <span class="keyword">return</span> sign * (hours * <span class="number">60</span> + minutes) * <span class="number">60</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// tz abbrevation : tz offset in seconds</span></span><br><span class="line"><span class="keyword">const</span> tzAbbrOffsets = &#123;</span><br><span class="line">  <span class="attr">acdt</span>: <span class="number">37800</span>,</span><br><span class="line">  <span class="attr">acst</span>: <span class="number">34200</span>,</span><br><span class="line">  <span class="attr">addt</span>: -<span class="number">7200</span>,</span><br><span class="line">  <span class="attr">adt</span>: -<span class="number">10800</span>,</span><br><span class="line">  <span class="attr">aedt</span>: <span class="number">39600</span>,</span><br><span class="line">  <span class="attr">aest</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">ahdt</span>: -<span class="number">32400</span>,</span><br><span class="line">  <span class="attr">ahst</span>: -<span class="number">36000</span>,</span><br><span class="line">  <span class="attr">akdt</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">akst</span>: -<span class="number">32400</span>,</span><br><span class="line">  <span class="attr">amt</span>: -<span class="number">13840</span>,</span><br><span class="line">  <span class="attr">apt</span>: -<span class="number">10800</span>,</span><br><span class="line">  <span class="attr">ast</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">awdt</span>: <span class="number">32400</span>,</span><br><span class="line">  <span class="attr">awst</span>: <span class="number">28800</span>,</span><br><span class="line">  <span class="attr">awt</span>: -<span class="number">10800</span>,</span><br><span class="line">  <span class="attr">bdst</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">bdt</span>: -<span class="number">36000</span>,</span><br><span class="line">  <span class="attr">bmt</span>: -<span class="number">14309</span>,</span><br><span class="line">  <span class="attr">bst</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">cast</span>: <span class="number">34200</span>,</span><br><span class="line">  <span class="attr">cat</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">cddt</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">cdt</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">cemt</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">cest</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">cet</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">cmt</span>: -<span class="number">15408</span>,</span><br><span class="line">  <span class="attr">cpt</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">cst</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">cwt</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">chst</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">dmt</span>: -<span class="number">1521</span>,</span><br><span class="line">  <span class="attr">eat</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">eddt</span>: -<span class="number">10800</span>,</span><br><span class="line">  <span class="attr">edt</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">eest</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">eet</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">emt</span>: -<span class="number">26248</span>,</span><br><span class="line">  <span class="attr">ept</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">est</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">ewt</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">ffmt</span>: -<span class="number">14660</span>,</span><br><span class="line">  <span class="attr">fmt</span>: -<span class="number">4056</span>,</span><br><span class="line">  <span class="attr">gdt</span>: <span class="number">39600</span>,</span><br><span class="line">  <span class="attr">gmt</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">gst</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">hdt</span>: -<span class="number">34200</span>,</span><br><span class="line">  <span class="attr">hkst</span>: <span class="number">32400</span>,</span><br><span class="line">  <span class="attr">hkt</span>: <span class="number">28800</span>,</span><br><span class="line">  <span class="attr">hmt</span>: -<span class="number">19776</span>,</span><br><span class="line">  <span class="attr">hpt</span>: -<span class="number">34200</span>,</span><br><span class="line">  <span class="attr">hst</span>: -<span class="number">36000</span>,</span><br><span class="line">  <span class="attr">hwt</span>: -<span class="number">34200</span>,</span><br><span class="line">  <span class="attr">iddt</span>: <span class="number">14400</span>,</span><br><span class="line">  <span class="attr">idt</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">imt</span>: <span class="number">25025</span>,</span><br><span class="line">  <span class="attr">ist</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">jdt</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">jmt</span>: <span class="number">8440</span>,</span><br><span class="line">  <span class="attr">jst</span>: <span class="number">32400</span>,</span><br><span class="line">  <span class="attr">kdt</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">kmt</span>: <span class="number">5736</span>,</span><br><span class="line">  <span class="attr">kst</span>: <span class="number">30600</span>,</span><br><span class="line">  <span class="attr">lst</span>: <span class="number">9394</span>,</span><br><span class="line">  <span class="attr">mddt</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">mdst</span>: <span class="number">16279</span>,</span><br><span class="line">  <span class="attr">mdt</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">mest</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">met</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">mmt</span>: <span class="number">9017</span>,</span><br><span class="line">  <span class="attr">mpt</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">msd</span>: <span class="number">14400</span>,</span><br><span class="line">  <span class="attr">msk</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">mst</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">mwt</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">nddt</span>: -<span class="number">5400</span>,</span><br><span class="line">  <span class="attr">ndt</span>: -<span class="number">9052</span>,</span><br><span class="line">  <span class="attr">npt</span>: -<span class="number">9000</span>,</span><br><span class="line">  <span class="attr">nst</span>: -<span class="number">12600</span>,</span><br><span class="line">  <span class="attr">nwt</span>: -<span class="number">9000</span>,</span><br><span class="line">  <span class="attr">nzdt</span>: <span class="number">46800</span>,</span><br><span class="line">  <span class="attr">nzmt</span>: <span class="number">41400</span>,</span><br><span class="line">  <span class="attr">nzst</span>: <span class="number">43200</span>,</span><br><span class="line">  <span class="attr">pddt</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">pdt</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">pkst</span>: <span class="number">21600</span>,</span><br><span class="line">  <span class="attr">pkt</span>: <span class="number">18000</span>,</span><br><span class="line">  <span class="attr">plmt</span>: <span class="number">25590</span>,</span><br><span class="line">  <span class="attr">pmt</span>: -<span class="number">13236</span>,</span><br><span class="line">  <span class="attr">ppmt</span>: -<span class="number">17340</span>,</span><br><span class="line">  <span class="attr">ppt</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">pst</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">pwt</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">qmt</span>: -<span class="number">18840</span>,</span><br><span class="line">  <span class="attr">rmt</span>: <span class="number">5794</span>,</span><br><span class="line">  <span class="attr">sast</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">sdmt</span>: -<span class="number">16800</span>,</span><br><span class="line">  <span class="attr">sjmt</span>: -<span class="number">20173</span>,</span><br><span class="line">  <span class="attr">smt</span>: -<span class="number">13884</span>,</span><br><span class="line">  <span class="attr">sst</span>: -<span class="number">39600</span>,</span><br><span class="line">  <span class="attr">tbmt</span>: <span class="number">10751</span>,</span><br><span class="line">  <span class="attr">tmt</span>: <span class="number">12344</span>,</span><br><span class="line">  <span class="attr">uct</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">utc</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">wast</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">wat</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">wemt</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">west</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">wet</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">wib</span>: <span class="number">25200</span>,</span><br><span class="line">  <span class="attr">wita</span>: <span class="number">28800</span>,</span><br><span class="line">  <span class="attr">wit</span>: <span class="number">32400</span>,</span><br><span class="line">  <span class="attr">wmt</span>: <span class="number">5040</span>,</span><br><span class="line">  <span class="attr">yddt</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">ydt</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">ypt</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">yst</span>: -<span class="number">32400</span>,</span><br><span class="line">  <span class="attr">ywt</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">a</span>: <span class="number">3600</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">7200</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">10800</span>,</span><br><span class="line">  <span class="attr">d</span>: <span class="number">14400</span>,</span><br><span class="line">  <span class="attr">e</span>: <span class="number">18000</span>,</span><br><span class="line">  <span class="attr">f</span>: <span class="number">21600</span>,</span><br><span class="line">  <span class="attr">g</span>: <span class="number">25200</span>,</span><br><span class="line">  <span class="attr">h</span>: <span class="number">28800</span>,</span><br><span class="line">  <span class="attr">i</span>: <span class="number">32400</span>,</span><br><span class="line">  <span class="attr">k</span>: <span class="number">36000</span>,</span><br><span class="line">  <span class="attr">l</span>: <span class="number">39600</span>,</span><br><span class="line">  <span class="attr">m</span>: <span class="number">43200</span>,</span><br><span class="line">  <span class="attr">n</span>: -<span class="number">3600</span>,</span><br><span class="line">  <span class="attr">o</span>: -<span class="number">7200</span>,</span><br><span class="line">  <span class="attr">p</span>: -<span class="number">10800</span>,</span><br><span class="line">  <span class="attr">q</span>: -<span class="number">14400</span>,</span><br><span class="line">  <span class="attr">r</span>: -<span class="number">18000</span>,</span><br><span class="line">  <span class="attr">s</span>: -<span class="number">21600</span>,</span><br><span class="line">  <span class="attr">t</span>: -<span class="number">25200</span>,</span><br><span class="line">  <span class="attr">u</span>: -<span class="number">28800</span>,</span><br><span class="line">  <span class="attr">v</span>: -<span class="number">32400</span>,</span><br><span class="line">  <span class="attr">w</span>: -<span class="number">36000</span>,</span><br><span class="line">  <span class="attr">x</span>: -<span class="number">39600</span>,</span><br><span class="line">  <span class="attr">y</span>: -<span class="number">43200</span>,</span><br><span class="line">  <span class="attr">z</span>: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> formats = &#123;</span><br><span class="line">  <span class="attr">yesterday</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^yesterday/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;yesterday&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rd</span> -= <span class="number">1</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">now</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^now/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;now&#x27;</span>,</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">noon</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^noon/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;noon&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>() &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">midnightOrToday</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^(midnight|today)/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;midnight | today&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">tomorrow</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^tomorrow/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;tomorrow&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rd</span> += <span class="number">1</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timestamp</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^@(-?\d+)/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timestamp&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, timestamp</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rs</span> += +timestamp</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">y</span> = <span class="number">1970</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">m</span> = <span class="number">0</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">d</span> = <span class="number">1</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dates</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>() &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">zone</span>(<span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">firstOrLastDay</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^(first|last) day of/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;firstdayof | lastdayof&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (day.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;first&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstOrLastDayOfMonth</span> = <span class="number">1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstOrLastDayOfMonth</span> = -<span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">backOrFrontOf</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(back|front) of &#x27;</span> + reHour24 + reSpaceOpt + reMeridian + <span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;backof | frontof&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, side, hours, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> back = side.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;back&#x27;</span></span><br><span class="line">      <span class="keyword">let</span> hour = +hours</span><br><span class="line">      <span class="keyword">let</span> minute = <span class="number">15</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!back) &#123;</span><br><span class="line">        hour -= <span class="number">1</span></span><br><span class="line">        minute = <span class="number">45</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      hour = <span class="title function_">processMeridian</span>(hour, meridian)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">resetTime</span>() &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(hour, minute, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">weekdayOf</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">      <span class="string">&#x27;^(&#x27;</span> +</span><br><span class="line">        reReltextnumber +</span><br><span class="line">        <span class="string">&#x27;|&#x27;</span> +</span><br><span class="line">        reReltexttext +</span><br><span class="line">        <span class="string">&#x27;)&#x27;</span> +</span><br><span class="line">        reSpace +</span><br><span class="line">        <span class="string">&#x27;(&#x27;</span> +</span><br><span class="line">        reDayfull +</span><br><span class="line">        <span class="string">&#x27;|&#x27;</span> +</span><br><span class="line">        reDayabbr +</span><br><span class="line">        <span class="string">&#x27;)&#x27;</span> +</span><br><span class="line">        reSpace +</span><br><span class="line">        <span class="string">&#x27;of&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;weekdayof&#x27;</span>,</span><br><span class="line">    <span class="comment">// todo</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">mssqltime</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reHour12 + <span class="string">&#x27;:&#x27;</span> + reMinutelz + <span class="string">&#x27;:&#x27;</span> + reSecondlz + <span class="string">&#x27;[:.]([0-9]+)&#x27;</span> + reMeridian, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;mssqltime&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, second, frac, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), +minute, +second, +frac.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">3</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">oracledate</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^(\d&#123;2&#125;)-([A-Z]&#123;3&#125;)-(\d&#123;2&#125;)$/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;d-M-y&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, monthText, year</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> month = &#123;</span><br><span class="line">        <span class="attr">JAN</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">FEB</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">MAR</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">APR</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">MAY</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">JUN</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">JUL</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">AUG</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="attr">SEP</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="attr">OCT</span>: <span class="number">9</span>,</span><br><span class="line">        <span class="attr">NOV</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">DEC</span>: <span class="number">11</span>,</span><br><span class="line">      &#125;[monthText.<span class="title function_">toUpperCase</span>()]</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="number">2000</span> + <span class="built_in">parseInt</span>(year, <span class="number">10</span>), month, <span class="built_in">parseInt</span>(day, <span class="number">10</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeLong12</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reHour12 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute + <span class="string">&#x27;[:.]&#x27;</span> + reSecondlz + reSpaceOpt + reMeridian, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timelong12&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, second, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeShort12</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reHour12 + <span class="string">&#x27;[:.]&#x27;</span> + reMinutelz + reSpaceOpt + reMeridian, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timeshort12&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), +minute, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeTiny12</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reHour12 + reSpaceOpt + reMeridian, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timetiny12&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">soap</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">      <span class="string">&#x27;^&#x27;</span> +</span><br><span class="line">        reYear4 +</span><br><span class="line">        <span class="string">&#x27;-&#x27;</span> +</span><br><span class="line">        reMonthlz +</span><br><span class="line">        <span class="string">&#x27;-&#x27;</span> +</span><br><span class="line">        reDaylz +</span><br><span class="line">        <span class="string">&#x27;T&#x27;</span> +</span><br><span class="line">        reHour24lz +</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span> +</span><br><span class="line">        reMinutelz +</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span> +</span><br><span class="line">        reSecondlz +</span><br><span class="line">        reFrac +</span><br><span class="line">        reTzCorrection +</span><br><span class="line">        <span class="string">&#x27;?&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;soap&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day, hour, minute, second, frac, tzCorrection</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day) &amp;&amp;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, +frac.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">3</span>)) &amp;&amp;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">zone</span>(<span class="title function_">processTzCorrection</span>(tzCorrection))</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">wddx</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;-&#x27;</span> + reMonth + <span class="string">&#x27;-&#x27;</span> + reDay + <span class="string">&#x27;T&#x27;</span> + reHour24 + <span class="string">&#x27;:&#x27;</span> + reMinute + <span class="string">&#x27;:&#x27;</span> + reSecond),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wddx&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">exif</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">      <span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;:&#x27;</span> + reMonthlz + <span class="string">&#x27;:&#x27;</span> + reDaylz + <span class="string">&#x27; &#x27;</span> + reHour24lz + <span class="string">&#x27;:&#x27;</span> + reMinutelz + <span class="string">&#x27;:&#x27;</span> + reSecondlz,</span><br><span class="line">      <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;exif&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">xmlRpc</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + reMonthlz + reDaylz + <span class="string">&#x27;T&#x27;</span> + reHour24 + <span class="string">&#x27;:&#x27;</span> + reMinutelz + <span class="string">&#x27;:&#x27;</span> + reSecondlz),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xmlrpc&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">xmlRpcNoColon</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + reMonthlz + reDaylz + <span class="string">&#x27;[Tt]&#x27;</span> + reHour24 + reMinutelz + reSecondlz),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xmlrpcnocolon&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">clf</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">      <span class="string">&#x27;^&#x27;</span> +</span><br><span class="line">        reDay +</span><br><span class="line">        <span class="string">&#x27;/(&#x27;</span> +</span><br><span class="line">        reMonthAbbr +</span><br><span class="line">        <span class="string">&#x27;)/&#x27;</span> +</span><br><span class="line">        reYear4 +</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span> +</span><br><span class="line">        reHour24lz +</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span> +</span><br><span class="line">        reMinutelz +</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span> +</span><br><span class="line">        reSecondlz +</span><br><span class="line">        reSpace +</span><br><span class="line">        reTzCorrection,</span><br><span class="line">      <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;clf&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, month, year, hour, minute, second, tzCorrection</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, <span class="title function_">lookupMonth</span>(month), +day) &amp;&amp;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>) &amp;&amp;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">zone</span>(<span class="title function_">processTzCorrection</span>(tzCorrection))</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">iso8601long</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^t?&#x27;</span> + reHour24 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute + <span class="string">&#x27;[:.]&#x27;</span> + reSecond + reFrac, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;iso8601long&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, second, frac</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, +frac.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">3</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateTextual</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reMonthText + <span class="string">&#x27;[ .\\t-]*&#x27;</span> + reDay + <span class="string">&#x27;[,.stndrh\\t ]+&#x27;</span> + reYear, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datetextual&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">pointedDate4</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDay + <span class="string">&#x27;[.\\t-]&#x27;</span> + reMonth + <span class="string">&#x27;[.-]&#x27;</span> + reYear4),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;pointeddate4&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, month, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">pointedDate2</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDay + <span class="string">&#x27;[.\\t]&#x27;</span> + reMonth + <span class="string">&#x27;\\.&#x27;</span> + reYear2),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;pointeddate2&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, month, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeLong24</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^t?&#x27;</span> + reHour24 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute + <span class="string">&#x27;[:.]&#x27;</span> + reSecond),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timelong24&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateNoColon</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + reMonthlz + reDaylz),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datenocolon&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">pgydotd</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;\\.?&#x27;</span> + reDayOfYear),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;pgydotd&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, <span class="number">0</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeShort24</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^t?&#x27;</span> + reHour24 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;timeshort24&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">iso8601noColon</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^t?&#x27;</span> + reHour24lz + reMinutelz + reSecondlz, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;iso8601nocolon&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">iso8601dateSlash</span>: &#123;</span><br><span class="line">    <span class="comment">// eventhough the trailing slash is optional in PHP</span></span><br><span class="line">    <span class="comment">// here it&#x27;s mandatory and inputs without the slash</span></span><br><span class="line">    <span class="comment">// are handled by dateslash</span></span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;/&#x27;</span> + reMonthlz + <span class="string">&#x27;/&#x27;</span> + reDaylz + <span class="string">&#x27;/&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;iso8601dateslash&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateSlash</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;/&#x27;</span> + reMonth + <span class="string">&#x27;/&#x27;</span> + reDay),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dateslash&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">american</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reMonth + <span class="string">&#x27;/&#x27;</span> + reDay + <span class="string">&#x27;/&#x27;</span> + reYear),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;american&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">americanShort</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reMonth + <span class="string">&#x27;/&#x27;</span> + reDay),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;americanshort&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">gnuDateShortOrIso8601date2</span>: &#123;</span><br><span class="line">    <span class="comment">// iso8601date2 is complete subset of gnudateshort</span></span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear + <span class="string">&#x27;-&#x27;</span> + reMonth + <span class="string">&#x27;-&#x27;</span> + reDay),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;gnudateshort | iso8601date2&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">iso8601date4</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4withSign + <span class="string">&#x27;-&#x27;</span> + reMonthlz + <span class="string">&#x27;-&#x27;</span> + reDaylz),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;iso8601date4&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">gnuNoColon</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^t?&#x27;</span> + reHour24lz + reMinutelz, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;gnunocolon&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, hour, minute</span>) &#123;</span><br><span class="line">      <span class="comment">// this rule is a special case</span></span><br><span class="line">      <span class="comment">// if time was already set once by any preceding rule, it sets the captured value as year</span></span><br><span class="line">      <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">times</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">f</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">y</span> = hour * <span class="number">100</span> + +minute</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">times</span>++</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">gnuDateShorter</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;-&#x27;</span> + reMonth),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;gnudateshorter&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, month - <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">pgTextReverse</span>: &#123;</span><br><span class="line">    <span class="comment">//             note: allowed years are from 32-9999</span></span><br><span class="line">    <span class="comment">// years below 32 should be treated as days in datefull</span></span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + <span class="string">&#x27;(\\d&#123;3,4&#125;|[4-9]\\d|3[2-9])-(&#x27;</span> + reMonthAbbr + <span class="string">&#x27;)-&#x27;</span> + reDaylz, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;pgtextreverse&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateFull</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDay + <span class="string">&#x27;[ \\t.-]*&#x27;</span> + reMonthText + <span class="string">&#x27;[ \\t.-]*&#x27;</span> + reYear, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datefull&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, month, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateNoDay</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reMonthText + <span class="string">&#x27;[ .\\t-]*&#x27;</span> + reYear4, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datenoday&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, <span class="title function_">lookupMonth</span>(month), <span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateNoDayRev</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;[ .\\t-]*&#x27;</span> + reMonthText, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datenodayrev&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, month</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, <span class="title function_">lookupMonth</span>(month), <span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">pgTextShort</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(&#x27;</span> + reMonthAbbr + <span class="string">&#x27;)-&#x27;</span> + reDaylz + <span class="string">&#x27;-&#x27;</span> + reYear, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;pgtextshort&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, year</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="title function_">processYear</span>(year), <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateNoYear</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDateNoYear, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datenoyear&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateNoYearRev</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDay + <span class="string">&#x27;[ .\\t-]*&#x27;</span> + reMonthText, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;datenoyearrev&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, day, month</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">isoWeekDay</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4 + <span class="string">&#x27;-?W&#x27;</span> + reWeekOfYear + <span class="string">&#x27;(?:-?([0-7]))?&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;isoweekday | isoweek&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year, week, day</span>) &#123;</span><br><span class="line">      day = day ? +day : <span class="number">1</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">ymd</span>(+year, <span class="number">0</span>, <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// get day of week for Jan 1st</span></span><br><span class="line">      <span class="keyword">let</span> dayOfWeek = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">m</span>, <span class="variable language_">this</span>.<span class="property">d</span>).<span class="title function_">getDay</span>()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// and use the day to figure out the offset for day 1 of week 1</span></span><br><span class="line">      dayOfWeek = <span class="number">0</span> - (dayOfWeek &gt; <span class="number">4</span> ? dayOfWeek - <span class="number">7</span> : dayOfWeek)</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rd</span> += dayOfWeek + (week - <span class="number">1</span>) * <span class="number">7</span> + day</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">relativeText</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(&#x27;</span> + reReltextnumber + <span class="string">&#x27;|&#x27;</span> + reReltexttext + <span class="string">&#x27;)&#x27;</span> + reSpace + <span class="string">&#x27;(&#x27;</span> + reReltextunit + <span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;relativetext&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, relValue, relUnit</span>) &#123;</span><br><span class="line">      <span class="comment">// todo: implement handling of &#x27;this time-unit&#x27;</span></span><br><span class="line">      <span class="comment">// biome-ignore lint/correctness/noUnusedVariables: behavior reserved for future use</span></span><br><span class="line">      <span class="keyword">const</span> &#123; amount, behavior &#125; = <span class="title function_">lookupRelative</span>(relValue)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">switch</span> (relUnit.<span class="title function_">toLowerCase</span>()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sec&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;secs&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;second&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;seconds&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rs</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;min&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;mins&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;minute&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;minutes&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ri</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;hour&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;hours&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rh</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;day&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;days&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fortnight&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fortnights&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;forthnight&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;forthnights&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount * <span class="number">14</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;week&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weeks&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount * <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;month&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;months&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rm</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;year&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;years&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ry</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;mon&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;monday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;tue&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;tuesday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;wed&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;wednesday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;thu&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;thursday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fri&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;friday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sat&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;saturday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sun&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sunday&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="title function_">lookupWeekday</span>(relUnit, <span class="number">7</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> = <span class="number">1</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += (amount &gt; <span class="number">0</span> ? amount - <span class="number">1</span> : amount) * <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weekday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weekdays&#x27;</span>:</span><br><span class="line">          <span class="comment">// todo</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">relative</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^([+-]*)[ \\t]*(\\d+)&#x27;</span> + reSpaceOpt + <span class="string">&#x27;(&#x27;</span> + reReltextunit + <span class="string">&#x27;|week)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;relative&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, signs, relValue, relUnit</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> minuses = signs.<span class="title function_">replace</span>(<span class="regexp">/[^-]/g</span>, <span class="string">&#x27;&#x27;</span>).<span class="property">length</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> amount = +relValue * <span class="title class_">Math</span>.<span class="title function_">pow</span>(-<span class="number">1</span>, minuses)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">switch</span> (relUnit.<span class="title function_">toLowerCase</span>()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sec&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;secs&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;second&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;seconds&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rs</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;min&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;mins&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;minute&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;minutes&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ri</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;hour&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;hours&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rh</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;day&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;days&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fortnight&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fortnights&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;forthnight&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;forthnights&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount * <span class="number">14</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;week&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weeks&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += amount * <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;month&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;months&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rm</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;year&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;years&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ry</span> += amount</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;mon&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;monday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;tue&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;tuesday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;wed&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;wednesday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;thu&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;thursday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fri&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;friday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sat&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;saturday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sun&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;sunday&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="title function_">lookupWeekday</span>(relUnit, <span class="number">7</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> = <span class="number">1</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += (amount &gt; <span class="number">0</span> ? amount - <span class="number">1</span> : amount) * <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weekday&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;weekdays&#x27;</span>:</span><br><span class="line">          <span class="comment">// todo</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dayText</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(&#x27;</span> + reDaytext + <span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;daytext&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, dayText</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">resetTime</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="title function_">lookupWeekday</span>(dayText, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> !== <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> = <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">relativeTextWeek</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(&#x27;</span> + reReltexttext + <span class="string">&#x27;)&#x27;</span> + reSpace + <span class="string">&#x27;week&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;relativetextweek&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, relText</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">switch</span> (relText.<span class="title function_">toLowerCase</span>()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;this&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += <span class="number">0</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;next&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> += <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;last&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;previous&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">rd</span> -= <span class="number">7</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">weekday</span>)) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">monthFullOrMonthAbbr</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^(&#x27;</span> + reMonthFull + <span class="string">&#x27;|&#x27;</span> + reMonthAbbr + <span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;monthfull | monthabbr&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), <span class="variable language_">this</span>.<span class="property">d</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">tzCorrection</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reTzCorrection, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;tzcorrection&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">tzCorrection</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">zone</span>(<span class="title function_">processTzCorrection</span>(tzCorrection))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">tzAbbr</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reTzAbbr),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;tzabbr&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, abbr</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> offset = tzAbbrOffsets[abbr.<span class="title function_">toLowerCase</span>()]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">isNaN</span>(offset)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">zone</span>(offset)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">ago</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^ago/i</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ago&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ry</span> = -<span class="variable language_">this</span>.<span class="property">ry</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rm</span> = -<span class="variable language_">this</span>.<span class="property">rm</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rd</span> = -<span class="variable language_">this</span>.<span class="property">rd</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rh</span> = -<span class="variable language_">this</span>.<span class="property">rh</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ri</span> = -<span class="variable language_">this</span>.<span class="property">ri</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rs</span> = -<span class="variable language_">this</span>.<span class="property">rs</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rf</span> = -<span class="variable language_">this</span>.<span class="property">rf</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">year4</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reYear4),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;year4&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, year</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">y</span> = +year</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">whitespace</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="regexp">/^[ .,\t]+/</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;whitespace&#x27;</span>,</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateShortWithTimeLong</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDateNoYear + <span class="string">&#x27;t?&#x27;</span> + reHour24 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute + <span class="string">&#x27;[:.]&#x27;</span> + reSecond, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dateshortwithtimelong&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, hour, minute, second</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, +second, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateShortWithTimeLong12</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">      <span class="string">&#x27;^&#x27;</span> + reDateNoYear + reHour12 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute + <span class="string">&#x27;[:.]&#x27;</span> + reSecondlz + reSpaceOpt + reMeridian,</span><br><span class="line">      <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dateshortwithtimelong12&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, hour, minute, second, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), +minute, +second, <span class="number">0</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateShortWithTimeShort</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDateNoYear + <span class="string">&#x27;t?&#x27;</span> + reHour24 + <span class="string">&#x27;[:.]&#x27;</span> + reMinute, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dateshortwithtimeshort&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, hour, minute</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(+hour, +minute, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dateShortWithTimeShort12</span>: &#123;</span><br><span class="line">    <span class="attr">regex</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + reDateNoYear + reHour12 + <span class="string">&#x27;[:.]&#x27;</span> + reMinutelz + reSpaceOpt + reMeridian, <span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dateshortwithtimeshort12&#x27;</span>,</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">match, month, day, hour, minute, meridian</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">ymd</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="title function_">lookupMonth</span>(month), +day) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">time</span>(<span class="title function_">processMeridian</span>(+hour, meridian), +minute, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resultProto = &#123;</span><br><span class="line">  <span class="comment">// date</span></span><br><span class="line">  <span class="attr">y</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">m</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">d</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="comment">// time</span></span><br><span class="line">  <span class="attr">h</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">i</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">s</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">f</span>: <span class="title class_">NaN</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// relative shifts</span></span><br><span class="line">  <span class="attr">ry</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rm</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rd</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rh</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">ri</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rs</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rf</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// weekday related shifts</span></span><br><span class="line">  <span class="attr">weekday</span>: <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="attr">weekdayBehavior</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// first or last day of month</span></span><br><span class="line">  <span class="comment">// 0 none, 1 first, -1 last</span></span><br><span class="line">  <span class="attr">firstOrLastDayOfMonth</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// timezone correction in minutes</span></span><br><span class="line">  <span class="attr">z</span>: <span class="title class_">NaN</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// counters</span></span><br><span class="line">  <span class="attr">dates</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">times</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">zones</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// helper functions</span></span><br><span class="line">  <span class="title function_">ymd</span>(<span class="params">y, m, d</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dates</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dates</span>++</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">m</span> = m</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">d</span> = d</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">time</span>(<span class="params">h, i, s, f</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">times</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">times</span>++</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">h</span> = h</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">i</span> = i</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s</span> = s</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f</span> = f</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">resetTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">h</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">i</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">times</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">zone</span>(<span class="params">minutes</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">zones</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">zones</span>++</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">z</span> = minutes</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toDate</span>(<span class="params">relativeTo</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dates</span> &amp;&amp; !<span class="variable language_">this</span>.<span class="property">times</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">h</span> = <span class="variable language_">this</span>.<span class="property">i</span> = <span class="variable language_">this</span>.<span class="property">s</span> = <span class="variable language_">this</span>.<span class="property">f</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill holes</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">y</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">y</span> = relativeTo.<span class="title function_">getFullYear</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">m</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">m</span> = relativeTo.<span class="title function_">getMonth</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">d</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">d</span> = relativeTo.<span class="title function_">getDate</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">h</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">h</span> = relativeTo.<span class="title function_">getHours</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">i</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">i</span> = relativeTo.<span class="title function_">getMinutes</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">s</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">s</span> = relativeTo.<span class="title function_">getSeconds</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">f</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">f</span> = relativeTo.<span class="title function_">getMilliseconds</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// adjust special early</span></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">firstOrLastDayOfMonth</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">d</span> = <span class="number">1</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> -<span class="number">1</span>:</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">d</span> = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">m</span> += <span class="number">1</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">weekday</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(relativeTo.<span class="title function_">getTime</span>())</span><br><span class="line">      date.<span class="title function_">setFullYear</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">m</span>, <span class="variable language_">this</span>.<span class="property">d</span>)</span><br><span class="line">      date.<span class="title function_">setHours</span>(<span class="variable language_">this</span>.<span class="property">h</span>, <span class="variable language_">this</span>.<span class="property">i</span>, <span class="variable language_">this</span>.<span class="property">s</span>, <span class="variable language_">this</span>.<span class="property">f</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> dow = date.<span class="title function_">getDay</span>()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weekdayBehavior</span> === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="comment">// To make &quot;this week&quot; work, where the current day of week is a &quot;sunday&quot;</span></span><br><span class="line">        <span class="keyword">if</span> (dow === <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">weekday</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekday</span> = -<span class="number">6</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// To make &quot;sunday this week&quot; work, where the current day of week is not a &quot;sunday&quot;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weekday</span> === <span class="number">0</span> &amp;&amp; dow !== <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">d</span> -= dow</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">d</span> += <span class="variable language_">this</span>.<span class="property">weekday</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> diff = <span class="variable language_">this</span>.<span class="property">weekday</span> - dow</span><br><span class="line"></span><br><span class="line">        <span class="comment">// some PHP magic</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="variable language_">this</span>.<span class="property">rd</span> &lt; <span class="number">0</span> &amp;&amp; diff &lt; <span class="number">0</span>) || (<span class="variable language_">this</span>.<span class="property">rd</span> &gt;= <span class="number">0</span> &amp;&amp; diff &lt;= -<span class="variable language_">this</span>.<span class="property">weekdayBehavior</span>)) &#123;</span><br><span class="line">          diff += <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weekday</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">d</span> += diff</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">d</span> -= <span class="number">7</span> - (<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="variable language_">this</span>.<span class="property">weekday</span>) - dow)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">weekday</span> = <span class="title class_">NaN</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// adjust relative</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">ry</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">m</span> += <span class="variable language_">this</span>.<span class="property">rm</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">d</span> += <span class="variable language_">this</span>.<span class="property">rd</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">h</span> += <span class="variable language_">this</span>.<span class="property">rh</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">i</span> += <span class="variable language_">this</span>.<span class="property">ri</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s</span> += <span class="variable language_">this</span>.<span class="property">rs</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f</span> += <span class="variable language_">this</span>.<span class="property">rf</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ry</span> = <span class="variable language_">this</span>.<span class="property">rm</span> = <span class="variable language_">this</span>.<span class="property">rd</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rh</span> = <span class="variable language_">this</span>.<span class="property">ri</span> = <span class="variable language_">this</span>.<span class="property">rs</span> = <span class="variable language_">this</span>.<span class="property">rf</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="title class_">Date</span>(relativeTo.<span class="title function_">getTime</span>())</span><br><span class="line">    <span class="comment">// since Date constructor treats years &lt;= 99 as 1900+</span></span><br><span class="line">    <span class="comment">// it can&#x27;t be used, thus this weird way</span></span><br><span class="line">    result.<span class="title function_">setFullYear</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">m</span>, <span class="variable language_">this</span>.<span class="property">d</span>)</span><br><span class="line">    result.<span class="title function_">setHours</span>(<span class="variable language_">this</span>.<span class="property">h</span>, <span class="variable language_">this</span>.<span class="property">i</span>, <span class="variable language_">this</span>.<span class="property">s</span>, <span class="variable language_">this</span>.<span class="property">f</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//             note: this is done twice in PHP</span></span><br><span class="line">    <span class="comment">// early when processing special relatives</span></span><br><span class="line">    <span class="comment">// and late</span></span><br><span class="line">    <span class="comment">// todo: check if the logic can be reduced</span></span><br><span class="line">    <span class="comment">// to just one time action</span></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">firstOrLastDayOfMonth</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        result.<span class="title function_">setDate</span>(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> -<span class="number">1</span>:</span><br><span class="line">        result.<span class="title function_">setMonth</span>(result.<span class="title function_">getMonth</span>() + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// adjust timezone</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(<span class="variable language_">this</span>.<span class="property">z</span>) &amp;&amp; result.<span class="title function_">getTimezoneOffset</span>() !== <span class="variable language_">this</span>.<span class="property">z</span>) &#123;</span><br><span class="line">      result.<span class="title function_">setUTCFullYear</span>(result.<span class="title function_">getFullYear</span>(), result.<span class="title function_">getMonth</span>(), result.<span class="title function_">getDate</span>())</span><br><span class="line"></span><br><span class="line">      result.<span class="title function_">setUTCHours</span>(result.<span class="title function_">getHours</span>(), result.<span class="title function_">getMinutes</span>(), result.<span class="title function_">getSeconds</span>() - <span class="variable language_">this</span>.<span class="property">z</span>, result.<span class="title function_">getMilliseconds</span>())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> <span class="title function_">strtotime</span>(<span class="params">str, now</span>) &#123;</span><br><span class="line">  <span class="comment">//       discuss at: https://locutus.io/php/strtotime/</span></span><br><span class="line">  <span class="comment">//      original by: Caio Ariede (https://caioariede.com)</span></span><br><span class="line">  <span class="comment">//      improved by: Kevin van Zonneveld (https://kvz.io)</span></span><br><span class="line">  <span class="comment">//      improved by: Caio Ariede (https://caioariede.com)</span></span><br><span class="line">  <span class="comment">//      improved by: A. Matas Quezada (https://amatiasq.com)</span></span><br><span class="line">  <span class="comment">//      improved by: preuter</span></span><br><span class="line">  <span class="comment">//      improved by: Brett Zamir (https://brett-zamir.me)</span></span><br><span class="line">  <span class="comment">//      improved by: Mirko Faber</span></span><br><span class="line">  <span class="comment">//         input by: David</span></span><br><span class="line">  <span class="comment">//      bugfixed by: Wagner B. Soares</span></span><br><span class="line">  <span class="comment">//      bugfixed by: Artur Tchernychev</span></span><br><span class="line">  <span class="comment">//      bugfixed by: Stephan Bsch-Plepelits (https://github.com/plepe)</span></span><br><span class="line">  <span class="comment">// reimplemented by: Rafa Kukawski</span></span><br><span class="line">  <span class="comment">//           note 1: Examples all have a fixed timestamp to prevent</span></span><br><span class="line">  <span class="comment">//           note 1: tests to fail because of variable time(zones)</span></span><br><span class="line">  <span class="comment">//        example 1: strtotime(&#x27;+1 day&#x27;, 1129633200)</span></span><br><span class="line">  <span class="comment">//        returns 1: 1129719600</span></span><br><span class="line">  <span class="comment">//        example 2: strtotime(&#x27;+1 week 2 days 4 hours 2 seconds&#x27;, 1129633200)</span></span><br><span class="line">  <span class="comment">//        returns 2: 1130425202</span></span><br><span class="line">  <span class="comment">//        example 3: strtotime(&#x27;last month&#x27;, 1129633200)</span></span><br><span class="line">  <span class="comment">//        returns 3: 1127041200</span></span><br><span class="line">  <span class="comment">//        example 4: strtotime(&#x27;2009-05-04 08:30:00+00&#x27;)</span></span><br><span class="line">  <span class="comment">//        returns 4: 1241425800</span></span><br><span class="line">  <span class="comment">//        example 5: strtotime(&#x27;2009-05-04 08:30:00+02:00&#x27;)</span></span><br><span class="line">  <span class="comment">//        returns 5: 1241418600</span></span><br><span class="line">  <span class="comment">//        example 6: strtotime(&#x27;2009-05-04 08:30:00 YWT&#x27;)</span></span><br><span class="line">  <span class="comment">//        returns 6: 1241454600</span></span><br><span class="line">  <span class="comment">//        example 7: strtotime(&#x27;10-JUL-17&#x27;)</span></span><br><span class="line">  <span class="comment">//        returns 7: 1499644800</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (now == <span class="literal">null</span>) &#123;</span><br><span class="line">    now = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() / <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// the rule order is important</span></span><br><span class="line">  <span class="comment">// if multiple rules match, the longest match wins</span></span><br><span class="line">  <span class="comment">// if multiple rules match the same string, the first match wins</span></span><br><span class="line">  <span class="keyword">const</span> rules = [</span><br><span class="line">    formats.<span class="property">yesterday</span>,</span><br><span class="line">    formats.<span class="property">now</span>,</span><br><span class="line">    formats.<span class="property">noon</span>,</span><br><span class="line">    formats.<span class="property">midnightOrToday</span>,</span><br><span class="line">    formats.<span class="property">tomorrow</span>,</span><br><span class="line">    formats.<span class="property">timestamp</span>,</span><br><span class="line">    formats.<span class="property">firstOrLastDay</span>,</span><br><span class="line">    formats.<span class="property">backOrFrontOf</span>,</span><br><span class="line">    <span class="comment">// formats.weekdayOf, // not yet implemented</span></span><br><span class="line">    formats.<span class="property">timeTiny12</span>,</span><br><span class="line">    formats.<span class="property">timeShort12</span>,</span><br><span class="line">    formats.<span class="property">timeLong12</span>,</span><br><span class="line">    formats.<span class="property">mssqltime</span>,</span><br><span class="line">    formats.<span class="property">oracledate</span>,</span><br><span class="line">    formats.<span class="property">timeShort24</span>,</span><br><span class="line">    formats.<span class="property">timeLong24</span>,</span><br><span class="line">    formats.<span class="property">iso8601long</span>,</span><br><span class="line">    formats.<span class="property">gnuNoColon</span>,</span><br><span class="line">    formats.<span class="property">iso8601noColon</span>,</span><br><span class="line">    formats.<span class="property">americanShort</span>,</span><br><span class="line">    formats.<span class="property">american</span>,</span><br><span class="line">    formats.<span class="property">iso8601date4</span>,</span><br><span class="line">    formats.<span class="property">iso8601dateSlash</span>,</span><br><span class="line">    formats.<span class="property">dateSlash</span>,</span><br><span class="line">    formats.<span class="property">gnuDateShortOrIso8601date2</span>,</span><br><span class="line">    formats.<span class="property">gnuDateShorter</span>,</span><br><span class="line">    formats.<span class="property">dateFull</span>,</span><br><span class="line">    formats.<span class="property">pointedDate4</span>,</span><br><span class="line">    formats.<span class="property">pointedDate2</span>,</span><br><span class="line">    formats.<span class="property">dateNoDay</span>,</span><br><span class="line">    formats.<span class="property">dateNoDayRev</span>,</span><br><span class="line">    formats.<span class="property">dateTextual</span>,</span><br><span class="line">    formats.<span class="property">dateNoYear</span>,</span><br><span class="line">    formats.<span class="property">dateNoYearRev</span>,</span><br><span class="line">    formats.<span class="property">dateNoColon</span>,</span><br><span class="line">    formats.<span class="property">xmlRpc</span>,</span><br><span class="line">    formats.<span class="property">xmlRpcNoColon</span>,</span><br><span class="line">    formats.<span class="property">soap</span>,</span><br><span class="line">    formats.<span class="property">wddx</span>,</span><br><span class="line">    formats.<span class="property">exif</span>,</span><br><span class="line">    formats.<span class="property">pgydotd</span>,</span><br><span class="line">    formats.<span class="property">isoWeekDay</span>,</span><br><span class="line">    formats.<span class="property">pgTextShort</span>,</span><br><span class="line">    formats.<span class="property">pgTextReverse</span>,</span><br><span class="line">    formats.<span class="property">clf</span>,</span><br><span class="line">    formats.<span class="property">year4</span>,</span><br><span class="line">    formats.<span class="property">ago</span>,</span><br><span class="line">    formats.<span class="property">dayText</span>,</span><br><span class="line">    formats.<span class="property">relativeTextWeek</span>,</span><br><span class="line">    formats.<span class="property">relativeText</span>,</span><br><span class="line">    formats.<span class="property">monthFullOrMonthAbbr</span>,</span><br><span class="line">    formats.<span class="property">tzCorrection</span>,</span><br><span class="line">    formats.<span class="property">tzAbbr</span>,</span><br><span class="line">    formats.<span class="property">dateShortWithTimeShort12</span>,</span><br><span class="line">    formats.<span class="property">dateShortWithTimeLong12</span>,</span><br><span class="line">    formats.<span class="property">dateShortWithTimeShort</span>,</span><br><span class="line">    formats.<span class="property">dateShortWithTimeLong</span>,</span><br><span class="line">    formats.<span class="property">relative</span>,</span><br><span class="line">    formats.<span class="property">whitespace</span>,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = <span class="title class_">Object</span>.<span class="title function_">create</span>(resultProto)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (str.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> longestMatch = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> finalRule = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = rules.<span class="property">length</span>; i &lt; l; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> format = rules[i]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> match = str.<span class="title function_">match</span>(format.<span class="property">regex</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (match) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!longestMatch || match[<span class="number">0</span>].<span class="property">length</span> &gt; longestMatch[<span class="number">0</span>].<span class="property">length</span>) &#123;</span><br><span class="line">          longestMatch = match</span><br><span class="line">          finalRule = format</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!finalRule || (finalRule.<span class="property">callback</span> &amp;&amp; finalRule.<span class="property">callback</span>.<span class="title function_">apply</span>(result, longestMatch) === <span class="literal">false</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    str = str.<span class="title function_">substr</span>(longestMatch[<span class="number">0</span>].<span class="property">length</span>)</span><br><span class="line">    finalRule = <span class="literal">null</span></span><br><span class="line">    longestMatch = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(result.<span class="title function_">toDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(now * <span class="number">1000</span>)) / <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      <div class="clearfix"></div>

      <h2>A community effort</h2>
      <p>
        Not unlike Wikipedia, Locutus is an ongoing community effort. Our philosophy follows
        <a target="_blank" rel="noopener" href="https://medium.com/what-i-learned-building/9216e1c9da7d">The McDonalds Theory</a>.
        This means that we assimilate first iterations with imperfections,
        hoping for others to take issue with-and improve them.

        This unorthodox approach has worked very well to foster fun and fruitful collaboration,
        but please be reminded to use our creations at your own risk.
        <code>THE SOFTWARE IS PROVIDED "AS IS"</code> has never been more true than for Locutus.
      </p>
      <p>
        Now go and:
        [
        <strong><a target="_blank" rel="noopener" href="https://github.com/locutusjs/locutus/blob/main/src/php/datetime/strtotime.js">View on GitHub</a></strong>
        |
        <strong><a target="_blank" rel="noopener" href="https://github.com/locutusjs/locutus/edit/main/src/php/datetime/strtotime.js">Edit on GitHub</a></strong>
        |
        <strong><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/locutusjs/locutus/main/src/php/datetime/strtotime.js">View Raw</a></strong>
        ]
      </p>


      <hr />
      

      <p>
        <a href="/php/datetime/">&laquo; More PHP datetime functions</a>
      </p>

      <center>
        <br>
        <a class="github-button" target="_blank" rel="noopener" href="https://github.com/locutusjs/locutus" data-size="large" data-show-count="true" aria-label="Star locutusjs/locutus on GitHub">Star</a>
        <br>
        <br>
      </center>
    </div>
  </div>
</article>
</section>
            
                <aside id="sidebar">
   
        

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/locutus-alpha.png" />
            <h2 id="name">Locutus</h2>
            <h3 id="title">All your standard libraries will be assimilated into our JavaScript collective. Resistance is futile.</h3>
            <!-- <span id="location"><i class="fa fa-map-marker"></i>GitHub</span> -->
            <!-- <a id="follow" target="_blank" href="https://github.com/locutusjs/locutus/stargazers">FOLLOW</a> -->

            <br />
            <div class="Social">
              <a target="_blank" rel="noopener" href="https://twitter.com/locutus_io" class="twitter-follow-button" data-show-count="true" data-dnt="true">Follow @locutus_io</a><br />
              <br />
              <a class="github-button" target="_blank" rel="noopener" href="https://github.com/locutusjs/locutus" data-size="large" data-show-count="true" aria-label="Star locutusjs/locutus on GitHub">Star</a>
            </div>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
              5
              <span>languages marked</span>
            </div>
            <div class="article-info-block">
                416
                <span>functions assimilated</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    <td><a href="https://github.com/locutusjs/locutus" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
                    
                    <td><a href="https://twitter.com/locutus_io" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
                    
                    <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

<div class="clear"></div>

    
        <div class="widget-wrap widget-list">
  <h3 class="widget-title">on the githubs</h3>
  <div class="widget widget-on_the_githubs">
    <div class="on-the-githubs" data-event-source="repos/locutusjs/locutus">Loading...</div>
  </div>
</div>

    
        <div class="widget-wrap widget-list">
    <h3 class="widget-title">all functions</h3>
    <div class="widget">
      <ul>
      
        <li><a href="/c/">
          C
          (18)
        </a></li>
        
        <ul>
          <li><a href="/c/ctype/">
            ctype
            (8)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/c/math/">
            math
            (2)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/c/stdio/">
            stdio
            (1)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/c/stdlib/">
            stdlib
            (2)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/c/string/">
            string
            (5)
          </a></li>
        </ul>
        
      
        <li><a href="/golang/">
          Go
          (20)
        </a></li>
        
        <ul>
          <li><a href="/golang/strconv/">
            strconv
            (6)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/golang/strings/">
            strings
            (14)
          </a></li>
        </ul>
        
      
        <li><a href="/python/">
          Python
          (25)
        </a></li>
        
        <ul>
          <li><a href="/python/math/">
            math
            (15)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/python/string/">
            string
            (10)
          </a></li>
        </ul>
        
      
        <li><a href="/ruby/">
          Ruby
          (32)
        </a></li>
        
        <ul>
          <li><a href="/ruby/Array/">
            Array
            (6)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/ruby/Math/">
            Math
            (15)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/ruby/String/">
            String
            (11)
          </a></li>
        </ul>
        
      
        <li><a href="/php/">
          PHP
          (321)
        </a></li>
        
        <ul>
          <li><a href="/php/array/">
            array
            (73)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/bc/">
            bc
            (7)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/ctype/">
            ctype
            (11)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/datetime/">
            datetime
            (15)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/exec/">
            exec
            (1)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/filesystem/">
            filesystem
            (6)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/funchand/">
            funchand
            (5)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/i18n/">
            i18n
            (2)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/info/">
            info
            (6)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/json/">
            json
            (3)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/math/">
            math
            (46)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/misc/">
            misc
            (2)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/net-gopher/">
            net-gopher
            (1)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/network/">
            network
            (6)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/pcre/">
            pcre
            (4)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/strings/">
            strings
            (91)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/url/">
            url
            (8)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/var/">
            var
            (30)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/xdiff/">
            xdiff
            (2)
          </a></li>
        </ul>
        
        <ul>
          <li><a href="/php/xml/">
            xml
            (2)
          </a></li>
        </ul>
        
      
      </ul>
    </div>
</div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent posts</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2024/04/24-update/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/bunnies.webp)" alt="Easter Update" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/04/24-update/" class="title">Easter Update</a></p>
                            <p class="item-date"><time datetime="2024-04-05T00:00:00.000Z" itemprop="datePublished">2024-04-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/announcing-locutus/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/locutus-alpha.png)" alt="php.js is Dead - Long Live Locutus" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/05/announcing-locutus/" class="title">php.js is Dead - Long Live Locutus</a></p>
                            <p class="item-date"><time datetime="2016-05-02T00:00:00.000Z" itemprop="datePublished">2016-05-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/04/breaking-bc/" class="thumbnail">
    
    
        <span style="background-image:url(https://imgc.allpostersimages.com/images/P-488-488-90/55/5543/C6HLG00Z/posters/warning-zombies-ahead.jpg)" alt="Breaking Backwards Compatibility" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/04/breaking-bc/" class="title">Breaking Backwards Compatibility</a></p>
                            <p class="item-date"><time datetime="2016-04-20T00:00:00.000Z" itemprop="datePublished">2016-04-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2007-2026 Kevin van Zonneveld and <a href="/authors">authors</a>.<br>
            Arwork by <a target="_blank" rel="noopener" href="https://troydodd.deviantart.com/art/Locutus-of-Borg-217586598">Troy Dodd</a>.

        </div>
    </div>
</footer>

        

    
        
<script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>

    


<!-- Custom Scripts -->

<script src="/js/main.js"></script>


<script src="/js/locutus.js"></script>


<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- Twitter follow button script -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    </div>
</body>
</html>